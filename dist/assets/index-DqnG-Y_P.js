(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function AA(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var jp={exports:{}},lu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WE;function qb(){if(WE)return lu;WE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,s,a){var u=null;if(a!==void 0&&(u=""+a),s.key!==void 0&&(u=""+s.key),"key"in s){a={};for(var f in s)f!=="key"&&(a[f]=s[f])}else a=s;return s=a.ref,{$$typeof:n,type:i,key:u,ref:s!==void 0?s:null,props:a}}return lu.Fragment=e,lu.jsx=t,lu.jsxs=t,lu}var XE;function Bb(){return XE||(XE=1,jp.exports=qb()),jp.exports}var w=Bb(),em={exports:{}},Re={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZE;function Hb(){if(ZE)return Re;ZE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),T=Symbol.iterator;function I(q){return q===null||typeof q!="object"?null:(q=T&&q[T]||q["@@iterator"],typeof q=="function"?q:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,P={};function G(q,se,fe){this.props=q,this.context=se,this.refs=P,this.updater=fe||x}G.prototype.isReactComponent={},G.prototype.setState=function(q,se){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,se,"setState")},G.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function Q(){}Q.prototype=G.prototype;function z(q,se,fe){this.props=q,this.context=se,this.refs=P,this.updater=fe||x}var ae=z.prototype=new Q;ae.constructor=z,U(ae,G.prototype),ae.isPureReactComponent=!0;var Z=Array.isArray;function ue(){}var D={H:null,A:null,T:null,S:null},M=Object.prototype.hasOwnProperty;function N(q,se,fe){var me=fe.ref;return{$$typeof:n,type:q,key:se,ref:me!==void 0?me:null,props:fe}}function k(q,se){return N(q.type,se,q.props)}function O(q){return typeof q=="object"&&q!==null&&q.$$typeof===n}function B(q){var se={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(fe){return se[fe]})}var V=/\/+/g;function Me(q,se){return typeof q=="object"&&q!==null&&q.key!=null?B(""+q.key):se.toString(36)}function ot(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(ue,ue):(q.status="pending",q.then(function(se){q.status==="pending"&&(q.status="fulfilled",q.value=se)},function(se){q.status==="pending"&&(q.status="rejected",q.reason=se)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function ee(q,se,fe,me,Ce){var De=typeof q;(De==="undefined"||De==="boolean")&&(q=null);var Ge=!1;if(q===null)Ge=!0;else switch(De){case"bigint":case"string":case"number":Ge=!0;break;case"object":switch(q.$$typeof){case n:case e:Ge=!0;break;case _:return Ge=q._init,ee(Ge(q._payload),se,fe,me,Ce)}}if(Ge)return Ce=Ce(q),Ge=me===""?"."+Me(q,0):me,Z(Ce)?(fe="",Ge!=null&&(fe=Ge.replace(V,"$&/")+"/"),ee(Ce,se,fe,"",function(Vs){return Vs})):Ce!=null&&(O(Ce)&&(Ce=k(Ce,fe+(Ce.key==null||q&&q.key===Ce.key?"":(""+Ce.key).replace(V,"$&/")+"/")+Ge)),se.push(Ce)),1;Ge=0;var Lt=me===""?".":me+":";if(Z(q))for(var ft=0;ft<q.length;ft++)me=q[ft],De=Lt+Me(me,ft),Ge+=ee(me,se,fe,De,Ce);else if(ft=I(q),typeof ft=="function")for(q=ft.call(q),ft=0;!(me=q.next()).done;)me=me.value,De=Lt+Me(me,ft++),Ge+=ee(me,se,fe,De,Ce);else if(De==="object"){if(typeof q.then=="function")return ee(ot(q),se,fe,me,Ce);throw se=String(q),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return Ge}function ce(q,se,fe){if(q==null)return q;var me=[],Ce=0;return ee(q,me,"","",function(De){return se.call(fe,De,Ce++)}),me}function ye(q){if(q._status===-1){var se=q._result;se=se(),se.then(function(fe){(q._status===0||q._status===-1)&&(q._status=1,q._result=fe)},function(fe){(q._status===0||q._status===-1)&&(q._status=2,q._result=fe)}),q._status===-1&&(q._status=0,q._result=se)}if(q._status===1)return q._result.default;throw q._result}var Ve=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)},Xe={map:ce,forEach:function(q,se,fe){ce(q,function(){se.apply(this,arguments)},fe)},count:function(q){var se=0;return ce(q,function(){se++}),se},toArray:function(q){return ce(q,function(se){return se})||[]},only:function(q){if(!O(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return Re.Activity=E,Re.Children=Xe,Re.Component=G,Re.Fragment=t,Re.Profiler=s,Re.PureComponent=z,Re.StrictMode=i,Re.Suspense=h,Re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Re.__COMPILER_RUNTIME={__proto__:null,c:function(q){return D.H.useMemoCache(q)}},Re.cache=function(q){return function(){return q.apply(null,arguments)}},Re.cacheSignal=function(){return null},Re.cloneElement=function(q,se,fe){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var me=U({},q.props),Ce=q.key;if(se!=null)for(De in se.key!==void 0&&(Ce=""+se.key),se)!M.call(se,De)||De==="key"||De==="__self"||De==="__source"||De==="ref"&&se.ref===void 0||(me[De]=se[De]);var De=arguments.length-2;if(De===1)me.children=fe;else if(1<De){for(var Ge=Array(De),Lt=0;Lt<De;Lt++)Ge[Lt]=arguments[Lt+2];me.children=Ge}return N(q.type,Ce,me)},Re.createContext=function(q){return q={$$typeof:u,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:a,_context:q},q},Re.createElement=function(q,se,fe){var me,Ce={},De=null;if(se!=null)for(me in se.key!==void 0&&(De=""+se.key),se)M.call(se,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(Ce[me]=se[me]);var Ge=arguments.length-2;if(Ge===1)Ce.children=fe;else if(1<Ge){for(var Lt=Array(Ge),ft=0;ft<Ge;ft++)Lt[ft]=arguments[ft+2];Ce.children=Lt}if(q&&q.defaultProps)for(me in Ge=q.defaultProps,Ge)Ce[me]===void 0&&(Ce[me]=Ge[me]);return N(q,De,Ce)},Re.createRef=function(){return{current:null}},Re.forwardRef=function(q){return{$$typeof:f,render:q}},Re.isValidElement=O,Re.lazy=function(q){return{$$typeof:_,_payload:{_status:-1,_result:q},_init:ye}},Re.memo=function(q,se){return{$$typeof:p,type:q,compare:se===void 0?null:se}},Re.startTransition=function(q){var se=D.T,fe={};D.T=fe;try{var me=q(),Ce=D.S;Ce!==null&&Ce(fe,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(ue,Ve)}catch(De){Ve(De)}finally{se!==null&&fe.types!==null&&(se.types=fe.types),D.T=se}},Re.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Re.use=function(q){return D.H.use(q)},Re.useActionState=function(q,se,fe){return D.H.useActionState(q,se,fe)},Re.useCallback=function(q,se){return D.H.useCallback(q,se)},Re.useContext=function(q){return D.H.useContext(q)},Re.useDebugValue=function(){},Re.useDeferredValue=function(q,se){return D.H.useDeferredValue(q,se)},Re.useEffect=function(q,se){return D.H.useEffect(q,se)},Re.useEffectEvent=function(q){return D.H.useEffectEvent(q)},Re.useId=function(){return D.H.useId()},Re.useImperativeHandle=function(q,se,fe){return D.H.useImperativeHandle(q,se,fe)},Re.useInsertionEffect=function(q,se){return D.H.useInsertionEffect(q,se)},Re.useLayoutEffect=function(q,se){return D.H.useLayoutEffect(q,se)},Re.useMemo=function(q,se){return D.H.useMemo(q,se)},Re.useOptimistic=function(q,se){return D.H.useOptimistic(q,se)},Re.useReducer=function(q,se,fe){return D.H.useReducer(q,se,fe)},Re.useRef=function(q){return D.H.useRef(q)},Re.useState=function(q){return D.H.useState(q)},Re.useSyncExternalStore=function(q,se,fe){return D.H.useSyncExternalStore(q,se,fe)},Re.useTransition=function(){return D.H.useTransition()},Re.version="19.2.4",Re}var jE;function hg(){return jE||(jE=1,em.exports=Hb()),em.exports}var W=hg();const Gb=AA(W);var tm={exports:{}},uu={},nm={exports:{}},im={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eT;function zb(){return eT||(eT=1,(function(n){function e(ee,ce){var ye=ee.length;ee.push(ce);e:for(;0<ye;){var Ve=ye-1>>>1,Xe=ee[Ve];if(0<s(Xe,ce))ee[Ve]=ce,ee[ye]=Xe,ye=Ve;else break e}}function t(ee){return ee.length===0?null:ee[0]}function i(ee){if(ee.length===0)return null;var ce=ee[0],ye=ee.pop();if(ye!==ce){ee[0]=ye;e:for(var Ve=0,Xe=ee.length,q=Xe>>>1;Ve<q;){var se=2*(Ve+1)-1,fe=ee[se],me=se+1,Ce=ee[me];if(0>s(fe,ye))me<Xe&&0>s(Ce,fe)?(ee[Ve]=Ce,ee[me]=ye,Ve=me):(ee[Ve]=fe,ee[se]=ye,Ve=se);else if(me<Xe&&0>s(Ce,ye))ee[Ve]=Ce,ee[me]=ye,Ve=me;else break e}}return ce}function s(ee,ce){var ye=ee.sortIndex-ce.sortIndex;return ye!==0?ye:ee.id-ce.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,f=u.now();n.unstable_now=function(){return u.now()-f}}var h=[],p=[],_=1,E=null,T=3,I=!1,x=!1,U=!1,P=!1,G=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function ae(ee){for(var ce=t(p);ce!==null;){if(ce.callback===null)i(p);else if(ce.startTime<=ee)i(p),ce.sortIndex=ce.expirationTime,e(h,ce);else break;ce=t(p)}}function Z(ee){if(U=!1,ae(ee),!x)if(t(h)!==null)x=!0,ue||(ue=!0,B());else{var ce=t(p);ce!==null&&ot(Z,ce.startTime-ee)}}var ue=!1,D=-1,M=5,N=-1;function k(){return P?!0:!(n.unstable_now()-N<M)}function O(){if(P=!1,ue){var ee=n.unstable_now();N=ee;var ce=!0;try{e:{x=!1,U&&(U=!1,Q(D),D=-1),I=!0;var ye=T;try{t:{for(ae(ee),E=t(h);E!==null&&!(E.expirationTime>ee&&k());){var Ve=E.callback;if(typeof Ve=="function"){E.callback=null,T=E.priorityLevel;var Xe=Ve(E.expirationTime<=ee);if(ee=n.unstable_now(),typeof Xe=="function"){E.callback=Xe,ae(ee),ce=!0;break t}E===t(h)&&i(h),ae(ee)}else i(h);E=t(h)}if(E!==null)ce=!0;else{var q=t(p);q!==null&&ot(Z,q.startTime-ee),ce=!1}}break e}finally{E=null,T=ye,I=!1}ce=void 0}}finally{ce?B():ue=!1}}}var B;if(typeof z=="function")B=function(){z(O)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,Me=V.port2;V.port1.onmessage=O,B=function(){Me.postMessage(null)}}else B=function(){G(O,0)};function ot(ee,ce){D=G(function(){ee(n.unstable_now())},ce)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ee){ee.callback=null},n.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<ee?Math.floor(1e3/ee):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(ee){switch(T){case 1:case 2:case 3:var ce=3;break;default:ce=T}var ye=T;T=ce;try{return ee()}finally{T=ye}},n.unstable_requestPaint=function(){P=!0},n.unstable_runWithPriority=function(ee,ce){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var ye=T;T=ee;try{return ce()}finally{T=ye}},n.unstable_scheduleCallback=function(ee,ce,ye){var Ve=n.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?Ve+ye:Ve):ye=Ve,ee){case 1:var Xe=-1;break;case 2:Xe=250;break;case 5:Xe=1073741823;break;case 4:Xe=1e4;break;default:Xe=5e3}return Xe=ye+Xe,ee={id:_++,callback:ce,priorityLevel:ee,startTime:ye,expirationTime:Xe,sortIndex:-1},ye>Ve?(ee.sortIndex=ye,e(p,ee),t(h)===null&&ee===t(p)&&(U?(Q(D),D=-1):U=!0,ot(Z,ye-Ve))):(ee.sortIndex=Xe,e(h,ee),x||I||(x=!0,ue||(ue=!0,B()))),ee},n.unstable_shouldYield=k,n.unstable_wrapCallback=function(ee){var ce=T;return function(){var ye=T;T=ce;try{return ee.apply(this,arguments)}finally{T=ye}}}})(im)),im}var tT;function Jb(){return tT||(tT=1,nm.exports=zb()),nm.exports}var rm={exports:{}},tn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nT;function Kb(){if(nT)return tn;nT=1;var n=hg();function e(h){var p="https://react.dev/errors/"+h;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)p+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(h,p,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:E==null?null:""+E,children:h,containerInfo:p,implementation:_}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(h,p){if(h==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return tn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,tn.createPortal=function(h,p){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return a(h,p,null,_)},tn.flushSync=function(h){var p=u.T,_=i.p;try{if(u.T=null,i.p=2,h)return h()}finally{u.T=p,i.p=_,i.d.f()}},tn.preconnect=function(h,p){typeof h=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(h,p))},tn.prefetchDNS=function(h){typeof h=="string"&&i.d.D(h)},tn.preinit=function(h,p){if(typeof h=="string"&&p&&typeof p.as=="string"){var _=p.as,E=f(_,p.crossOrigin),T=typeof p.integrity=="string"?p.integrity:void 0,I=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;_==="style"?i.d.S(h,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:E,integrity:T,fetchPriority:I}):_==="script"&&i.d.X(h,{crossOrigin:E,integrity:T,fetchPriority:I,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},tn.preinitModule=function(h,p){if(typeof h=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var _=f(p.as,p.crossOrigin);i.d.M(h,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(h)},tn.preload=function(h,p){if(typeof h=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var _=p.as,E=f(_,p.crossOrigin);i.d.L(h,_,{crossOrigin:E,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},tn.preloadModule=function(h,p){if(typeof h=="string")if(p){var _=f(p.as,p.crossOrigin);i.d.m(h,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(h)},tn.requestFormReset=function(h){i.d.r(h)},tn.unstable_batchedUpdates=function(h,p){return h(p)},tn.useFormState=function(h,p,_){return u.H.useFormState(h,p,_)},tn.useFormStatus=function(){return u.H.useHostTransitionStatus()},tn.version="19.2.4",tn}var iT;function Yb(){if(iT)return rm.exports;iT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),rm.exports=Kb(),rm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rT;function $b(){if(rT)return uu;rT=1;var n=Jb(),e=hg(),t=Yb();function i(r){var o="https://react.dev/errors/"+r;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)o+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function a(r){var o=r,l=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(l=o.return),r=o.return;while(r)}return o.tag===3?l:null}function u(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function f(r){if(r.tag===31){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function h(r){if(a(r)!==r)throw Error(i(188))}function p(r){var o=r.alternate;if(!o){if(o=a(r),o===null)throw Error(i(188));return o!==r?null:r}for(var l=r,c=o;;){var y=l.return;if(y===null)break;var v=y.alternate;if(v===null){if(c=y.return,c!==null){l=c;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===l)return h(y),r;if(v===c)return h(y),o;v=v.sibling}throw Error(i(188))}if(l.return!==c.return)l=y,c=v;else{for(var A=!1,R=y.child;R;){if(R===l){A=!0,l=y,c=v;break}if(R===c){A=!0,c=y,l=v;break}R=R.sibling}if(!A){for(R=v.child;R;){if(R===l){A=!0,l=v,c=y;break}if(R===c){A=!0,c=v,l=y;break}R=R.sibling}if(!A)throw Error(i(189))}}if(l.alternate!==c)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?r:o}function _(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r;for(r=r.child;r!==null;){if(o=_(r),o!==null)return o;r=r.sibling}return null}var E=Object.assign,T=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),Q=Symbol.for("react.consumer"),z=Symbol.for("react.context"),ae=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function B(r){return r===null||typeof r!="object"?null:(r=O&&r[O]||r["@@iterator"],typeof r=="function"?r:null)}var V=Symbol.for("react.client.reference");function Me(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===V?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case U:return"Fragment";case G:return"Profiler";case P:return"StrictMode";case Z:return"Suspense";case ue:return"SuspenseList";case N:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case x:return"Portal";case z:return r.displayName||"Context";case Q:return(r._context.displayName||"Context")+".Consumer";case ae:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case D:return o=r.displayName||null,o!==null?o:Me(r.type)||"Memo";case M:o=r._payload,r=r._init;try{return Me(r(o))}catch{}}return null}var ot=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},Ve=[],Xe=-1;function q(r){return{current:r}}function se(r){0>Xe||(r.current=Ve[Xe],Ve[Xe]=null,Xe--)}function fe(r,o){Xe++,Ve[Xe]=r.current,r.current=o}var me=q(null),Ce=q(null),De=q(null),Ge=q(null);function Lt(r,o){switch(fe(De,o),fe(Ce,r),fe(me,null),o.nodeType){case 9:case 11:r=(r=o.documentElement)&&(r=r.namespaceURI)?vE(r):0;break;default:if(r=o.tagName,o=o.namespaceURI)o=vE(o),r=EE(o,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}se(me),fe(me,r)}function ft(){se(me),se(Ce),se(De)}function Vs(r){r.memoizedState!==null&&fe(Ge,r);var o=me.current,l=EE(o,r.type);o!==l&&(fe(Ce,r),fe(me,l))}function bo(r){Ce.current===r&&(se(me),se(Ce)),Ge.current===r&&(se(Ge),ru._currentValue=ye)}var No,xo;function Ti(r){if(No===void 0)try{throw Error()}catch(l){var o=l.stack.trim().match(/\n( *(at )?)/);No=o&&o[1]||"",xo=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+No+r+xo}var rl=!1;function Us(r,o){if(!r||rl)return"";rl=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(o){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(j){var $=j}Reflect.construct(r,[],ie)}else{try{ie.call()}catch(j){$=j}r.call(ie.prototype)}}else{try{throw Error()}catch(j){$=j}(ie=r())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(j){if(j&&$&&typeof j.stack=="string")return[j.stack,$.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=c.DetermineComponentFrameRoot(),A=v[0],R=v[1];if(A&&R){var L=A.split(`
`),Y=R.split(`
`);for(y=c=0;c<L.length&&!L[c].includes("DetermineComponentFrameRoot");)c++;for(;y<Y.length&&!Y[y].includes("DetermineComponentFrameRoot");)y++;if(c===L.length||y===Y.length)for(c=L.length-1,y=Y.length-1;1<=c&&0<=y&&L[c]!==Y[y];)y--;for(;1<=c&&0<=y;c--,y--)if(L[c]!==Y[y]){if(c!==1||y!==1)do if(c--,y--,0>y||L[c]!==Y[y]){var te=`
`+L[c].replace(" at new "," at ");return r.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",r.displayName)),te}while(1<=c&&0<=y);break}}}finally{rl=!1,Error.prepareStackTrace=l}return(l=r?r.displayName||r.name:"")?Ti(l):""}function sl(r,o){switch(r.tag){case 26:case 27:case 5:return Ti(r.type);case 16:return Ti("Lazy");case 13:return r.child!==o&&o!==null?Ti("Suspense Fallback"):Ti("Suspense");case 19:return Ti("SuspenseList");case 0:case 15:return Us(r.type,!1);case 11:return Us(r.type.render,!1);case 1:return Us(r.type,!0);case 31:return Ti("Activity");default:return""}}function ol(r){try{var o="",l=null;do o+=sl(r,l),l=r,r=r.return;while(r);return o}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var At=Object.prototype.hasOwnProperty,kt=n.unstable_scheduleCallback,xr=n.unstable_cancelCallback,th=n.unstable_shouldYield,ec=n.unstable_requestPaint,un=n.unstable_now,Ls=n.unstable_getCurrentPriorityLevel,al=n.unstable_ImmediatePriority,ll=n.unstable_UserBlockingPriority,Mr=n.unstable_NormalPriority,nh=n.unstable_LowPriority,tc=n.unstable_IdlePriority,nc=n.log,ic=n.unstable_setDisableYieldValue,jn=null,Kt=null;function Vn(r){if(typeof nc=="function"&&ic(r),Kt&&typeof Kt.setStrictMode=="function")try{Kt.setStrictMode(jn,r)}catch{}}var _t=Math.clz32?Math.clz32:sc,rc=Math.log,Mo=Math.LN2;function sc(r){return r>>>=0,r===0?32:31-(rc(r)/Mo|0)|0}var Si=256,ks=262144,Ct=4194304;function Ai(r){var o=r&42;if(o!==0)return o;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function Ci(r,o,l){var c=r.pendingLanes;if(c===0)return 0;var y=0,v=r.suspendedLanes,A=r.pingedLanes;r=r.warmLanes;var R=c&134217727;return R!==0?(c=R&~v,c!==0?y=Ai(c):(A&=R,A!==0?y=Ai(A):l||(l=R&~r,l!==0&&(y=Ai(l))))):(R=c&~v,R!==0?y=Ai(R):A!==0?y=Ai(A):l||(l=c&~r,l!==0&&(y=Ai(l)))),y===0?0:o!==0&&o!==y&&(o&v)===0&&(v=y&-y,l=o&-o,v>=l||v===32&&(l&4194048)!==0)?o:y}function ei(r,o){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&o)===0}function ih(r,o){switch(r){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oc(){var r=Ct;return Ct<<=1,(Ct&62914560)===0&&(Ct=4194304),r}function Ii(r){for(var o=[],l=0;31>l;l++)o.push(r);return o}function Os(r,o){r.pendingLanes|=o,o!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function rh(r,o,l,c,y,v){var A=r.pendingLanes;r.pendingLanes=l,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=l,r.entangledLanes&=l,r.errorRecoveryDisabledLanes&=l,r.shellSuspendCounter=0;var R=r.entanglements,L=r.expirationTimes,Y=r.hiddenUpdates;for(l=A&~l;0<l;){var te=31-_t(l),ie=1<<te;R[te]=0,L[te]=-1;var $=Y[te];if($!==null)for(Y[te]=null,te=0;te<$.length;te++){var j=$[te];j!==null&&(j.lane&=-536870913)}l&=~ie}c!==0&&Fs(r,c,0),v!==0&&y===0&&r.tag!==0&&(r.suspendedLanes|=v&~(A&~o))}function Fs(r,o,l){r.pendingLanes|=o,r.suspendedLanes&=~o;var c=31-_t(o);r.entangledLanes|=o,r.entanglements[c]=r.entanglements[c]|1073741824|l&261930}function ul(r,o){var l=r.entangledLanes|=o;for(r=r.entanglements;l;){var c=31-_t(l),y=1<<c;y&o|r[c]&o&&(r[c]|=o),l&=~y}}function cl(r,o){var l=o&-o;return l=(l&42)!==0?1:qs(l),(l&(r.suspendedLanes|o))!==0?0:l}function qs(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function ji(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function ac(){var r=ce.p;return r!==0?r:(r=window.event,r===void 0?32:GE(r.type))}function ti(r,o){var l=ce.p;try{return ce.p=r,o()}finally{ce.p=l}}var ni=Math.random().toString(36).slice(2),It="__reactFiber$"+ni,Bt="__reactProps$"+ni,wi="__reactContainer$"+ni,Do="__reactEvents$"+ni,sh="__reactListeners$"+ni,lc="__reactHandles$"+ni,uc="__reactResources$"+ni,Ri="__reactMarker$"+ni;function Po(r){delete r[It],delete r[Bt],delete r[Do],delete r[sh],delete r[lc]}function bi(r){var o=r[It];if(o)return o;for(var l=r.parentNode;l;){if(o=l[wi]||l[It]){if(l=o.alternate,o.child!==null||l!==null&&l.child!==null)for(r=RE(r);r!==null;){if(l=r[It])return l;r=RE(r)}return o}r=l,l=r.parentNode}return null}function Un(r){if(r=r[It]||r[wi]){var o=r.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return r}return null}function An(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r.stateNode;throw Error(i(33))}function Ni(r){var o=r[uc];return o||(o=r[uc]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function wt(r){r[Ri]=!0}var fl=new Set,dl={};function xi(r,o){Mi(r,o),Mi(r+"Capture",o)}function Mi(r,o){for(dl[r]=o,r=0;r<o.length;r++)fl.add(o[r])}var hl=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),pl={},ml={};function cc(r){return At.call(ml,r)?!0:At.call(pl,r)?!1:hl.test(r)?ml[r]=!0:(pl[r]=!0,!1)}function Vo(r,o,l){if(cc(o))if(l===null)r.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":r.removeAttribute(o);return;case"boolean":var c=o.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){r.removeAttribute(o);return}}r.setAttribute(o,""+l)}}function Cn(r,o,l){if(l===null)r.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttribute(o,""+l)}}function Rt(r,o,l,c){if(c===null)r.removeAttribute(l);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(l);return}r.setAttributeNS(o,l,""+c)}}function Ht(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Dr(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function gl(r,o,l){var c=Object.getOwnPropertyDescriptor(r.constructor.prototype,o);if(!r.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,v=c.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return y.call(this)},set:function(A){l=""+A,v.call(this,A)}}),Object.defineProperty(r,o,{enumerable:c.enumerable}),{getValue:function(){return l},setValue:function(A){l=""+A},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function Ze(r){if(!r._valueTracker){var o=Dr(r)?"checked":"value";r._valueTracker=gl(r,o,""+r[o])}}function Bs(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var l=o.getValue(),c="";return r&&(c=Dr(r)?r.checked?"true":"false":r.value),r=c,r!==l?(o.setValue(r),!0):!1}function Di(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Hs=/[\n"\\]/g;function pn(r){return r.replace(Hs,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Uo(r,o,l,c,y,v,A,R){r.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?r.type=A:r.removeAttribute("type"),o!=null?A==="number"?(o===0&&r.value===""||r.value!=o)&&(r.value=""+Ht(o)):r.value!==""+Ht(o)&&(r.value=""+Ht(o)):A!=="submit"&&A!=="reset"||r.removeAttribute("value"),o!=null?yl(r,A,Ht(o)):l!=null?yl(r,A,Ht(l)):c!=null&&r.removeAttribute("value"),y==null&&v!=null&&(r.defaultChecked=!!v),y!=null&&(r.checked=y&&typeof y!="function"&&typeof y!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?r.name=""+Ht(R):r.removeAttribute("name")}function fc(r,o,l,c,y,v,A,R){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(r.type=v),o!=null||l!=null){if(!(v!=="submit"&&v!=="reset"||o!=null)){Ze(r);return}l=l!=null?""+Ht(l):"",o=o!=null?""+Ht(o):l,R||o===r.value||(r.value=o),r.defaultValue=o}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,r.checked=R?r.checked:!!c,r.defaultChecked=!!c,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(r.name=A),Ze(r)}function yl(r,o,l){o==="number"&&Di(r.ownerDocument)===r||r.defaultValue===""+l||(r.defaultValue=""+l)}function Pr(r,o,l,c){if(r=r.options,o){o={};for(var y=0;y<l.length;y++)o["$"+l[y]]=!0;for(l=0;l<r.length;l++)y=o.hasOwnProperty("$"+r[l].value),r[l].selected!==y&&(r[l].selected=y),y&&c&&(r[l].defaultSelected=!0)}else{for(l=""+Ht(l),o=null,y=0;y<r.length;y++){if(r[y].value===l){r[y].selected=!0,c&&(r[y].defaultSelected=!0);return}o!==null||r[y].disabled||(o=r[y])}o!==null&&(o.selected=!0)}}function dc(r,o,l){if(o!=null&&(o=""+Ht(o),o!==r.value&&(r.value=o),l==null)){r.defaultValue!==o&&(r.defaultValue=o);return}r.defaultValue=l!=null?""+Ht(l):""}function Vr(r,o,l,c){if(o==null){if(c!=null){if(l!=null)throw Error(i(92));if(ot(c)){if(1<c.length)throw Error(i(93));c=c[0]}l=c}l==null&&(l=""),o=l}l=Ht(o),r.defaultValue=l,c=r.textContent,c===l&&c!==""&&c!==null&&(r.value=c),Ze(r)}function mn(r,o){if(o){var l=r.firstChild;if(l&&l===r.lastChild&&l.nodeType===3){l.nodeValue=o;return}}r.textContent=o}var hc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _l(r,o,l){var c=o.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?c?r.setProperty(o,""):o==="float"?r.cssFloat="":r[o]="":c?r.setProperty(o,l):typeof l!="number"||l===0||hc.has(o)?o==="float"?r.cssFloat=l:r[o]=(""+l).trim():r[o]=l+"px"}function vl(r,o,l){if(o!=null&&typeof o!="object")throw Error(i(62));if(r=r.style,l!=null){for(var c in l)!l.hasOwnProperty(c)||o!=null&&o.hasOwnProperty(c)||(c.indexOf("--")===0?r.setProperty(c,""):c==="float"?r.cssFloat="":r[c]="");for(var y in o)c=o[y],o.hasOwnProperty(y)&&l[y]!==c&&_l(r,y,c)}else for(var v in o)o.hasOwnProperty(v)&&_l(r,v,o[v])}function Lo(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ur=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ko(r){return Ur.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function ii(){}var El=null;function Ln(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Lr=null,Pi=null;function Gs(r){var o=Un(r);if(o&&(r=o.stateNode)){var l=r[Bt]||null;e:switch(r=o.stateNode,o.type){case"input":if(Uo(r,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),o=l.name,l.type==="radio"&&o!=null){for(l=r;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+pn(""+o)+'"][type="radio"]'),o=0;o<l.length;o++){var c=l[o];if(c!==r&&c.form===r.form){var y=c[Bt]||null;if(!y)throw Error(i(90));Uo(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(o=0;o<l.length;o++)c=l[o],c.form===r.form&&Bs(c)}break e;case"textarea":dc(r,l.value,l.defaultValue);break e;case"select":o=l.value,o!=null&&Pr(r,!!l.multiple,o,!1)}}}var Oo=!1;function kr(r,o,l){if(Oo)return r(o,l);Oo=!0;try{var c=r(o);return c}finally{if(Oo=!1,(Lr!==null||Pi!==null)&&(lf(),Lr&&(o=Lr,r=Pi,Pi=Lr=null,Gs(o),r)))for(o=0;o<r.length;o++)Gs(r[o])}}function ri(r,o){var l=r.stateNode;if(l===null)return null;var c=l[Bt]||null;if(c===null)return null;l=c[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(r=r.type,c=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!c;break e;default:r=!1}if(r)return null;if(l&&typeof l!="function")throw Error(i(231,o,typeof l));return l}var kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zs=!1;if(kn)try{var tt={};Object.defineProperty(tt,"passive",{get:function(){zs=!0}}),window.addEventListener("test",tt,tt),window.removeEventListener("test",tt,tt)}catch{zs=!1}var Vi=null,Tl=null,Js=null;function Sl(){if(Js)return Js;var r,o=Tl,l=o.length,c,y="value"in Vi?Vi.value:Vi.textContent,v=y.length;for(r=0;r<l&&o[r]===y[r];r++);var A=l-r;for(c=1;c<=A&&o[l-c]===y[v-c];c++);return Js=y.slice(r,1<c?1-c:void 0)}function Ks(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function er(){return!0}function si(){return!1}function Yt(r){function o(l,c,y,v,A){this._reactName=l,this._targetInst=y,this.type=c,this.nativeEvent=v,this.target=A,this.currentTarget=null;for(var R in r)r.hasOwnProperty(R)&&(l=r[R],this[R]=l?l(v):v[R]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?er:si,this.isPropagationStopped=si,this}return E(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=er)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=er)},persist:function(){},isPersistent:er}),o}var tr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ui=Yt(tr),Or=E({},tr,{view:0,detail:0}),Al=Yt(Or),Fr,Fo,Li,qo=E({},Or,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qr,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Li&&(Li&&r.type==="mousemove"?(Fr=r.screenX-Li.screenX,Fo=r.screenY-Li.screenY):Fo=Fr=0,Li=r),Fr)},movementY:function(r){return"movementY"in r?r.movementY:Fo}}),Cl=Yt(qo),Ys=E({},qo,{dataTransfer:0}),mc=Yt(Ys),gc=E({},Or,{relatedTarget:0}),$s=Yt(gc),Il=E({},tr,{animationName:0,elapsedTime:0,pseudoElement:0}),yc=Yt(Il),Bo=E({},tr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),_c=Yt(Bo),vc=E({},tr,{data:0}),ki=Yt(vc),Ec={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ac(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=Sc[r])?!!o[r]:!1}function qr(){return Ac}var cn=E({},Or,{key:function(r){if(r.key){var o=Ec[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=Ks(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Tc[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qr,charCode:function(r){return r.type==="keypress"?Ks(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Ks(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Cc=Yt(cn),Ic=E({},qo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nr=Yt(Ic),g=E({},Or,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qr}),S=Yt(g),C=E({},tr,{propertyName:0,elapsedTime:0,pseudoElement:0}),b=Yt(C),J=E({},qo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),X=Yt(J),le=E({},tr,{newState:0,oldState:0}),Ne=Yt(le),vt=[9,13,27,32],$e=kn&&"CompositionEvent"in window,dt=null;kn&&"documentMode"in document&&(dt=document.documentMode);var On=kn&&"TextEvent"in window&&!dt,Oi=kn&&(!$e||dt&&8<dt&&11>=dt),oi=" ",ai=!1;function Qs(r,o){switch(r){case"keyup":return vt.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ho(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Go=!1;function cR(r,o){switch(r){case"compositionend":return Ho(o);case"keypress":return o.which!==32?null:(ai=!0,oi);case"textInput":return r=o.data,r===oi&&ai?null:r;default:return null}}function fR(r,o){if(Go)return r==="compositionend"||!$e&&Qs(r,o)?(r=Sl(),Js=Tl=Vi=null,Go=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Oi&&o.locale!=="ko"?null:o.data;default:return null}}var dR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xy(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!dR[r.type]:o==="textarea"}function My(r,o,l,c){Lr?Pi?Pi.push(c):Pi=[c]:Lr=c,o=mf(o,"onChange"),0<o.length&&(l=new Ui("onChange","change",null,l,c),r.push({event:l,listeners:o}))}var wl=null,Rl=null;function hR(r){hE(r,0)}function wc(r){var o=An(r);if(Bs(o))return r}function Dy(r,o){if(r==="change")return o}var Py=!1;if(kn){var oh;if(kn){var ah="oninput"in document;if(!ah){var Vy=document.createElement("div");Vy.setAttribute("oninput","return;"),ah=typeof Vy.oninput=="function"}oh=ah}else oh=!1;Py=oh&&(!document.documentMode||9<document.documentMode)}function Uy(){wl&&(wl.detachEvent("onpropertychange",Ly),Rl=wl=null)}function Ly(r){if(r.propertyName==="value"&&wc(Rl)){var o=[];My(o,Rl,r,Ln(r)),kr(hR,o)}}function pR(r,o,l){r==="focusin"?(Uy(),wl=o,Rl=l,wl.attachEvent("onpropertychange",Ly)):r==="focusout"&&Uy()}function mR(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return wc(Rl)}function gR(r,o){if(r==="click")return wc(o)}function yR(r,o){if(r==="input"||r==="change")return wc(o)}function _R(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var In=typeof Object.is=="function"?Object.is:_R;function bl(r,o){if(In(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var l=Object.keys(r),c=Object.keys(o);if(l.length!==c.length)return!1;for(c=0;c<l.length;c++){var y=l[c];if(!At.call(o,y)||!In(r[y],o[y]))return!1}return!0}function ky(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Oy(r,o){var l=ky(r);r=0;for(var c;l;){if(l.nodeType===3){if(c=r+l.textContent.length,r<=o&&c>=o)return{node:l,offset:o-r};r=c}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=ky(l)}}function Fy(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?Fy(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function qy(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var o=Di(r.document);o instanceof r.HTMLIFrameElement;){try{var l=typeof o.contentWindow.location.href=="string"}catch{l=!1}if(l)r=o.contentWindow;else break;o=Di(r.document)}return o}function lh(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}var vR=kn&&"documentMode"in document&&11>=document.documentMode,zo=null,uh=null,Nl=null,ch=!1;function By(r,o,l){var c=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;ch||zo==null||zo!==Di(c)||(c=zo,"selectionStart"in c&&lh(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Nl&&bl(Nl,c)||(Nl=c,c=mf(uh,"onSelect"),0<c.length&&(o=new Ui("onSelect","select",null,o,l),r.push({event:o,listeners:c}),o.target=zo)))}function Ws(r,o){var l={};return l[r.toLowerCase()]=o.toLowerCase(),l["Webkit"+r]="webkit"+o,l["Moz"+r]="moz"+o,l}var Jo={animationend:Ws("Animation","AnimationEnd"),animationiteration:Ws("Animation","AnimationIteration"),animationstart:Ws("Animation","AnimationStart"),transitionrun:Ws("Transition","TransitionRun"),transitionstart:Ws("Transition","TransitionStart"),transitioncancel:Ws("Transition","TransitionCancel"),transitionend:Ws("Transition","TransitionEnd")},fh={},Hy={};kn&&(Hy=document.createElement("div").style,"AnimationEvent"in window||(delete Jo.animationend.animation,delete Jo.animationiteration.animation,delete Jo.animationstart.animation),"TransitionEvent"in window||delete Jo.transitionend.transition);function Xs(r){if(fh[r])return fh[r];if(!Jo[r])return r;var o=Jo[r],l;for(l in o)if(o.hasOwnProperty(l)&&l in Hy)return fh[r]=o[l];return r}var Gy=Xs("animationend"),zy=Xs("animationiteration"),Jy=Xs("animationstart"),ER=Xs("transitionrun"),TR=Xs("transitionstart"),SR=Xs("transitioncancel"),Ky=Xs("transitionend"),Yy=new Map,dh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");dh.push("scrollEnd");function li(r,o){Yy.set(r,o),xi(o,[r])}var Rc=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Fn=[],Ko=0,hh=0;function bc(){for(var r=Ko,o=hh=Ko=0;o<r;){var l=Fn[o];Fn[o++]=null;var c=Fn[o];Fn[o++]=null;var y=Fn[o];Fn[o++]=null;var v=Fn[o];if(Fn[o++]=null,c!==null&&y!==null){var A=c.pending;A===null?y.next=y:(y.next=A.next,A.next=y),c.pending=y}v!==0&&$y(l,y,v)}}function Nc(r,o,l,c){Fn[Ko++]=r,Fn[Ko++]=o,Fn[Ko++]=l,Fn[Ko++]=c,hh|=c,r.lanes|=c,r=r.alternate,r!==null&&(r.lanes|=c)}function ph(r,o,l,c){return Nc(r,o,l,c),xc(r)}function Zs(r,o){return Nc(r,null,null,o),xc(r)}function $y(r,o,l){r.lanes|=l;var c=r.alternate;c!==null&&(c.lanes|=l);for(var y=!1,v=r.return;v!==null;)v.childLanes|=l,c=v.alternate,c!==null&&(c.childLanes|=l),v.tag===22&&(r=v.stateNode,r===null||r._visibility&1||(y=!0)),r=v,v=v.return;return r.tag===3?(v=r.stateNode,y&&o!==null&&(y=31-_t(l),r=v.hiddenUpdates,c=r[y],c===null?r[y]=[o]:c.push(o),o.lane=l|536870912),v):null}function xc(r){if(50<Xl)throw Xl=0,Ap=null,Error(i(185));for(var o=r.return;o!==null;)r=o,o=r.return;return r.tag===3?r.stateNode:null}var Yo={};function AR(r,o,l,c){this.tag=r,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(r,o,l,c){return new AR(r,o,l,c)}function mh(r){return r=r.prototype,!(!r||!r.isReactComponent)}function ir(r,o){var l=r.alternate;return l===null?(l=wn(r.tag,o,r.key,r.mode),l.elementType=r.elementType,l.type=r.type,l.stateNode=r.stateNode,l.alternate=r,r.alternate=l):(l.pendingProps=o,l.type=r.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=r.flags&65011712,l.childLanes=r.childLanes,l.lanes=r.lanes,l.child=r.child,l.memoizedProps=r.memoizedProps,l.memoizedState=r.memoizedState,l.updateQueue=r.updateQueue,o=r.dependencies,l.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},l.sibling=r.sibling,l.index=r.index,l.ref=r.ref,l.refCleanup=r.refCleanup,l}function Qy(r,o){r.flags&=65011714;var l=r.alternate;return l===null?(r.childLanes=0,r.lanes=o,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=l.childLanes,r.lanes=l.lanes,r.child=l.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=l.memoizedProps,r.memoizedState=l.memoizedState,r.updateQueue=l.updateQueue,r.type=l.type,o=l.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),r}function Mc(r,o,l,c,y,v){var A=0;if(c=r,typeof r=="function")mh(r)&&(A=1);else if(typeof r=="string")A=bb(r,l,me.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case N:return r=wn(31,l,o,y),r.elementType=N,r.lanes=v,r;case U:return js(l.children,y,v,o);case P:A=8,y|=24;break;case G:return r=wn(12,l,o,y|2),r.elementType=G,r.lanes=v,r;case Z:return r=wn(13,l,o,y),r.elementType=Z,r.lanes=v,r;case ue:return r=wn(19,l,o,y),r.elementType=ue,r.lanes=v,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case z:A=10;break e;case Q:A=9;break e;case ae:A=11;break e;case D:A=14;break e;case M:A=16,c=null;break e}A=29,l=Error(i(130,r===null?"null":typeof r,"")),c=null}return o=wn(A,l,o,y),o.elementType=r,o.type=c,o.lanes=v,o}function js(r,o,l,c){return r=wn(7,r,c,o),r.lanes=l,r}function gh(r,o,l){return r=wn(6,r,null,o),r.lanes=l,r}function Wy(r){var o=wn(18,null,null,0);return o.stateNode=r,o}function yh(r,o,l){return o=wn(4,r.children!==null?r.children:[],r.key,o),o.lanes=l,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}var Xy=new WeakMap;function qn(r,o){if(typeof r=="object"&&r!==null){var l=Xy.get(r);return l!==void 0?l:(o={value:r,source:o,stack:ol(o)},Xy.set(r,o),o)}return{value:r,source:o,stack:ol(o)}}var $o=[],Qo=0,Dc=null,xl=0,Bn=[],Hn=0,Br=null,Fi=1,qi="";function rr(r,o){$o[Qo++]=xl,$o[Qo++]=Dc,Dc=r,xl=o}function Zy(r,o,l){Bn[Hn++]=Fi,Bn[Hn++]=qi,Bn[Hn++]=Br,Br=r;var c=Fi;r=qi;var y=32-_t(c)-1;c&=~(1<<y),l+=1;var v=32-_t(o)+y;if(30<v){var A=y-y%5;v=(c&(1<<A)-1).toString(32),c>>=A,y-=A,Fi=1<<32-_t(o)+y|l<<y|c,qi=v+r}else Fi=1<<v|l<<y|c,qi=r}function _h(r){r.return!==null&&(rr(r,1),Zy(r,1,0))}function vh(r){for(;r===Dc;)Dc=$o[--Qo],$o[Qo]=null,xl=$o[--Qo],$o[Qo]=null;for(;r===Br;)Br=Bn[--Hn],Bn[Hn]=null,qi=Bn[--Hn],Bn[Hn]=null,Fi=Bn[--Hn],Bn[Hn]=null}function jy(r,o){Bn[Hn++]=Fi,Bn[Hn++]=qi,Bn[Hn++]=Br,Fi=o.id,qi=o.overflow,Br=r}var $t=null,lt=null,He=!1,Hr=null,Gn=!1,Eh=Error(i(519));function Gr(r){var o=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ml(qn(o,r)),Eh}function e_(r){var o=r.stateNode,l=r.type,c=r.memoizedProps;switch(o[It]=r,o[Bt]=c,l){case"dialog":Le("cancel",o),Le("close",o);break;case"iframe":case"object":case"embed":Le("load",o);break;case"video":case"audio":for(l=0;l<jl.length;l++)Le(jl[l],o);break;case"source":Le("error",o);break;case"img":case"image":case"link":Le("error",o),Le("load",o);break;case"details":Le("toggle",o);break;case"input":Le("invalid",o),fc(o,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Le("invalid",o);break;case"textarea":Le("invalid",o),Vr(o,c.value,c.defaultValue,c.children)}l=c.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||o.textContent===""+l||c.suppressHydrationWarning===!0||yE(o.textContent,l)?(c.popover!=null&&(Le("beforetoggle",o),Le("toggle",o)),c.onScroll!=null&&Le("scroll",o),c.onScrollEnd!=null&&Le("scrollend",o),c.onClick!=null&&(o.onclick=ii),o=!0):o=!1,o||Gr(r,!0)}function t_(r){for($t=r.return;$t;)switch($t.tag){case 5:case 31:case 13:Gn=!1;return;case 27:case 3:Gn=!0;return;default:$t=$t.return}}function Wo(r){if(r!==$t)return!1;if(!He)return t_(r),He=!0,!1;var o=r.tag,l;if((l=o!==3&&o!==27)&&((l=o===5)&&(l=r.type,l=!(l!=="form"&&l!=="button")||Op(r.type,r.memoizedProps)),l=!l),l&&lt&&Gr(r),t_(r),o===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));lt=wE(r)}else if(o===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));lt=wE(r)}else o===27?(o=lt,is(r.type)?(r=Gp,Gp=null,lt=r):lt=o):lt=$t?Jn(r.stateNode.nextSibling):null;return!0}function eo(){lt=$t=null,He=!1}function Th(){var r=Hr;return r!==null&&(vn===null?vn=r:vn.push.apply(vn,r),Hr=null),r}function Ml(r){Hr===null?Hr=[r]:Hr.push(r)}var Sh=q(null),to=null,sr=null;function zr(r,o,l){fe(Sh,o._currentValue),o._currentValue=l}function or(r){r._currentValue=Sh.current,se(Sh)}function Ah(r,o,l){for(;r!==null;){var c=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,c!==null&&(c.childLanes|=o)):c!==null&&(c.childLanes&o)!==o&&(c.childLanes|=o),r===l)break;r=r.return}}function Ch(r,o,l,c){var y=r.child;for(y!==null&&(y.return=r);y!==null;){var v=y.dependencies;if(v!==null){var A=y.child;v=v.firstContext;e:for(;v!==null;){var R=v;v=y;for(var L=0;L<o.length;L++)if(R.context===o[L]){v.lanes|=l,R=v.alternate,R!==null&&(R.lanes|=l),Ah(v.return,l,r),c||(A=null);break e}v=R.next}}else if(y.tag===18){if(A=y.return,A===null)throw Error(i(341));A.lanes|=l,v=A.alternate,v!==null&&(v.lanes|=l),Ah(A,l,r),A=null}else A=y.child;if(A!==null)A.return=y;else for(A=y;A!==null;){if(A===r){A=null;break}if(y=A.sibling,y!==null){y.return=A.return,A=y;break}A=A.return}y=A}}function Xo(r,o,l,c){r=null;for(var y=o,v=!1;y!==null;){if(!v){if((y.flags&524288)!==0)v=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var A=y.alternate;if(A===null)throw Error(i(387));if(A=A.memoizedProps,A!==null){var R=y.type;In(y.pendingProps.value,A.value)||(r!==null?r.push(R):r=[R])}}else if(y===Ge.current){if(A=y.alternate,A===null)throw Error(i(387));A.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(r!==null?r.push(ru):r=[ru])}y=y.return}r!==null&&Ch(o,r,l,c),o.flags|=262144}function Pc(r){for(r=r.firstContext;r!==null;){if(!In(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function no(r){to=r,sr=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Qt(r){return n_(to,r)}function Vc(r,o){return to===null&&no(r),n_(r,o)}function n_(r,o){var l=o._currentValue;if(o={context:o,memoizedValue:l,next:null},sr===null){if(r===null)throw Error(i(308));sr=o,r.dependencies={lanes:0,firstContext:o},r.flags|=524288}else sr=sr.next=o;return l}var CR=typeof AbortController<"u"?AbortController:function(){var r=[],o=this.signal={aborted:!1,addEventListener:function(l,c){r.push(c)}};this.abort=function(){o.aborted=!0,r.forEach(function(l){return l()})}},IR=n.unstable_scheduleCallback,wR=n.unstable_NormalPriority,bt={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ih(){return{controller:new CR,data:new Map,refCount:0}}function Dl(r){r.refCount--,r.refCount===0&&IR(wR,function(){r.controller.abort()})}var Pl=null,wh=0,Zo=0,jo=null;function RR(r,o){if(Pl===null){var l=Pl=[];wh=0,Zo=Np(),jo={status:"pending",value:void 0,then:function(c){l.push(c)}}}return wh++,o.then(i_,i_),o}function i_(){if(--wh===0&&Pl!==null){jo!==null&&(jo.status="fulfilled");var r=Pl;Pl=null,Zo=0,jo=null;for(var o=0;o<r.length;o++)(0,r[o])()}}function bR(r,o){var l=[],c={status:"pending",value:null,reason:null,then:function(y){l.push(y)}};return r.then(function(){c.status="fulfilled",c.value=o;for(var y=0;y<l.length;y++)(0,l[y])(o)},function(y){for(c.status="rejected",c.reason=y,y=0;y<l.length;y++)(0,l[y])(void 0)}),c}var r_=ee.S;ee.S=function(r,o){Bv=un(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&RR(r,o),r_!==null&&r_(r,o)};var io=q(null);function Rh(){var r=io.current;return r!==null?r:st.pooledCache}function Uc(r,o){o===null?fe(io,io.current):fe(io,o.pool)}function s_(){var r=Rh();return r===null?null:{parent:bt._currentValue,pool:r}}var ea=Error(i(460)),bh=Error(i(474)),Lc=Error(i(542)),kc={then:function(){}};function o_(r){return r=r.status,r==="fulfilled"||r==="rejected"}function a_(r,o,l){switch(l=r[l],l===void 0?r.push(o):l!==o&&(o.then(ii,ii),o=l),o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,u_(r),r;default:if(typeof o.status=="string")o.then(ii,ii);else{if(r=st,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=o,r.status="pending",r.then(function(c){if(o.status==="pending"){var y=o;y.status="fulfilled",y.value=c}},function(c){if(o.status==="pending"){var y=o;y.status="rejected",y.reason=c}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,u_(r),r}throw so=o,ea}}function ro(r){try{var o=r._init;return o(r._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(so=l,ea):l}}var so=null;function l_(){if(so===null)throw Error(i(459));var r=so;return so=null,r}function u_(r){if(r===ea||r===Lc)throw Error(i(483))}var ta=null,Vl=0;function Oc(r){var o=Vl;return Vl+=1,ta===null&&(ta=[]),a_(ta,r,o)}function Ul(r,o){o=o.props.ref,r.ref=o!==void 0?o:null}function Fc(r,o){throw o.$$typeof===T?Error(i(525)):(r=Object.prototype.toString.call(o),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r)))}function c_(r){function o(H,F){if(r){var K=H.deletions;K===null?(H.deletions=[F],H.flags|=16):K.push(F)}}function l(H,F){if(!r)return null;for(;F!==null;)o(H,F),F=F.sibling;return null}function c(H){for(var F=new Map;H!==null;)H.key!==null?F.set(H.key,H):F.set(H.index,H),H=H.sibling;return F}function y(H,F){return H=ir(H,F),H.index=0,H.sibling=null,H}function v(H,F,K){return H.index=K,r?(K=H.alternate,K!==null?(K=K.index,K<F?(H.flags|=67108866,F):K):(H.flags|=67108866,F)):(H.flags|=1048576,F)}function A(H){return r&&H.alternate===null&&(H.flags|=67108866),H}function R(H,F,K,ne){return F===null||F.tag!==6?(F=gh(K,H.mode,ne),F.return=H,F):(F=y(F,K),F.return=H,F)}function L(H,F,K,ne){var ve=K.type;return ve===U?te(H,F,K.props.children,ne,K.key):F!==null&&(F.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===M&&ro(ve)===F.type)?(F=y(F,K.props),Ul(F,K),F.return=H,F):(F=Mc(K.type,K.key,K.props,null,H.mode,ne),Ul(F,K),F.return=H,F)}function Y(H,F,K,ne){return F===null||F.tag!==4||F.stateNode.containerInfo!==K.containerInfo||F.stateNode.implementation!==K.implementation?(F=yh(K,H.mode,ne),F.return=H,F):(F=y(F,K.children||[]),F.return=H,F)}function te(H,F,K,ne,ve){return F===null||F.tag!==7?(F=js(K,H.mode,ne,ve),F.return=H,F):(F=y(F,K),F.return=H,F)}function ie(H,F,K){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=gh(""+F,H.mode,K),F.return=H,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case I:return K=Mc(F.type,F.key,F.props,null,H.mode,K),Ul(K,F),K.return=H,K;case x:return F=yh(F,H.mode,K),F.return=H,F;case M:return F=ro(F),ie(H,F,K)}if(ot(F)||B(F))return F=js(F,H.mode,K,null),F.return=H,F;if(typeof F.then=="function")return ie(H,Oc(F),K);if(F.$$typeof===z)return ie(H,Vc(H,F),K);Fc(H,F)}return null}function $(H,F,K,ne){var ve=F!==null?F.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return ve!==null?null:R(H,F,""+K,ne);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case I:return K.key===ve?L(H,F,K,ne):null;case x:return K.key===ve?Y(H,F,K,ne):null;case M:return K=ro(K),$(H,F,K,ne)}if(ot(K)||B(K))return ve!==null?null:te(H,F,K,ne,null);if(typeof K.then=="function")return $(H,F,Oc(K),ne);if(K.$$typeof===z)return $(H,F,Vc(H,K),ne);Fc(H,K)}return null}function j(H,F,K,ne,ve){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return H=H.get(K)||null,R(F,H,""+ne,ve);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case I:return H=H.get(ne.key===null?K:ne.key)||null,L(F,H,ne,ve);case x:return H=H.get(ne.key===null?K:ne.key)||null,Y(F,H,ne,ve);case M:return ne=ro(ne),j(H,F,K,ne,ve)}if(ot(ne)||B(ne))return H=H.get(K)||null,te(F,H,ne,ve,null);if(typeof ne.then=="function")return j(H,F,K,Oc(ne),ve);if(ne.$$typeof===z)return j(H,F,K,Vc(F,ne),ve);Fc(F,ne)}return null}function ge(H,F,K,ne){for(var ve=null,Je=null,_e=F,Pe=F=0,Oe=null;_e!==null&&Pe<K.length;Pe++){_e.index>Pe?(Oe=_e,_e=null):Oe=_e.sibling;var Ke=$(H,_e,K[Pe],ne);if(Ke===null){_e===null&&(_e=Oe);break}r&&_e&&Ke.alternate===null&&o(H,_e),F=v(Ke,F,Pe),Je===null?ve=Ke:Je.sibling=Ke,Je=Ke,_e=Oe}if(Pe===K.length)return l(H,_e),He&&rr(H,Pe),ve;if(_e===null){for(;Pe<K.length;Pe++)_e=ie(H,K[Pe],ne),_e!==null&&(F=v(_e,F,Pe),Je===null?ve=_e:Je.sibling=_e,Je=_e);return He&&rr(H,Pe),ve}for(_e=c(_e);Pe<K.length;Pe++)Oe=j(_e,H,Pe,K[Pe],ne),Oe!==null&&(r&&Oe.alternate!==null&&_e.delete(Oe.key===null?Pe:Oe.key),F=v(Oe,F,Pe),Je===null?ve=Oe:Je.sibling=Oe,Je=Oe);return r&&_e.forEach(function(ls){return o(H,ls)}),He&&rr(H,Pe),ve}function Te(H,F,K,ne){if(K==null)throw Error(i(151));for(var ve=null,Je=null,_e=F,Pe=F=0,Oe=null,Ke=K.next();_e!==null&&!Ke.done;Pe++,Ke=K.next()){_e.index>Pe?(Oe=_e,_e=null):Oe=_e.sibling;var ls=$(H,_e,Ke.value,ne);if(ls===null){_e===null&&(_e=Oe);break}r&&_e&&ls.alternate===null&&o(H,_e),F=v(ls,F,Pe),Je===null?ve=ls:Je.sibling=ls,Je=ls,_e=Oe}if(Ke.done)return l(H,_e),He&&rr(H,Pe),ve;if(_e===null){for(;!Ke.done;Pe++,Ke=K.next())Ke=ie(H,Ke.value,ne),Ke!==null&&(F=v(Ke,F,Pe),Je===null?ve=Ke:Je.sibling=Ke,Je=Ke);return He&&rr(H,Pe),ve}for(_e=c(_e);!Ke.done;Pe++,Ke=K.next())Ke=j(_e,H,Pe,Ke.value,ne),Ke!==null&&(r&&Ke.alternate!==null&&_e.delete(Ke.key===null?Pe:Ke.key),F=v(Ke,F,Pe),Je===null?ve=Ke:Je.sibling=Ke,Je=Ke);return r&&_e.forEach(function(Fb){return o(H,Fb)}),He&&rr(H,Pe),ve}function rt(H,F,K,ne){if(typeof K=="object"&&K!==null&&K.type===U&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case I:e:{for(var ve=K.key;F!==null;){if(F.key===ve){if(ve=K.type,ve===U){if(F.tag===7){l(H,F.sibling),ne=y(F,K.props.children),ne.return=H,H=ne;break e}}else if(F.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===M&&ro(ve)===F.type){l(H,F.sibling),ne=y(F,K.props),Ul(ne,K),ne.return=H,H=ne;break e}l(H,F);break}else o(H,F);F=F.sibling}K.type===U?(ne=js(K.props.children,H.mode,ne,K.key),ne.return=H,H=ne):(ne=Mc(K.type,K.key,K.props,null,H.mode,ne),Ul(ne,K),ne.return=H,H=ne)}return A(H);case x:e:{for(ve=K.key;F!==null;){if(F.key===ve)if(F.tag===4&&F.stateNode.containerInfo===K.containerInfo&&F.stateNode.implementation===K.implementation){l(H,F.sibling),ne=y(F,K.children||[]),ne.return=H,H=ne;break e}else{l(H,F);break}else o(H,F);F=F.sibling}ne=yh(K,H.mode,ne),ne.return=H,H=ne}return A(H);case M:return K=ro(K),rt(H,F,K,ne)}if(ot(K))return ge(H,F,K,ne);if(B(K)){if(ve=B(K),typeof ve!="function")throw Error(i(150));return K=ve.call(K),Te(H,F,K,ne)}if(typeof K.then=="function")return rt(H,F,Oc(K),ne);if(K.$$typeof===z)return rt(H,F,Vc(H,K),ne);Fc(H,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,F!==null&&F.tag===6?(l(H,F.sibling),ne=y(F,K),ne.return=H,H=ne):(l(H,F),ne=gh(K,H.mode,ne),ne.return=H,H=ne),A(H)):l(H,F)}return function(H,F,K,ne){try{Vl=0;var ve=rt(H,F,K,ne);return ta=null,ve}catch(_e){if(_e===ea||_e===Lc)throw _e;var Je=wn(29,_e,null,H.mode);return Je.lanes=ne,Je.return=H,Je}finally{}}}var oo=c_(!0),f_=c_(!1),Jr=!1;function Nh(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xh(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Kr(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Yr(r,o,l){var c=r.updateQueue;if(c===null)return null;if(c=c.shared,(Qe&2)!==0){var y=c.pending;return y===null?o.next=o:(o.next=y.next,y.next=o),c.pending=o,o=xc(r),$y(r,null,l),o}return Nc(r,c,o,l),xc(r)}function Ll(r,o,l){if(o=o.updateQueue,o!==null&&(o=o.shared,(l&4194048)!==0)){var c=o.lanes;c&=r.pendingLanes,l|=c,o.lanes=l,ul(r,l)}}function Mh(r,o){var l=r.updateQueue,c=r.alternate;if(c!==null&&(c=c.updateQueue,l===c)){var y=null,v=null;if(l=l.firstBaseUpdate,l!==null){do{var A={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};v===null?y=v=A:v=v.next=A,l=l.next}while(l!==null);v===null?y=v=o:v=v.next=o}else y=v=o;l={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:c.shared,callbacks:c.callbacks},r.updateQueue=l;return}r=l.lastBaseUpdate,r===null?l.firstBaseUpdate=o:r.next=o,l.lastBaseUpdate=o}var Dh=!1;function kl(){if(Dh){var r=jo;if(r!==null)throw r}}function Ol(r,o,l,c){Dh=!1;var y=r.updateQueue;Jr=!1;var v=y.firstBaseUpdate,A=y.lastBaseUpdate,R=y.shared.pending;if(R!==null){y.shared.pending=null;var L=R,Y=L.next;L.next=null,A===null?v=Y:A.next=Y,A=L;var te=r.alternate;te!==null&&(te=te.updateQueue,R=te.lastBaseUpdate,R!==A&&(R===null?te.firstBaseUpdate=Y:R.next=Y,te.lastBaseUpdate=L))}if(v!==null){var ie=y.baseState;A=0,te=Y=L=null,R=v;do{var $=R.lane&-536870913,j=$!==R.lane;if(j?(ke&$)===$:(c&$)===$){$!==0&&$===Zo&&(Dh=!0),te!==null&&(te=te.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var ge=r,Te=R;$=o;var rt=l;switch(Te.tag){case 1:if(ge=Te.payload,typeof ge=="function"){ie=ge.call(rt,ie,$);break e}ie=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=Te.payload,$=typeof ge=="function"?ge.call(rt,ie,$):ge,$==null)break e;ie=E({},ie,$);break e;case 2:Jr=!0}}$=R.callback,$!==null&&(r.flags|=64,j&&(r.flags|=8192),j=y.callbacks,j===null?y.callbacks=[$]:j.push($))}else j={lane:$,tag:R.tag,payload:R.payload,callback:R.callback,next:null},te===null?(Y=te=j,L=ie):te=te.next=j,A|=$;if(R=R.next,R===null){if(R=y.shared.pending,R===null)break;j=R,R=j.next,j.next=null,y.lastBaseUpdate=j,y.shared.pending=null}}while(!0);te===null&&(L=ie),y.baseState=L,y.firstBaseUpdate=Y,y.lastBaseUpdate=te,v===null&&(y.shared.lanes=0),Zr|=A,r.lanes=A,r.memoizedState=ie}}function d_(r,o){if(typeof r!="function")throw Error(i(191,r));r.call(o)}function h_(r,o){var l=r.callbacks;if(l!==null)for(r.callbacks=null,r=0;r<l.length;r++)d_(l[r],o)}var na=q(null),qc=q(0);function p_(r,o){r=mr,fe(qc,r),fe(na,o),mr=r|o.baseLanes}function Ph(){fe(qc,mr),fe(na,na.current)}function Vh(){mr=qc.current,se(na),se(qc)}var Rn=q(null),zn=null;function $r(r){var o=r.alternate;fe(Et,Et.current&1),fe(Rn,r),zn===null&&(o===null||na.current!==null||o.memoizedState!==null)&&(zn=r)}function Uh(r){fe(Et,Et.current),fe(Rn,r),zn===null&&(zn=r)}function m_(r){r.tag===22?(fe(Et,Et.current),fe(Rn,r),zn===null&&(zn=r)):Qr()}function Qr(){fe(Et,Et.current),fe(Rn,Rn.current)}function bn(r){se(Rn),zn===r&&(zn=null),se(Et)}var Et=q(0);function Bc(r){for(var o=r;o!==null;){if(o.tag===13){var l=o.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Bp(l)||Hp(l)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var ar=0,xe=null,nt=null,Nt=null,Hc=!1,ia=!1,ao=!1,Gc=0,Fl=0,ra=null,NR=0;function gt(){throw Error(i(321))}function Lh(r,o){if(o===null)return!1;for(var l=0;l<o.length&&l<r.length;l++)if(!In(r[l],o[l]))return!1;return!0}function kh(r,o,l,c,y,v){return ar=v,xe=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,ee.H=r===null||r.memoizedState===null?Z_:Zh,ao=!1,v=l(c,y),ao=!1,ia&&(v=y_(o,l,c,y)),g_(r),v}function g_(r){ee.H=Hl;var o=nt!==null&&nt.next!==null;if(ar=0,Nt=nt=xe=null,Hc=!1,Fl=0,ra=null,o)throw Error(i(300));r===null||xt||(r=r.dependencies,r!==null&&Pc(r)&&(xt=!0))}function y_(r,o,l,c){xe=r;var y=0;do{if(ia&&(ra=null),Fl=0,ia=!1,25<=y)throw Error(i(301));if(y+=1,Nt=nt=null,r.updateQueue!=null){var v=r.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}ee.H=j_,v=o(l,c)}while(ia);return v}function xR(){var r=ee.H,o=r.useState()[0];return o=typeof o.then=="function"?ql(o):o,r=r.useState()[0],(nt!==null?nt.memoizedState:null)!==r&&(xe.flags|=1024),o}function Oh(){var r=Gc!==0;return Gc=0,r}function Fh(r,o,l){o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~l}function qh(r){if(Hc){for(r=r.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Hc=!1}ar=0,Nt=nt=xe=null,ia=!1,Fl=Gc=0,ra=null}function fn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?xe.memoizedState=Nt=r:Nt=Nt.next=r,Nt}function Tt(){if(nt===null){var r=xe.alternate;r=r!==null?r.memoizedState:null}else r=nt.next;var o=Nt===null?xe.memoizedState:Nt.next;if(o!==null)Nt=o,nt=r;else{if(r===null)throw xe.alternate===null?Error(i(467)):Error(i(310));nt=r,r={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},Nt===null?xe.memoizedState=Nt=r:Nt=Nt.next=r}return Nt}function zc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ql(r){var o=Fl;return Fl+=1,ra===null&&(ra=[]),r=a_(ra,r,o),o=xe,(Nt===null?o.memoizedState:Nt.next)===null&&(o=o.alternate,ee.H=o===null||o.memoizedState===null?Z_:Zh),r}function Jc(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return ql(r);if(r.$$typeof===z)return Qt(r)}throw Error(i(438,String(r)))}function Bh(r){var o=null,l=xe.updateQueue;if(l!==null&&(o=l.memoCache),o==null){var c=xe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(o={data:c.data.map(function(y){return y.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),l===null&&(l=zc(),xe.updateQueue=l),l.memoCache=o,l=o.data[o.index],l===void 0)for(l=o.data[o.index]=Array(r),c=0;c<r;c++)l[c]=k;return o.index++,l}function lr(r,o){return typeof o=="function"?o(r):o}function Kc(r){var o=Tt();return Hh(o,nt,r)}function Hh(r,o,l){var c=r.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=l;var y=r.baseQueue,v=c.pending;if(v!==null){if(y!==null){var A=y.next;y.next=v.next,v.next=A}o.baseQueue=y=v,c.pending=null}if(v=r.baseState,y===null)r.memoizedState=v;else{o=y.next;var R=A=null,L=null,Y=o,te=!1;do{var ie=Y.lane&-536870913;if(ie!==Y.lane?(ke&ie)===ie:(ar&ie)===ie){var $=Y.revertLane;if($===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),ie===Zo&&(te=!0);else if((ar&$)===$){Y=Y.next,$===Zo&&(te=!0);continue}else ie={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},L===null?(R=L=ie,A=v):L=L.next=ie,xe.lanes|=$,Zr|=$;ie=Y.action,ao&&l(v,ie),v=Y.hasEagerState?Y.eagerState:l(v,ie)}else $={lane:ie,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},L===null?(R=L=$,A=v):L=L.next=$,xe.lanes|=ie,Zr|=ie;Y=Y.next}while(Y!==null&&Y!==o);if(L===null?A=v:L.next=R,!In(v,r.memoizedState)&&(xt=!0,te&&(l=jo,l!==null)))throw l;r.memoizedState=v,r.baseState=A,r.baseQueue=L,c.lastRenderedState=v}return y===null&&(c.lanes=0),[r.memoizedState,c.dispatch]}function Gh(r){var o=Tt(),l=o.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=r;var c=l.dispatch,y=l.pending,v=o.memoizedState;if(y!==null){l.pending=null;var A=y=y.next;do v=r(v,A.action),A=A.next;while(A!==y);In(v,o.memoizedState)||(xt=!0),o.memoizedState=v,o.baseQueue===null&&(o.baseState=v),l.lastRenderedState=v}return[v,c]}function __(r,o,l){var c=xe,y=Tt(),v=He;if(v){if(l===void 0)throw Error(i(407));l=l()}else l=o();var A=!In((nt||y).memoizedState,l);if(A&&(y.memoizedState=l,xt=!0),y=y.queue,Kh(T_.bind(null,c,y,r),[r]),y.getSnapshot!==o||A||Nt!==null&&Nt.memoizedState.tag&1){if(c.flags|=2048,sa(9,{destroy:void 0},E_.bind(null,c,y,l,o),null),st===null)throw Error(i(349));v||(ar&127)!==0||v_(c,o,l)}return l}function v_(r,o,l){r.flags|=16384,r={getSnapshot:o,value:l},o=xe.updateQueue,o===null?(o=zc(),xe.updateQueue=o,o.stores=[r]):(l=o.stores,l===null?o.stores=[r]:l.push(r))}function E_(r,o,l,c){o.value=l,o.getSnapshot=c,S_(o)&&A_(r)}function T_(r,o,l){return l(function(){S_(o)&&A_(r)})}function S_(r){var o=r.getSnapshot;r=r.value;try{var l=o();return!In(r,l)}catch{return!0}}function A_(r){var o=Zs(r,2);o!==null&&En(o,r,2)}function zh(r){var o=fn();if(typeof r=="function"){var l=r;if(r=l(),ao){Vn(!0);try{l()}finally{Vn(!1)}}}return o.memoizedState=o.baseState=r,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:lr,lastRenderedState:r},o}function C_(r,o,l,c){return r.baseState=l,Hh(r,nt,typeof c=="function"?c:lr)}function MR(r,o,l,c,y){if(Qc(r))throw Error(i(485));if(r=o.action,r!==null){var v={payload:y,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){v.listeners.push(A)}};ee.T!==null?l(!0):v.isTransition=!1,c(v),l=o.pending,l===null?(v.next=o.pending=v,I_(o,v)):(v.next=l.next,o.pending=l.next=v)}}function I_(r,o){var l=o.action,c=o.payload,y=r.state;if(o.isTransition){var v=ee.T,A={};ee.T=A;try{var R=l(y,c),L=ee.S;L!==null&&L(A,R),w_(r,o,R)}catch(Y){Jh(r,o,Y)}finally{v!==null&&A.types!==null&&(v.types=A.types),ee.T=v}}else try{v=l(y,c),w_(r,o,v)}catch(Y){Jh(r,o,Y)}}function w_(r,o,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(c){R_(r,o,c)},function(c){return Jh(r,o,c)}):R_(r,o,l)}function R_(r,o,l){o.status="fulfilled",o.value=l,b_(o),r.state=l,o=r.pending,o!==null&&(l=o.next,l===o?r.pending=null:(l=l.next,o.next=l,I_(r,l)))}function Jh(r,o,l){var c=r.pending;if(r.pending=null,c!==null){c=c.next;do o.status="rejected",o.reason=l,b_(o),o=o.next;while(o!==c)}r.action=null}function b_(r){r=r.listeners;for(var o=0;o<r.length;o++)(0,r[o])()}function N_(r,o){return o}function x_(r,o){if(He){var l=st.formState;if(l!==null){e:{var c=xe;if(He){if(lt){t:{for(var y=lt,v=Gn;y.nodeType!==8;){if(!v){y=null;break t}if(y=Jn(y.nextSibling),y===null){y=null;break t}}v=y.data,y=v==="F!"||v==="F"?y:null}if(y){lt=Jn(y.nextSibling),c=y.data==="F!";break e}}Gr(c)}c=!1}c&&(o=l[0])}}return l=fn(),l.memoizedState=l.baseState=o,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:N_,lastRenderedState:o},l.queue=c,l=Q_.bind(null,xe,c),c.dispatch=l,c=zh(!1),v=Xh.bind(null,xe,!1,c.queue),c=fn(),y={state:o,dispatch:null,action:r,pending:null},c.queue=y,l=MR.bind(null,xe,y,v,l),y.dispatch=l,c.memoizedState=r,[o,l,!1]}function M_(r){var o=Tt();return D_(o,nt,r)}function D_(r,o,l){if(o=Hh(r,o,N_)[0],r=Kc(lr)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var c=ql(o)}catch(A){throw A===ea?Lc:A}else c=o;o=Tt();var y=o.queue,v=y.dispatch;return l!==o.memoizedState&&(xe.flags|=2048,sa(9,{destroy:void 0},DR.bind(null,y,l),null)),[c,v,r]}function DR(r,o){r.action=o}function P_(r){var o=Tt(),l=nt;if(l!==null)return D_(o,l,r);Tt(),o=o.memoizedState,l=Tt();var c=l.queue.dispatch;return l.memoizedState=r,[o,c,!1]}function sa(r,o,l,c){return r={tag:r,create:l,deps:c,inst:o,next:null},o=xe.updateQueue,o===null&&(o=zc(),xe.updateQueue=o),l=o.lastEffect,l===null?o.lastEffect=r.next=r:(c=l.next,l.next=r,r.next=c,o.lastEffect=r),r}function V_(){return Tt().memoizedState}function Yc(r,o,l,c){var y=fn();xe.flags|=r,y.memoizedState=sa(1|o,{destroy:void 0},l,c===void 0?null:c)}function $c(r,o,l,c){var y=Tt();c=c===void 0?null:c;var v=y.memoizedState.inst;nt!==null&&c!==null&&Lh(c,nt.memoizedState.deps)?y.memoizedState=sa(o,v,l,c):(xe.flags|=r,y.memoizedState=sa(1|o,v,l,c))}function U_(r,o){Yc(8390656,8,r,o)}function Kh(r,o){$c(2048,8,r,o)}function PR(r){xe.flags|=4;var o=xe.updateQueue;if(o===null)o=zc(),xe.updateQueue=o,o.events=[r];else{var l=o.events;l===null?o.events=[r]:l.push(r)}}function L_(r){var o=Tt().memoizedState;return PR({ref:o,nextImpl:r}),function(){if((Qe&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}function k_(r,o){return $c(4,2,r,o)}function O_(r,o){return $c(4,4,r,o)}function F_(r,o){if(typeof o=="function"){r=r();var l=o(r);return function(){typeof l=="function"?l():o(null)}}if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function q_(r,o,l){l=l!=null?l.concat([r]):null,$c(4,4,F_.bind(null,o,r),l)}function Yh(){}function B_(r,o){var l=Tt();o=o===void 0?null:o;var c=l.memoizedState;return o!==null&&Lh(o,c[1])?c[0]:(l.memoizedState=[r,o],r)}function H_(r,o){var l=Tt();o=o===void 0?null:o;var c=l.memoizedState;if(o!==null&&Lh(o,c[1]))return c[0];if(c=r(),ao){Vn(!0);try{r()}finally{Vn(!1)}}return l.memoizedState=[c,o],c}function $h(r,o,l){return l===void 0||(ar&1073741824)!==0&&(ke&261930)===0?r.memoizedState=o:(r.memoizedState=l,r=Gv(),xe.lanes|=r,Zr|=r,l)}function G_(r,o,l,c){return In(l,o)?l:na.current!==null?(r=$h(r,l,c),In(r,o)||(xt=!0),r):(ar&42)===0||(ar&1073741824)!==0&&(ke&261930)===0?(xt=!0,r.memoizedState=l):(r=Gv(),xe.lanes|=r,Zr|=r,o)}function z_(r,o,l,c,y){var v=ce.p;ce.p=v!==0&&8>v?v:8;var A=ee.T,R={};ee.T=R,Xh(r,!1,o,l);try{var L=y(),Y=ee.S;if(Y!==null&&Y(R,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var te=bR(L,c);Bl(r,o,te,Mn(r))}else Bl(r,o,c,Mn(r))}catch(ie){Bl(r,o,{then:function(){},status:"rejected",reason:ie},Mn())}finally{ce.p=v,A!==null&&R.types!==null&&(A.types=R.types),ee.T=A}}function VR(){}function Qh(r,o,l,c){if(r.tag!==5)throw Error(i(476));var y=J_(r).queue;z_(r,y,o,ye,l===null?VR:function(){return K_(r),l(c)})}function J_(r){var o=r.memoizedState;if(o!==null)return o;o={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:lr,lastRenderedState:ye},next:null};var l={};return o.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:lr,lastRenderedState:l},next:null},r.memoizedState=o,r=r.alternate,r!==null&&(r.memoizedState=o),o}function K_(r){var o=J_(r);o.next===null&&(o=r.alternate.memoizedState),Bl(r,o.next.queue,{},Mn())}function Wh(){return Qt(ru)}function Y_(){return Tt().memoizedState}function $_(){return Tt().memoizedState}function UR(r){for(var o=r.return;o!==null;){switch(o.tag){case 24:case 3:var l=Mn();r=Kr(l);var c=Yr(o,r,l);c!==null&&(En(c,o,l),Ll(c,o,l)),o={cache:Ih()},r.payload=o;return}o=o.return}}function LR(r,o,l){var c=Mn();l={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Qc(r)?W_(o,l):(l=ph(r,o,l,c),l!==null&&(En(l,r,c),X_(l,o,c)))}function Q_(r,o,l){var c=Mn();Bl(r,o,l,c)}function Bl(r,o,l,c){var y={lane:c,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Qc(r))W_(o,y);else{var v=r.alternate;if(r.lanes===0&&(v===null||v.lanes===0)&&(v=o.lastRenderedReducer,v!==null))try{var A=o.lastRenderedState,R=v(A,l);if(y.hasEagerState=!0,y.eagerState=R,In(R,A))return Nc(r,o,y,0),st===null&&bc(),!1}catch{}finally{}if(l=ph(r,o,y,c),l!==null)return En(l,r,c),X_(l,o,c),!0}return!1}function Xh(r,o,l,c){if(c={lane:2,revertLane:Np(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Qc(r)){if(o)throw Error(i(479))}else o=ph(r,l,c,2),o!==null&&En(o,r,2)}function Qc(r){var o=r.alternate;return r===xe||o!==null&&o===xe}function W_(r,o){ia=Hc=!0;var l=r.pending;l===null?o.next=o:(o.next=l.next,l.next=o),r.pending=o}function X_(r,o,l){if((l&4194048)!==0){var c=o.lanes;c&=r.pendingLanes,l|=c,o.lanes=l,ul(r,l)}}var Hl={readContext:Qt,use:Jc,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useLayoutEffect:gt,useInsertionEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useSyncExternalStore:gt,useId:gt,useHostTransitionStatus:gt,useFormState:gt,useActionState:gt,useOptimistic:gt,useMemoCache:gt,useCacheRefresh:gt};Hl.useEffectEvent=gt;var Z_={readContext:Qt,use:Jc,useCallback:function(r,o){return fn().memoizedState=[r,o===void 0?null:o],r},useContext:Qt,useEffect:U_,useImperativeHandle:function(r,o,l){l=l!=null?l.concat([r]):null,Yc(4194308,4,F_.bind(null,o,r),l)},useLayoutEffect:function(r,o){return Yc(4194308,4,r,o)},useInsertionEffect:function(r,o){Yc(4,2,r,o)},useMemo:function(r,o){var l=fn();o=o===void 0?null:o;var c=r();if(ao){Vn(!0);try{r()}finally{Vn(!1)}}return l.memoizedState=[c,o],c},useReducer:function(r,o,l){var c=fn();if(l!==void 0){var y=l(o);if(ao){Vn(!0);try{l(o)}finally{Vn(!1)}}}else y=o;return c.memoizedState=c.baseState=y,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:y},c.queue=r,r=r.dispatch=LR.bind(null,xe,r),[c.memoizedState,r]},useRef:function(r){var o=fn();return r={current:r},o.memoizedState=r},useState:function(r){r=zh(r);var o=r.queue,l=Q_.bind(null,xe,o);return o.dispatch=l,[r.memoizedState,l]},useDebugValue:Yh,useDeferredValue:function(r,o){var l=fn();return $h(l,r,o)},useTransition:function(){var r=zh(!1);return r=z_.bind(null,xe,r.queue,!0,!1),fn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,o,l){var c=xe,y=fn();if(He){if(l===void 0)throw Error(i(407));l=l()}else{if(l=o(),st===null)throw Error(i(349));(ke&127)!==0||v_(c,o,l)}y.memoizedState=l;var v={value:l,getSnapshot:o};return y.queue=v,U_(T_.bind(null,c,v,r),[r]),c.flags|=2048,sa(9,{destroy:void 0},E_.bind(null,c,v,l,o),null),l},useId:function(){var r=fn(),o=st.identifierPrefix;if(He){var l=qi,c=Fi;l=(c&~(1<<32-_t(c)-1)).toString(32)+l,o="_"+o+"R_"+l,l=Gc++,0<l&&(o+="H"+l.toString(32)),o+="_"}else l=NR++,o="_"+o+"r_"+l.toString(32)+"_";return r.memoizedState=o},useHostTransitionStatus:Wh,useFormState:x_,useActionState:x_,useOptimistic:function(r){var o=fn();o.memoizedState=o.baseState=r;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=l,o=Xh.bind(null,xe,!0,l),l.dispatch=o,[r,o]},useMemoCache:Bh,useCacheRefresh:function(){return fn().memoizedState=UR.bind(null,xe)},useEffectEvent:function(r){var o=fn(),l={impl:r};return o.memoizedState=l,function(){if((Qe&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},Zh={readContext:Qt,use:Jc,useCallback:B_,useContext:Qt,useEffect:Kh,useImperativeHandle:q_,useInsertionEffect:k_,useLayoutEffect:O_,useMemo:H_,useReducer:Kc,useRef:V_,useState:function(){return Kc(lr)},useDebugValue:Yh,useDeferredValue:function(r,o){var l=Tt();return G_(l,nt.memoizedState,r,o)},useTransition:function(){var r=Kc(lr)[0],o=Tt().memoizedState;return[typeof r=="boolean"?r:ql(r),o]},useSyncExternalStore:__,useId:Y_,useHostTransitionStatus:Wh,useFormState:M_,useActionState:M_,useOptimistic:function(r,o){var l=Tt();return C_(l,nt,r,o)},useMemoCache:Bh,useCacheRefresh:$_};Zh.useEffectEvent=L_;var j_={readContext:Qt,use:Jc,useCallback:B_,useContext:Qt,useEffect:Kh,useImperativeHandle:q_,useInsertionEffect:k_,useLayoutEffect:O_,useMemo:H_,useReducer:Gh,useRef:V_,useState:function(){return Gh(lr)},useDebugValue:Yh,useDeferredValue:function(r,o){var l=Tt();return nt===null?$h(l,r,o):G_(l,nt.memoizedState,r,o)},useTransition:function(){var r=Gh(lr)[0],o=Tt().memoizedState;return[typeof r=="boolean"?r:ql(r),o]},useSyncExternalStore:__,useId:Y_,useHostTransitionStatus:Wh,useFormState:P_,useActionState:P_,useOptimistic:function(r,o){var l=Tt();return nt!==null?C_(l,nt,r,o):(l.baseState=r,[r,l.queue.dispatch])},useMemoCache:Bh,useCacheRefresh:$_};j_.useEffectEvent=L_;function jh(r,o,l,c){o=r.memoizedState,l=l(c,o),l=l==null?o:E({},o,l),r.memoizedState=l,r.lanes===0&&(r.updateQueue.baseState=l)}var ep={enqueueSetState:function(r,o,l){r=r._reactInternals;var c=Mn(),y=Kr(c);y.payload=o,l!=null&&(y.callback=l),o=Yr(r,y,c),o!==null&&(En(o,r,c),Ll(o,r,c))},enqueueReplaceState:function(r,o,l){r=r._reactInternals;var c=Mn(),y=Kr(c);y.tag=1,y.payload=o,l!=null&&(y.callback=l),o=Yr(r,y,c),o!==null&&(En(o,r,c),Ll(o,r,c))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var l=Mn(),c=Kr(l);c.tag=2,o!=null&&(c.callback=o),o=Yr(r,c,l),o!==null&&(En(o,r,l),Ll(o,r,l))}};function ev(r,o,l,c,y,v,A){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(c,v,A):o.prototype&&o.prototype.isPureReactComponent?!bl(l,c)||!bl(y,v):!0}function tv(r,o,l,c){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(l,c),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(l,c),o.state!==r&&ep.enqueueReplaceState(o,o.state,null)}function lo(r,o){var l=o;if("ref"in o){l={};for(var c in o)c!=="ref"&&(l[c]=o[c])}if(r=r.defaultProps){l===o&&(l=E({},l));for(var y in r)l[y]===void 0&&(l[y]=r[y])}return l}function nv(r){Rc(r)}function iv(r){console.error(r)}function rv(r){Rc(r)}function Wc(r,o){try{var l=r.onUncaughtError;l(o.value,{componentStack:o.stack})}catch(c){setTimeout(function(){throw c})}}function sv(r,o,l){try{var c=r.onCaughtError;c(l.value,{componentStack:l.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function tp(r,o,l){return l=Kr(l),l.tag=3,l.payload={element:null},l.callback=function(){Wc(r,o)},l}function ov(r){return r=Kr(r),r.tag=3,r}function av(r,o,l,c){var y=l.type.getDerivedStateFromError;if(typeof y=="function"){var v=c.value;r.payload=function(){return y(v)},r.callback=function(){sv(o,l,c)}}var A=l.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(r.callback=function(){sv(o,l,c),typeof y!="function"&&(jr===null?jr=new Set([this]):jr.add(this));var R=c.stack;this.componentDidCatch(c.value,{componentStack:R!==null?R:""})})}function kR(r,o,l,c,y){if(l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(o=l.alternate,o!==null&&Xo(o,l,y,!0),l=Rn.current,l!==null){switch(l.tag){case 31:case 13:return zn===null?uf():l.alternate===null&&yt===0&&(yt=3),l.flags&=-257,l.flags|=65536,l.lanes=y,c===kc?l.flags|=16384:(o=l.updateQueue,o===null?l.updateQueue=new Set([c]):o.add(c),wp(r,c,y)),!1;case 22:return l.flags|=65536,c===kc?l.flags|=16384:(o=l.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([c])},l.updateQueue=o):(l=o.retryQueue,l===null?o.retryQueue=new Set([c]):l.add(c)),wp(r,c,y)),!1}throw Error(i(435,l.tag))}return wp(r,c,y),uf(),!1}if(He)return o=Rn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=y,c!==Eh&&(r=Error(i(422),{cause:c}),Ml(qn(r,l)))):(c!==Eh&&(o=Error(i(423),{cause:c}),Ml(qn(o,l))),r=r.current.alternate,r.flags|=65536,y&=-y,r.lanes|=y,c=qn(c,l),y=tp(r.stateNode,c,y),Mh(r,y),yt!==4&&(yt=2)),!1;var v=Error(i(520),{cause:c});if(v=qn(v,l),Wl===null?Wl=[v]:Wl.push(v),yt!==4&&(yt=2),o===null)return!0;c=qn(c,l),l=o;do{switch(l.tag){case 3:return l.flags|=65536,r=y&-y,l.lanes|=r,r=tp(l.stateNode,c,r),Mh(l,r),!1;case 1:if(o=l.type,v=l.stateNode,(l.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(jr===null||!jr.has(v))))return l.flags|=65536,y&=-y,l.lanes|=y,y=ov(y),av(y,r,l,c),Mh(l,y),!1}l=l.return}while(l!==null);return!1}var np=Error(i(461)),xt=!1;function Wt(r,o,l,c){o.child=r===null?f_(o,null,l,c):oo(o,r.child,l,c)}function lv(r,o,l,c,y){l=l.render;var v=o.ref;if("ref"in c){var A={};for(var R in c)R!=="ref"&&(A[R]=c[R])}else A=c;return no(o),c=kh(r,o,l,A,v,y),R=Oh(),r!==null&&!xt?(Fh(r,o,y),ur(r,o,y)):(He&&R&&_h(o),o.flags|=1,Wt(r,o,c,y),o.child)}function uv(r,o,l,c,y){if(r===null){var v=l.type;return typeof v=="function"&&!mh(v)&&v.defaultProps===void 0&&l.compare===null?(o.tag=15,o.type=v,cv(r,o,v,c,y)):(r=Mc(l.type,null,c,o,o.mode,y),r.ref=o.ref,r.return=o,o.child=r)}if(v=r.child,!cp(r,y)){var A=v.memoizedProps;if(l=l.compare,l=l!==null?l:bl,l(A,c)&&r.ref===o.ref)return ur(r,o,y)}return o.flags|=1,r=ir(v,c),r.ref=o.ref,r.return=o,o.child=r}function cv(r,o,l,c,y){if(r!==null){var v=r.memoizedProps;if(bl(v,c)&&r.ref===o.ref)if(xt=!1,o.pendingProps=c=v,cp(r,y))(r.flags&131072)!==0&&(xt=!0);else return o.lanes=r.lanes,ur(r,o,y)}return ip(r,o,l,c,y)}function fv(r,o,l,c){var y=c.children,v=r!==null?r.memoizedState:null;if(r===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((o.flags&128)!==0){if(v=v!==null?v.baseLanes|l:l,r!==null){for(c=o.child=r.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~v}else c=0,o.child=null;return dv(r,o,v,l,c)}if((l&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},r!==null&&Uc(o,v!==null?v.cachePool:null),v!==null?p_(o,v):Ph(),m_(o);else return c=o.lanes=536870912,dv(r,o,v!==null?v.baseLanes|l:l,l,c)}else v!==null?(Uc(o,v.cachePool),p_(o,v),Qr(),o.memoizedState=null):(r!==null&&Uc(o,null),Ph(),Qr());return Wt(r,o,y,l),o.child}function Gl(r,o){return r!==null&&r.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function dv(r,o,l,c,y){var v=Rh();return v=v===null?null:{parent:bt._currentValue,pool:v},o.memoizedState={baseLanes:l,cachePool:v},r!==null&&Uc(o,null),Ph(),m_(o),r!==null&&Xo(r,o,c,!0),o.childLanes=y,null}function Xc(r,o){return o=jc({mode:o.mode,children:o.children},r.mode),o.ref=r.ref,r.child=o,o.return=r,o}function hv(r,o,l){return oo(o,r.child,null,l),r=Xc(o,o.pendingProps),r.flags|=2,bn(o),o.memoizedState=null,r}function OR(r,o,l){var c=o.pendingProps,y=(o.flags&128)!==0;if(o.flags&=-129,r===null){if(He){if(c.mode==="hidden")return r=Xc(o,c),o.lanes=536870912,Gl(null,r);if(Uh(o),(r=lt)?(r=IE(r,Gn),r=r!==null&&r.data==="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:Br!==null?{id:Fi,overflow:qi}:null,retryLane:536870912,hydrationErrors:null},l=Wy(r),l.return=o,o.child=l,$t=o,lt=null)):r=null,r===null)throw Gr(o);return o.lanes=536870912,null}return Xc(o,c)}var v=r.memoizedState;if(v!==null){var A=v.dehydrated;if(Uh(o),y)if(o.flags&256)o.flags&=-257,o=hv(r,o,l);else if(o.memoizedState!==null)o.child=r.child,o.flags|=128,o=null;else throw Error(i(558));else if(xt||Xo(r,o,l,!1),y=(l&r.childLanes)!==0,xt||y){if(c=st,c!==null&&(A=cl(c,l),A!==0&&A!==v.retryLane))throw v.retryLane=A,Zs(r,A),En(c,r,A),np;uf(),o=hv(r,o,l)}else r=v.treeContext,lt=Jn(A.nextSibling),$t=o,He=!0,Hr=null,Gn=!1,r!==null&&jy(o,r),o=Xc(o,c),o.flags|=4096;return o}return r=ir(r.child,{mode:c.mode,children:c.children}),r.ref=o.ref,o.child=r,r.return=o,r}function Zc(r,o){var l=o.ref;if(l===null)r!==null&&r.ref!==null&&(o.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(r===null||r.ref!==l)&&(o.flags|=4194816)}}function ip(r,o,l,c,y){return no(o),l=kh(r,o,l,c,void 0,y),c=Oh(),r!==null&&!xt?(Fh(r,o,y),ur(r,o,y)):(He&&c&&_h(o),o.flags|=1,Wt(r,o,l,y),o.child)}function pv(r,o,l,c,y,v){return no(o),o.updateQueue=null,l=y_(o,c,l,y),g_(r),c=Oh(),r!==null&&!xt?(Fh(r,o,v),ur(r,o,v)):(He&&c&&_h(o),o.flags|=1,Wt(r,o,l,v),o.child)}function mv(r,o,l,c,y){if(no(o),o.stateNode===null){var v=Yo,A=l.contextType;typeof A=="object"&&A!==null&&(v=Qt(A)),v=new l(c,v),o.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=ep,o.stateNode=v,v._reactInternals=o,v=o.stateNode,v.props=c,v.state=o.memoizedState,v.refs={},Nh(o),A=l.contextType,v.context=typeof A=="object"&&A!==null?Qt(A):Yo,v.state=o.memoizedState,A=l.getDerivedStateFromProps,typeof A=="function"&&(jh(o,l,A,c),v.state=o.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(A=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),A!==v.state&&ep.enqueueReplaceState(v,v.state,null),Ol(o,c,v,y),kl(),v.state=o.memoizedState),typeof v.componentDidMount=="function"&&(o.flags|=4194308),c=!0}else if(r===null){v=o.stateNode;var R=o.memoizedProps,L=lo(l,R);v.props=L;var Y=v.context,te=l.contextType;A=Yo,typeof te=="object"&&te!==null&&(A=Qt(te));var ie=l.getDerivedStateFromProps;te=typeof ie=="function"||typeof v.getSnapshotBeforeUpdate=="function",R=o.pendingProps!==R,te||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(R||Y!==A)&&tv(o,v,c,A),Jr=!1;var $=o.memoizedState;v.state=$,Ol(o,c,v,y),kl(),Y=o.memoizedState,R||$!==Y||Jr?(typeof ie=="function"&&(jh(o,l,ie,c),Y=o.memoizedState),(L=Jr||ev(o,l,L,c,$,Y,A))?(te||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(o.flags|=4194308)):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=c,o.memoizedState=Y),v.props=c,v.state=Y,v.context=A,c=L):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),c=!1)}else{v=o.stateNode,xh(r,o),A=o.memoizedProps,te=lo(l,A),v.props=te,ie=o.pendingProps,$=v.context,Y=l.contextType,L=Yo,typeof Y=="object"&&Y!==null&&(L=Qt(Y)),R=l.getDerivedStateFromProps,(Y=typeof R=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==ie||$!==L)&&tv(o,v,c,L),Jr=!1,$=o.memoizedState,v.state=$,Ol(o,c,v,y),kl();var j=o.memoizedState;A!==ie||$!==j||Jr||r!==null&&r.dependencies!==null&&Pc(r.dependencies)?(typeof R=="function"&&(jh(o,l,R,c),j=o.memoizedState),(te=Jr||ev(o,l,te,c,$,j,L)||r!==null&&r.dependencies!==null&&Pc(r.dependencies))?(Y||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,j,L),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,j,L)),typeof v.componentDidUpdate=="function"&&(o.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof v.componentDidUpdate!="function"||A===r.memoizedProps&&$===r.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===r.memoizedProps&&$===r.memoizedState||(o.flags|=1024),o.memoizedProps=c,o.memoizedState=j),v.props=c,v.state=j,v.context=L,c=te):(typeof v.componentDidUpdate!="function"||A===r.memoizedProps&&$===r.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===r.memoizedProps&&$===r.memoizedState||(o.flags|=1024),c=!1)}return v=c,Zc(r,o),c=(o.flags&128)!==0,v||c?(v=o.stateNode,l=c&&typeof l.getDerivedStateFromError!="function"?null:v.render(),o.flags|=1,r!==null&&c?(o.child=oo(o,r.child,null,y),o.child=oo(o,null,l,y)):Wt(r,o,l,y),o.memoizedState=v.state,r=o.child):r=ur(r,o,y),r}function gv(r,o,l,c){return eo(),o.flags|=256,Wt(r,o,l,c),o.child}var rp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function sp(r){return{baseLanes:r,cachePool:s_()}}function op(r,o,l){return r=r!==null?r.childLanes&~l:0,o&&(r|=xn),r}function yv(r,o,l){var c=o.pendingProps,y=!1,v=(o.flags&128)!==0,A;if((A=v)||(A=r!==null&&r.memoizedState===null?!1:(Et.current&2)!==0),A&&(y=!0,o.flags&=-129),A=(o.flags&32)!==0,o.flags&=-33,r===null){if(He){if(y?$r(o):Qr(),(r=lt)?(r=IE(r,Gn),r=r!==null&&r.data!=="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:Br!==null?{id:Fi,overflow:qi}:null,retryLane:536870912,hydrationErrors:null},l=Wy(r),l.return=o,o.child=l,$t=o,lt=null)):r=null,r===null)throw Gr(o);return Hp(r)?o.lanes=32:o.lanes=536870912,null}var R=c.children;return c=c.fallback,y?(Qr(),y=o.mode,R=jc({mode:"hidden",children:R},y),c=js(c,y,l,null),R.return=o,c.return=o,R.sibling=c,o.child=R,c=o.child,c.memoizedState=sp(l),c.childLanes=op(r,A,l),o.memoizedState=rp,Gl(null,c)):($r(o),ap(o,R))}var L=r.memoizedState;if(L!==null&&(R=L.dehydrated,R!==null)){if(v)o.flags&256?($r(o),o.flags&=-257,o=lp(r,o,l)):o.memoizedState!==null?(Qr(),o.child=r.child,o.flags|=128,o=null):(Qr(),R=c.fallback,y=o.mode,c=jc({mode:"visible",children:c.children},y),R=js(R,y,l,null),R.flags|=2,c.return=o,R.return=o,c.sibling=R,o.child=c,oo(o,r.child,null,l),c=o.child,c.memoizedState=sp(l),c.childLanes=op(r,A,l),o.memoizedState=rp,o=Gl(null,c));else if($r(o),Hp(R)){if(A=R.nextSibling&&R.nextSibling.dataset,A)var Y=A.dgst;A=Y,c=Error(i(419)),c.stack="",c.digest=A,Ml({value:c,source:null,stack:null}),o=lp(r,o,l)}else if(xt||Xo(r,o,l,!1),A=(l&r.childLanes)!==0,xt||A){if(A=st,A!==null&&(c=cl(A,l),c!==0&&c!==L.retryLane))throw L.retryLane=c,Zs(r,c),En(A,r,c),np;Bp(R)||uf(),o=lp(r,o,l)}else Bp(R)?(o.flags|=192,o.child=r.child,o=null):(r=L.treeContext,lt=Jn(R.nextSibling),$t=o,He=!0,Hr=null,Gn=!1,r!==null&&jy(o,r),o=ap(o,c.children),o.flags|=4096);return o}return y?(Qr(),R=c.fallback,y=o.mode,L=r.child,Y=L.sibling,c=ir(L,{mode:"hidden",children:c.children}),c.subtreeFlags=L.subtreeFlags&65011712,Y!==null?R=ir(Y,R):(R=js(R,y,l,null),R.flags|=2),R.return=o,c.return=o,c.sibling=R,o.child=c,Gl(null,c),c=o.child,R=r.child.memoizedState,R===null?R=sp(l):(y=R.cachePool,y!==null?(L=bt._currentValue,y=y.parent!==L?{parent:L,pool:L}:y):y=s_(),R={baseLanes:R.baseLanes|l,cachePool:y}),c.memoizedState=R,c.childLanes=op(r,A,l),o.memoizedState=rp,Gl(r.child,c)):($r(o),l=r.child,r=l.sibling,l=ir(l,{mode:"visible",children:c.children}),l.return=o,l.sibling=null,r!==null&&(A=o.deletions,A===null?(o.deletions=[r],o.flags|=16):A.push(r)),o.child=l,o.memoizedState=null,l)}function ap(r,o){return o=jc({mode:"visible",children:o},r.mode),o.return=r,r.child=o}function jc(r,o){return r=wn(22,r,null,o),r.lanes=0,r}function lp(r,o,l){return oo(o,r.child,null,l),r=ap(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function _v(r,o,l){r.lanes|=o;var c=r.alternate;c!==null&&(c.lanes|=o),Ah(r.return,o,l)}function up(r,o,l,c,y,v){var A=r.memoizedState;A===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:c,tail:l,tailMode:y,treeForkCount:v}:(A.isBackwards=o,A.rendering=null,A.renderingStartTime=0,A.last=c,A.tail=l,A.tailMode=y,A.treeForkCount=v)}function vv(r,o,l){var c=o.pendingProps,y=c.revealOrder,v=c.tail;c=c.children;var A=Et.current,R=(A&2)!==0;if(R?(A=A&1|2,o.flags|=128):A&=1,fe(Et,A),Wt(r,o,c,l),c=He?xl:0,!R&&r!==null&&(r.flags&128)!==0)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&_v(r,l,o);else if(r.tag===19)_v(r,l,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(y){case"forwards":for(l=o.child,y=null;l!==null;)r=l.alternate,r!==null&&Bc(r)===null&&(y=l),l=l.sibling;l=y,l===null?(y=o.child,o.child=null):(y=l.sibling,l.sibling=null),up(o,!1,y,l,v,c);break;case"backwards":case"unstable_legacy-backwards":for(l=null,y=o.child,o.child=null;y!==null;){if(r=y.alternate,r!==null&&Bc(r)===null){o.child=y;break}r=y.sibling,y.sibling=l,l=y,y=r}up(o,!0,l,null,v,c);break;case"together":up(o,!1,null,null,void 0,c);break;default:o.memoizedState=null}return o.child}function ur(r,o,l){if(r!==null&&(o.dependencies=r.dependencies),Zr|=o.lanes,(l&o.childLanes)===0)if(r!==null){if(Xo(r,o,l,!1),(l&o.childLanes)===0)return null}else return null;if(r!==null&&o.child!==r.child)throw Error(i(153));if(o.child!==null){for(r=o.child,l=ir(r,r.pendingProps),o.child=l,l.return=o;r.sibling!==null;)r=r.sibling,l=l.sibling=ir(r,r.pendingProps),l.return=o;l.sibling=null}return o.child}function cp(r,o){return(r.lanes&o)!==0?!0:(r=r.dependencies,!!(r!==null&&Pc(r)))}function FR(r,o,l){switch(o.tag){case 3:Lt(o,o.stateNode.containerInfo),zr(o,bt,r.memoizedState.cache),eo();break;case 27:case 5:Vs(o);break;case 4:Lt(o,o.stateNode.containerInfo);break;case 10:zr(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Uh(o),null;break;case 13:var c=o.memoizedState;if(c!==null)return c.dehydrated!==null?($r(o),o.flags|=128,null):(l&o.child.childLanes)!==0?yv(r,o,l):($r(o),r=ur(r,o,l),r!==null?r.sibling:null);$r(o);break;case 19:var y=(r.flags&128)!==0;if(c=(l&o.childLanes)!==0,c||(Xo(r,o,l,!1),c=(l&o.childLanes)!==0),y){if(c)return vv(r,o,l);o.flags|=128}if(y=o.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),fe(Et,Et.current),c)break;return null;case 22:return o.lanes=0,fv(r,o,l,o.pendingProps);case 24:zr(o,bt,r.memoizedState.cache)}return ur(r,o,l)}function Ev(r,o,l){if(r!==null)if(r.memoizedProps!==o.pendingProps)xt=!0;else{if(!cp(r,l)&&(o.flags&128)===0)return xt=!1,FR(r,o,l);xt=(r.flags&131072)!==0}else xt=!1,He&&(o.flags&1048576)!==0&&Zy(o,xl,o.index);switch(o.lanes=0,o.tag){case 16:e:{var c=o.pendingProps;if(r=ro(o.elementType),o.type=r,typeof r=="function")mh(r)?(c=lo(r,c),o.tag=1,o=mv(null,o,r,c,l)):(o.tag=0,o=ip(null,o,r,c,l));else{if(r!=null){var y=r.$$typeof;if(y===ae){o.tag=11,o=lv(null,o,r,c,l);break e}else if(y===D){o.tag=14,o=uv(null,o,r,c,l);break e}}throw o=Me(r)||r,Error(i(306,o,""))}}return o;case 0:return ip(r,o,o.type,o.pendingProps,l);case 1:return c=o.type,y=lo(c,o.pendingProps),mv(r,o,c,y,l);case 3:e:{if(Lt(o,o.stateNode.containerInfo),r===null)throw Error(i(387));c=o.pendingProps;var v=o.memoizedState;y=v.element,xh(r,o),Ol(o,c,null,l);var A=o.memoizedState;if(c=A.cache,zr(o,bt,c),c!==v.cache&&Ch(o,[bt],l,!0),kl(),c=A.element,v.isDehydrated)if(v={element:c,isDehydrated:!1,cache:A.cache},o.updateQueue.baseState=v,o.memoizedState=v,o.flags&256){o=gv(r,o,c,l);break e}else if(c!==y){y=qn(Error(i(424)),o),Ml(y),o=gv(r,o,c,l);break e}else{switch(r=o.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(lt=Jn(r.firstChild),$t=o,He=!0,Hr=null,Gn=!0,l=f_(o,null,c,l),o.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(eo(),c===y){o=ur(r,o,l);break e}Wt(r,o,c,l)}o=o.child}return o;case 26:return Zc(r,o),r===null?(l=ME(o.type,null,o.pendingProps,null))?o.memoizedState=l:He||(l=o.type,r=o.pendingProps,c=gf(De.current).createElement(l),c[It]=o,c[Bt]=r,Xt(c,l,r),wt(c),o.stateNode=c):o.memoizedState=ME(o.type,r.memoizedProps,o.pendingProps,r.memoizedState),null;case 27:return Vs(o),r===null&&He&&(c=o.stateNode=bE(o.type,o.pendingProps,De.current),$t=o,Gn=!0,y=lt,is(o.type)?(Gp=y,lt=Jn(c.firstChild)):lt=y),Wt(r,o,o.pendingProps.children,l),Zc(r,o),r===null&&(o.flags|=4194304),o.child;case 5:return r===null&&He&&((y=c=lt)&&(c=mb(c,o.type,o.pendingProps,Gn),c!==null?(o.stateNode=c,$t=o,lt=Jn(c.firstChild),Gn=!1,y=!0):y=!1),y||Gr(o)),Vs(o),y=o.type,v=o.pendingProps,A=r!==null?r.memoizedProps:null,c=v.children,Op(y,v)?c=null:A!==null&&Op(y,A)&&(o.flags|=32),o.memoizedState!==null&&(y=kh(r,o,xR,null,null,l),ru._currentValue=y),Zc(r,o),Wt(r,o,c,l),o.child;case 6:return r===null&&He&&((r=l=lt)&&(l=gb(l,o.pendingProps,Gn),l!==null?(o.stateNode=l,$t=o,lt=null,r=!0):r=!1),r||Gr(o)),null;case 13:return yv(r,o,l);case 4:return Lt(o,o.stateNode.containerInfo),c=o.pendingProps,r===null?o.child=oo(o,null,c,l):Wt(r,o,c,l),o.child;case 11:return lv(r,o,o.type,o.pendingProps,l);case 7:return Wt(r,o,o.pendingProps,l),o.child;case 8:return Wt(r,o,o.pendingProps.children,l),o.child;case 12:return Wt(r,o,o.pendingProps.children,l),o.child;case 10:return c=o.pendingProps,zr(o,o.type,c.value),Wt(r,o,c.children,l),o.child;case 9:return y=o.type._context,c=o.pendingProps.children,no(o),y=Qt(y),c=c(y),o.flags|=1,Wt(r,o,c,l),o.child;case 14:return uv(r,o,o.type,o.pendingProps,l);case 15:return cv(r,o,o.type,o.pendingProps,l);case 19:return vv(r,o,l);case 31:return OR(r,o,l);case 22:return fv(r,o,l,o.pendingProps);case 24:return no(o),c=Qt(bt),r===null?(y=Rh(),y===null&&(y=st,v=Ih(),y.pooledCache=v,v.refCount++,v!==null&&(y.pooledCacheLanes|=l),y=v),o.memoizedState={parent:c,cache:y},Nh(o),zr(o,bt,y)):((r.lanes&l)!==0&&(xh(r,o),Ol(o,null,null,l),kl()),y=r.memoizedState,v=o.memoizedState,y.parent!==c?(y={parent:c,cache:c},o.memoizedState=y,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=y),zr(o,bt,c)):(c=v.cache,zr(o,bt,c),c!==y.cache&&Ch(o,[bt],l,!0))),Wt(r,o,o.pendingProps.children,l),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function cr(r){r.flags|=4}function fp(r,o,l,c,y){if((o=(r.mode&32)!==0)&&(o=!1),o){if(r.flags|=16777216,(y&335544128)===y)if(r.stateNode.complete)r.flags|=8192;else if(Yv())r.flags|=8192;else throw so=kc,bh}else r.flags&=-16777217}function Tv(r,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!LE(o))if(Yv())r.flags|=8192;else throw so=kc,bh}function ef(r,o){o!==null&&(r.flags|=4),r.flags&16384&&(o=r.tag!==22?oc():536870912,r.lanes|=o,ua|=o)}function zl(r,o){if(!He)switch(r.tailMode){case"hidden":o=r.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?r.tail=null:l.sibling=null;break;case"collapsed":l=r.tail;for(var c=null;l!==null;)l.alternate!==null&&(c=l),l=l.sibling;c===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:c.sibling=null}}function ut(r){var o=r.alternate!==null&&r.alternate.child===r.child,l=0,c=0;if(o)for(var y=r.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=r,y=y.sibling;else for(y=r.child;y!==null;)l|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=r,y=y.sibling;return r.subtreeFlags|=c,r.childLanes=l,o}function qR(r,o,l){var c=o.pendingProps;switch(vh(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(o),null;case 1:return ut(o),null;case 3:return l=o.stateNode,c=null,r!==null&&(c=r.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),or(bt),ft(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(r===null||r.child===null)&&(Wo(o)?cr(o):r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Th())),ut(o),null;case 26:var y=o.type,v=o.memoizedState;return r===null?(cr(o),v!==null?(ut(o),Tv(o,v)):(ut(o),fp(o,y,null,c,l))):v?v!==r.memoizedState?(cr(o),ut(o),Tv(o,v)):(ut(o),o.flags&=-16777217):(r=r.memoizedProps,r!==c&&cr(o),ut(o),fp(o,y,r,c,l)),null;case 27:if(bo(o),l=De.current,y=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==c&&cr(o);else{if(!c){if(o.stateNode===null)throw Error(i(166));return ut(o),null}r=me.current,Wo(o)?e_(o):(r=bE(y,c,l),o.stateNode=r,cr(o))}return ut(o),null;case 5:if(bo(o),y=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==c&&cr(o);else{if(!c){if(o.stateNode===null)throw Error(i(166));return ut(o),null}if(v=me.current,Wo(o))e_(o);else{var A=gf(De.current);switch(v){case 1:v=A.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:v=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":v=A.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":v=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":v=A.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof c.is=="string"?A.createElement("select",{is:c.is}):A.createElement("select"),c.multiple?v.multiple=!0:c.size&&(v.size=c.size);break;default:v=typeof c.is=="string"?A.createElement(y,{is:c.is}):A.createElement(y)}}v[It]=o,v[Bt]=c;e:for(A=o.child;A!==null;){if(A.tag===5||A.tag===6)v.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===o)break e;for(;A.sibling===null;){if(A.return===null||A.return===o)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}o.stateNode=v;e:switch(Xt(v,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&cr(o)}}return ut(o),fp(o,o.type,r===null?null:r.memoizedProps,o.pendingProps,l),null;case 6:if(r&&o.stateNode!=null)r.memoizedProps!==c&&cr(o);else{if(typeof c!="string"&&o.stateNode===null)throw Error(i(166));if(r=De.current,Wo(o)){if(r=o.stateNode,l=o.memoizedProps,c=null,y=$t,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}r[It]=o,r=!!(r.nodeValue===l||c!==null&&c.suppressHydrationWarning===!0||yE(r.nodeValue,l)),r||Gr(o,!0)}else r=gf(r).createTextNode(c),r[It]=o,o.stateNode=r}return ut(o),null;case 31:if(l=o.memoizedState,r===null||r.memoizedState!==null){if(c=Wo(o),l!==null){if(r===null){if(!c)throw Error(i(318));if(r=o.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[It]=o}else eo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ut(o),r=!1}else l=Th(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=l),r=!0;if(!r)return o.flags&256?(bn(o),o):(bn(o),null);if((o.flags&128)!==0)throw Error(i(558))}return ut(o),null;case 13:if(c=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(y=Wo(o),c!==null&&c.dehydrated!==null){if(r===null){if(!y)throw Error(i(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(i(317));y[It]=o}else eo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ut(o),y=!1}else y=Th(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=y),y=!0;if(!y)return o.flags&256?(bn(o),o):(bn(o),null)}return bn(o),(o.flags&128)!==0?(o.lanes=l,o):(l=c!==null,r=r!==null&&r.memoizedState!==null,l&&(c=o.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),v=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==y&&(c.flags|=2048)),l!==r&&l&&(o.child.flags|=8192),ef(o,o.updateQueue),ut(o),null);case 4:return ft(),r===null&&Pp(o.stateNode.containerInfo),ut(o),null;case 10:return or(o.type),ut(o),null;case 19:if(se(Et),c=o.memoizedState,c===null)return ut(o),null;if(y=(o.flags&128)!==0,v=c.rendering,v===null)if(y)zl(c,!1);else{if(yt!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(v=Bc(r),v!==null){for(o.flags|=128,zl(c,!1),r=v.updateQueue,o.updateQueue=r,ef(o,r),o.subtreeFlags=0,r=l,l=o.child;l!==null;)Qy(l,r),l=l.sibling;return fe(Et,Et.current&1|2),He&&rr(o,c.treeForkCount),o.child}r=r.sibling}c.tail!==null&&un()>of&&(o.flags|=128,y=!0,zl(c,!1),o.lanes=4194304)}else{if(!y)if(r=Bc(v),r!==null){if(o.flags|=128,y=!0,r=r.updateQueue,o.updateQueue=r,ef(o,r),zl(c,!0),c.tail===null&&c.tailMode==="hidden"&&!v.alternate&&!He)return ut(o),null}else 2*un()-c.renderingStartTime>of&&l!==536870912&&(o.flags|=128,y=!0,zl(c,!1),o.lanes=4194304);c.isBackwards?(v.sibling=o.child,o.child=v):(r=c.last,r!==null?r.sibling=v:o.child=v,c.last=v)}return c.tail!==null?(r=c.tail,c.rendering=r,c.tail=r.sibling,c.renderingStartTime=un(),r.sibling=null,l=Et.current,fe(Et,y?l&1|2:l&1),He&&rr(o,c.treeForkCount),r):(ut(o),null);case 22:case 23:return bn(o),Vh(),c=o.memoizedState!==null,r!==null?r.memoizedState!==null!==c&&(o.flags|=8192):c&&(o.flags|=8192),c?(l&536870912)!==0&&(o.flags&128)===0&&(ut(o),o.subtreeFlags&6&&(o.flags|=8192)):ut(o),l=o.updateQueue,l!==null&&ef(o,l.retryQueue),l=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),c=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),c!==l&&(o.flags|=2048),r!==null&&se(io),null;case 24:return l=null,r!==null&&(l=r.memoizedState.cache),o.memoizedState.cache!==l&&(o.flags|=2048),or(bt),ut(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function BR(r,o){switch(vh(o),o.tag){case 1:return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return or(bt),ft(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 26:case 27:case 5:return bo(o),null;case 31:if(o.memoizedState!==null){if(bn(o),o.alternate===null)throw Error(i(340));eo()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 13:if(bn(o),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(i(340));eo()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return se(Et),null;case 4:return ft(),null;case 10:return or(o.type),null;case 22:case 23:return bn(o),Vh(),r!==null&&se(io),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 24:return or(bt),null;case 25:return null;default:return null}}function Sv(r,o){switch(vh(o),o.tag){case 3:or(bt),ft();break;case 26:case 27:case 5:bo(o);break;case 4:ft();break;case 31:o.memoizedState!==null&&bn(o);break;case 13:bn(o);break;case 19:se(Et);break;case 10:or(o.type);break;case 22:case 23:bn(o),Vh(),r!==null&&se(io);break;case 24:or(bt)}}function Jl(r,o){try{var l=o.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var y=c.next;l=y;do{if((l.tag&r)===r){c=void 0;var v=l.create,A=l.inst;c=v(),A.destroy=c}l=l.next}while(l!==y)}}catch(R){et(o,o.return,R)}}function Wr(r,o,l){try{var c=o.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var v=y.next;c=v;do{if((c.tag&r)===r){var A=c.inst,R=A.destroy;if(R!==void 0){A.destroy=void 0,y=o;var L=l,Y=R;try{Y()}catch(te){et(y,L,te)}}}c=c.next}while(c!==v)}}catch(te){et(o,o.return,te)}}function Av(r){var o=r.updateQueue;if(o!==null){var l=r.stateNode;try{h_(o,l)}catch(c){et(r,r.return,c)}}}function Cv(r,o,l){l.props=lo(r.type,r.memoizedProps),l.state=r.memoizedState;try{l.componentWillUnmount()}catch(c){et(r,o,c)}}function Kl(r,o){try{var l=r.ref;if(l!==null){switch(r.tag){case 26:case 27:case 5:var c=r.stateNode;break;case 30:c=r.stateNode;break;default:c=r.stateNode}typeof l=="function"?r.refCleanup=l(c):l.current=c}}catch(y){et(r,o,y)}}function Bi(r,o){var l=r.ref,c=r.refCleanup;if(l!==null)if(typeof c=="function")try{c()}catch(y){et(r,o,y)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(y){et(r,o,y)}else l.current=null}function Iv(r){var o=r.type,l=r.memoizedProps,c=r.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":l.autoFocus&&c.focus();break e;case"img":l.src?c.src=l.src:l.srcSet&&(c.srcset=l.srcSet)}}catch(y){et(r,r.return,y)}}function dp(r,o,l){try{var c=r.stateNode;ub(c,r.type,l,o),c[Bt]=o}catch(y){et(r,r.return,y)}}function wv(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&is(r.type)||r.tag===4}function hp(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||wv(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&is(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function pp(r,o,l){var c=r.tag;if(c===5||c===6)r=r.stateNode,o?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(r,o):(o=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,o.appendChild(r),l=l._reactRootContainer,l!=null||o.onclick!==null||(o.onclick=ii));else if(c!==4&&(c===27&&is(r.type)&&(l=r.stateNode,o=null),r=r.child,r!==null))for(pp(r,o,l),r=r.sibling;r!==null;)pp(r,o,l),r=r.sibling}function tf(r,o,l){var c=r.tag;if(c===5||c===6)r=r.stateNode,o?l.insertBefore(r,o):l.appendChild(r);else if(c!==4&&(c===27&&is(r.type)&&(l=r.stateNode),r=r.child,r!==null))for(tf(r,o,l),r=r.sibling;r!==null;)tf(r,o,l),r=r.sibling}function Rv(r){var o=r.stateNode,l=r.memoizedProps;try{for(var c=r.type,y=o.attributes;y.length;)o.removeAttributeNode(y[0]);Xt(o,c,l),o[It]=r,o[Bt]=l}catch(v){et(r,r.return,v)}}var fr=!1,Mt=!1,mp=!1,bv=typeof WeakSet=="function"?WeakSet:Set,Gt=null;function HR(r,o){if(r=r.containerInfo,Lp=Af,r=qy(r),lh(r)){if("selectionStart"in r)var l={start:r.selectionStart,end:r.selectionEnd};else e:{l=(l=r.ownerDocument)&&l.defaultView||window;var c=l.getSelection&&l.getSelection();if(c&&c.rangeCount!==0){l=c.anchorNode;var y=c.anchorOffset,v=c.focusNode;c=c.focusOffset;try{l.nodeType,v.nodeType}catch{l=null;break e}var A=0,R=-1,L=-1,Y=0,te=0,ie=r,$=null;t:for(;;){for(var j;ie!==l||y!==0&&ie.nodeType!==3||(R=A+y),ie!==v||c!==0&&ie.nodeType!==3||(L=A+c),ie.nodeType===3&&(A+=ie.nodeValue.length),(j=ie.firstChild)!==null;)$=ie,ie=j;for(;;){if(ie===r)break t;if($===l&&++Y===y&&(R=A),$===v&&++te===c&&(L=A),(j=ie.nextSibling)!==null)break;ie=$,$=ie.parentNode}ie=j}l=R===-1||L===-1?null:{start:R,end:L}}else l=null}l=l||{start:0,end:0}}else l=null;for(kp={focusedElem:r,selectionRange:l},Af=!1,Gt=o;Gt!==null;)if(o=Gt,r=o.child,(o.subtreeFlags&1028)!==0&&r!==null)r.return=o,Gt=r;else for(;Gt!==null;){switch(o=Gt,v=o.alternate,r=o.flags,o.tag){case 0:if((r&4)!==0&&(r=o.updateQueue,r=r!==null?r.events:null,r!==null))for(l=0;l<r.length;l++)y=r[l],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&v!==null){r=void 0,l=o,y=v.memoizedProps,v=v.memoizedState,c=l.stateNode;try{var ge=lo(l.type,y);r=c.getSnapshotBeforeUpdate(ge,v),c.__reactInternalSnapshotBeforeUpdate=r}catch(Te){et(l,l.return,Te)}}break;case 3:if((r&1024)!==0){if(r=o.stateNode.containerInfo,l=r.nodeType,l===9)qp(r);else if(l===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":qp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=o.sibling,r!==null){r.return=o.return,Gt=r;break}Gt=o.return}}function Nv(r,o,l){var c=l.flags;switch(l.tag){case 0:case 11:case 15:hr(r,l),c&4&&Jl(5,l);break;case 1:if(hr(r,l),c&4)if(r=l.stateNode,o===null)try{r.componentDidMount()}catch(A){et(l,l.return,A)}else{var y=lo(l.type,o.memoizedProps);o=o.memoizedState;try{r.componentDidUpdate(y,o,r.__reactInternalSnapshotBeforeUpdate)}catch(A){et(l,l.return,A)}}c&64&&Av(l),c&512&&Kl(l,l.return);break;case 3:if(hr(r,l),c&64&&(r=l.updateQueue,r!==null)){if(o=null,l.child!==null)switch(l.child.tag){case 27:case 5:o=l.child.stateNode;break;case 1:o=l.child.stateNode}try{h_(r,o)}catch(A){et(l,l.return,A)}}break;case 27:o===null&&c&4&&Rv(l);case 26:case 5:hr(r,l),o===null&&c&4&&Iv(l),c&512&&Kl(l,l.return);break;case 12:hr(r,l);break;case 31:hr(r,l),c&4&&Dv(r,l);break;case 13:hr(r,l),c&4&&Pv(r,l),c&64&&(r=l.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(l=XR.bind(null,l),yb(r,l))));break;case 22:if(c=l.memoizedState!==null||fr,!c){o=o!==null&&o.memoizedState!==null||Mt,y=fr;var v=Mt;fr=c,(Mt=o)&&!v?pr(r,l,(l.subtreeFlags&8772)!==0):hr(r,l),fr=y,Mt=v}break;case 30:break;default:hr(r,l)}}function xv(r){var o=r.alternate;o!==null&&(r.alternate=null,xv(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&Po(o)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var ht=null,gn=!1;function dr(r,o,l){for(l=l.child;l!==null;)Mv(r,o,l),l=l.sibling}function Mv(r,o,l){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(jn,l)}catch{}switch(l.tag){case 26:Mt||Bi(l,o),dr(r,o,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Mt||Bi(l,o);var c=ht,y=gn;is(l.type)&&(ht=l.stateNode,gn=!1),dr(r,o,l),tu(l.stateNode),ht=c,gn=y;break;case 5:Mt||Bi(l,o);case 6:if(c=ht,y=gn,ht=null,dr(r,o,l),ht=c,gn=y,ht!==null)if(gn)try{(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).removeChild(l.stateNode)}catch(v){et(l,o,v)}else try{ht.removeChild(l.stateNode)}catch(v){et(l,o,v)}break;case 18:ht!==null&&(gn?(r=ht,AE(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,l.stateNode),ya(r)):AE(ht,l.stateNode));break;case 4:c=ht,y=gn,ht=l.stateNode.containerInfo,gn=!0,dr(r,o,l),ht=c,gn=y;break;case 0:case 11:case 14:case 15:Wr(2,l,o),Mt||Wr(4,l,o),dr(r,o,l);break;case 1:Mt||(Bi(l,o),c=l.stateNode,typeof c.componentWillUnmount=="function"&&Cv(l,o,c)),dr(r,o,l);break;case 21:dr(r,o,l);break;case 22:Mt=(c=Mt)||l.memoizedState!==null,dr(r,o,l),Mt=c;break;default:dr(r,o,l)}}function Dv(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{ya(r)}catch(l){et(o,o.return,l)}}}function Pv(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{ya(r)}catch(l){et(o,o.return,l)}}function GR(r){switch(r.tag){case 31:case 13:case 19:var o=r.stateNode;return o===null&&(o=r.stateNode=new bv),o;case 22:return r=r.stateNode,o=r._retryCache,o===null&&(o=r._retryCache=new bv),o;default:throw Error(i(435,r.tag))}}function nf(r,o){var l=GR(r);o.forEach(function(c){if(!l.has(c)){l.add(c);var y=ZR.bind(null,r,c);c.then(y,y)}})}function yn(r,o){var l=o.deletions;if(l!==null)for(var c=0;c<l.length;c++){var y=l[c],v=r,A=o,R=A;e:for(;R!==null;){switch(R.tag){case 27:if(is(R.type)){ht=R.stateNode,gn=!1;break e}break;case 5:ht=R.stateNode,gn=!1;break e;case 3:case 4:ht=R.stateNode.containerInfo,gn=!0;break e}R=R.return}if(ht===null)throw Error(i(160));Mv(v,A,y),ht=null,gn=!1,v=y.alternate,v!==null&&(v.return=null),y.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)Vv(o,r),o=o.sibling}var ui=null;function Vv(r,o){var l=r.alternate,c=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:yn(o,r),_n(r),c&4&&(Wr(3,r,r.return),Jl(3,r),Wr(5,r,r.return));break;case 1:yn(o,r),_n(r),c&512&&(Mt||l===null||Bi(l,l.return)),c&64&&fr&&(r=r.updateQueue,r!==null&&(c=r.callbacks,c!==null&&(l=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=l===null?c:l.concat(c))));break;case 26:var y=ui;if(yn(o,r),_n(r),c&512&&(Mt||l===null||Bi(l,l.return)),c&4){var v=l!==null?l.memoizedState:null;if(c=r.memoizedState,l===null)if(c===null)if(r.stateNode===null){e:{c=r.type,l=r.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":v=y.getElementsByTagName("title")[0],(!v||v[Ri]||v[It]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=y.createElement(c),y.head.insertBefore(v,y.querySelector("head > title"))),Xt(v,c,l),v[It]=r,wt(v),c=v;break e;case"link":var A=VE("link","href",y).get(c+(l.href||""));if(A){for(var R=0;R<A.length;R++)if(v=A[R],v.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&v.getAttribute("rel")===(l.rel==null?null:l.rel)&&v.getAttribute("title")===(l.title==null?null:l.title)&&v.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){A.splice(R,1);break t}}v=y.createElement(c),Xt(v,c,l),y.head.appendChild(v);break;case"meta":if(A=VE("meta","content",y).get(c+(l.content||""))){for(R=0;R<A.length;R++)if(v=A[R],v.getAttribute("content")===(l.content==null?null:""+l.content)&&v.getAttribute("name")===(l.name==null?null:l.name)&&v.getAttribute("property")===(l.property==null?null:l.property)&&v.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&v.getAttribute("charset")===(l.charSet==null?null:l.charSet)){A.splice(R,1);break t}}v=y.createElement(c),Xt(v,c,l),y.head.appendChild(v);break;default:throw Error(i(468,c))}v[It]=r,wt(v),c=v}r.stateNode=c}else UE(y,r.type,r.stateNode);else r.stateNode=PE(y,c,r.memoizedProps);else v!==c?(v===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):v.count--,c===null?UE(y,r.type,r.stateNode):PE(y,c,r.memoizedProps)):c===null&&r.stateNode!==null&&dp(r,r.memoizedProps,l.memoizedProps)}break;case 27:yn(o,r),_n(r),c&512&&(Mt||l===null||Bi(l,l.return)),l!==null&&c&4&&dp(r,r.memoizedProps,l.memoizedProps);break;case 5:if(yn(o,r),_n(r),c&512&&(Mt||l===null||Bi(l,l.return)),r.flags&32){y=r.stateNode;try{mn(y,"")}catch(ge){et(r,r.return,ge)}}c&4&&r.stateNode!=null&&(y=r.memoizedProps,dp(r,y,l!==null?l.memoizedProps:y)),c&1024&&(mp=!0);break;case 6:if(yn(o,r),_n(r),c&4){if(r.stateNode===null)throw Error(i(162));c=r.memoizedProps,l=r.stateNode;try{l.nodeValue=c}catch(ge){et(r,r.return,ge)}}break;case 3:if(vf=null,y=ui,ui=yf(o.containerInfo),yn(o,r),ui=y,_n(r),c&4&&l!==null&&l.memoizedState.isDehydrated)try{ya(o.containerInfo)}catch(ge){et(r,r.return,ge)}mp&&(mp=!1,Uv(r));break;case 4:c=ui,ui=yf(r.stateNode.containerInfo),yn(o,r),_n(r),ui=c;break;case 12:yn(o,r),_n(r);break;case 31:yn(o,r),_n(r),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,nf(r,c)));break;case 13:yn(o,r),_n(r),r.child.flags&8192&&r.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(sf=un()),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,nf(r,c)));break;case 22:y=r.memoizedState!==null;var L=l!==null&&l.memoizedState!==null,Y=fr,te=Mt;if(fr=Y||y,Mt=te||L,yn(o,r),Mt=te,fr=Y,_n(r),c&8192)e:for(o=r.stateNode,o._visibility=y?o._visibility&-2:o._visibility|1,y&&(l===null||L||fr||Mt||uo(r)),l=null,o=r;;){if(o.tag===5||o.tag===26){if(l===null){L=l=o;try{if(v=L.stateNode,y)A=v.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{R=L.stateNode;var ie=L.memoizedProps.style,$=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;R.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(ge){et(L,L.return,ge)}}}else if(o.tag===6){if(l===null){L=o;try{L.stateNode.nodeValue=y?"":L.memoizedProps}catch(ge){et(L,L.return,ge)}}}else if(o.tag===18){if(l===null){L=o;try{var j=L.stateNode;y?CE(j,!0):CE(L.stateNode,!1)}catch(ge){et(L,L.return,ge)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===r)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break e;for(;o.sibling===null;){if(o.return===null||o.return===r)break e;l===o&&(l=null),o=o.return}l===o&&(l=null),o.sibling.return=o.return,o=o.sibling}c&4&&(c=r.updateQueue,c!==null&&(l=c.retryQueue,l!==null&&(c.retryQueue=null,nf(r,l))));break;case 19:yn(o,r),_n(r),c&4&&(c=r.updateQueue,c!==null&&(r.updateQueue=null,nf(r,c)));break;case 30:break;case 21:break;default:yn(o,r),_n(r)}}function _n(r){var o=r.flags;if(o&2){try{for(var l,c=r.return;c!==null;){if(wv(c)){l=c;break}c=c.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var y=l.stateNode,v=hp(r);tf(r,v,y);break;case 5:var A=l.stateNode;l.flags&32&&(mn(A,""),l.flags&=-33);var R=hp(r);tf(r,R,A);break;case 3:case 4:var L=l.stateNode.containerInfo,Y=hp(r);pp(r,Y,L);break;default:throw Error(i(161))}}catch(te){et(r,r.return,te)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function Uv(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var o=r;Uv(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),r=r.sibling}}function hr(r,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Nv(r,o.alternate,o),o=o.sibling}function uo(r){for(r=r.child;r!==null;){var o=r;switch(o.tag){case 0:case 11:case 14:case 15:Wr(4,o,o.return),uo(o);break;case 1:Bi(o,o.return);var l=o.stateNode;typeof l.componentWillUnmount=="function"&&Cv(o,o.return,l),uo(o);break;case 27:tu(o.stateNode);case 26:case 5:Bi(o,o.return),uo(o);break;case 22:o.memoizedState===null&&uo(o);break;case 30:uo(o);break;default:uo(o)}r=r.sibling}}function pr(r,o,l){for(l=l&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var c=o.alternate,y=r,v=o,A=v.flags;switch(v.tag){case 0:case 11:case 15:pr(y,v,l),Jl(4,v);break;case 1:if(pr(y,v,l),c=v,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(Y){et(c,c.return,Y)}if(c=v,y=c.updateQueue,y!==null){var R=c.stateNode;try{var L=y.shared.hiddenCallbacks;if(L!==null)for(y.shared.hiddenCallbacks=null,y=0;y<L.length;y++)d_(L[y],R)}catch(Y){et(c,c.return,Y)}}l&&A&64&&Av(v),Kl(v,v.return);break;case 27:Rv(v);case 26:case 5:pr(y,v,l),l&&c===null&&A&4&&Iv(v),Kl(v,v.return);break;case 12:pr(y,v,l);break;case 31:pr(y,v,l),l&&A&4&&Dv(y,v);break;case 13:pr(y,v,l),l&&A&4&&Pv(y,v);break;case 22:v.memoizedState===null&&pr(y,v,l),Kl(v,v.return);break;case 30:break;default:pr(y,v,l)}o=o.sibling}}function gp(r,o){var l=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),r=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(r=o.memoizedState.cachePool.pool),r!==l&&(r!=null&&r.refCount++,l!=null&&Dl(l))}function yp(r,o){r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&Dl(r))}function ci(r,o,l,c){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Lv(r,o,l,c),o=o.sibling}function Lv(r,o,l,c){var y=o.flags;switch(o.tag){case 0:case 11:case 15:ci(r,o,l,c),y&2048&&Jl(9,o);break;case 1:ci(r,o,l,c);break;case 3:ci(r,o,l,c),y&2048&&(r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&Dl(r)));break;case 12:if(y&2048){ci(r,o,l,c),r=o.stateNode;try{var v=o.memoizedProps,A=v.id,R=v.onPostCommit;typeof R=="function"&&R(A,o.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(L){et(o,o.return,L)}}else ci(r,o,l,c);break;case 31:ci(r,o,l,c);break;case 13:ci(r,o,l,c);break;case 23:break;case 22:v=o.stateNode,A=o.alternate,o.memoizedState!==null?v._visibility&2?ci(r,o,l,c):Yl(r,o):v._visibility&2?ci(r,o,l,c):(v._visibility|=2,oa(r,o,l,c,(o.subtreeFlags&10256)!==0||!1)),y&2048&&gp(A,o);break;case 24:ci(r,o,l,c),y&2048&&yp(o.alternate,o);break;default:ci(r,o,l,c)}}function oa(r,o,l,c,y){for(y=y&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var v=r,A=o,R=l,L=c,Y=A.flags;switch(A.tag){case 0:case 11:case 15:oa(v,A,R,L,y),Jl(8,A);break;case 23:break;case 22:var te=A.stateNode;A.memoizedState!==null?te._visibility&2?oa(v,A,R,L,y):Yl(v,A):(te._visibility|=2,oa(v,A,R,L,y)),y&&Y&2048&&gp(A.alternate,A);break;case 24:oa(v,A,R,L,y),y&&Y&2048&&yp(A.alternate,A);break;default:oa(v,A,R,L,y)}o=o.sibling}}function Yl(r,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var l=r,c=o,y=c.flags;switch(c.tag){case 22:Yl(l,c),y&2048&&gp(c.alternate,c);break;case 24:Yl(l,c),y&2048&&yp(c.alternate,c);break;default:Yl(l,c)}o=o.sibling}}var $l=8192;function aa(r,o,l){if(r.subtreeFlags&$l)for(r=r.child;r!==null;)kv(r,o,l),r=r.sibling}function kv(r,o,l){switch(r.tag){case 26:aa(r,o,l),r.flags&$l&&r.memoizedState!==null&&Nb(l,ui,r.memoizedState,r.memoizedProps);break;case 5:aa(r,o,l);break;case 3:case 4:var c=ui;ui=yf(r.stateNode.containerInfo),aa(r,o,l),ui=c;break;case 22:r.memoizedState===null&&(c=r.alternate,c!==null&&c.memoizedState!==null?(c=$l,$l=16777216,aa(r,o,l),$l=c):aa(r,o,l));break;default:aa(r,o,l)}}function Ov(r){var o=r.alternate;if(o!==null&&(r=o.child,r!==null)){o.child=null;do o=r.sibling,r.sibling=null,r=o;while(r!==null)}}function Ql(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var c=o[l];Gt=c,qv(c,r)}Ov(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Fv(r),r=r.sibling}function Fv(r){switch(r.tag){case 0:case 11:case 15:Ql(r),r.flags&2048&&Wr(9,r,r.return);break;case 3:Ql(r);break;case 12:Ql(r);break;case 22:var o=r.stateNode;r.memoizedState!==null&&o._visibility&2&&(r.return===null||r.return.tag!==13)?(o._visibility&=-3,rf(r)):Ql(r);break;default:Ql(r)}}function rf(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var l=0;l<o.length;l++){var c=o[l];Gt=c,qv(c,r)}Ov(r)}for(r=r.child;r!==null;){switch(o=r,o.tag){case 0:case 11:case 15:Wr(8,o,o.return),rf(o);break;case 22:l=o.stateNode,l._visibility&2&&(l._visibility&=-3,rf(o));break;default:rf(o)}r=r.sibling}}function qv(r,o){for(;Gt!==null;){var l=Gt;switch(l.tag){case 0:case 11:case 15:Wr(8,l,o);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var c=l.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Dl(l.memoizedState.cache)}if(c=l.child,c!==null)c.return=l,Gt=c;else e:for(l=r;Gt!==null;){c=Gt;var y=c.sibling,v=c.return;if(xv(c),c===l){Gt=null;break e}if(y!==null){y.return=v,Gt=y;break e}Gt=v}}}var zR={getCacheForType:function(r){var o=Qt(bt),l=o.data.get(r);return l===void 0&&(l=r(),o.data.set(r,l)),l},cacheSignal:function(){return Qt(bt).controller.signal}},JR=typeof WeakMap=="function"?WeakMap:Map,Qe=0,st=null,Ue=null,ke=0,je=0,Nn=null,Xr=!1,la=!1,_p=!1,mr=0,yt=0,Zr=0,co=0,vp=0,xn=0,ua=0,Wl=null,vn=null,Ep=!1,sf=0,Bv=0,of=1/0,af=null,jr=null,Ot=0,es=null,ca=null,gr=0,Tp=0,Sp=null,Hv=null,Xl=0,Ap=null;function Mn(){return(Qe&2)!==0&&ke!==0?ke&-ke:ee.T!==null?Np():ac()}function Gv(){if(xn===0)if((ke&536870912)===0||He){var r=ks;ks<<=1,(ks&3932160)===0&&(ks=262144),xn=r}else xn=536870912;return r=Rn.current,r!==null&&(r.flags|=32),xn}function En(r,o,l){(r===st&&(je===2||je===9)||r.cancelPendingCommit!==null)&&(fa(r,0),ts(r,ke,xn,!1)),Os(r,l),((Qe&2)===0||r!==st)&&(r===st&&((Qe&2)===0&&(co|=l),yt===4&&ts(r,ke,xn,!1)),Hi(r))}function zv(r,o,l){if((Qe&6)!==0)throw Error(i(327));var c=!l&&(o&127)===0&&(o&r.expiredLanes)===0||ei(r,o),y=c?$R(r,o):Ip(r,o,!0),v=c;do{if(y===0){la&&!c&&ts(r,o,0,!1);break}else{if(l=r.current.alternate,v&&!KR(l)){y=Ip(r,o,!1),v=!1;continue}if(y===2){if(v=o,r.errorRecoveryDisabledLanes&v)var A=0;else A=r.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){o=A;e:{var R=r;y=Wl;var L=R.current.memoizedState.isDehydrated;if(L&&(fa(R,A).flags|=256),A=Ip(R,A,!1),A!==2){if(_p&&!L){R.errorRecoveryDisabledLanes|=v,co|=v,y=4;break e}v=vn,vn=y,v!==null&&(vn===null?vn=v:vn.push.apply(vn,v))}y=A}if(v=!1,y!==2)continue}}if(y===1){fa(r,0),ts(r,o,0,!0);break}e:{switch(c=r,v=y,v){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:ts(c,o,xn,!Xr);break e;case 2:vn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(y=sf+300-un(),10<y)){if(ts(c,o,xn,!Xr),Ci(c,0,!0)!==0)break e;gr=o,c.timeoutHandle=TE(Jv.bind(null,c,l,vn,af,Ep,o,xn,co,ua,Xr,v,"Throttled",-0,0),y);break e}Jv(c,l,vn,af,Ep,o,xn,co,ua,Xr,v,null,-0,0)}}break}while(!0);Hi(r)}function Jv(r,o,l,c,y,v,A,R,L,Y,te,ie,$,j){if(r.timeoutHandle=-1,ie=o.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ii},kv(o,v,ie);var ge=(v&62914560)===v?sf-un():(v&4194048)===v?Bv-un():0;if(ge=xb(ie,ge),ge!==null){gr=v,r.cancelPendingCommit=ge(jv.bind(null,r,o,v,l,c,y,A,R,L,te,ie,null,$,j)),ts(r,v,A,!Y);return}}jv(r,o,v,l,c,y,A,R,L)}function KR(r){for(var o=r;;){var l=o.tag;if((l===0||l===11||l===15)&&o.flags&16384&&(l=o.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var c=0;c<l.length;c++){var y=l[c],v=y.getSnapshot;y=y.value;try{if(!In(v(),y))return!1}catch{return!1}}if(l=o.child,o.subtreeFlags&16384&&l!==null)l.return=o,o=l;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ts(r,o,l,c){o&=~vp,o&=~co,r.suspendedLanes|=o,r.pingedLanes&=~o,c&&(r.warmLanes|=o),c=r.expirationTimes;for(var y=o;0<y;){var v=31-_t(y),A=1<<v;c[v]=-1,y&=~A}l!==0&&Fs(r,l,o)}function lf(){return(Qe&6)===0?(Zl(0),!1):!0}function Cp(){if(Ue!==null){if(je===0)var r=Ue.return;else r=Ue,sr=to=null,qh(r),ta=null,Vl=0,r=Ue;for(;r!==null;)Sv(r.alternate,r),r=r.return;Ue=null}}function fa(r,o){var l=r.timeoutHandle;l!==-1&&(r.timeoutHandle=-1,db(l)),l=r.cancelPendingCommit,l!==null&&(r.cancelPendingCommit=null,l()),gr=0,Cp(),st=r,Ue=l=ir(r.current,null),ke=o,je=0,Nn=null,Xr=!1,la=ei(r,o),_p=!1,ua=xn=vp=co=Zr=yt=0,vn=Wl=null,Ep=!1,(o&8)!==0&&(o|=o&32);var c=r.entangledLanes;if(c!==0)for(r=r.entanglements,c&=o;0<c;){var y=31-_t(c),v=1<<y;o|=r[y],c&=~v}return mr=o,bc(),l}function Kv(r,o){xe=null,ee.H=Hl,o===ea||o===Lc?(o=l_(),je=3):o===bh?(o=l_(),je=4):je=o===np?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Nn=o,Ue===null&&(yt=1,Wc(r,qn(o,r.current)))}function Yv(){var r=Rn.current;return r===null?!0:(ke&4194048)===ke?zn===null:(ke&62914560)===ke||(ke&536870912)!==0?r===zn:!1}function $v(){var r=ee.H;return ee.H=Hl,r===null?Hl:r}function Qv(){var r=ee.A;return ee.A=zR,r}function uf(){yt=4,Xr||(ke&4194048)!==ke&&Rn.current!==null||(la=!0),(Zr&134217727)===0&&(co&134217727)===0||st===null||ts(st,ke,xn,!1)}function Ip(r,o,l){var c=Qe;Qe|=2;var y=$v(),v=Qv();(st!==r||ke!==o)&&(af=null,fa(r,o)),o=!1;var A=yt;e:do try{if(je!==0&&Ue!==null){var R=Ue,L=Nn;switch(je){case 8:Cp(),A=6;break e;case 3:case 2:case 9:case 6:Rn.current===null&&(o=!0);var Y=je;if(je=0,Nn=null,da(r,R,L,Y),l&&la){A=0;break e}break;default:Y=je,je=0,Nn=null,da(r,R,L,Y)}}YR(),A=yt;break}catch(te){Kv(r,te)}while(!0);return o&&r.shellSuspendCounter++,sr=to=null,Qe=c,ee.H=y,ee.A=v,Ue===null&&(st=null,ke=0,bc()),A}function YR(){for(;Ue!==null;)Wv(Ue)}function $R(r,o){var l=Qe;Qe|=2;var c=$v(),y=Qv();st!==r||ke!==o?(af=null,of=un()+500,fa(r,o)):la=ei(r,o);e:do try{if(je!==0&&Ue!==null){o=Ue;var v=Nn;t:switch(je){case 1:je=0,Nn=null,da(r,o,v,1);break;case 2:case 9:if(o_(v)){je=0,Nn=null,Xv(o);break}o=function(){je!==2&&je!==9||st!==r||(je=7),Hi(r)},v.then(o,o);break e;case 3:je=7;break e;case 4:je=5;break e;case 7:o_(v)?(je=0,Nn=null,Xv(o)):(je=0,Nn=null,da(r,o,v,7));break;case 5:var A=null;switch(Ue.tag){case 26:A=Ue.memoizedState;case 5:case 27:var R=Ue;if(A?LE(A):R.stateNode.complete){je=0,Nn=null;var L=R.sibling;if(L!==null)Ue=L;else{var Y=R.return;Y!==null?(Ue=Y,cf(Y)):Ue=null}break t}}je=0,Nn=null,da(r,o,v,5);break;case 6:je=0,Nn=null,da(r,o,v,6);break;case 8:Cp(),yt=6;break e;default:throw Error(i(462))}}QR();break}catch(te){Kv(r,te)}while(!0);return sr=to=null,ee.H=c,ee.A=y,Qe=l,Ue!==null?0:(st=null,ke=0,bc(),yt)}function QR(){for(;Ue!==null&&!th();)Wv(Ue)}function Wv(r){var o=Ev(r.alternate,r,mr);r.memoizedProps=r.pendingProps,o===null?cf(r):Ue=o}function Xv(r){var o=r,l=o.alternate;switch(o.tag){case 15:case 0:o=pv(l,o,o.pendingProps,o.type,void 0,ke);break;case 11:o=pv(l,o,o.pendingProps,o.type.render,o.ref,ke);break;case 5:qh(o);default:Sv(l,o),o=Ue=Qy(o,mr),o=Ev(l,o,mr)}r.memoizedProps=r.pendingProps,o===null?cf(r):Ue=o}function da(r,o,l,c){sr=to=null,qh(o),ta=null,Vl=0;var y=o.return;try{if(kR(r,y,o,l,ke)){yt=1,Wc(r,qn(l,r.current)),Ue=null;return}}catch(v){if(y!==null)throw Ue=y,v;yt=1,Wc(r,qn(l,r.current)),Ue=null;return}o.flags&32768?(He||c===1?r=!0:la||(ke&536870912)!==0?r=!1:(Xr=r=!0,(c===2||c===9||c===3||c===6)&&(c=Rn.current,c!==null&&c.tag===13&&(c.flags|=16384))),Zv(o,r)):cf(o)}function cf(r){var o=r;do{if((o.flags&32768)!==0){Zv(o,Xr);return}r=o.return;var l=qR(o.alternate,o,mr);if(l!==null){Ue=l;return}if(o=o.sibling,o!==null){Ue=o;return}Ue=o=r}while(o!==null);yt===0&&(yt=5)}function Zv(r,o){do{var l=BR(r.alternate,r);if(l!==null){l.flags&=32767,Ue=l;return}if(l=r.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!o&&(r=r.sibling,r!==null)){Ue=r;return}Ue=r=l}while(r!==null);yt=6,Ue=null}function jv(r,o,l,c,y,v,A,R,L){r.cancelPendingCommit=null;do ff();while(Ot!==0);if((Qe&6)!==0)throw Error(i(327));if(o!==null){if(o===r.current)throw Error(i(177));if(v=o.lanes|o.childLanes,v|=hh,rh(r,l,v,A,R,L),r===st&&(Ue=st=null,ke=0),ca=o,es=r,gr=l,Tp=v,Sp=y,Hv=c,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,jR(Mr,function(){return rE(),null})):(r.callbackNode=null,r.callbackPriority=0),c=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||c){c=ee.T,ee.T=null,y=ce.p,ce.p=2,A=Qe,Qe|=4;try{HR(r,o,l)}finally{Qe=A,ce.p=y,ee.T=c}}Ot=1,eE(),tE(),nE()}}function eE(){if(Ot===1){Ot=0;var r=es,o=ca,l=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||l){l=ee.T,ee.T=null;var c=ce.p;ce.p=2;var y=Qe;Qe|=4;try{Vv(o,r);var v=kp,A=qy(r.containerInfo),R=v.focusedElem,L=v.selectionRange;if(A!==R&&R&&R.ownerDocument&&Fy(R.ownerDocument.documentElement,R)){if(L!==null&&lh(R)){var Y=L.start,te=L.end;if(te===void 0&&(te=Y),"selectionStart"in R)R.selectionStart=Y,R.selectionEnd=Math.min(te,R.value.length);else{var ie=R.ownerDocument||document,$=ie&&ie.defaultView||window;if($.getSelection){var j=$.getSelection(),ge=R.textContent.length,Te=Math.min(L.start,ge),rt=L.end===void 0?Te:Math.min(L.end,ge);!j.extend&&Te>rt&&(A=rt,rt=Te,Te=A);var H=Oy(R,Te),F=Oy(R,rt);if(H&&F&&(j.rangeCount!==1||j.anchorNode!==H.node||j.anchorOffset!==H.offset||j.focusNode!==F.node||j.focusOffset!==F.offset)){var K=ie.createRange();K.setStart(H.node,H.offset),j.removeAllRanges(),Te>rt?(j.addRange(K),j.extend(F.node,F.offset)):(K.setEnd(F.node,F.offset),j.addRange(K))}}}}for(ie=[],j=R;j=j.parentNode;)j.nodeType===1&&ie.push({element:j,left:j.scrollLeft,top:j.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<ie.length;R++){var ne=ie[R];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}Af=!!Lp,kp=Lp=null}finally{Qe=y,ce.p=c,ee.T=l}}r.current=o,Ot=2}}function tE(){if(Ot===2){Ot=0;var r=es,o=ca,l=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||l){l=ee.T,ee.T=null;var c=ce.p;ce.p=2;var y=Qe;Qe|=4;try{Nv(r,o.alternate,o)}finally{Qe=y,ce.p=c,ee.T=l}}Ot=3}}function nE(){if(Ot===4||Ot===3){Ot=0,ec();var r=es,o=ca,l=gr,c=Hv;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Ot=5:(Ot=0,ca=es=null,iE(r,r.pendingLanes));var y=r.pendingLanes;if(y===0&&(jr=null),ji(l),o=o.stateNode,Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(jn,o,void 0,(o.current.flags&128)===128)}catch{}if(c!==null){o=ee.T,y=ce.p,ce.p=2,ee.T=null;try{for(var v=r.onRecoverableError,A=0;A<c.length;A++){var R=c[A];v(R.value,{componentStack:R.stack})}}finally{ee.T=o,ce.p=y}}(gr&3)!==0&&ff(),Hi(r),y=r.pendingLanes,(l&261930)!==0&&(y&42)!==0?r===Ap?Xl++:(Xl=0,Ap=r):Xl=0,Zl(0)}}function iE(r,o){(r.pooledCacheLanes&=o)===0&&(o=r.pooledCache,o!=null&&(r.pooledCache=null,Dl(o)))}function ff(){return eE(),tE(),nE(),rE()}function rE(){if(Ot!==5)return!1;var r=es,o=Tp;Tp=0;var l=ji(gr),c=ee.T,y=ce.p;try{ce.p=32>l?32:l,ee.T=null,l=Sp,Sp=null;var v=es,A=gr;if(Ot=0,ca=es=null,gr=0,(Qe&6)!==0)throw Error(i(331));var R=Qe;if(Qe|=4,Fv(v.current),Lv(v,v.current,A,l),Qe=R,Zl(0,!1),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(jn,v)}catch{}return!0}finally{ce.p=y,ee.T=c,iE(r,o)}}function sE(r,o,l){o=qn(l,o),o=tp(r.stateNode,o,2),r=Yr(r,o,2),r!==null&&(Os(r,2),Hi(r))}function et(r,o,l){if(r.tag===3)sE(r,r,l);else for(;o!==null;){if(o.tag===3){sE(o,r,l);break}else if(o.tag===1){var c=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(jr===null||!jr.has(c))){r=qn(l,r),l=ov(2),c=Yr(o,l,2),c!==null&&(av(l,c,o,r),Os(c,2),Hi(c));break}}o=o.return}}function wp(r,o,l){var c=r.pingCache;if(c===null){c=r.pingCache=new JR;var y=new Set;c.set(o,y)}else y=c.get(o),y===void 0&&(y=new Set,c.set(o,y));y.has(l)||(_p=!0,y.add(l),r=WR.bind(null,r,o,l),o.then(r,r))}function WR(r,o,l){var c=r.pingCache;c!==null&&c.delete(o),r.pingedLanes|=r.suspendedLanes&l,r.warmLanes&=~l,st===r&&(ke&l)===l&&(yt===4||yt===3&&(ke&62914560)===ke&&300>un()-sf?(Qe&2)===0&&fa(r,0):vp|=l,ua===ke&&(ua=0)),Hi(r)}function oE(r,o){o===0&&(o=oc()),r=Zs(r,o),r!==null&&(Os(r,o),Hi(r))}function XR(r){var o=r.memoizedState,l=0;o!==null&&(l=o.retryLane),oE(r,l)}function ZR(r,o){var l=0;switch(r.tag){case 31:case 13:var c=r.stateNode,y=r.memoizedState;y!==null&&(l=y.retryLane);break;case 19:c=r.stateNode;break;case 22:c=r.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(o),oE(r,l)}function jR(r,o){return kt(r,o)}var df=null,ha=null,Rp=!1,hf=!1,bp=!1,ns=0;function Hi(r){r!==ha&&r.next===null&&(ha===null?df=ha=r:ha=ha.next=r),hf=!0,Rp||(Rp=!0,tb())}function Zl(r,o){if(!bp&&hf){bp=!0;do for(var l=!1,c=df;c!==null;){if(r!==0){var y=c.pendingLanes;if(y===0)var v=0;else{var A=c.suspendedLanes,R=c.pingedLanes;v=(1<<31-_t(42|r)+1)-1,v&=y&~(A&~R),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(l=!0,cE(c,v))}else v=ke,v=Ci(c,c===st?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(v&3)===0||ei(c,v)||(l=!0,cE(c,v));c=c.next}while(l);bp=!1}}function eb(){aE()}function aE(){hf=Rp=!1;var r=0;ns!==0&&fb()&&(r=ns);for(var o=un(),l=null,c=df;c!==null;){var y=c.next,v=lE(c,o);v===0?(c.next=null,l===null?df=y:l.next=y,y===null&&(ha=l)):(l=c,(r!==0||(v&3)!==0)&&(hf=!0)),c=y}Ot!==0&&Ot!==5||Zl(r),ns!==0&&(ns=0)}function lE(r,o){for(var l=r.suspendedLanes,c=r.pingedLanes,y=r.expirationTimes,v=r.pendingLanes&-62914561;0<v;){var A=31-_t(v),R=1<<A,L=y[A];L===-1?((R&l)===0||(R&c)!==0)&&(y[A]=ih(R,o)):L<=o&&(r.expiredLanes|=R),v&=~R}if(o=st,l=ke,l=Ci(r,r===o?l:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c=r.callbackNode,l===0||r===o&&(je===2||je===9)||r.cancelPendingCommit!==null)return c!==null&&c!==null&&xr(c),r.callbackNode=null,r.callbackPriority=0;if((l&3)===0||ei(r,l)){if(o=l&-l,o===r.callbackPriority)return o;switch(c!==null&&xr(c),ji(l)){case 2:case 8:l=ll;break;case 32:l=Mr;break;case 268435456:l=tc;break;default:l=Mr}return c=uE.bind(null,r),l=kt(l,c),r.callbackPriority=o,r.callbackNode=l,o}return c!==null&&c!==null&&xr(c),r.callbackPriority=2,r.callbackNode=null,2}function uE(r,o){if(Ot!==0&&Ot!==5)return r.callbackNode=null,r.callbackPriority=0,null;var l=r.callbackNode;if(ff()&&r.callbackNode!==l)return null;var c=ke;return c=Ci(r,r===st?c:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),c===0?null:(zv(r,c,o),lE(r,un()),r.callbackNode!=null&&r.callbackNode===l?uE.bind(null,r):null)}function cE(r,o){if(ff())return null;zv(r,o,!0)}function tb(){hb(function(){(Qe&6)!==0?kt(al,eb):aE()})}function Np(){if(ns===0){var r=Zo;r===0&&(r=Si,Si<<=1,(Si&261888)===0&&(Si=256)),ns=r}return ns}function fE(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:ko(""+r)}function dE(r,o){var l=o.ownerDocument.createElement("input");return l.name=o.name,l.value=o.value,r.id&&l.setAttribute("form",r.id),o.parentNode.insertBefore(l,o),r=new FormData(r),l.parentNode.removeChild(l),r}function nb(r,o,l,c,y){if(o==="submit"&&l&&l.stateNode===y){var v=fE((y[Bt]||null).action),A=c.submitter;A&&(o=(o=A[Bt]||null)?fE(o.formAction):A.getAttribute("formAction"),o!==null&&(v=o,A=null));var R=new Ui("action","action",null,c,y);r.push({event:R,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(ns!==0){var L=A?dE(y,A):new FormData(y);Qh(l,{pending:!0,data:L,method:y.method,action:v},null,L)}}else typeof v=="function"&&(R.preventDefault(),L=A?dE(y,A):new FormData(y),Qh(l,{pending:!0,data:L,method:y.method,action:v},v,L))},currentTarget:y}]})}}for(var xp=0;xp<dh.length;xp++){var Mp=dh[xp],ib=Mp.toLowerCase(),rb=Mp[0].toUpperCase()+Mp.slice(1);li(ib,"on"+rb)}li(Gy,"onAnimationEnd"),li(zy,"onAnimationIteration"),li(Jy,"onAnimationStart"),li("dblclick","onDoubleClick"),li("focusin","onFocus"),li("focusout","onBlur"),li(ER,"onTransitionRun"),li(TR,"onTransitionStart"),li(SR,"onTransitionCancel"),li(Ky,"onTransitionEnd"),Mi("onMouseEnter",["mouseout","mouseover"]),Mi("onMouseLeave",["mouseout","mouseover"]),Mi("onPointerEnter",["pointerout","pointerover"]),Mi("onPointerLeave",["pointerout","pointerover"]),xi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),xi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),xi("onBeforeInput",["compositionend","keypress","textInput","paste"]),xi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),xi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),xi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(jl));function hE(r,o){o=(o&4)!==0;for(var l=0;l<r.length;l++){var c=r[l],y=c.event;c=c.listeners;e:{var v=void 0;if(o)for(var A=c.length-1;0<=A;A--){var R=c[A],L=R.instance,Y=R.currentTarget;if(R=R.listener,L!==v&&y.isPropagationStopped())break e;v=R,y.currentTarget=Y;try{v(y)}catch(te){Rc(te)}y.currentTarget=null,v=L}else for(A=0;A<c.length;A++){if(R=c[A],L=R.instance,Y=R.currentTarget,R=R.listener,L!==v&&y.isPropagationStopped())break e;v=R,y.currentTarget=Y;try{v(y)}catch(te){Rc(te)}y.currentTarget=null,v=L}}}}function Le(r,o){var l=o[Do];l===void 0&&(l=o[Do]=new Set);var c=r+"__bubble";l.has(c)||(pE(o,r,2,!1),l.add(c))}function Dp(r,o,l){var c=0;o&&(c|=4),pE(l,r,c,o)}var pf="_reactListening"+Math.random().toString(36).slice(2);function Pp(r){if(!r[pf]){r[pf]=!0,fl.forEach(function(l){l!=="selectionchange"&&(sb.has(l)||Dp(l,!1,r),Dp(l,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[pf]||(o[pf]=!0,Dp("selectionchange",!1,o))}}function pE(r,o,l,c){switch(GE(o)){case 2:var y=Pb;break;case 8:y=Vb;break;default:y=$p}l=y.bind(null,o,l,r),y=void 0,!zs||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(y=!0),c?y!==void 0?r.addEventListener(o,l,{capture:!0,passive:y}):r.addEventListener(o,l,!0):y!==void 0?r.addEventListener(o,l,{passive:y}):r.addEventListener(o,l,!1)}function Vp(r,o,l,c,y){var v=c;if((o&1)===0&&(o&2)===0&&c!==null)e:for(;;){if(c===null)return;var A=c.tag;if(A===3||A===4){var R=c.stateNode.containerInfo;if(R===y)break;if(A===4)for(A=c.return;A!==null;){var L=A.tag;if((L===3||L===4)&&A.stateNode.containerInfo===y)return;A=A.return}for(;R!==null;){if(A=bi(R),A===null)return;if(L=A.tag,L===5||L===6||L===26||L===27){c=v=A;continue e}R=R.parentNode}}c=c.return}kr(function(){var Y=v,te=Ln(l),ie=[];e:{var $=Yy.get(r);if($!==void 0){var j=Ui,ge=r;switch(r){case"keypress":if(Ks(l)===0)break e;case"keydown":case"keyup":j=Cc;break;case"focusin":ge="focus",j=$s;break;case"focusout":ge="blur",j=$s;break;case"beforeblur":case"afterblur":j=$s;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":j=Cl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":j=mc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":j=S;break;case Gy:case zy:case Jy:j=yc;break;case Ky:j=b;break;case"scroll":case"scrollend":j=Al;break;case"wheel":j=X;break;case"copy":case"cut":case"paste":j=_c;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":j=nr;break;case"toggle":case"beforetoggle":j=Ne}var Te=(o&4)!==0,rt=!Te&&(r==="scroll"||r==="scrollend"),H=Te?$!==null?$+"Capture":null:$;Te=[];for(var F=Y,K;F!==null;){var ne=F;if(K=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||K===null||H===null||(ne=ri(F,H),ne!=null&&Te.push(eu(F,ne,K))),rt)break;F=F.return}0<Te.length&&($=new j($,ge,null,l,te),ie.push({event:$,listeners:Te}))}}if((o&7)===0){e:{if($=r==="mouseover"||r==="pointerover",j=r==="mouseout"||r==="pointerout",$&&l!==El&&(ge=l.relatedTarget||l.fromElement)&&(bi(ge)||ge[wi]))break e;if((j||$)&&($=te.window===te?te:($=te.ownerDocument)?$.defaultView||$.parentWindow:window,j?(ge=l.relatedTarget||l.toElement,j=Y,ge=ge?bi(ge):null,ge!==null&&(rt=a(ge),Te=ge.tag,ge!==rt||Te!==5&&Te!==27&&Te!==6)&&(ge=null)):(j=null,ge=Y),j!==ge)){if(Te=Cl,ne="onMouseLeave",H="onMouseEnter",F="mouse",(r==="pointerout"||r==="pointerover")&&(Te=nr,ne="onPointerLeave",H="onPointerEnter",F="pointer"),rt=j==null?$:An(j),K=ge==null?$:An(ge),$=new Te(ne,F+"leave",j,l,te),$.target=rt,$.relatedTarget=K,ne=null,bi(te)===Y&&(Te=new Te(H,F+"enter",ge,l,te),Te.target=K,Te.relatedTarget=rt,ne=Te),rt=ne,j&&ge)t:{for(Te=ob,H=j,F=ge,K=0,ne=H;ne;ne=Te(ne))K++;ne=0;for(var ve=F;ve;ve=Te(ve))ne++;for(;0<K-ne;)H=Te(H),K--;for(;0<ne-K;)F=Te(F),ne--;for(;K--;){if(H===F||F!==null&&H===F.alternate){Te=H;break t}H=Te(H),F=Te(F)}Te=null}else Te=null;j!==null&&mE(ie,$,j,Te,!1),ge!==null&&rt!==null&&mE(ie,rt,ge,Te,!0)}}e:{if($=Y?An(Y):window,j=$.nodeName&&$.nodeName.toLowerCase(),j==="select"||j==="input"&&$.type==="file")var Je=Dy;else if(xy($))if(Py)Je=yR;else{Je=mR;var _e=pR}else j=$.nodeName,!j||j.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?Y&&Lo(Y.elementType)&&(Je=Dy):Je=gR;if(Je&&(Je=Je(r,Y))){My(ie,Je,l,te);break e}_e&&_e(r,$,Y),r==="focusout"&&Y&&$.type==="number"&&Y.memoizedProps.value!=null&&yl($,"number",$.value)}switch(_e=Y?An(Y):window,r){case"focusin":(xy(_e)||_e.contentEditable==="true")&&(zo=_e,uh=Y,Nl=null);break;case"focusout":Nl=uh=zo=null;break;case"mousedown":ch=!0;break;case"contextmenu":case"mouseup":case"dragend":ch=!1,By(ie,l,te);break;case"selectionchange":if(vR)break;case"keydown":case"keyup":By(ie,l,te)}var Pe;if($e)e:{switch(r){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else Go?Qs(r,l)&&(Oe="onCompositionEnd"):r==="keydown"&&l.keyCode===229&&(Oe="onCompositionStart");Oe&&(Oi&&l.locale!=="ko"&&(Go||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&Go&&(Pe=Sl()):(Vi=te,Tl="value"in Vi?Vi.value:Vi.textContent,Go=!0)),_e=mf(Y,Oe),0<_e.length&&(Oe=new ki(Oe,r,null,l,te),ie.push({event:Oe,listeners:_e}),Pe?Oe.data=Pe:(Pe=Ho(l),Pe!==null&&(Oe.data=Pe)))),(Pe=On?cR(r,l):fR(r,l))&&(Oe=mf(Y,"onBeforeInput"),0<Oe.length&&(_e=new ki("onBeforeInput","beforeinput",null,l,te),ie.push({event:_e,listeners:Oe}),_e.data=Pe)),nb(ie,r,Y,l,te)}hE(ie,o)})}function eu(r,o,l){return{instance:r,listener:o,currentTarget:l}}function mf(r,o){for(var l=o+"Capture",c=[];r!==null;){var y=r,v=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||v===null||(y=ri(r,l),y!=null&&c.unshift(eu(r,y,v)),y=ri(r,o),y!=null&&c.push(eu(r,y,v))),r.tag===3)return c;r=r.return}return[]}function ob(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function mE(r,o,l,c,y){for(var v=o._reactName,A=[];l!==null&&l!==c;){var R=l,L=R.alternate,Y=R.stateNode;if(R=R.tag,L!==null&&L===c)break;R!==5&&R!==26&&R!==27||Y===null||(L=Y,y?(Y=ri(l,v),Y!=null&&A.unshift(eu(l,Y,L))):y||(Y=ri(l,v),Y!=null&&A.push(eu(l,Y,L)))),l=l.return}A.length!==0&&r.push({event:o,listeners:A})}var ab=/\r\n?/g,lb=/\u0000|\uFFFD/g;function gE(r){return(typeof r=="string"?r:""+r).replace(ab,`
`).replace(lb,"")}function yE(r,o){return o=gE(o),gE(r)===o}function it(r,o,l,c,y,v){switch(l){case"children":typeof c=="string"?o==="body"||o==="textarea"&&c===""||mn(r,c):(typeof c=="number"||typeof c=="bigint")&&o!=="body"&&mn(r,""+c);break;case"className":Cn(r,"class",c);break;case"tabIndex":Cn(r,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Cn(r,l,c);break;case"style":vl(r,c,v);break;case"data":if(o!=="object"){Cn(r,"data",c);break}case"src":case"href":if(c===""&&(o!=="a"||l!=="href")){r.removeAttribute(l);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(l);break}c=ko(""+c),r.setAttribute(l,c);break;case"action":case"formAction":if(typeof c=="function"){r.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(l==="formAction"?(o!=="input"&&it(r,o,"name",y.name,y,null),it(r,o,"formEncType",y.formEncType,y,null),it(r,o,"formMethod",y.formMethod,y,null),it(r,o,"formTarget",y.formTarget,y,null)):(it(r,o,"encType",y.encType,y,null),it(r,o,"method",y.method,y,null),it(r,o,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){r.removeAttribute(l);break}c=ko(""+c),r.setAttribute(l,c);break;case"onClick":c!=null&&(r.onclick=ii);break;case"onScroll":c!=null&&Le("scroll",r);break;case"onScrollEnd":c!=null&&Le("scrollend",r);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"multiple":r.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":r.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){r.removeAttribute("xlink:href");break}l=ko(""+c),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(l,""+c):r.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(l,""):r.removeAttribute(l);break;case"capture":case"download":c===!0?r.setAttribute(l,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?r.setAttribute(l,c):r.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?r.setAttribute(l,c):r.removeAttribute(l);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?r.removeAttribute(l):r.setAttribute(l,c);break;case"popover":Le("beforetoggle",r),Le("toggle",r),Vo(r,"popover",c);break;case"xlinkActuate":Rt(r,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Rt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Rt(r,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Rt(r,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Rt(r,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Rt(r,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Rt(r,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Rt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Rt(r,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Vo(r,"is",c);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=pc.get(l)||l,Vo(r,l,c))}}function Up(r,o,l,c,y,v){switch(l){case"style":vl(r,c,v);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(l=c.__html,l!=null){if(y.children!=null)throw Error(i(60));r.innerHTML=l}}break;case"children":typeof c=="string"?mn(r,c):(typeof c=="number"||typeof c=="bigint")&&mn(r,""+c);break;case"onScroll":c!=null&&Le("scroll",r);break;case"onScrollEnd":c!=null&&Le("scrollend",r);break;case"onClick":c!=null&&(r.onclick=ii);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!dl.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(y=l.endsWith("Capture"),o=l.slice(2,y?l.length-7:void 0),v=r[Bt]||null,v=v!=null?v[l]:null,typeof v=="function"&&r.removeEventListener(o,v,y),typeof c=="function")){typeof v!="function"&&v!==null&&(l in r?r[l]=null:r.hasAttribute(l)&&r.removeAttribute(l)),r.addEventListener(o,c,y);break e}l in r?r[l]=c:c===!0?r.setAttribute(l,""):Vo(r,l,c)}}}function Xt(r,o,l){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",r),Le("load",r);var c=!1,y=!1,v;for(v in l)if(l.hasOwnProperty(v)){var A=l[v];if(A!=null)switch(v){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:it(r,o,v,A,l,null)}}y&&it(r,o,"srcSet",l.srcSet,l,null),c&&it(r,o,"src",l.src,l,null);return;case"input":Le("invalid",r);var R=v=A=y=null,L=null,Y=null;for(c in l)if(l.hasOwnProperty(c)){var te=l[c];if(te!=null)switch(c){case"name":y=te;break;case"type":A=te;break;case"checked":L=te;break;case"defaultChecked":Y=te;break;case"value":v=te;break;case"defaultValue":R=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,o));break;default:it(r,o,c,te,l,null)}}fc(r,v,R,L,Y,A,y,!1);return;case"select":Le("invalid",r),c=A=v=null;for(y in l)if(l.hasOwnProperty(y)&&(R=l[y],R!=null))switch(y){case"value":v=R;break;case"defaultValue":A=R;break;case"multiple":c=R;default:it(r,o,y,R,l,null)}o=v,l=A,r.multiple=!!c,o!=null?Pr(r,!!c,o,!1):l!=null&&Pr(r,!!c,l,!0);return;case"textarea":Le("invalid",r),v=y=c=null;for(A in l)if(l.hasOwnProperty(A)&&(R=l[A],R!=null))switch(A){case"value":c=R;break;case"defaultValue":y=R;break;case"children":v=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(i(91));break;default:it(r,o,A,R,l,null)}Vr(r,c,y,v);return;case"option":for(L in l)if(l.hasOwnProperty(L)&&(c=l[L],c!=null))switch(L){case"selected":r.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:it(r,o,L,c,l,null)}return;case"dialog":Le("beforetoggle",r),Le("toggle",r),Le("cancel",r),Le("close",r);break;case"iframe":case"object":Le("load",r);break;case"video":case"audio":for(c=0;c<jl.length;c++)Le(jl[c],r);break;case"image":Le("error",r),Le("load",r);break;case"details":Le("toggle",r);break;case"embed":case"source":case"link":Le("error",r),Le("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in l)if(l.hasOwnProperty(Y)&&(c=l[Y],c!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:it(r,o,Y,c,l,null)}return;default:if(Lo(o)){for(te in l)l.hasOwnProperty(te)&&(c=l[te],c!==void 0&&Up(r,o,te,c,l,void 0));return}}for(R in l)l.hasOwnProperty(R)&&(c=l[R],c!=null&&it(r,o,R,c,l,null))}function ub(r,o,l,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,v=null,A=null,R=null,L=null,Y=null,te=null;for(j in l){var ie=l[j];if(l.hasOwnProperty(j)&&ie!=null)switch(j){case"checked":break;case"value":break;case"defaultValue":L=ie;default:c.hasOwnProperty(j)||it(r,o,j,null,c,ie)}}for(var $ in c){var j=c[$];if(ie=l[$],c.hasOwnProperty($)&&(j!=null||ie!=null))switch($){case"type":v=j;break;case"name":y=j;break;case"checked":Y=j;break;case"defaultChecked":te=j;break;case"value":A=j;break;case"defaultValue":R=j;break;case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(i(137,o));break;default:j!==ie&&it(r,o,$,j,c,ie)}}Uo(r,A,R,L,Y,te,v,y);return;case"select":j=A=R=$=null;for(v in l)if(L=l[v],l.hasOwnProperty(v)&&L!=null)switch(v){case"value":break;case"multiple":j=L;default:c.hasOwnProperty(v)||it(r,o,v,null,c,L)}for(y in c)if(v=c[y],L=l[y],c.hasOwnProperty(y)&&(v!=null||L!=null))switch(y){case"value":$=v;break;case"defaultValue":R=v;break;case"multiple":A=v;default:v!==L&&it(r,o,y,v,c,L)}o=R,l=A,c=j,$!=null?Pr(r,!!l,$,!1):!!c!=!!l&&(o!=null?Pr(r,!!l,o,!0):Pr(r,!!l,l?[]:"",!1));return;case"textarea":j=$=null;for(R in l)if(y=l[R],l.hasOwnProperty(R)&&y!=null&&!c.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:it(r,o,R,null,c,y)}for(A in c)if(y=c[A],v=l[A],c.hasOwnProperty(A)&&(y!=null||v!=null))switch(A){case"value":$=y;break;case"defaultValue":j=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(i(91));break;default:y!==v&&it(r,o,A,y,c,v)}dc(r,$,j);return;case"option":for(var ge in l)if($=l[ge],l.hasOwnProperty(ge)&&$!=null&&!c.hasOwnProperty(ge))switch(ge){case"selected":r.selected=!1;break;default:it(r,o,ge,null,c,$)}for(L in c)if($=c[L],j=l[L],c.hasOwnProperty(L)&&$!==j&&($!=null||j!=null))switch(L){case"selected":r.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:it(r,o,L,$,c,j)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in l)$=l[Te],l.hasOwnProperty(Te)&&$!=null&&!c.hasOwnProperty(Te)&&it(r,o,Te,null,c,$);for(Y in c)if($=c[Y],j=l[Y],c.hasOwnProperty(Y)&&$!==j&&($!=null||j!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(i(137,o));break;default:it(r,o,Y,$,c,j)}return;default:if(Lo(o)){for(var rt in l)$=l[rt],l.hasOwnProperty(rt)&&$!==void 0&&!c.hasOwnProperty(rt)&&Up(r,o,rt,void 0,c,$);for(te in c)$=c[te],j=l[te],!c.hasOwnProperty(te)||$===j||$===void 0&&j===void 0||Up(r,o,te,$,c,j);return}}for(var H in l)$=l[H],l.hasOwnProperty(H)&&$!=null&&!c.hasOwnProperty(H)&&it(r,o,H,null,c,$);for(ie in c)$=c[ie],j=l[ie],!c.hasOwnProperty(ie)||$===j||$==null&&j==null||it(r,o,ie,$,c,j)}function _E(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function cb(){if(typeof performance.getEntriesByType=="function"){for(var r=0,o=0,l=performance.getEntriesByType("resource"),c=0;c<l.length;c++){var y=l[c],v=y.transferSize,A=y.initiatorType,R=y.duration;if(v&&R&&_E(A)){for(A=0,R=y.responseEnd,c+=1;c<l.length;c++){var L=l[c],Y=L.startTime;if(Y>R)break;var te=L.transferSize,ie=L.initiatorType;te&&_E(ie)&&(L=L.responseEnd,A+=te*(L<R?1:(R-Y)/(L-Y)))}if(--c,o+=8*(v+A)/(y.duration/1e3),r++,10<r)break}}if(0<r)return o/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Lp=null,kp=null;function gf(r){return r.nodeType===9?r:r.ownerDocument}function vE(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function EE(r,o){if(r===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&o==="foreignObject"?0:r}function Op(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Fp=null;function fb(){var r=window.event;return r&&r.type==="popstate"?r===Fp?!1:(Fp=r,!0):(Fp=null,!1)}var TE=typeof setTimeout=="function"?setTimeout:void 0,db=typeof clearTimeout=="function"?clearTimeout:void 0,SE=typeof Promise=="function"?Promise:void 0,hb=typeof queueMicrotask=="function"?queueMicrotask:typeof SE<"u"?function(r){return SE.resolve(null).then(r).catch(pb)}:TE;function pb(r){setTimeout(function(){throw r})}function is(r){return r==="head"}function AE(r,o){var l=o,c=0;do{var y=l.nextSibling;if(r.removeChild(l),y&&y.nodeType===8)if(l=y.data,l==="/$"||l==="/&"){if(c===0){r.removeChild(y),ya(o);return}c--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")c++;else if(l==="html")tu(r.ownerDocument.documentElement);else if(l==="head"){l=r.ownerDocument.head,tu(l);for(var v=l.firstChild;v;){var A=v.nextSibling,R=v.nodeName;v[Ri]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&v.rel.toLowerCase()==="stylesheet"||l.removeChild(v),v=A}}else l==="body"&&tu(r.ownerDocument.body);l=y}while(l);ya(o)}function CE(r,o){var l=r;r=0;do{var c=l.nextSibling;if(l.nodeType===1?o?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(o?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),c&&c.nodeType===8)if(l=c.data,l==="/$"){if(r===0)break;r--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||r++;l=c}while(l)}function qp(r){var o=r.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var l=o;switch(o=o.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":qp(l),Po(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}r.removeChild(l)}}function mb(r,o,l,c){for(;r.nodeType===1;){var y=l;if(r.nodeName.toLowerCase()!==o.toLowerCase()){if(!c&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(c){if(!r[Ri])switch(o){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(v=r.getAttribute("rel"),v==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(v!==y.rel||r.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||r.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||r.getAttribute("title")!==(y.title==null?null:y.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(v=r.getAttribute("src"),(v!==(y.src==null?null:y.src)||r.getAttribute("type")!==(y.type==null?null:y.type)||r.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&v&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(o==="input"&&r.type==="hidden"){var v=y.name==null?null:""+y.name;if(y.type==="hidden"&&r.getAttribute("name")===v)return r}else return r;if(r=Jn(r.nextSibling),r===null)break}return null}function gb(r,o,l){if(o==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!l||(r=Jn(r.nextSibling),r===null))return null;return r}function IE(r,o){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=Jn(r.nextSibling),r===null))return null;return r}function Bp(r){return r.data==="$?"||r.data==="$~"}function Hp(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function yb(r,o){var l=r.ownerDocument;if(r.data==="$~")r._reactRetry=o;else if(r.data!=="$?"||l.readyState!=="loading")o();else{var c=function(){o(),l.removeEventListener("DOMContentLoaded",c)};l.addEventListener("DOMContentLoaded",c),r._reactRetry=c}}function Jn(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return r}var Gp=null;function wE(r){r=r.nextSibling;for(var o=0;r;){if(r.nodeType===8){var l=r.data;if(l==="/$"||l==="/&"){if(o===0)return Jn(r.nextSibling);o--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||o++}r=r.nextSibling}return null}function RE(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var l=r.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(o===0)return r;o--}else l!=="/$"&&l!=="/&"||o++}r=r.previousSibling}return null}function bE(r,o,l){switch(o=gf(l),r){case"html":if(r=o.documentElement,!r)throw Error(i(452));return r;case"head":if(r=o.head,!r)throw Error(i(453));return r;case"body":if(r=o.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function tu(r){for(var o=r.attributes;o.length;)r.removeAttributeNode(o[0]);Po(r)}var Kn=new Map,NE=new Set;function yf(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var yr=ce.d;ce.d={f:_b,r:vb,D:Eb,C:Tb,L:Sb,m:Ab,X:Ib,S:Cb,M:wb};function _b(){var r=yr.f(),o=lf();return r||o}function vb(r){var o=Un(r);o!==null&&o.tag===5&&o.type==="form"?K_(o):yr.r(r)}var pa=typeof document>"u"?null:document;function xE(r,o,l){var c=pa;if(c&&typeof o=="string"&&o){var y=pn(o);y='link[rel="'+r+'"][href="'+y+'"]',typeof l=="string"&&(y+='[crossorigin="'+l+'"]'),NE.has(y)||(NE.add(y),r={rel:r,crossOrigin:l,href:o},c.querySelector(y)===null&&(o=c.createElement("link"),Xt(o,"link",r),wt(o),c.head.appendChild(o)))}}function Eb(r){yr.D(r),xE("dns-prefetch",r,null)}function Tb(r,o){yr.C(r,o),xE("preconnect",r,o)}function Sb(r,o,l){yr.L(r,o,l);var c=pa;if(c&&r&&o){var y='link[rel="preload"][as="'+pn(o)+'"]';o==="image"&&l&&l.imageSrcSet?(y+='[imagesrcset="'+pn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(y+='[imagesizes="'+pn(l.imageSizes)+'"]')):y+='[href="'+pn(r)+'"]';var v=y;switch(o){case"style":v=ma(r);break;case"script":v=ga(r)}Kn.has(v)||(r=E({rel:"preload",href:o==="image"&&l&&l.imageSrcSet?void 0:r,as:o},l),Kn.set(v,r),c.querySelector(y)!==null||o==="style"&&c.querySelector(nu(v))||o==="script"&&c.querySelector(iu(v))||(o=c.createElement("link"),Xt(o,"link",r),wt(o),c.head.appendChild(o)))}}function Ab(r,o){yr.m(r,o);var l=pa;if(l&&r){var c=o&&typeof o.as=="string"?o.as:"script",y='link[rel="modulepreload"][as="'+pn(c)+'"][href="'+pn(r)+'"]',v=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=ga(r)}if(!Kn.has(v)&&(r=E({rel:"modulepreload",href:r},o),Kn.set(v,r),l.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(iu(v)))return}c=l.createElement("link"),Xt(c,"link",r),wt(c),l.head.appendChild(c)}}}function Cb(r,o,l){yr.S(r,o,l);var c=pa;if(c&&r){var y=Ni(c).hoistableStyles,v=ma(r);o=o||"default";var A=y.get(v);if(!A){var R={loading:0,preload:null};if(A=c.querySelector(nu(v)))R.loading=5;else{r=E({rel:"stylesheet",href:r,"data-precedence":o},l),(l=Kn.get(v))&&zp(r,l);var L=A=c.createElement("link");wt(L),Xt(L,"link",r),L._p=new Promise(function(Y,te){L.onload=Y,L.onerror=te}),L.addEventListener("load",function(){R.loading|=1}),L.addEventListener("error",function(){R.loading|=2}),R.loading|=4,_f(A,o,c)}A={type:"stylesheet",instance:A,count:1,state:R},y.set(v,A)}}}function Ib(r,o){yr.X(r,o);var l=pa;if(l&&r){var c=Ni(l).hoistableScripts,y=ga(r),v=c.get(y);v||(v=l.querySelector(iu(y)),v||(r=E({src:r,async:!0},o),(o=Kn.get(y))&&Jp(r,o),v=l.createElement("script"),wt(v),Xt(v,"link",r),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function wb(r,o){yr.M(r,o);var l=pa;if(l&&r){var c=Ni(l).hoistableScripts,y=ga(r),v=c.get(y);v||(v=l.querySelector(iu(y)),v||(r=E({src:r,async:!0,type:"module"},o),(o=Kn.get(y))&&Jp(r,o),v=l.createElement("script"),wt(v),Xt(v,"link",r),l.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function ME(r,o,l,c){var y=(y=De.current)?yf(y):null;if(!y)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(o=ma(l.href),l=Ni(y).hoistableStyles,c=l.get(o),c||(c={type:"style",instance:null,count:0,state:null},l.set(o,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){r=ma(l.href);var v=Ni(y).hoistableStyles,A=v.get(r);if(A||(y=y.ownerDocument||y,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(r,A),(v=y.querySelector(nu(r)))&&!v._p&&(A.instance=v,A.state.loading=5),Kn.has(r)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Kn.set(r,l),v||Rb(y,r,l,A.state))),o&&c===null)throw Error(i(528,""));return A}if(o&&c!==null)throw Error(i(529,""));return null;case"script":return o=l.async,l=l.src,typeof l=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=ga(l),l=Ni(y).hoistableScripts,c=l.get(o),c||(c={type:"script",instance:null,count:0,state:null},l.set(o,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function ma(r){return'href="'+pn(r)+'"'}function nu(r){return'link[rel="stylesheet"]['+r+"]"}function DE(r){return E({},r,{"data-precedence":r.precedence,precedence:null})}function Rb(r,o,l,c){r.querySelector('link[rel="preload"][as="style"]['+o+"]")?c.loading=1:(o=r.createElement("link"),c.preload=o,o.addEventListener("load",function(){return c.loading|=1}),o.addEventListener("error",function(){return c.loading|=2}),Xt(o,"link",l),wt(o),r.head.appendChild(o))}function ga(r){return'[src="'+pn(r)+'"]'}function iu(r){return"script[async]"+r}function PE(r,o,l){if(o.count++,o.instance===null)switch(o.type){case"style":var c=r.querySelector('style[data-href~="'+pn(l.href)+'"]');if(c)return o.instance=c,wt(c),c;var y=E({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return c=(r.ownerDocument||r).createElement("style"),wt(c),Xt(c,"style",y),_f(c,l.precedence,r),o.instance=c;case"stylesheet":y=ma(l.href);var v=r.querySelector(nu(y));if(v)return o.state.loading|=4,o.instance=v,wt(v),v;c=DE(l),(y=Kn.get(y))&&zp(c,y),v=(r.ownerDocument||r).createElement("link"),wt(v);var A=v;return A._p=new Promise(function(R,L){A.onload=R,A.onerror=L}),Xt(v,"link",c),o.state.loading|=4,_f(v,l.precedence,r),o.instance=v;case"script":return v=ga(l.src),(y=r.querySelector(iu(v)))?(o.instance=y,wt(y),y):(c=l,(y=Kn.get(v))&&(c=E({},l),Jp(c,y)),r=r.ownerDocument||r,y=r.createElement("script"),wt(y),Xt(y,"link",c),r.head.appendChild(y),o.instance=y);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(c=o.instance,o.state.loading|=4,_f(c,l.precedence,r));return o.instance}function _f(r,o,l){for(var c=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,v=y,A=0;A<c.length;A++){var R=c[A];if(R.dataset.precedence===o)v=R;else if(v!==y)break}v?v.parentNode.insertBefore(r,v.nextSibling):(o=l.nodeType===9?l.head:l,o.insertBefore(r,o.firstChild))}function zp(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.title==null&&(r.title=o.title)}function Jp(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.integrity==null&&(r.integrity=o.integrity)}var vf=null;function VE(r,o,l){if(vf===null){var c=new Map,y=vf=new Map;y.set(l,c)}else y=vf,c=y.get(l),c||(c=new Map,y.set(l,c));if(c.has(r))return c;for(c.set(r,null),l=l.getElementsByTagName(r),y=0;y<l.length;y++){var v=l[y];if(!(v[Ri]||v[It]||r==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var A=v.getAttribute(o)||"";A=r+A;var R=c.get(A);R?R.push(v):c.set(A,[v])}}return c}function UE(r,o,l){r=r.ownerDocument||r,r.head.insertBefore(l,o==="title"?r.querySelector("head > title"):null)}function bb(r,o,l){if(l===1||o.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return r=o.disabled,typeof o.precedence=="string"&&r==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function LE(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function Nb(r,o,l,c){if(l.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var y=ma(c.href),v=o.querySelector(nu(y));if(v){o=v._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(r.count++,r=Ef.bind(r),o.then(r,r)),l.state.loading|=4,l.instance=v,wt(v);return}v=o.ownerDocument||o,c=DE(c),(y=Kn.get(y))&&zp(c,y),v=v.createElement("link"),wt(v);var A=v;A._p=new Promise(function(R,L){A.onload=R,A.onerror=L}),Xt(v,"link",c),l.instance=v}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(l,o),(o=l.state.preload)&&(l.state.loading&3)===0&&(r.count++,l=Ef.bind(r),o.addEventListener("load",l),o.addEventListener("error",l))}}var Kp=0;function xb(r,o){return r.stylesheets&&r.count===0&&Sf(r,r.stylesheets),0<r.count||0<r.imgCount?function(l){var c=setTimeout(function(){if(r.stylesheets&&Sf(r,r.stylesheets),r.unsuspend){var v=r.unsuspend;r.unsuspend=null,v()}},6e4+o);0<r.imgBytes&&Kp===0&&(Kp=62500*cb());var y=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&Sf(r,r.stylesheets),r.unsuspend)){var v=r.unsuspend;r.unsuspend=null,v()}},(r.imgBytes>Kp?50:800)+o);return r.unsuspend=l,function(){r.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function Ef(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Sf(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Tf=null;function Sf(r,o){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Tf=new Map,o.forEach(Mb,r),Tf=null,Ef.call(r))}function Mb(r,o){if(!(o.state.loading&4)){var l=Tf.get(r);if(l)var c=l.get(null);else{l=new Map,Tf.set(r,l);for(var y=r.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<y.length;v++){var A=y[v];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(l.set(A.dataset.precedence,A),c=A)}c&&l.set(null,c)}y=o.instance,A=y.getAttribute("data-precedence"),v=l.get(A)||c,v===c&&l.set(null,y),l.set(A,y),this.count++,c=Ef.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),v?v.parentNode.insertBefore(y,v.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(y,r.firstChild)),o.state.loading|=4}}var ru={$$typeof:z,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function Db(r,o,l,c,y,v,A,R,L){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ii(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ii(0),this.hiddenUpdates=Ii(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=v,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function kE(r,o,l,c,y,v,A,R,L,Y,te,ie){return r=new Db(r,o,l,A,L,Y,te,ie,R),o=1,v===!0&&(o|=24),v=wn(3,null,null,o),r.current=v,v.stateNode=r,o=Ih(),o.refCount++,r.pooledCache=o,o.refCount++,v.memoizedState={element:c,isDehydrated:l,cache:o},Nh(v),r}function OE(r){return r?(r=Yo,r):Yo}function FE(r,o,l,c,y,v){y=OE(y),c.context===null?c.context=y:c.pendingContext=y,c=Kr(o),c.payload={element:l},v=v===void 0?null:v,v!==null&&(c.callback=v),l=Yr(r,c,o),l!==null&&(En(l,r,o),Ll(l,r,o))}function qE(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var l=r.retryLane;r.retryLane=l!==0&&l<o?l:o}}function Yp(r,o){qE(r,o),(r=r.alternate)&&qE(r,o)}function BE(r){if(r.tag===13||r.tag===31){var o=Zs(r,67108864);o!==null&&En(o,r,67108864),Yp(r,67108864)}}function HE(r){if(r.tag===13||r.tag===31){var o=Mn();o=qs(o);var l=Zs(r,o);l!==null&&En(l,r,o),Yp(r,o)}}var Af=!0;function Pb(r,o,l,c){var y=ee.T;ee.T=null;var v=ce.p;try{ce.p=2,$p(r,o,l,c)}finally{ce.p=v,ee.T=y}}function Vb(r,o,l,c){var y=ee.T;ee.T=null;var v=ce.p;try{ce.p=8,$p(r,o,l,c)}finally{ce.p=v,ee.T=y}}function $p(r,o,l,c){if(Af){var y=Qp(c);if(y===null)Vp(r,o,c,Cf,l),zE(r,c);else if(Lb(y,r,o,l,c))c.stopPropagation();else if(zE(r,c),o&4&&-1<Ub.indexOf(r)){for(;y!==null;){var v=Un(y);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var A=Ai(v.pendingLanes);if(A!==0){var R=v;for(R.pendingLanes|=2,R.entangledLanes|=2;A;){var L=1<<31-_t(A);R.entanglements[1]|=L,A&=~L}Hi(v),(Qe&6)===0&&(of=un()+500,Zl(0))}}break;case 31:case 13:R=Zs(v,2),R!==null&&En(R,v,2),lf(),Yp(v,2)}if(v=Qp(c),v===null&&Vp(r,o,c,Cf,l),v===y)break;y=v}y!==null&&c.stopPropagation()}else Vp(r,o,c,null,l)}}function Qp(r){return r=Ln(r),Wp(r)}var Cf=null;function Wp(r){if(Cf=null,r=bi(r),r!==null){var o=a(r);if(o===null)r=null;else{var l=o.tag;if(l===13){if(r=u(o),r!==null)return r;r=null}else if(l===31){if(r=f(o),r!==null)return r;r=null}else if(l===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return Cf=r,null}function GE(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ls()){case al:return 2;case ll:return 8;case Mr:case nh:return 32;case tc:return 268435456;default:return 32}default:return 32}}var Xp=!1,rs=null,ss=null,os=null,su=new Map,ou=new Map,as=[],Ub="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function zE(r,o){switch(r){case"focusin":case"focusout":rs=null;break;case"dragenter":case"dragleave":ss=null;break;case"mouseover":case"mouseout":os=null;break;case"pointerover":case"pointerout":su.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":ou.delete(o.pointerId)}}function au(r,o,l,c,y,v){return r===null||r.nativeEvent!==v?(r={blockedOn:o,domEventName:l,eventSystemFlags:c,nativeEvent:v,targetContainers:[y]},o!==null&&(o=Un(o),o!==null&&BE(o)),r):(r.eventSystemFlags|=c,o=r.targetContainers,y!==null&&o.indexOf(y)===-1&&o.push(y),r)}function Lb(r,o,l,c,y){switch(o){case"focusin":return rs=au(rs,r,o,l,c,y),!0;case"dragenter":return ss=au(ss,r,o,l,c,y),!0;case"mouseover":return os=au(os,r,o,l,c,y),!0;case"pointerover":var v=y.pointerId;return su.set(v,au(su.get(v)||null,r,o,l,c,y)),!0;case"gotpointercapture":return v=y.pointerId,ou.set(v,au(ou.get(v)||null,r,o,l,c,y)),!0}return!1}function JE(r){var o=bi(r.target);if(o!==null){var l=a(o);if(l!==null){if(o=l.tag,o===13){if(o=u(l),o!==null){r.blockedOn=o,ti(r.priority,function(){HE(l)});return}}else if(o===31){if(o=f(l),o!==null){r.blockedOn=o,ti(r.priority,function(){HE(l)});return}}else if(o===3&&l.stateNode.current.memoizedState.isDehydrated){r.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}r.blockedOn=null}function If(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var l=Qp(r.nativeEvent);if(l===null){l=r.nativeEvent;var c=new l.constructor(l.type,l);El=c,l.target.dispatchEvent(c),El=null}else return o=Un(l),o!==null&&BE(o),r.blockedOn=l,!1;o.shift()}return!0}function KE(r,o,l){If(r)&&l.delete(o)}function kb(){Xp=!1,rs!==null&&If(rs)&&(rs=null),ss!==null&&If(ss)&&(ss=null),os!==null&&If(os)&&(os=null),su.forEach(KE),ou.forEach(KE)}function wf(r,o){r.blockedOn===o&&(r.blockedOn=null,Xp||(Xp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,kb)))}var Rf=null;function YE(r){Rf!==r&&(Rf=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Rf===r&&(Rf=null);for(var o=0;o<r.length;o+=3){var l=r[o],c=r[o+1],y=r[o+2];if(typeof c!="function"){if(Wp(c||l)===null)continue;break}var v=Un(l);v!==null&&(r.splice(o,3),o-=3,Qh(v,{pending:!0,data:y,method:l.method,action:c},c,y))}}))}function ya(r){function o(L){return wf(L,r)}rs!==null&&wf(rs,r),ss!==null&&wf(ss,r),os!==null&&wf(os,r),su.forEach(o),ou.forEach(o);for(var l=0;l<as.length;l++){var c=as[l];c.blockedOn===r&&(c.blockedOn=null)}for(;0<as.length&&(l=as[0],l.blockedOn===null);)JE(l),l.blockedOn===null&&as.shift();if(l=(r.ownerDocument||r).$$reactFormReplay,l!=null)for(c=0;c<l.length;c+=3){var y=l[c],v=l[c+1],A=y[Bt]||null;if(typeof v=="function")A||YE(l);else if(A){var R=null;if(v&&v.hasAttribute("formAction")){if(y=v,A=v[Bt]||null)R=A.formAction;else if(Wp(y)!==null)continue}else R=A.action;typeof R=="function"?l[c+1]=R:(l.splice(c,3),c-=3),YE(l)}}}function $E(){function r(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(A){return y=A})},focusReset:"manual",scroll:"manual"})}function o(){y!==null&&(y(),y=null),c||setTimeout(l,20)}function l(){if(!c&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(l,100),function(){c=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),y!==null&&(y(),y=null)}}}function Zp(r){this._internalRoot=r}bf.prototype.render=Zp.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(i(409));var l=o.current,c=Mn();FE(l,c,r,o,null,null)},bf.prototype.unmount=Zp.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;FE(r.current,2,null,r,null,null),lf(),o[wi]=null}};function bf(r){this._internalRoot=r}bf.prototype.unstable_scheduleHydration=function(r){if(r){var o=ac();r={blockedOn:null,target:r,priority:o};for(var l=0;l<as.length&&o!==0&&o<as[l].priority;l++);as.splice(l,0,r),l===0&&JE(r)}};var QE=e.version;if(QE!=="19.2.4")throw Error(i(527,QE,"19.2.4"));ce.findDOMNode=function(r){var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=p(o),r=r!==null?_(r):null,r=r===null?null:r.stateNode,r};var Ob={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nf.isDisabled&&Nf.supportsFiber)try{jn=Nf.inject(Ob),Kt=Nf}catch{}}return uu.createRoot=function(r,o){if(!s(r))throw Error(i(299));var l=!1,c="",y=nv,v=iv,A=rv;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(c=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError)),o=kE(r,1,!1,null,null,l,c,null,y,v,A,$E),r[wi]=o.current,Pp(r),new Zp(o)},uu.hydrateRoot=function(r,o,l){if(!s(r))throw Error(i(299));var c=!1,y="",v=nv,A=iv,R=rv,L=null;return l!=null&&(l.unstable_strictMode===!0&&(c=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onUncaughtError!==void 0&&(v=l.onUncaughtError),l.onCaughtError!==void 0&&(A=l.onCaughtError),l.onRecoverableError!==void 0&&(R=l.onRecoverableError),l.formState!==void 0&&(L=l.formState)),o=kE(r,1,!0,o,l??null,c,y,L,v,A,R,$E),o.context=OE(null),l=o.current,c=Mn(),c=qs(c),y=Kr(c),y.callback=null,Yr(l,y,c),l=c,o.current.lanes=l,Os(o,l),Hi(o),r[wi]=o.current,Pp(r),new bf(o)},uu.version="19.2.4",uu}var sT;function Qb(){if(sT)return tm.exports;sT=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),tm.exports=$b(),tm.exports}var Wb=Qb();const Xb=AA(Wb);/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var oT="popstate";function Zb(n={}){function e(s,a){let{pathname:u="/",search:f="",hash:h=""}=Ao(s.location.hash.substring(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),Cm("",{pathname:u,search:f,hash:h},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(s,a){let u=s.document.querySelector("base"),f="";if(u&&u.getAttribute("href")){let h=s.location.href,p=h.indexOf("#");f=p===-1?h:h.slice(0,p)}return f+"#"+(typeof a=="string"?a:Ru(a))}function i(s,a){Qn(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return eN(e,t,i,n)}function pt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Qn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function jb(){return Math.random().toString(36).substring(2,10)}function aT(n,e){return{usr:n.state,key:n.key,idx:e}}function Cm(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Ao(e):e,state:t,key:e&&e.key||i||jb()}}function Ru({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Ao(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function eN(n,e,t,i={}){let{window:s=document.defaultView,v5Compat:a=!1}=i,u=s.history,f="POP",h=null,p=_();p==null&&(p=0,u.replaceState({...u.state,idx:p},""));function _(){return(u.state||{idx:null}).idx}function E(){f="POP";let P=_(),G=P==null?null:P-p;p=P,h&&h({action:f,location:U.location,delta:G})}function T(P,G){f="PUSH";let Q=Cm(U.location,P,G);t&&t(Q,P),p=_()+1;let z=aT(Q,p),ae=U.createHref(Q);try{u.pushState(z,"",ae)}catch(Z){if(Z instanceof DOMException&&Z.name==="DataCloneError")throw Z;s.location.assign(ae)}a&&h&&h({action:f,location:U.location,delta:1})}function I(P,G){f="REPLACE";let Q=Cm(U.location,P,G);t&&t(Q,P),p=_();let z=aT(Q,p),ae=U.createHref(Q);u.replaceState(z,"",ae),a&&h&&h({action:f,location:U.location,delta:0})}function x(P){return tN(P)}let U={get action(){return f},get location(){return n(s,u)},listen(P){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(oT,E),h=P,()=>{s.removeEventListener(oT,E),h=null}},createHref(P){return e(s,P)},createURL:x,encodeLocation(P){let G=x(P);return{pathname:G.pathname,search:G.search,hash:G.hash}},push:T,replace:I,go(P){return u.go(P)}};return U}function tN(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),pt(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:Ru(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function CA(n,e,t="/"){return nN(n,e,t,!1)}function nN(n,e,t,i){let s=typeof e=="string"?Ao(e):e,a=Tr(s.pathname||"/",t);if(a==null)return null;let u=IA(n);iN(u);let f=null;for(let h=0;f==null&&h<u.length;++h){let p=pN(a);f=dN(u[h],p,i)}return f}function IA(n,e=[],t=[],i="",s=!1){let a=(u,f,h=s,p)=>{let _={relativePath:p===void 0?u.path||"":p,caseSensitive:u.caseSensitive===!0,childrenIndex:f,route:u};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(i)&&h)return;pt(_.relativePath.startsWith(i),`Absolute route path "${_.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(i.length)}let E=Er([i,_.relativePath]),T=t.concat(_);u.children&&u.children.length>0&&(pt(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),IA(u.children,e,T,E,h)),!(u.path==null&&!u.index)&&e.push({path:E,score:cN(E,u.index),routesMeta:T})};return n.forEach((u,f)=>{var h;if(u.path===""||!((h=u.path)!=null&&h.includes("?")))a(u,f);else for(let p of wA(u.path))a(u,f,!0,p)}),e}function wA(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(i.length===0)return s?[a,""]:[a];let u=wA(i.join("/")),f=[];return f.push(...u.map(h=>h===""?a:[a,h].join("/"))),s&&f.push(...u),f.map(h=>n.startsWith("/")&&h===""?"/":h)}function iN(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:fN(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var rN=/^:[\w-]+$/,sN=3,oN=2,aN=1,lN=10,uN=-2,lT=n=>n==="*";function cN(n,e){let t=n.split("/"),i=t.length;return t.some(lT)&&(i+=uN),e&&(i+=oN),t.filter(s=>!lT(s)).reduce((s,a)=>s+(rN.test(a)?sN:a===""?aN:lN),i)}function fN(n,e){return n.length===e.length&&n.slice(0,-1).every((i,s)=>i===e[s])?n[n.length-1]-e[e.length-1]:0}function dN(n,e,t=!1){let{routesMeta:i}=n,s={},a="/",u=[];for(let f=0;f<i.length;++f){let h=i[f],p=f===i.length-1,_=a==="/"?e:e.slice(a.length)||"/",E=nd({path:h.relativePath,caseSensitive:h.caseSensitive,end:p},_),T=h.route;if(!E&&p&&t&&!i[i.length-1].route.index&&(E=nd({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},_)),!E)return null;Object.assign(s,E.params),u.push({params:s,pathname:Er([a,E.pathname]),pathnameBase:_N(Er([a,E.pathnameBase])),route:T}),E.pathnameBase!=="/"&&(a=Er([a,E.pathnameBase]))}return u}function nd(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=hN(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let a=s[0],u=a.replace(/(.)\/+$/,"$1"),f=s.slice(1);return{params:i.reduce((p,{paramName:_,isOptional:E},T)=>{if(_==="*"){let x=f[T]||"";u=a.slice(0,a.length-x.length).replace(/(.)\/+$/,"$1")}const I=f[T];return E&&!I?p[_]=void 0:p[_]=(I||"").replace(/%2F/g,"/"),p},{}),pathname:a,pathnameBase:u,pattern:n}}function hN(n,e=!1,t=!0){Qn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,f,h)=>(i.push({paramName:f,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function pN(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Qn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Tr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}var mN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function gN(n,e="/"){let{pathname:t,search:i="",hash:s=""}=typeof n=="string"?Ao(n):n,a;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?a=uT(t.substring(1),"/"):a=uT(t,e)):a=e,{pathname:a,search:vN(i),hash:EN(s)}}function uT(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function sm(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function yN(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function pg(n){let e=yN(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function mg(n,e,t,i=!1){let s;typeof n=="string"?s=Ao(n):(s={...n},pt(!s.pathname||!s.pathname.includes("?"),sm("?","pathname","search",s)),pt(!s.pathname||!s.pathname.includes("#"),sm("#","pathname","hash",s)),pt(!s.search||!s.search.includes("#"),sm("#","search","hash",s)));let a=n===""||s.pathname==="",u=a?"/":s.pathname,f;if(u==null)f=t;else{let E=e.length-1;if(!i&&u.startsWith("..")){let T=u.split("/");for(;T[0]==="..";)T.shift(),E-=1;s.pathname=T.join("/")}f=E>=0?e[E]:"/"}let h=gN(s,f),p=u&&u!=="/"&&u.endsWith("/"),_=(a||u===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(p||_)&&(h.pathname+="/"),h}var Er=n=>n.join("/").replace(/\/\/+/g,"/"),_N=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),vN=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,EN=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,TN=class{constructor(n,e,t,i=!1){this.status=n,this.statusText=e||"",this.internal=i,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function SN(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function AN(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var RA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function bA(n,e){let t=n;if(typeof t!="string"||!mN.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let i=t,s=!1;if(RA)try{let a=new URL(window.location.href),u=t.startsWith("//")?new URL(a.protocol+t):new URL(t),f=Tr(u.pathname,e);u.origin===a.origin&&f!=null?t=f+u.search+u.hash:s=!0}catch{Qn(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:s,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var NA=["POST","PUT","PATCH","DELETE"];new Set(NA);var CN=["GET",...NA];new Set(CN);var za=W.createContext(null);za.displayName="DataRouter";var Rd=W.createContext(null);Rd.displayName="DataRouterState";var IN=W.createContext(!1),xA=W.createContext({isTransitioning:!1});xA.displayName="ViewTransition";var wN=W.createContext(new Map);wN.displayName="Fetchers";var RN=W.createContext(null);RN.displayName="Await";var Pn=W.createContext(null);Pn.displayName="Navigation";var qu=W.createContext(null);qu.displayName="Location";var Zi=W.createContext({outlet:null,matches:[],isDataRoute:!1});Zi.displayName="Route";var gg=W.createContext(null);gg.displayName="RouteError";var MA="REACT_ROUTER_ERROR",bN="REDIRECT",NN="ROUTE_ERROR_RESPONSE";function xN(n){if(n.startsWith(`${MA}:${bN}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function MN(n){if(n.startsWith(`${MA}:${NN}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new TN(e.status,e.statusText,e.data)}catch{}}function DN(n,{relative:e}={}){pt(Ja(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=W.useContext(Pn),{hash:s,pathname:a,search:u}=Hu(n,{relative:e}),f=a;return t!=="/"&&(f=a==="/"?t:Er([t,a])),i.createHref({pathname:f,search:u,hash:s})}function Ja(){return W.useContext(qu)!=null}function Xn(){return pt(Ja(),"useLocation() may be used only in the context of a <Router> component."),W.useContext(qu).location}var DA="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function PA(n){W.useContext(Pn).static||W.useLayoutEffect(n)}function Bu(){let{isDataRoute:n}=W.useContext(Zi);return n?JN():PN()}function PN(){pt(Ja(),"useNavigate() may be used only in the context of a <Router> component.");let n=W.useContext(za),{basename:e,navigator:t}=W.useContext(Pn),{matches:i}=W.useContext(Zi),{pathname:s}=Xn(),a=JSON.stringify(pg(i)),u=W.useRef(!1);return PA(()=>{u.current=!0}),W.useCallback((h,p={})=>{if(Qn(u.current,DA),!u.current)return;if(typeof h=="number"){t.go(h);return}let _=mg(h,JSON.parse(a),s,p.relative==="path");n==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:Er([e,_.pathname])),(p.replace?t.replace:t.push)(_,p.state,p)},[e,t,a,s,n])}W.createContext(null);function Hu(n,{relative:e}={}){let{matches:t}=W.useContext(Zi),{pathname:i}=Xn(),s=JSON.stringify(pg(t));return W.useMemo(()=>mg(n,JSON.parse(s),i,e==="path"),[n,s,i,e])}function VN(n,e){return VA(n,e)}function VA(n,e,t,i,s){var Q;pt(Ja(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=W.useContext(Pn),{matches:u}=W.useContext(Zi),f=u[u.length-1],h=f?f.params:{},p=f?f.pathname:"/",_=f?f.pathnameBase:"/",E=f&&f.route;{let z=E&&E.path||"";LA(p,!E||z.endsWith("*")||z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${z}"> to <Route path="${z==="/"?"*":`${z}/*`}">.`)}let T=Xn(),I;if(e){let z=typeof e=="string"?Ao(e):e;pt(_==="/"||((Q=z.pathname)==null?void 0:Q.startsWith(_)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${z.pathname}" was given in the \`location\` prop.`),I=z}else I=T;let x=I.pathname||"/",U=x;if(_!=="/"){let z=_.replace(/^\//,"").split("/");U="/"+x.replace(/^\//,"").split("/").slice(z.length).join("/")}let P=CA(n,{pathname:U});Qn(E||P!=null,`No routes matched location "${I.pathname}${I.search}${I.hash}" `),Qn(P==null||P[P.length-1].route.element!==void 0||P[P.length-1].route.Component!==void 0||P[P.length-1].route.lazy!==void 0,`Matched leaf route at location "${I.pathname}${I.search}${I.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let G=FN(P&&P.map(z=>Object.assign({},z,{params:Object.assign({},h,z.params),pathname:Er([_,a.encodeLocation?a.encodeLocation(z.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?_:Er([_,a.encodeLocation?a.encodeLocation(z.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:z.pathnameBase])})),u,t,i,s);return e&&G?W.createElement(qu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...I},navigationType:"POP"}},G):G}function UN(){let n=zN(),e=SN(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},u=null;return console.error("Error handled by React Router default ErrorBoundary:",n),u=W.createElement(W.Fragment,null,W.createElement("p",null," Hey developer "),W.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",W.createElement("code",{style:a},"ErrorBoundary")," or"," ",W.createElement("code",{style:a},"errorElement")," prop on your route.")),W.createElement(W.Fragment,null,W.createElement("h2",null,"Unexpected Application Error!"),W.createElement("h3",{style:{fontStyle:"italic"}},e),t?W.createElement("pre",{style:s},t):null,u)}var LN=W.createElement(UN,null),UA=class extends W.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=MN(n.digest);t&&(n=t)}let e=n!==void 0?W.createElement(Zi.Provider,{value:this.props.routeContext},W.createElement(gg.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?W.createElement(kN,{error:n},e):e}};UA.contextType=IN;var om=new WeakMap;function kN({children:n,error:e}){let{basename:t}=W.useContext(Pn);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=xN(e.digest);if(i){let s=om.get(e);if(s)throw s;let a=bA(i.location,t);if(RA&&!om.get(e))if(a.isExternal||i.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const u=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:i.replace}));throw om.set(e,u),u}return W.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return n}function ON({routeContext:n,match:e,children:t}){let i=W.useContext(za);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),W.createElement(Zi.Provider,{value:n},t)}function FN(n,e=[],t=null,i=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,u=t==null?void 0:t.errors;if(u!=null){let _=a.findIndex(E=>E.route.id&&(u==null?void 0:u[E.route.id])!==void 0);pt(_>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),a=a.slice(0,Math.min(a.length,_+1))}let f=!1,h=-1;if(t)for(let _=0;_<a.length;_++){let E=a[_];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(h=_),E.route.id){let{loaderData:T,errors:I}=t,x=E.route.loader&&!T.hasOwnProperty(E.route.id)&&(!I||I[E.route.id]===void 0);if(E.route.lazy||x){f=!0,h>=0?a=a.slice(0,h+1):a=[a[0]];break}}}let p=t&&i?(_,E)=>{var T,I;i(_,{location:t.location,params:((I=(T=t.matches)==null?void 0:T[0])==null?void 0:I.params)??{},unstable_pattern:AN(t.matches),errorInfo:E})}:void 0;return a.reduceRight((_,E,T)=>{let I,x=!1,U=null,P=null;t&&(I=u&&E.route.id?u[E.route.id]:void 0,U=E.route.errorElement||LN,f&&(h<0&&T===0?(LA("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,P=null):h===T&&(x=!0,P=E.route.hydrateFallbackElement||null)));let G=e.concat(a.slice(0,T+1)),Q=()=>{let z;return I?z=U:x?z=P:E.route.Component?z=W.createElement(E.route.Component,null):E.route.element?z=E.route.element:z=_,W.createElement(ON,{match:E,routeContext:{outlet:_,matches:G,isDataRoute:t!=null},children:z})};return t&&(E.route.ErrorBoundary||E.route.errorElement||T===0)?W.createElement(UA,{location:t.location,revalidation:t.revalidation,component:U,error:I,children:Q(),routeContext:{outlet:null,matches:G,isDataRoute:!0},onError:p}):Q()},null)}function yg(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qN(n){let e=W.useContext(za);return pt(e,yg(n)),e}function BN(n){let e=W.useContext(Rd);return pt(e,yg(n)),e}function HN(n){let e=W.useContext(Zi);return pt(e,yg(n)),e}function _g(n){let e=HN(n),t=e.matches[e.matches.length-1];return pt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function GN(){return _g("useRouteId")}function zN(){var i;let n=W.useContext(gg),e=BN("useRouteError"),t=_g("useRouteError");return n!==void 0?n:(i=e.errors)==null?void 0:i[t]}function JN(){let{router:n}=qN("useNavigate"),e=_g("useNavigate"),t=W.useRef(!1);return PA(()=>{t.current=!0}),W.useCallback(async(s,a={})=>{Qn(t.current,DA),t.current&&(typeof s=="number"?await n.navigate(s):await n.navigate(s,{fromRouteId:e,...a}))},[n,e])}var cT={};function LA(n,e,t){!e&&!cT[n]&&(cT[n]=!0,Qn(!1,t))}W.memo(KN);function KN({routes:n,future:e,state:t,onError:i}){return VA(n,void 0,t,i,e)}function YN({to:n,replace:e,state:t,relative:i}){pt(Ja(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=W.useContext(Pn);Qn(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=W.useContext(Zi),{pathname:u}=Xn(),f=Bu(),h=mg(n,pg(a),u,i==="path"),p=JSON.stringify(h);return W.useEffect(()=>{f(JSON.parse(p),{replace:e,state:t,relative:i})},[f,p,i,e,t]),null}function Gi(n){pt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function $N({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:s,static:a=!1,unstable_useTransitions:u}){pt(!Ja(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=n.replace(/^\/*/,"/"),h=W.useMemo(()=>({basename:f,navigator:s,static:a,unstable_useTransitions:u,future:{}}),[f,s,a,u]);typeof t=="string"&&(t=Ao(t));let{pathname:p="/",search:_="",hash:E="",state:T=null,key:I="default"}=t,x=W.useMemo(()=>{let U=Tr(p,f);return U==null?null:{location:{pathname:U,search:_,hash:E,state:T,key:I},navigationType:i}},[f,p,_,E,T,I,i]);return Qn(x!=null,`<Router basename="${f}"> is not able to match the URL "${p}${_}${E}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:W.createElement(Pn.Provider,{value:h},W.createElement(qu.Provider,{children:e,value:x}))}function fT({children:n,location:e}){return VN(Im(n),e)}function Im(n,e=[]){let t=[];return W.Children.forEach(n,(i,s)=>{if(!W.isValidElement(i))return;let a=[...e,s];if(i.type===W.Fragment){t.push.apply(t,Im(i.props.children,a));return}pt(i.type===Gi,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),pt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let u={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=Im(i.props.children,a)),t.push(u)}),t}var Hf="get",Gf="application/x-www-form-urlencoded";function bd(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function QN(n){return bd(n)&&n.tagName.toLowerCase()==="button"}function WN(n){return bd(n)&&n.tagName.toLowerCase()==="form"}function XN(n){return bd(n)&&n.tagName.toLowerCase()==="input"}function ZN(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function jN(n,e){return n.button===0&&(!e||e==="_self")&&!ZN(n)}var xf=null;function ex(){if(xf===null)try{new FormData(document.createElement("form"),0),xf=!1}catch{xf=!0}return xf}var tx=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function am(n){return n!=null&&!tx.has(n)?(Qn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Gf}"`),null):n}function nx(n,e){let t,i,s,a,u;if(WN(n)){let f=n.getAttribute("action");i=f?Tr(f,e):null,t=n.getAttribute("method")||Hf,s=am(n.getAttribute("enctype"))||Gf,a=new FormData(n)}else if(QN(n)||XN(n)&&(n.type==="submit"||n.type==="image")){let f=n.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=n.getAttribute("formaction")||f.getAttribute("action");if(i=h?Tr(h,e):null,t=n.getAttribute("formmethod")||f.getAttribute("method")||Hf,s=am(n.getAttribute("formenctype"))||am(f.getAttribute("enctype"))||Gf,a=new FormData(f,n),!ex()){let{name:p,type:_,value:E}=n;if(_==="image"){let T=p?`${p}.`:"";a.append(`${T}x`,"0"),a.append(`${T}y`,"0")}else p&&a.append(p,E)}}else{if(bd(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Hf,i=null,s=Gf,u=n}return a&&s==="text/plain"&&(u=a,a=void 0),{action:i,method:t.toLowerCase(),encType:s,formData:a,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function vg(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function ix(n,e,t,i){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${i}`:s.pathname=`${s.pathname}.${i}`:s.pathname==="/"?s.pathname=`_root.${i}`:e&&Tr(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${i}`,s}async function rx(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function sx(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function ox(n,e,t){let i=await Promise.all(n.map(async s=>{let a=e.routes[s.route.id];if(a){let u=await rx(a,t);return u.links?u.links():[]}return[]}));return cx(i.flat(1).filter(sx).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function dT(n,e,t,i,s,a){let u=(h,p)=>t[p]?h.route.id!==t[p].route.id:!0,f=(h,p)=>{var _;return t[p].pathname!==h.pathname||((_=t[p].route.path)==null?void 0:_.endsWith("*"))&&t[p].params["*"]!==h.params["*"]};return a==="assets"?e.filter((h,p)=>u(h,p)||f(h,p)):a==="data"?e.filter((h,p)=>{var E;let _=i.routes[h.route.id];if(!_||!_.hasLoader)return!1;if(u(h,p)||f(h,p))return!0;if(h.route.shouldRevalidate){let T=h.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((E=t[0])==null?void 0:E.params)||{},nextUrl:new URL(n,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function ax(n,e,{includeHydrateFallback:t}={}){return lx(n.map(i=>{let s=e.routes[i.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function lx(n){return[...new Set(n)]}function ux(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function cx(n,e){let t=new Set;return new Set(e),n.reduce((i,s)=>{let a=JSON.stringify(ux(s));return t.has(a)||(t.add(a),i.push({key:a,link:s})),i},[])}function kA(){let n=W.useContext(za);return vg(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function fx(){let n=W.useContext(Rd);return vg(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Eg=W.createContext(void 0);Eg.displayName="FrameworkContext";function OA(){let n=W.useContext(Eg);return vg(n,"You must render this element inside a <HydratedRouter> element"),n}function dx(n,e){let t=W.useContext(Eg),[i,s]=W.useState(!1),[a,u]=W.useState(!1),{onFocus:f,onBlur:h,onMouseEnter:p,onMouseLeave:_,onTouchStart:E}=e,T=W.useRef(null);W.useEffect(()=>{if(n==="render"&&u(!0),n==="viewport"){let U=G=>{G.forEach(Q=>{u(Q.isIntersecting)})},P=new IntersectionObserver(U,{threshold:.5});return T.current&&P.observe(T.current),()=>{P.disconnect()}}},[n]),W.useEffect(()=>{if(i){let U=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(U)}}},[i]);let I=()=>{s(!0)},x=()=>{s(!1),u(!1)};return t?n!=="intent"?[a,T,{}]:[a,T,{onFocus:cu(f,I),onBlur:cu(h,x),onMouseEnter:cu(p,I),onMouseLeave:cu(_,x),onTouchStart:cu(E,I)}]:[!1,T,{}]}function cu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function hx({page:n,...e}){let{router:t}=kA(),i=W.useMemo(()=>CA(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?W.createElement(mx,{page:n,matches:i,...e}):null}function px(n){let{manifest:e,routeModules:t}=OA(),[i,s]=W.useState([]);return W.useEffect(()=>{let a=!1;return ox(n,e,t).then(u=>{a||s(u)}),()=>{a=!0}},[n,e,t]),i}function mx({page:n,matches:e,...t}){let i=Xn(),{future:s,manifest:a,routeModules:u}=OA(),{basename:f}=kA(),{loaderData:h,matches:p}=fx(),_=W.useMemo(()=>dT(n,e,p,a,i,"data"),[n,e,p,a,i]),E=W.useMemo(()=>dT(n,e,p,a,i,"assets"),[n,e,p,a,i]),T=W.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let U=new Set,P=!1;if(e.forEach(Q=>{var ae;let z=a.routes[Q.route.id];!z||!z.hasLoader||(!_.some(Z=>Z.route.id===Q.route.id)&&Q.route.id in h&&((ae=u[Q.route.id])!=null&&ae.shouldRevalidate)||z.hasClientLoader?P=!0:U.add(Q.route.id))}),U.size===0)return[];let G=ix(n,f,s.unstable_trailingSlashAwareDataRequests,"data");return P&&U.size>0&&G.searchParams.set("_routes",e.filter(Q=>U.has(Q.route.id)).map(Q=>Q.route.id).join(",")),[G.pathname+G.search]},[f,s.unstable_trailingSlashAwareDataRequests,h,i,a,_,e,n,u]),I=W.useMemo(()=>ax(E,a),[E,a]),x=px(E);return W.createElement(W.Fragment,null,T.map(U=>W.createElement("link",{key:U,rel:"prefetch",as:"fetch",href:U,...t})),I.map(U=>W.createElement("link",{key:U,rel:"modulepreload",href:U,...t})),x.map(({key:U,link:P})=>W.createElement("link",{key:U,nonce:t.nonce,...P,crossOrigin:P.crossOrigin??t.crossOrigin})))}function gx(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var yx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{yx&&(window.__reactRouterVersion="7.13.0")}catch{}function _x({basename:n,children:e,unstable_useTransitions:t,window:i}){let s=W.useRef();s.current==null&&(s.current=Zb({window:i,v5Compat:!0}));let a=s.current,[u,f]=W.useState({action:a.action,location:a.location}),h=W.useCallback(p=>{t===!1?f(p):W.startTransition(()=>f(p))},[t]);return W.useLayoutEffect(()=>a.listen(h),[a,h]),W.createElement($N,{basename:n,children:e,location:u.location,navigationType:u.action,navigator:a,unstable_useTransitions:t})}var FA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rn=W.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:s,reloadDocument:a,replace:u,state:f,target:h,to:p,preventScrollReset:_,viewTransition:E,unstable_defaultShouldRevalidate:T,...I},x){let{basename:U,unstable_useTransitions:P}=W.useContext(Pn),G=typeof p=="string"&&FA.test(p),Q=bA(p,U);p=Q.to;let z=DN(p,{relative:s}),[ae,Z,ue]=dx(i,I),D=Sx(p,{replace:u,state:f,target:h,preventScrollReset:_,relative:s,viewTransition:E,unstable_defaultShouldRevalidate:T,unstable_useTransitions:P});function M(k){e&&e(k),k.defaultPrevented||D(k)}let N=W.createElement("a",{...I,...ue,href:Q.absoluteURL||z,onClick:Q.isExternal||a?e:M,ref:gx(x,Z),target:h,"data-discover":!G&&t==="render"?"true":void 0});return ae&&!G?W.createElement(W.Fragment,null,N,W.createElement(hx,{page:z})):N});rn.displayName="Link";var vx=W.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:s=!1,style:a,to:u,viewTransition:f,children:h,...p},_){let E=Hu(u,{relative:p.relative}),T=Xn(),I=W.useContext(Rd),{navigator:x,basename:U}=W.useContext(Pn),P=I!=null&&Rx(E)&&f===!0,G=x.encodeLocation?x.encodeLocation(E).pathname:E.pathname,Q=T.pathname,z=I&&I.navigation&&I.navigation.location?I.navigation.location.pathname:null;t||(Q=Q.toLowerCase(),z=z?z.toLowerCase():null,G=G.toLowerCase()),z&&U&&(z=Tr(z,U)||z);const ae=G!=="/"&&G.endsWith("/")?G.length-1:G.length;let Z=Q===G||!s&&Q.startsWith(G)&&Q.charAt(ae)==="/",ue=z!=null&&(z===G||!s&&z.startsWith(G)&&z.charAt(G.length)==="/"),D={isActive:Z,isPending:ue,isTransitioning:P},M=Z?e:void 0,N;typeof i=="function"?N=i(D):N=[i,Z?"active":null,ue?"pending":null,P?"transitioning":null].filter(Boolean).join(" ");let k=typeof a=="function"?a(D):a;return W.createElement(rn,{...p,"aria-current":M,className:N,ref:_,style:k,to:u,viewTransition:f},typeof h=="function"?h(D):h)});vx.displayName="NavLink";var Ex=W.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:s,state:a,method:u=Hf,action:f,onSubmit:h,relative:p,preventScrollReset:_,viewTransition:E,unstable_defaultShouldRevalidate:T,...I},x)=>{let{unstable_useTransitions:U}=W.useContext(Pn),P=Ix(),G=wx(f,{relative:p}),Q=u.toLowerCase()==="get"?"get":"post",z=typeof f=="string"&&FA.test(f),ae=Z=>{if(h&&h(Z),Z.defaultPrevented)return;Z.preventDefault();let ue=Z.nativeEvent.submitter,D=(ue==null?void 0:ue.getAttribute("formmethod"))||u,M=()=>P(ue||Z.currentTarget,{fetcherKey:e,method:D,navigate:t,replace:s,state:a,relative:p,preventScrollReset:_,viewTransition:E,unstable_defaultShouldRevalidate:T});U&&t!==!1?W.startTransition(()=>M()):M()};return W.createElement("form",{ref:x,method:Q,action:G,onSubmit:i?h:ae,...I,"data-discover":!z&&n==="render"?"true":void 0})});Ex.displayName="Form";function Tx(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qA(n){let e=W.useContext(za);return pt(e,Tx(n)),e}function Sx(n,{target:e,replace:t,state:i,preventScrollReset:s,relative:a,viewTransition:u,unstable_defaultShouldRevalidate:f,unstable_useTransitions:h}={}){let p=Bu(),_=Xn(),E=Hu(n,{relative:a});return W.useCallback(T=>{if(jN(T,e)){T.preventDefault();let I=t!==void 0?t:Ru(_)===Ru(E),x=()=>p(n,{replace:I,state:i,preventScrollReset:s,relative:a,viewTransition:u,unstable_defaultShouldRevalidate:f});h?W.startTransition(()=>x()):x()}},[_,p,E,t,i,e,n,s,a,u,f,h])}var Ax=0,Cx=()=>`__${String(++Ax)}__`;function Ix(){let{router:n}=qA("useSubmit"),{basename:e}=W.useContext(Pn),t=GN(),i=n.fetch,s=n.navigate;return W.useCallback(async(a,u={})=>{let{action:f,method:h,encType:p,formData:_,body:E}=nx(a,e);if(u.navigate===!1){let T=u.fetcherKey||Cx();await i(T,t,u.action||f,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:_,body:E,formMethod:u.method||h,formEncType:u.encType||p,flushSync:u.flushSync})}else await s(u.action||f,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:_,body:E,formMethod:u.method||h,formEncType:u.encType||p,replace:u.replace,state:u.state,fromRouteId:t,flushSync:u.flushSync,viewTransition:u.viewTransition})},[i,s,e,t])}function wx(n,{relative:e}={}){let{basename:t}=W.useContext(Pn),i=W.useContext(Zi);pt(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),a={...Hu(n||".",{relative:e})},u=Xn();if(n==null){a.search=u.search;let f=new URLSearchParams(a.search),h=f.getAll("index");if(h.some(_=>_==="")){f.delete("index"),h.filter(E=>E).forEach(E=>f.append("index",E));let _=f.toString();a.search=_?`?${_}`:""}}return(!n||n===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:Er([t,a.pathname])),Ru(a)}function Rx(n,{relative:e}={}){let t=W.useContext(xA);pt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=qA("useViewTransitionState"),s=Hu(n,{relative:e});if(!t.isTransitioning)return!1;let a=Tr(t.currentLocation.pathname,i)||t.currentLocation.pathname,u=Tr(t.nextLocation.pathname,i)||t.nextLocation.pathname;return nd(s.pathname,u)!=null||nd(s.pathname,a)!=null}const bx=()=>{};var hT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},Nx=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const s=n[t++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const a=n[t++];e[i++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=n[t++],u=n[t++],f=n[t++],h=((s&7)<<18|(a&63)<<12|(u&63)<<6|f&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const a=n[t++],u=n[t++];e[i++]=String.fromCharCode((s&15)<<12|(a&63)<<6|u&63)}}return e.join("")},HA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const a=n[s],u=s+1<n.length,f=u?n[s+1]:0,h=s+2<n.length,p=h?n[s+2]:0,_=a>>2,E=(a&3)<<4|f>>4;let T=(f&15)<<2|p>>6,I=p&63;h||(I=64,u||(T=64)),i.push(t[_],t[E],t[T],t[I])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(BA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Nx(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const a=t[n.charAt(s++)],f=s<n.length?t[n.charAt(s)]:0;++s;const p=s<n.length?t[n.charAt(s)]:64;++s;const E=s<n.length?t[n.charAt(s)]:64;if(++s,a==null||f==null||p==null||E==null)throw new xx;const T=a<<2|f>>4;if(i.push(T),p!==64){const I=f<<4&240|p>>2;if(i.push(I),E!==64){const x=p<<6&192|E;i.push(x)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class xx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Mx=function(n){const e=BA(n);return HA.encodeByteArray(e,!0)},id=function(n){return Mx(n).replace(/\./g,"")},GA=function(n){try{return HA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px=()=>Dx().__FIREBASE_DEFAULTS__,Vx=()=>{if(typeof process>"u"||typeof hT>"u")return;const n=hT.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Ux=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&GA(n[1]);return e&&JSON.parse(e)},Nd=()=>{try{return bx()||Px()||Vx()||Ux()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},zA=n=>{var e,t;return(t=(e=Nd())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},Lx=n=>{const e=zA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},JA=()=>{var n;return(n=Nd())==null?void 0:n.config},KA=n=>{var e;return(e=Nd())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ka(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function YA(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",s=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[id(JSON.stringify(t)),id(JSON.stringify(u)),""].join(".")}const Tu={};function Fx(){const n={prod:[],emulator:[]};for(const e of Object.keys(Tu))Tu[e]?n.emulator.push(e):n.prod.push(e);return n}function qx(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let pT=!1;function $A(n,e){if(typeof window>"u"||typeof document>"u"||!Ka(window.location.host)||Tu[n]===e||Tu[n]||pT)return;Tu[n]=e;function t(T){return`__firebase__banner__${T}`}const i="__firebase__banner",a=Fx().prod.length>0;function u(){const T=document.getElementById(i);T&&T.remove()}function f(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function h(T,I){T.setAttribute("width","24"),T.setAttribute("id",I),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function p(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{pT=!0,u()},T}function _(T,I){T.setAttribute("id",I),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function E(){const T=qx(i),I=t("text"),x=document.getElementById(I)||document.createElement("span"),U=t("learnmore"),P=document.getElementById(U)||document.createElement("a"),G=t("preprendIcon"),Q=document.getElementById(G)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const z=T.element;f(z),_(P,U);const ae=p();h(Q,G),z.append(Q,x,P,ae),document.body.appendChild(z)}a?(x.innerText="Preview backend disconnected.",Q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Bx(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ln())}function Hx(){var e;const n=(e=Nd())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Gx(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function zx(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Jx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Kx(){const n=ln();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Yx(){return!Hx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $x(){try{return typeof indexedDB=="object"}catch{return!1}}function Qx(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var a;e(((a=s.error)==null?void 0:a.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx="FirebaseError";class Rr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=Wx,Object.setPrototypeOf(this,Rr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gu.prototype.create)}}class Gu{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},s=`${this.service}/${e}`,a=this.errors[e],u=a?Xx(a,i):"Error",f=`${this.serviceName}: ${u} (${s}).`;return new Rr(s,f,i)}}function Xx(n,e){return n.replace(Zx,(t,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const Zx=/\{\$([^}]+)}/g;function jx(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function yo(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const s of t){if(!i.includes(s))return!1;const a=n[s],u=e[s];if(mT(a)&&mT(u)){if(!yo(a,u))return!1}else if(a!==u)return!1}for(const s of i)if(!t.includes(s))return!1;return!0}function mT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zu(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function pu(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,a]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function mu(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function eM(n,e){const t=new tM(n,e);return t.subscribe.bind(t)}class tM{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let s;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");nM(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:i},s.next===void 0&&(s.next=lm),s.error===void 0&&(s.error=lm),s.complete===void 0&&(s.complete=lm);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nM(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function lm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(n){return n&&n._delegate?n._delegate:n}class _o{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new kx;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sM(e))try{this.getOrInitializeService({instanceIdentifier:fo})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:s});i.resolve(a)}catch{}}}}clearInstance(e=fo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=fo){return this.instances.has(e)}getOptions(e=fo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(a);i===f&&u.resolve(s)}return s}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const s of i)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:rM(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=fo){return this.component?this.component.multipleInstances?e:fo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rM(n){return n===fo?void 0:n}function sM(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new iM(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Fe||(Fe={}));const aM={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},lM=Fe.INFO,uM={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},cM=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),s=uM[e];if(s)console[s](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Tg{constructor(e){this.name=e,this._logLevel=lM,this._logHandler=cM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?aM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...e),this._logHandler(this,Fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...e),this._logHandler(this,Fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...e),this._logHandler(this,Fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...e),this._logHandler(this,Fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...e),this._logHandler(this,Fe.ERROR,...e)}}const fM=(n,e)=>e.some(t=>n instanceof t);let gT,yT;function dM(){return gT||(gT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hM(){return yT||(yT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const QA=new WeakMap,wm=new WeakMap,WA=new WeakMap,um=new WeakMap,Sg=new WeakMap;function pM(n){const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("success",a),n.removeEventListener("error",u)},a=()=>{t(gs(n.result)),s()},u=()=>{i(n.error),s()};n.addEventListener("success",a),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&QA.set(t,n)}).catch(()=>{}),Sg.set(e,n),e}function mM(n){if(wm.has(n))return;const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",u),n.removeEventListener("abort",u)},a=()=>{t(),s()},u=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",a),n.addEventListener("error",u),n.addEventListener("abort",u)});wm.set(n,e)}let Rm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return wm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||WA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return gs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function gM(n){Rm=n(Rm)}function yM(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(cm(this),e,...t);return WA.set(i,e.sort?e.sort():[e]),gs(i)}:hM().includes(n)?function(...e){return n.apply(cm(this),e),gs(QA.get(this))}:function(...e){return gs(n.apply(cm(this),e))}}function _M(n){return typeof n=="function"?yM(n):(n instanceof IDBTransaction&&mM(n),fM(n,dM())?new Proxy(n,Rm):n)}function gs(n){if(n instanceof IDBRequest)return pM(n);if(um.has(n))return um.get(n);const e=_M(n);return e!==n&&(um.set(n,e),Sg.set(e,n)),e}const cm=n=>Sg.get(n);function vM(n,e,{blocked:t,upgrade:i,blocking:s,terminated:a}={}){const u=indexedDB.open(n,e),f=gs(u);return i&&u.addEventListener("upgradeneeded",h=>{i(gs(u.result),h.oldVersion,h.newVersion,gs(u.transaction),h)}),t&&u.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),f.then(h=>{a&&h.addEventListener("close",()=>a()),s&&h.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),f}const EM=["get","getKey","getAll","getAllKeys","count"],TM=["put","add","delete","clear"],fm=new Map;function _T(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(fm.get(e))return fm.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,s=TM.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(s||EM.includes(t)))return;const a=async function(u,...f){const h=this.transaction(u,s?"readwrite":"readonly");let p=h.store;return i&&(p=p.index(f.shift())),(await Promise.all([p[t](...f),s&&h.done]))[0]};return fm.set(e,a),a}gM(n=>({...n,get:(e,t,i)=>_T(e,t)||n.get(e,t,i),has:(e,t)=>!!_T(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(AM(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function AM(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const bm="@firebase/app",vT="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sr=new Tg("@firebase/app"),CM="@firebase/app-compat",IM="@firebase/analytics-compat",wM="@firebase/analytics",RM="@firebase/app-check-compat",bM="@firebase/app-check",NM="@firebase/auth",xM="@firebase/auth-compat",MM="@firebase/database",DM="@firebase/data-connect",PM="@firebase/database-compat",VM="@firebase/functions",UM="@firebase/functions-compat",LM="@firebase/installations",kM="@firebase/installations-compat",OM="@firebase/messaging",FM="@firebase/messaging-compat",qM="@firebase/performance",BM="@firebase/performance-compat",HM="@firebase/remote-config",GM="@firebase/remote-config-compat",zM="@firebase/storage",JM="@firebase/storage-compat",KM="@firebase/firestore",YM="@firebase/ai",$M="@firebase/firestore-compat",QM="firebase",WM="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nm="[DEFAULT]",XM={[bm]:"fire-core",[CM]:"fire-core-compat",[wM]:"fire-analytics",[IM]:"fire-analytics-compat",[bM]:"fire-app-check",[RM]:"fire-app-check-compat",[NM]:"fire-auth",[xM]:"fire-auth-compat",[MM]:"fire-rtdb",[DM]:"fire-data-connect",[PM]:"fire-rtdb-compat",[VM]:"fire-fn",[UM]:"fire-fn-compat",[LM]:"fire-iid",[kM]:"fire-iid-compat",[OM]:"fire-fcm",[FM]:"fire-fcm-compat",[qM]:"fire-perf",[BM]:"fire-perf-compat",[HM]:"fire-rc",[GM]:"fire-rc-compat",[zM]:"fire-gcs",[JM]:"fire-gcs-compat",[KM]:"fire-fst",[$M]:"fire-fst-compat",[YM]:"fire-vertex","fire-js":"fire-js",[QM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rd=new Map,ZM=new Map,xm=new Map;function ET(n,e){try{n.container.addComponent(e)}catch(t){Sr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Va(n){const e=n.name;if(xm.has(e))return Sr.debug(`There were multiple attempts to register component ${e}.`),!1;xm.set(e,n);for(const t of rd.values())ET(t,n);for(const t of ZM.values())ET(t,n);return!0}function Ag(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function fi(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ys=new Gu("app","Firebase",jM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new _o("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ys.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ya=WM;function XA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:Nm,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw ys.create("bad-app-name",{appName:String(s)});if(t||(t=JA()),!t)throw ys.create("no-options");const a=rd.get(s);if(a){if(yo(t,a.options)&&yo(i,a.config))return a;throw ys.create("duplicate-app",{appName:s})}const u=new oM(s);for(const h of xm.values())u.addComponent(h);const f=new e1(t,i,u);return rd.set(s,f),f}function ZA(n=Nm){const e=rd.get(n);if(!e&&n===Nm&&JA())return XA();if(!e)throw ys.create("no-app",{appName:n});return e}function _s(n,e,t){let i=XM[n]??n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const u=[`Unable to register library "${i}" with version "${e}":`];s&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Sr.warn(u.join(" "));return}Va(new _o(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1="firebase-heartbeat-database",n1=1,bu="firebase-heartbeat-store";let dm=null;function jA(){return dm||(dm=vM(t1,n1,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(bu)}catch(t){console.warn(t)}}}}).catch(n=>{throw ys.create("idb-open",{originalErrorMessage:n.message})})),dm}async function i1(n){try{const t=(await jA()).transaction(bu),i=await t.objectStore(bu).get(eC(n));return await t.done,i}catch(e){if(e instanceof Rr)Sr.warn(e.message);else{const t=ys.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Sr.warn(t.message)}}}async function TT(n,e){try{const i=(await jA()).transaction(bu,"readwrite");await i.objectStore(bu).put(e,eC(n)),await i.done}catch(t){if(t instanceof Rr)Sr.warn(t.message);else{const i=ys.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Sr.warn(i.message)}}}function eC(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1=1024,s1=30;class o1{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new l1(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=ST();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(u=>u.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>s1){const u=u1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Sr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=ST(),{heartbeatsToSend:i,unsentEntries:s}=a1(this._heartbeatsCache.heartbeats),a=id(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Sr.warn(t),""}}}function ST(){return new Date().toISOString().substring(0,10)}function a1(n,e=r1){const t=[];let i=n.slice();for(const s of n){const a=t.find(u=>u.agent===s.agent);if(a){if(a.dates.push(s.date),AT(t)>e){a.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),AT(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class l1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $x()?Qx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await i1(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return TT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return TT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function AT(n){return id(JSON.stringify({version:2,heartbeats:n})).length}function u1(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1(n){Va(new _o("platform-logger",e=>new SM(e),"PRIVATE")),Va(new _o("heartbeat",e=>new o1(e),"PRIVATE")),_s(bm,vT,n),_s(bm,vT,"esm2020"),_s("fire-js","")}c1("");var CT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vs,tC;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,M){function N(){}N.prototype=M.prototype,D.F=M.prototype,D.prototype=new N,D.prototype.constructor=D,D.D=function(k,O,B){for(var V=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)V[Me-2]=arguments[Me];return M.prototype[O].apply(k,V)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(D,M,N){N||(N=0);const k=Array(16);if(typeof M=="string")for(var O=0;O<16;++O)k[O]=M.charCodeAt(N++)|M.charCodeAt(N++)<<8|M.charCodeAt(N++)<<16|M.charCodeAt(N++)<<24;else for(O=0;O<16;++O)k[O]=M[N++]|M[N++]<<8|M[N++]<<16|M[N++]<<24;M=D.g[0],N=D.g[1],O=D.g[2];let B=D.g[3],V;V=M+(B^N&(O^B))+k[0]+3614090360&4294967295,M=N+(V<<7&4294967295|V>>>25),V=B+(O^M&(N^O))+k[1]+3905402710&4294967295,B=M+(V<<12&4294967295|V>>>20),V=O+(N^B&(M^N))+k[2]+606105819&4294967295,O=B+(V<<17&4294967295|V>>>15),V=N+(M^O&(B^M))+k[3]+3250441966&4294967295,N=O+(V<<22&4294967295|V>>>10),V=M+(B^N&(O^B))+k[4]+4118548399&4294967295,M=N+(V<<7&4294967295|V>>>25),V=B+(O^M&(N^O))+k[5]+1200080426&4294967295,B=M+(V<<12&4294967295|V>>>20),V=O+(N^B&(M^N))+k[6]+2821735955&4294967295,O=B+(V<<17&4294967295|V>>>15),V=N+(M^O&(B^M))+k[7]+4249261313&4294967295,N=O+(V<<22&4294967295|V>>>10),V=M+(B^N&(O^B))+k[8]+1770035416&4294967295,M=N+(V<<7&4294967295|V>>>25),V=B+(O^M&(N^O))+k[9]+2336552879&4294967295,B=M+(V<<12&4294967295|V>>>20),V=O+(N^B&(M^N))+k[10]+4294925233&4294967295,O=B+(V<<17&4294967295|V>>>15),V=N+(M^O&(B^M))+k[11]+2304563134&4294967295,N=O+(V<<22&4294967295|V>>>10),V=M+(B^N&(O^B))+k[12]+1804603682&4294967295,M=N+(V<<7&4294967295|V>>>25),V=B+(O^M&(N^O))+k[13]+4254626195&4294967295,B=M+(V<<12&4294967295|V>>>20),V=O+(N^B&(M^N))+k[14]+2792965006&4294967295,O=B+(V<<17&4294967295|V>>>15),V=N+(M^O&(B^M))+k[15]+1236535329&4294967295,N=O+(V<<22&4294967295|V>>>10),V=M+(O^B&(N^O))+k[1]+4129170786&4294967295,M=N+(V<<5&4294967295|V>>>27),V=B+(N^O&(M^N))+k[6]+3225465664&4294967295,B=M+(V<<9&4294967295|V>>>23),V=O+(M^N&(B^M))+k[11]+643717713&4294967295,O=B+(V<<14&4294967295|V>>>18),V=N+(B^M&(O^B))+k[0]+3921069994&4294967295,N=O+(V<<20&4294967295|V>>>12),V=M+(O^B&(N^O))+k[5]+3593408605&4294967295,M=N+(V<<5&4294967295|V>>>27),V=B+(N^O&(M^N))+k[10]+38016083&4294967295,B=M+(V<<9&4294967295|V>>>23),V=O+(M^N&(B^M))+k[15]+3634488961&4294967295,O=B+(V<<14&4294967295|V>>>18),V=N+(B^M&(O^B))+k[4]+3889429448&4294967295,N=O+(V<<20&4294967295|V>>>12),V=M+(O^B&(N^O))+k[9]+568446438&4294967295,M=N+(V<<5&4294967295|V>>>27),V=B+(N^O&(M^N))+k[14]+3275163606&4294967295,B=M+(V<<9&4294967295|V>>>23),V=O+(M^N&(B^M))+k[3]+4107603335&4294967295,O=B+(V<<14&4294967295|V>>>18),V=N+(B^M&(O^B))+k[8]+1163531501&4294967295,N=O+(V<<20&4294967295|V>>>12),V=M+(O^B&(N^O))+k[13]+2850285829&4294967295,M=N+(V<<5&4294967295|V>>>27),V=B+(N^O&(M^N))+k[2]+4243563512&4294967295,B=M+(V<<9&4294967295|V>>>23),V=O+(M^N&(B^M))+k[7]+1735328473&4294967295,O=B+(V<<14&4294967295|V>>>18),V=N+(B^M&(O^B))+k[12]+2368359562&4294967295,N=O+(V<<20&4294967295|V>>>12),V=M+(N^O^B)+k[5]+4294588738&4294967295,M=N+(V<<4&4294967295|V>>>28),V=B+(M^N^O)+k[8]+2272392833&4294967295,B=M+(V<<11&4294967295|V>>>21),V=O+(B^M^N)+k[11]+1839030562&4294967295,O=B+(V<<16&4294967295|V>>>16),V=N+(O^B^M)+k[14]+4259657740&4294967295,N=O+(V<<23&4294967295|V>>>9),V=M+(N^O^B)+k[1]+2763975236&4294967295,M=N+(V<<4&4294967295|V>>>28),V=B+(M^N^O)+k[4]+1272893353&4294967295,B=M+(V<<11&4294967295|V>>>21),V=O+(B^M^N)+k[7]+4139469664&4294967295,O=B+(V<<16&4294967295|V>>>16),V=N+(O^B^M)+k[10]+3200236656&4294967295,N=O+(V<<23&4294967295|V>>>9),V=M+(N^O^B)+k[13]+681279174&4294967295,M=N+(V<<4&4294967295|V>>>28),V=B+(M^N^O)+k[0]+3936430074&4294967295,B=M+(V<<11&4294967295|V>>>21),V=O+(B^M^N)+k[3]+3572445317&4294967295,O=B+(V<<16&4294967295|V>>>16),V=N+(O^B^M)+k[6]+76029189&4294967295,N=O+(V<<23&4294967295|V>>>9),V=M+(N^O^B)+k[9]+3654602809&4294967295,M=N+(V<<4&4294967295|V>>>28),V=B+(M^N^O)+k[12]+3873151461&4294967295,B=M+(V<<11&4294967295|V>>>21),V=O+(B^M^N)+k[15]+530742520&4294967295,O=B+(V<<16&4294967295|V>>>16),V=N+(O^B^M)+k[2]+3299628645&4294967295,N=O+(V<<23&4294967295|V>>>9),V=M+(O^(N|~B))+k[0]+4096336452&4294967295,M=N+(V<<6&4294967295|V>>>26),V=B+(N^(M|~O))+k[7]+1126891415&4294967295,B=M+(V<<10&4294967295|V>>>22),V=O+(M^(B|~N))+k[14]+2878612391&4294967295,O=B+(V<<15&4294967295|V>>>17),V=N+(B^(O|~M))+k[5]+4237533241&4294967295,N=O+(V<<21&4294967295|V>>>11),V=M+(O^(N|~B))+k[12]+1700485571&4294967295,M=N+(V<<6&4294967295|V>>>26),V=B+(N^(M|~O))+k[3]+2399980690&4294967295,B=M+(V<<10&4294967295|V>>>22),V=O+(M^(B|~N))+k[10]+4293915773&4294967295,O=B+(V<<15&4294967295|V>>>17),V=N+(B^(O|~M))+k[1]+2240044497&4294967295,N=O+(V<<21&4294967295|V>>>11),V=M+(O^(N|~B))+k[8]+1873313359&4294967295,M=N+(V<<6&4294967295|V>>>26),V=B+(N^(M|~O))+k[15]+4264355552&4294967295,B=M+(V<<10&4294967295|V>>>22),V=O+(M^(B|~N))+k[6]+2734768916&4294967295,O=B+(V<<15&4294967295|V>>>17),V=N+(B^(O|~M))+k[13]+1309151649&4294967295,N=O+(V<<21&4294967295|V>>>11),V=M+(O^(N|~B))+k[4]+4149444226&4294967295,M=N+(V<<6&4294967295|V>>>26),V=B+(N^(M|~O))+k[11]+3174756917&4294967295,B=M+(V<<10&4294967295|V>>>22),V=O+(M^(B|~N))+k[2]+718787259&4294967295,O=B+(V<<15&4294967295|V>>>17),V=N+(B^(O|~M))+k[9]+3951481745&4294967295,D.g[0]=D.g[0]+M&4294967295,D.g[1]=D.g[1]+(O+(V<<21&4294967295|V>>>11))&4294967295,D.g[2]=D.g[2]+O&4294967295,D.g[3]=D.g[3]+B&4294967295}i.prototype.v=function(D,M){M===void 0&&(M=D.length);const N=M-this.blockSize,k=this.C;let O=this.h,B=0;for(;B<M;){if(O==0)for(;B<=N;)s(this,D,B),B+=this.blockSize;if(typeof D=="string"){for(;B<M;)if(k[O++]=D.charCodeAt(B++),O==this.blockSize){s(this,k),O=0;break}}else for(;B<M;)if(k[O++]=D[B++],O==this.blockSize){s(this,k),O=0;break}}this.h=O,this.o+=M},i.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var M=1;M<D.length-8;++M)D[M]=0;M=this.o*8;for(var N=D.length-8;N<D.length;++N)D[N]=M&255,M/=256;for(this.v(D),D=Array(16),M=0,N=0;N<4;++N)for(let k=0;k<32;k+=8)D[M++]=this.g[N]>>>k&255;return D};function a(D,M){var N=f;return Object.prototype.hasOwnProperty.call(N,D)?N[D]:N[D]=M(D)}function u(D,M){this.h=M;const N=[];let k=!0;for(let O=D.length-1;O>=0;O--){const B=D[O]|0;k&&B==M||(N[O]=B,k=!1)}this.g=N}var f={};function h(D){return-128<=D&&D<128?a(D,function(M){return new u([M|0],M<0?-1:0)}):new u([D|0],D<0?-1:0)}function p(D){if(isNaN(D)||!isFinite(D))return E;if(D<0)return P(p(-D));const M=[];let N=1;for(let k=0;D>=N;k++)M[k]=D/N|0,N*=4294967296;return new u(M,0)}function _(D,M){if(D.length==0)throw Error("number format error: empty string");if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(D.charAt(0)=="-")return P(_(D.substring(1),M));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=p(Math.pow(M,8));let k=E;for(let B=0;B<D.length;B+=8){var O=Math.min(8,D.length-B);const V=parseInt(D.substring(B,B+O),M);O<8?(O=p(Math.pow(M,O)),k=k.j(O).add(p(V))):(k=k.j(N),k=k.add(p(V)))}return k}var E=h(0),T=h(1),I=h(16777216);n=u.prototype,n.m=function(){if(U(this))return-P(this).m();let D=0,M=1;for(let N=0;N<this.g.length;N++){const k=this.i(N);D+=(k>=0?k:4294967296+k)*M,M*=4294967296}return D},n.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(x(this))return"0";if(U(this))return"-"+P(this).toString(D);const M=p(Math.pow(D,6));var N=this;let k="";for(;;){const O=ae(N,M).g;N=G(N,O.j(M));let B=((N.g.length>0?N.g[0]:N.h)>>>0).toString(D);if(N=O,x(N))return B+k;for(;B.length<6;)B="0"+B;k=B+k}},n.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function x(D){if(D.h!=0)return!1;for(let M=0;M<D.g.length;M++)if(D.g[M]!=0)return!1;return!0}function U(D){return D.h==-1}n.l=function(D){return D=G(this,D),U(D)?-1:x(D)?0:1};function P(D){const M=D.g.length,N=[];for(let k=0;k<M;k++)N[k]=~D.g[k];return new u(N,~D.h).add(T)}n.abs=function(){return U(this)?P(this):this},n.add=function(D){const M=Math.max(this.g.length,D.g.length),N=[];let k=0;for(let O=0;O<=M;O++){let B=k+(this.i(O)&65535)+(D.i(O)&65535),V=(B>>>16)+(this.i(O)>>>16)+(D.i(O)>>>16);k=V>>>16,B&=65535,V&=65535,N[O]=V<<16|B}return new u(N,N[N.length-1]&-2147483648?-1:0)};function G(D,M){return D.add(P(M))}n.j=function(D){if(x(this)||x(D))return E;if(U(this))return U(D)?P(this).j(P(D)):P(P(this).j(D));if(U(D))return P(this.j(P(D)));if(this.l(I)<0&&D.l(I)<0)return p(this.m()*D.m());const M=this.g.length+D.g.length,N=[];for(var k=0;k<2*M;k++)N[k]=0;for(k=0;k<this.g.length;k++)for(let O=0;O<D.g.length;O++){const B=this.i(k)>>>16,V=this.i(k)&65535,Me=D.i(O)>>>16,ot=D.i(O)&65535;N[2*k+2*O]+=V*ot,Q(N,2*k+2*O),N[2*k+2*O+1]+=B*ot,Q(N,2*k+2*O+1),N[2*k+2*O+1]+=V*Me,Q(N,2*k+2*O+1),N[2*k+2*O+2]+=B*Me,Q(N,2*k+2*O+2)}for(D=0;D<M;D++)N[D]=N[2*D+1]<<16|N[2*D];for(D=M;D<2*M;D++)N[D]=0;return new u(N,0)};function Q(D,M){for(;(D[M]&65535)!=D[M];)D[M+1]+=D[M]>>>16,D[M]&=65535,M++}function z(D,M){this.g=D,this.h=M}function ae(D,M){if(x(M))throw Error("division by zero");if(x(D))return new z(E,E);if(U(D))return M=ae(P(D),M),new z(P(M.g),P(M.h));if(U(M))return M=ae(D,P(M)),new z(P(M.g),M.h);if(D.g.length>30){if(U(D)||U(M))throw Error("slowDivide_ only works with positive integers.");for(var N=T,k=M;k.l(D)<=0;)N=Z(N),k=Z(k);var O=ue(N,1),B=ue(k,1);for(k=ue(k,2),N=ue(N,2);!x(k);){var V=B.add(k);V.l(D)<=0&&(O=O.add(N),B=V),k=ue(k,1),N=ue(N,1)}return M=G(D,O.j(M)),new z(O,M)}for(O=E;D.l(M)>=0;){for(N=Math.max(1,Math.floor(D.m()/M.m())),k=Math.ceil(Math.log(N)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),B=p(N),V=B.j(M);U(V)||V.l(D)>0;)N-=k,B=p(N),V=B.j(M);x(B)&&(B=T),O=O.add(B),D=G(D,V)}return new z(O,D)}n.B=function(D){return ae(this,D).h},n.and=function(D){const M=Math.max(this.g.length,D.g.length),N=[];for(let k=0;k<M;k++)N[k]=this.i(k)&D.i(k);return new u(N,this.h&D.h)},n.or=function(D){const M=Math.max(this.g.length,D.g.length),N=[];for(let k=0;k<M;k++)N[k]=this.i(k)|D.i(k);return new u(N,this.h|D.h)},n.xor=function(D){const M=Math.max(this.g.length,D.g.length),N=[];for(let k=0;k<M;k++)N[k]=this.i(k)^D.i(k);return new u(N,this.h^D.h)};function Z(D){const M=D.g.length+1,N=[];for(let k=0;k<M;k++)N[k]=D.i(k)<<1|D.i(k-1)>>>31;return new u(N,D.h)}function ue(D,M){const N=M>>5;M%=32;const k=D.g.length-N,O=[];for(let B=0;B<k;B++)O[B]=M>0?D.i(B+N)>>>M|D.i(B+N+1)<<32-M:D.i(B+N);return new u(O,D.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,tC=i,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=_,vs=u}).apply(typeof CT<"u"?CT:typeof self<"u"?self:typeof window<"u"?window:{});var Mf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nC,gu,iC,zf,Mm,rC,sC,oC;(function(){var n,e=Object.defineProperty;function t(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof Mf=="object"&&Mf];for(var S=0;S<g.length;++S){var C=g[S];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var i=t(this);function s(g,S){if(S)e:{var C=i;g=g.split(".");for(var b=0;b<g.length-1;b++){var J=g[b];if(!(J in C))break e;C=C[J]}g=g[g.length-1],b=C[g],S=S(b),S!=b&&S!=null&&e(C,g,{configurable:!0,writable:!0,value:S})}}s("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(g){return g||function(S){var C=[],b;for(b in S)Object.prototype.hasOwnProperty.call(S,b)&&C.push([b,S[b]]);return C}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function f(g){var S=typeof g;return S=="object"&&g!=null||S=="function"}function h(g,S,C){return g.call.apply(g.bind,arguments)}function p(g,S,C){return p=h,p.apply(null,arguments)}function _(g,S){var C=Array.prototype.slice.call(arguments,1);return function(){var b=C.slice();return b.push.apply(b,arguments),g.apply(this,b)}}function E(g,S){function C(){}C.prototype=S.prototype,g.Z=S.prototype,g.prototype=new C,g.prototype.constructor=g,g.Ob=function(b,J,X){for(var le=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)le[Ne-2]=arguments[Ne];return S.prototype[J].apply(b,le)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function I(g){const S=g.length;if(S>0){const C=Array(S);for(let b=0;b<S;b++)C[b]=g[b];return C}return[]}function x(g,S){for(let b=1;b<arguments.length;b++){const J=arguments[b];var C=typeof J;if(C=C!="object"?C:J?Array.isArray(J)?"array":C:"null",C=="array"||C=="object"&&typeof J.length=="number"){C=g.length||0;const X=J.length||0;g.length=C+X;for(let le=0;le<X;le++)g[C+le]=J[le]}else g.push(J)}}class U{constructor(S,C){this.i=S,this.j=C,this.h=0,this.g=null}get(){let S;return this.h>0?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function P(g){u.setTimeout(()=>{throw g},0)}function G(){var g=D;let S=null;return g.g&&(S=g.g,g.g=g.g.next,g.g||(g.h=null),S.next=null),S}class Q{constructor(){this.h=this.g=null}add(S,C){const b=z.get();b.set(S,C),this.h?this.h.next=b:this.g=b,this.h=b}}var z=new U(()=>new ae,g=>g.reset());class ae{constructor(){this.next=this.g=this.h=null}set(S,C){this.h=S,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,ue=!1,D=new Q,M=()=>{const g=Promise.resolve(void 0);Z=()=>{g.then(N)}};function N(){for(var g;g=G();){try{g.h.call(g.g)}catch(C){P(C)}var S=z;S.j(g),S.h<100&&(S.h++,g.next=S.g,S.g=g)}ue=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(g,S){this.type=g,this.g=this.target=S,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var B=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var g=!1,S=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const C=()=>{};u.addEventListener("test",C,S),u.removeEventListener("test",C,S)}catch{}return g})();function V(g){return/^[\s\xa0]*$/.test(g)}function Me(g,S){O.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,S)}E(Me,O),Me.prototype.init=function(g,S){const C=this.type=g.type,b=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=S,S=g.relatedTarget,S||(C=="mouseover"?S=g.fromElement:C=="mouseout"&&(S=g.toElement)),this.relatedTarget=S,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&Me.Z.h.call(this)},Me.prototype.h=function(){Me.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var ot="closure_listenable_"+(Math.random()*1e6|0),ee=0;function ce(g,S,C,b,J){this.listener=g,this.proxy=null,this.src=S,this.type=C,this.capture=!!b,this.ha=J,this.key=++ee,this.da=this.fa=!1}function ye(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function Ve(g,S,C){for(const b in g)S.call(C,g[b],b,g)}function Xe(g,S){for(const C in g)S.call(void 0,g[C],C,g)}function q(g){const S={};for(const C in g)S[C]=g[C];return S}const se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fe(g,S){let C,b;for(let J=1;J<arguments.length;J++){b=arguments[J];for(C in b)g[C]=b[C];for(let X=0;X<se.length;X++)C=se[X],Object.prototype.hasOwnProperty.call(b,C)&&(g[C]=b[C])}}function me(g){this.src=g,this.g={},this.h=0}me.prototype.add=function(g,S,C,b,J){const X=g.toString();g=this.g[X],g||(g=this.g[X]=[],this.h++);const le=De(g,S,b,J);return le>-1?(S=g[le],C||(S.fa=!1)):(S=new ce(S,this.src,X,!!b,J),S.fa=C,g.push(S)),S};function Ce(g,S){const C=S.type;if(C in g.g){var b=g.g[C],J=Array.prototype.indexOf.call(b,S,void 0),X;(X=J>=0)&&Array.prototype.splice.call(b,J,1),X&&(ye(S),g.g[C].length==0&&(delete g.g[C],g.h--))}}function De(g,S,C,b){for(let J=0;J<g.length;++J){const X=g[J];if(!X.da&&X.listener==S&&X.capture==!!C&&X.ha==b)return J}return-1}var Ge="closure_lm_"+(Math.random()*1e6|0),Lt={};function ft(g,S,C,b,J){if(Array.isArray(S)){for(let X=0;X<S.length;X++)ft(g,S[X],C,b,J);return null}return C=ol(C),g&&g[ot]?g.J(S,C,f(b)?!!b.capture:!1,J):Vs(g,S,C,!1,b,J)}function Vs(g,S,C,b,J,X){if(!S)throw Error("Invalid event type");const le=f(J)?!!J.capture:!!J;let Ne=Us(g);if(Ne||(g[Ge]=Ne=new me(g)),C=Ne.add(S,C,b,le,X),C.proxy)return C;if(b=bo(),C.proxy=b,b.src=g,b.listener=C,g.addEventListener)B||(J=le),J===void 0&&(J=!1),g.addEventListener(S.toString(),b,J);else if(g.attachEvent)g.attachEvent(Ti(S.toString()),b);else if(g.addListener&&g.removeListener)g.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return C}function bo(){function g(C){return S.call(g.src,g.listener,C)}const S=rl;return g}function No(g,S,C,b,J){if(Array.isArray(S))for(var X=0;X<S.length;X++)No(g,S[X],C,b,J);else b=f(b)?!!b.capture:!!b,C=ol(C),g&&g[ot]?(g=g.i,X=String(S).toString(),X in g.g&&(S=g.g[X],C=De(S,C,b,J),C>-1&&(ye(S[C]),Array.prototype.splice.call(S,C,1),S.length==0&&(delete g.g[X],g.h--)))):g&&(g=Us(g))&&(S=g.g[S.toString()],g=-1,S&&(g=De(S,C,b,J)),(C=g>-1?S[g]:null)&&xo(C))}function xo(g){if(typeof g!="number"&&g&&!g.da){var S=g.src;if(S&&S[ot])Ce(S.i,g);else{var C=g.type,b=g.proxy;S.removeEventListener?S.removeEventListener(C,b,g.capture):S.detachEvent?S.detachEvent(Ti(C),b):S.addListener&&S.removeListener&&S.removeListener(b),(C=Us(S))?(Ce(C,g),C.h==0&&(C.src=null,S[Ge]=null)):ye(g)}}}function Ti(g){return g in Lt?Lt[g]:Lt[g]="on"+g}function rl(g,S){if(g.da)g=!0;else{S=new Me(S,this);const C=g.listener,b=g.ha||g.src;g.fa&&xo(g),g=C.call(b,S)}return g}function Us(g){return g=g[Ge],g instanceof me?g:null}var sl="__closure_events_fn_"+(Math.random()*1e9>>>0);function ol(g){return typeof g=="function"?g:(g[sl]||(g[sl]=function(S){return g.handleEvent(S)}),g[sl])}function At(){k.call(this),this.i=new me(this),this.M=this,this.G=null}E(At,k),At.prototype[ot]=!0,At.prototype.removeEventListener=function(g,S,C,b){No(this,g,S,C,b)};function kt(g,S){var C,b=g.G;if(b)for(C=[];b;b=b.G)C.push(b);if(g=g.M,b=S.type||S,typeof S=="string")S=new O(S,g);else if(S instanceof O)S.target=S.target||g;else{var J=S;S=new O(b,g),fe(S,J)}J=!0;let X,le;if(C)for(le=C.length-1;le>=0;le--)X=S.g=C[le],J=xr(X,b,!0,S)&&J;if(X=S.g=g,J=xr(X,b,!0,S)&&J,J=xr(X,b,!1,S)&&J,C)for(le=0;le<C.length;le++)X=S.g=C[le],J=xr(X,b,!1,S)&&J}At.prototype.N=function(){if(At.Z.N.call(this),this.i){var g=this.i;for(const S in g.g){const C=g.g[S];for(let b=0;b<C.length;b++)ye(C[b]);delete g.g[S],g.h--}}this.G=null},At.prototype.J=function(g,S,C,b){return this.i.add(String(g),S,!1,C,b)},At.prototype.K=function(g,S,C,b){return this.i.add(String(g),S,!0,C,b)};function xr(g,S,C,b){if(S=g.i.g[String(S)],!S)return!0;S=S.concat();let J=!0;for(let X=0;X<S.length;++X){const le=S[X];if(le&&!le.da&&le.capture==C){const Ne=le.listener,vt=le.ha||le.src;le.fa&&Ce(g.i,le),J=Ne.call(vt,b)!==!1&&J}}return J&&!b.defaultPrevented}function th(g,S){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=p(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(S)>2147483647?-1:u.setTimeout(g,S||0)}function ec(g){g.g=th(()=>{g.g=null,g.i&&(g.i=!1,ec(g))},g.l);const S=g.h;g.h=null,g.m.apply(null,S)}class un extends k{constructor(S,C){super(),this.m=S,this.l=C,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:ec(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ls(g){k.call(this),this.h=g,this.g={}}E(Ls,k);var al=[];function ll(g){Ve(g.g,function(S,C){this.g.hasOwnProperty(C)&&xo(S)},g),g.g={}}Ls.prototype.N=function(){Ls.Z.N.call(this),ll(this)},Ls.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Mr=u.JSON.stringify,nh=u.JSON.parse,tc=class{stringify(g){return u.JSON.stringify(g,void 0)}parse(g){return u.JSON.parse(g,void 0)}};function nc(){}function ic(){}var jn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Kt(){O.call(this,"d")}E(Kt,O);function Vn(){O.call(this,"c")}E(Vn,O);var _t={},rc=null;function Mo(){return rc=rc||new At}_t.Ia="serverreachability";function sc(g){O.call(this,_t.Ia,g)}E(sc,O);function Si(g){const S=Mo();kt(S,new sc(S))}_t.STAT_EVENT="statevent";function ks(g,S){O.call(this,_t.STAT_EVENT,g),this.stat=S}E(ks,O);function Ct(g){const S=Mo();kt(S,new ks(S,g))}_t.Ja="timingevent";function Ai(g,S){O.call(this,_t.Ja,g),this.size=S}E(Ai,O);function Ci(g,S){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){g()},S)}function ei(){this.g=!0}ei.prototype.ua=function(){this.g=!1};function ih(g,S,C,b,J,X){g.info(function(){if(g.g)if(X){var le="",Ne=X.split("&");for(let $e=0;$e<Ne.length;$e++){var vt=Ne[$e].split("=");if(vt.length>1){const dt=vt[0];vt=vt[1];const On=dt.split("_");le=On.length>=2&&On[1]=="type"?le+(dt+"="+vt+"&"):le+(dt+"=redacted&")}}}else le=null;else le=X;return"XMLHTTP REQ ("+b+") [attempt "+J+"]: "+S+`
`+C+`
`+le})}function oc(g,S,C,b,J,X,le){g.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+J+"]: "+S+`
`+C+`
`+X+" "+le})}function Ii(g,S,C,b){g.info(function(){return"XMLHTTP TEXT ("+S+"): "+rh(g,C)+(b?" "+b:"")})}function Os(g,S){g.info(function(){return"TIMEOUT: "+S})}ei.prototype.info=function(){};function rh(g,S){if(!g.g)return S;if(!S)return null;try{const X=JSON.parse(S);if(X){for(g=0;g<X.length;g++)if(Array.isArray(X[g])){var C=X[g];if(!(C.length<2)){var b=C[1];if(Array.isArray(b)&&!(b.length<1)){var J=b[0];if(J!="noop"&&J!="stop"&&J!="close")for(let le=1;le<b.length;le++)b[le]=""}}}}return Mr(X)}catch{return S}}var Fs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ul={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},cl;function qs(){}E(qs,nc),qs.prototype.g=function(){return new XMLHttpRequest},cl=new qs;function ji(g){return encodeURIComponent(String(g))}function ac(g){var S=1;g=g.split(":");const C=[];for(;S>0&&g.length;)C.push(g.shift()),S--;return g.length&&C.push(g.join(":")),C}function ti(g,S,C,b){this.j=g,this.i=S,this.l=C,this.S=b||1,this.V=new Ls(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ni}function ni(){this.i=null,this.g="",this.h=!1}var It={},Bt={};function wi(g,S,C){g.M=1,g.A=Bs(Rt(S)),g.u=C,g.R=!0,Do(g,null)}function Do(g,S){g.F=Date.now(),Ri(g),g.B=Rt(g.A);var C=g.B,b=g.S;Array.isArray(b)||(b=[String(b)]),Lo(C.i,"t",b),g.C=0,C=g.j.L,g.h=new ni,g.g=Sc(g.j,C?S:null,!g.u),g.P>0&&(g.O=new un(p(g.Y,g,g.g),g.P)),S=g.V,C=g.g,b=g.ba;var J="readystatechange";Array.isArray(J)||(J&&(al[0]=J.toString()),J=al);for(let X=0;X<J.length;X++){const le=ft(C,J[X],b||S.handleEvent,!1,S.h||S);if(!le)break;S.g[le.key]=le}S=g.J?q(g.J):{},g.u?(g.v||(g.v="POST"),S["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.B,g.v,g.u,S)):(g.v="GET",g.g.ea(g.B,g.v,null,S)),Si(),ih(g.i,g.v,g.B,g.l,g.S,g.u)}ti.prototype.ba=function(g){g=g.target;const S=this.O;S&&si(g)==3?S.j():this.Y(g)},ti.prototype.Y=function(g){try{if(g==this.g)e:{const Ne=si(this.g),vt=this.g.ya(),$e=this.g.ca();if(!(Ne<3)&&(Ne!=3||this.g&&(this.h.h||this.g.la()||Yt(this.g)))){this.K||Ne!=4||vt==7||(vt==8||$e<=0?Si(3):Si(2)),bi(this);var S=this.g.ca();this.X=S;var C=sh(this);if(this.o=S==200,oc(this.i,this.v,this.B,this.l,this.S,Ne,S),this.o){if(this.U&&!this.L){t:{if(this.g){var b,J=this.g;if((b=J.g?J.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(b)){var X=b;break t}}X=null}if(g=X)Ii(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ni(this,g);else{this.o=!1,this.m=3,Ct(12),An(this),Un(this);break e}}if(this.R){g=!0;let dt;for(;!this.K&&this.C<C.length;)if(dt=uc(this,C),dt==Bt){Ne==4&&(this.m=4,Ct(14),g=!1),Ii(this.i,this.l,null,"[Incomplete Response]");break}else if(dt==It){this.m=4,Ct(15),Ii(this.i,this.l,C,"[Invalid Chunk]"),g=!1;break}else Ii(this.i,this.l,dt,null),Ni(this,dt);if(lc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ne!=4||C.length!=0||this.h.h||(this.m=1,Ct(16),g=!1),this.o=this.o&&g,!g)Ii(this.i,this.l,C,"[Invalid Chunked Response]"),An(this),Un(this);else if(C.length>0&&!this.W){this.W=!0;var le=this.j;le.g==this&&le.aa&&!le.P&&(le.j.info("Great, no buffering proxy detected. Bytes received: "+C.length),Il(le),le.P=!0,Ct(11))}}else Ii(this.i,this.l,C,null),Ni(this,C);Ne==4&&An(this),this.o&&!this.K&&(Ne==4?_c(this.j,this):(this.o=!1,Ri(this)))}else tr(this.g),S==400&&C.indexOf("Unknown SID")>0?(this.m=3,Ct(12)):(this.m=0,Ct(13)),An(this),Un(this)}}}catch{}finally{}};function sh(g){if(!lc(g))return g.g.la();const S=Yt(g.g);if(S==="")return"";let C="";const b=S.length,J=si(g.g)==4;if(!g.h.i){if(typeof TextDecoder>"u")return An(g),Un(g),"";g.h.i=new u.TextDecoder}for(let X=0;X<b;X++)g.h.h=!0,C+=g.h.i.decode(S[X],{stream:!(J&&X==b-1)});return S.length=0,g.h.g+=C,g.C=0,g.h.g}function lc(g){return g.g?g.v=="GET"&&g.M!=2&&g.j.Aa:!1}function uc(g,S){var C=g.C,b=S.indexOf(`
`,C);return b==-1?Bt:(C=Number(S.substring(C,b)),isNaN(C)?It:(b+=1,b+C>S.length?Bt:(S=S.slice(b,b+C),g.C=b+C,S)))}ti.prototype.cancel=function(){this.K=!0,An(this)};function Ri(g){g.T=Date.now()+g.H,Po(g,g.H)}function Po(g,S){if(g.D!=null)throw Error("WatchDog timer not null");g.D=Ci(p(g.aa,g),S)}function bi(g){g.D&&(u.clearTimeout(g.D),g.D=null)}ti.prototype.aa=function(){this.D=null;const g=Date.now();g-this.T>=0?(Os(this.i,this.B),this.M!=2&&(Si(),Ct(17)),An(this),this.m=2,Un(this)):Po(this,this.T-g)};function Un(g){g.j.I==0||g.K||_c(g.j,g)}function An(g){bi(g);var S=g.O;S&&typeof S.dispose=="function"&&S.dispose(),g.O=null,ll(g.V),g.g&&(S=g.g,g.g=null,S.abort(),S.dispose())}function Ni(g,S){try{var C=g.j;if(C.I!=0&&(C.g==g||Mi(C.h,g))){if(!g.L&&Mi(C.h,g)&&C.I==3){try{var b=C.Ba.g.parse(S)}catch{b=null}if(Array.isArray(b)&&b.length==3){var J=b;if(J[0]==0){e:if(!C.v){if(C.g)if(C.g.F+3e3<g.F)Bo(C),Fr(C);else break e;$s(C),Ct(18)}}else C.xa=J[1],0<C.xa-C.K&&J[2]<37500&&C.F&&C.A==0&&!C.C&&(C.C=Ci(p(C.Va,C),6e3));xi(C.h)<=1&&C.ta&&(C.ta=void 0)}else ki(C,11)}else if((g.L||C.g==g)&&Bo(C),!V(S))for(J=C.Ba.g.parse(S),S=0;S<J.length;S++){let $e=J[S];const dt=$e[0];if(!(dt<=C.K))if(C.K=dt,$e=$e[1],C.I==2)if($e[0]=="c"){C.M=$e[1],C.ba=$e[2];const On=$e[3];On!=null&&(C.ka=On,C.j.info("VER="+C.ka));const Oi=$e[4];Oi!=null&&(C.za=Oi,C.j.info("SVER="+C.za));const oi=$e[5];oi!=null&&typeof oi=="number"&&oi>0&&(b=1.5*oi,C.O=b,C.j.info("backChannelRequestTimeoutMs_="+b)),b=C;const ai=g.g;if(ai){const Qs=ai.g?ai.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qs){var X=b.h;X.g||Qs.indexOf("spdy")==-1&&Qs.indexOf("quic")==-1&&Qs.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(hl(X,X.h),X.h=null))}if(b.G){const Ho=ai.g?ai.g.getResponseHeader("X-HTTP-Session-Id"):null;Ho&&(b.wa=Ho,Ze(b.J,b.G,Ho))}}C.I=3,C.l&&C.l.ra(),C.aa&&(C.T=Date.now()-g.F,C.j.info("Handshake RTT: "+C.T+"ms")),b=C;var le=g;if(b.na=Tc(b,b.L?b.ba:null,b.W),le.L){pl(b.h,le);var Ne=le,vt=b.O;vt&&(Ne.H=vt),Ne.D&&(bi(Ne),Ri(Ne)),b.g=le}else gc(b);C.i.length>0&&Li(C)}else $e[0]!="stop"&&$e[0]!="close"||ki(C,7);else C.I==3&&($e[0]=="stop"||$e[0]=="close"?$e[0]=="stop"?ki(C,7):Al(C):$e[0]!="noop"&&C.l&&C.l.qa($e),C.A=0)}}Si(4)}catch{}}var wt=class{constructor(g,S){this.g=g,this.map=S}};function fl(g){this.l=g||10,u.PerformanceNavigationTiming?(g=u.performance.getEntriesByType("navigation"),g=g.length>0&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function dl(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function xi(g){return g.h?1:g.g?g.g.size:0}function Mi(g,S){return g.h?g.h==S:g.g?g.g.has(S):!1}function hl(g,S){g.g?g.g.add(S):g.h=S}function pl(g,S){g.h&&g.h==S?g.h=null:g.g&&g.g.has(S)&&g.g.delete(S)}fl.prototype.cancel=function(){if(this.i=ml(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function ml(g){if(g.h!=null)return g.i.concat(g.h.G);if(g.g!=null&&g.g.size!==0){let S=g.i;for(const C of g.g.values())S=S.concat(C.G);return S}return I(g.i)}var cc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Vo(g,S){if(g){g=g.split("&");for(let C=0;C<g.length;C++){const b=g[C].indexOf("=");let J,X=null;b>=0?(J=g[C].substring(0,b),X=g[C].substring(b+1)):J=g[C],S(J,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function Cn(g){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let S;g instanceof Cn?(this.l=g.l,Ht(this,g.j),this.o=g.o,this.g=g.g,Dr(this,g.u),this.h=g.h,gl(this,pc(g.i)),this.m=g.m):g&&(S=String(g).match(cc))?(this.l=!1,Ht(this,S[1]||"",!0),this.o=Di(S[2]||""),this.g=Di(S[3]||"",!0),Dr(this,S[4]),this.h=Di(S[5]||"",!0),gl(this,S[6]||"",!0),this.m=Di(S[7]||"")):(this.l=!1,this.i=new Vr(null,this.l))}Cn.prototype.toString=function(){const g=[];var S=this.j;S&&g.push(Hs(S,Uo,!0),":");var C=this.g;return(C||S=="file")&&(g.push("//"),(S=this.o)&&g.push(Hs(S,Uo,!0),"@"),g.push(ji(C).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.u,C!=null&&g.push(":",String(C))),(C=this.h)&&(this.g&&C.charAt(0)!="/"&&g.push("/"),g.push(Hs(C,C.charAt(0)=="/"?yl:fc,!0))),(C=this.i.toString())&&g.push("?",C),(C=this.m)&&g.push("#",Hs(C,dc)),g.join("")},Cn.prototype.resolve=function(g){const S=Rt(this);let C=!!g.j;C?Ht(S,g.j):C=!!g.o,C?S.o=g.o:C=!!g.g,C?S.g=g.g:C=g.u!=null;var b=g.h;if(C)Dr(S,g.u);else if(C=!!g.h){if(b.charAt(0)!="/")if(this.g&&!this.h)b="/"+b;else{var J=S.h.lastIndexOf("/");J!=-1&&(b=S.h.slice(0,J+1)+b)}if(J=b,J==".."||J==".")b="";else if(J.indexOf("./")!=-1||J.indexOf("/.")!=-1){b=J.lastIndexOf("/",0)==0,J=J.split("/");const X=[];for(let le=0;le<J.length;){const Ne=J[le++];Ne=="."?b&&le==J.length&&X.push(""):Ne==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),b&&le==J.length&&X.push("")):(X.push(Ne),b=!0)}b=X.join("/")}else b=J}return C?S.h=b:C=g.i.toString()!=="",C?gl(S,pc(g.i)):C=!!g.m,C&&(S.m=g.m),S};function Rt(g){return new Cn(g)}function Ht(g,S,C){g.j=C?Di(S,!0):S,g.j&&(g.j=g.j.replace(/:$/,""))}function Dr(g,S){if(S){if(S=Number(S),isNaN(S)||S<0)throw Error("Bad port number "+S);g.u=S}else g.u=null}function gl(g,S,C){S instanceof Vr?(g.i=S,ko(g.i,g.l)):(C||(S=Hs(S,Pr)),g.i=new Vr(S,g.l))}function Ze(g,S,C){g.i.set(S,C)}function Bs(g){return Ze(g,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),g}function Di(g,S){return g?S?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function Hs(g,S,C){return typeof g=="string"?(g=encodeURI(g).replace(S,pn),C&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function pn(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var Uo=/[#\/\?@]/g,fc=/[#\?:]/g,yl=/[#\?]/g,Pr=/[#\?@]/g,dc=/#/g;function Vr(g,S){this.h=this.g=null,this.i=g||null,this.j=!!S}function mn(g){g.g||(g.g=new Map,g.h=0,g.i&&Vo(g.i,function(S,C){g.add(decodeURIComponent(S.replace(/\+/g," ")),C)}))}n=Vr.prototype,n.add=function(g,S){mn(this),this.i=null,g=Ur(this,g);let C=this.g.get(g);return C||this.g.set(g,C=[]),C.push(S),this.h+=1,this};function hc(g,S){mn(g),S=Ur(g,S),g.g.has(S)&&(g.i=null,g.h-=g.g.get(S).length,g.g.delete(S))}function _l(g,S){return mn(g),S=Ur(g,S),g.g.has(S)}n.forEach=function(g,S){mn(this),this.g.forEach(function(C,b){C.forEach(function(J){g.call(S,J,b,this)},this)},this)};function vl(g,S){mn(g);let C=[];if(typeof S=="string")_l(g,S)&&(C=C.concat(g.g.get(Ur(g,S))));else for(g=Array.from(g.g.values()),S=0;S<g.length;S++)C=C.concat(g[S]);return C}n.set=function(g,S){return mn(this),this.i=null,g=Ur(this,g),_l(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[S]),this.h+=1,this},n.get=function(g,S){return g?(g=vl(this,g),g.length>0?String(g[0]):S):S};function Lo(g,S,C){hc(g,S),C.length>0&&(g.i=null,g.g.set(Ur(g,S),I(C)),g.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],S=Array.from(this.g.keys());for(let b=0;b<S.length;b++){var C=S[b];const J=ji(C);C=vl(this,C);for(let X=0;X<C.length;X++){let le=J;C[X]!==""&&(le+="="+ji(C[X])),g.push(le)}}return this.i=g.join("&")};function pc(g){const S=new Vr;return S.i=g.i,g.g&&(S.g=new Map(g.g),S.h=g.h),S}function Ur(g,S){return S=String(S),g.j&&(S=S.toLowerCase()),S}function ko(g,S){S&&!g.j&&(mn(g),g.i=null,g.g.forEach(function(C,b){const J=b.toLowerCase();b!=J&&(hc(this,b),Lo(this,J,C))},g)),g.j=S}function ii(g,S){const C=new ei;if(u.Image){const b=new Image;b.onload=_(Ln,C,"TestLoadImage: loaded",!0,S,b),b.onerror=_(Ln,C,"TestLoadImage: error",!1,S,b),b.onabort=_(Ln,C,"TestLoadImage: abort",!1,S,b),b.ontimeout=_(Ln,C,"TestLoadImage: timeout",!1,S,b),u.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=g}else S(!1)}function El(g,S){const C=new ei,b=new AbortController,J=setTimeout(()=>{b.abort(),Ln(C,"TestPingServer: timeout",!1,S)},1e4);fetch(g,{signal:b.signal}).then(X=>{clearTimeout(J),X.ok?Ln(C,"TestPingServer: ok",!0,S):Ln(C,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(J),Ln(C,"TestPingServer: error",!1,S)})}function Ln(g,S,C,b,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),b(C)}catch{}}function Lr(){this.g=new tc}function Pi(g){this.i=g.Sb||null,this.h=g.ab||!1}E(Pi,nc),Pi.prototype.g=function(){return new Gs(this.i,this.h)};function Gs(g,S){At.call(this),this.H=g,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Gs,At),n=Gs.prototype,n.open=function(g,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=g,this.D=S,this.readyState=1,ri(this)},n.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const S={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};g&&(S.body=g),(this.H||u).fetch(new Request(this.D,S)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,kr(this)),this.readyState=0},n.Pa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,ri(this)),this.g&&(this.readyState=3,ri(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Oo(this)}else g.text().then(this.Oa.bind(this),this.ga.bind(this))};function Oo(g){g.j.read().then(g.Ma.bind(g)).catch(g.ga.bind(g))}n.Ma=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var S=g.value?g.value:new Uint8Array(0);(S=this.B.decode(S,{stream:!g.done}))&&(this.response=this.responseText+=S)}g.done?kr(this):ri(this),this.readyState==3&&Oo(this)}},n.Oa=function(g){this.g&&(this.response=this.responseText=g,kr(this))},n.Na=function(g){this.g&&(this.response=g,kr(this))},n.ga=function(){this.g&&kr(this)};function kr(g){g.readyState=4,g.l=null,g.j=null,g.B=null,ri(g)}n.setRequestHeader=function(g,S){this.A.append(g,S)},n.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],S=this.h.entries();for(var C=S.next();!C.done;)C=C.value,g.push(C[0]+": "+C[1]),C=S.next();return g.join(`\r
`)};function ri(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(Gs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function kn(g){let S="";return Ve(g,function(C,b){S+=b,S+=":",S+=C,S+=`\r
`}),S}function zs(g,S,C){e:{for(b in C){var b=!1;break e}b=!0}b||(C=kn(C),typeof g=="string"?C!=null&&ji(C):Ze(g,S,C))}function tt(g){At.call(this),this.headers=new Map,this.L=g||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(tt,At);var Vi=/^https?$/i,Tl=["POST","PUT"];n=tt.prototype,n.Fa=function(g){this.H=g},n.ea=function(g,S,C,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);S=S?S.toUpperCase():"GET",this.D=g,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():cl.g(),this.g.onreadystatechange=T(p(this.Ca,this));try{this.B=!0,this.g.open(S,String(g),!0),this.B=!1}catch(X){Js(this,X);return}if(g=C||"",C=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var J in b)C.set(J,b[J]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const X of b.keys())C.set(X,b.get(X));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(C.keys()).find(X=>X.toLowerCase()=="content-type"),J=u.FormData&&g instanceof u.FormData,!(Array.prototype.indexOf.call(Tl,S,void 0)>=0)||b||J||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,le]of C)this.g.setRequestHeader(X,le);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(g),this.v=!1}catch(X){Js(this,X)}};function Js(g,S){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=S,g.o=5,Sl(g),er(g)}function Sl(g){g.A||(g.A=!0,kt(g,"complete"),kt(g,"error"))}n.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=g||7,kt(this,"complete"),kt(this,"abort"),er(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),er(this,!0)),tt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ks(this):this.Xa())},n.Xa=function(){Ks(this)};function Ks(g){if(g.h&&typeof a<"u"){if(g.v&&si(g)==4)setTimeout(g.Ca.bind(g),0);else if(kt(g,"readystatechange"),si(g)==4){g.h=!1;try{const X=g.ca();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var C;if(!(C=S)){var b;if(b=X===0){let le=String(g.D).match(cc)[1]||null;!le&&u.self&&u.self.location&&(le=u.self.location.protocol.slice(0,-1)),b=!Vi.test(le?le.toLowerCase():"")}C=b}if(C)kt(g,"complete"),kt(g,"success");else{g.o=6;try{var J=si(g)>2?g.g.statusText:""}catch{J=""}g.l=J+" ["+g.ca()+"]",Sl(g)}}finally{er(g)}}}}function er(g,S){if(g.g){g.m&&(clearTimeout(g.m),g.m=null);const C=g.g;g.g=null,S||kt(g,"ready");try{C.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function si(g){return g.g?g.g.readyState:0}n.ca=function(){try{return si(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(g){if(this.g){var S=this.g.responseText;return g&&S.indexOf(g)==0&&(S=S.substring(g.length)),nh(S)}};function Yt(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.F){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function tr(g){const S={};g=(g.g&&si(g)>=2&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<g.length;b++){if(V(g[b]))continue;var C=ac(g[b]);const J=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const X=S[J]||[];S[J]=X,X.push(C)}Xe(S,function(b){return b.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ui(g,S,C){return C&&C.internalChannelParams&&C.internalChannelParams[g]||S}function Or(g){this.za=0,this.i=[],this.j=new ei,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ui("failFast",!1,g),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ui("baseRetryDelayMs",5e3,g),this.Za=Ui("retryDelaySeedMs",1e4,g),this.Ta=Ui("forwardChannelMaxRetries",2,g),this.va=Ui("forwardChannelRequestTimeoutMs",2e4,g),this.ma=g&&g.xmlHttpFactory||void 0,this.Ua=g&&g.Rb||void 0,this.Aa=g&&g.useFetchStreams||!1,this.O=void 0,this.L=g&&g.supportsCrossDomainXhr||!1,this.M="",this.h=new fl(g&&g.concurrentRequestLimit),this.Ba=new Lr,this.S=g&&g.fastHandshake||!1,this.R=g&&g.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=g&&g.Pb||!1,g&&g.ua&&this.j.ua(),g&&g.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&g&&g.detectBufferingProxy||!1,this.ia=void 0,g&&g.longPollingTimeout&&g.longPollingTimeout>0&&(this.ia=g.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Or.prototype,n.ka=8,n.I=1,n.connect=function(g,S,C,b){Ct(0),this.W=g,this.H=S||{},C&&b!==void 0&&(this.H.OSID=C,this.H.OAID=b),this.F=this.X,this.J=Tc(this,null,this.W),Li(this)};function Al(g){if(Fo(g),g.I==3){var S=g.V++,C=Rt(g.J);if(Ze(C,"SID",g.M),Ze(C,"RID",S),Ze(C,"TYPE","terminate"),Ys(g,C),S=new ti(g,g.j,S),S.M=2,S.A=Bs(Rt(C)),C=!1,u.navigator&&u.navigator.sendBeacon)try{C=u.navigator.sendBeacon(S.A.toString(),"")}catch{}!C&&u.Image&&(new Image().src=S.A,C=!0),C||(S.g=Sc(S.j,null),S.g.ea(S.A)),S.F=Date.now(),Ri(S)}Ec(g)}function Fr(g){g.g&&(Il(g),g.g.cancel(),g.g=null)}function Fo(g){Fr(g),g.v&&(u.clearTimeout(g.v),g.v=null),Bo(g),g.h.cancel(),g.m&&(typeof g.m=="number"&&u.clearTimeout(g.m),g.m=null)}function Li(g){if(!dl(g.h)&&!g.m){g.m=!0;var S=g.Ea;Z||M(),ue||(Z(),ue=!0),D.add(S,g),g.D=0}}function qo(g,S){return xi(g.h)>=g.h.j-(g.m?1:0)?!1:g.m?(g.i=S.G.concat(g.i),!0):g.I==1||g.I==2||g.D>=(g.Sa?0:g.Ta)?!1:(g.m=Ci(p(g.Ea,g,S),vc(g,g.D)),g.D++,!0)}n.Ea=function(g){if(this.m)if(this.m=null,this.I==1){if(!g){this.V=Math.floor(Math.random()*1e5),g=this.V++;const J=new ti(this,this.j,g);let X=this.o;if(this.U&&(X?(X=q(X),fe(X,this.U)):X=this.U),this.u!==null||this.R||(J.J=X,X=null),this.S)e:{for(var S=0,C=0;C<this.i.length;C++){t:{var b=this.i[C];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(S+=b,S>4096){S=C;break e}if(S===4096||C===this.i.length-1){S=C+1;break e}}S=1e3}else S=1e3;S=mc(this,J,S),C=Rt(this.J),Ze(C,"RID",g),Ze(C,"CVER",22),this.G&&Ze(C,"X-HTTP-Session-Id",this.G),Ys(this,C),X&&(this.R?S="headers="+ji(kn(X))+"&"+S:this.u&&zs(C,this.u,X)),hl(this.h,J),this.Ra&&Ze(C,"TYPE","init"),this.S?(Ze(C,"$req",S),Ze(C,"SID","null"),J.U=!0,wi(J,C,null)):wi(J,C,S),this.I=2}}else this.I==3&&(g?Cl(this,g):this.i.length==0||dl(this.h)||Cl(this))};function Cl(g,S){var C;S?C=S.l:C=g.V++;const b=Rt(g.J);Ze(b,"SID",g.M),Ze(b,"RID",C),Ze(b,"AID",g.K),Ys(g,b),g.u&&g.o&&zs(b,g.u,g.o),C=new ti(g,g.j,C,g.D+1),g.u===null&&(C.J=g.o),S&&(g.i=S.G.concat(g.i)),S=mc(g,C,1e3),C.H=Math.round(g.va*.5)+Math.round(g.va*.5*Math.random()),hl(g.h,C),wi(C,b,S)}function Ys(g,S){g.H&&Ve(g.H,function(C,b){Ze(S,b,C)}),g.l&&Ve({},function(C,b){Ze(S,b,C)})}function mc(g,S,C){C=Math.min(g.i.length,C);const b=g.l?p(g.l.Ka,g.l,g):null;e:{var J=g.i;let Ne=-1;for(;;){const vt=["count="+C];Ne==-1?C>0?(Ne=J[0].g,vt.push("ofs="+Ne)):Ne=0:vt.push("ofs="+Ne);let $e=!0;for(let dt=0;dt<C;dt++){var X=J[dt].g;const On=J[dt].map;if(X-=Ne,X<0)Ne=Math.max(0,J[dt].g-100),$e=!1;else try{X="req"+X+"_"||"";try{var le=On instanceof Map?On:Object.entries(On);for(const[Oi,oi]of le){let ai=oi;f(oi)&&(ai=Mr(oi)),vt.push(X+Oi+"="+encodeURIComponent(ai))}}catch(Oi){throw vt.push(X+"type="+encodeURIComponent("_badmap")),Oi}}catch{b&&b(On)}}if($e){le=vt.join("&");break e}}le=void 0}return g=g.i.splice(0,C),S.G=g,le}function gc(g){if(!g.g&&!g.v){g.Y=1;var S=g.Da;Z||M(),ue||(Z(),ue=!0),D.add(S,g),g.A=0}}function $s(g){return g.g||g.v||g.A>=3?!1:(g.Y++,g.v=Ci(p(g.Da,g),vc(g,g.A)),g.A++,!0)}n.Da=function(){if(this.v=null,yc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var g=4*this.T;this.j.info("BP detection timer enabled: "+g),this.B=Ci(p(this.Wa,this),g)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ct(10),Fr(this),yc(this))};function Il(g){g.B!=null&&(u.clearTimeout(g.B),g.B=null)}function yc(g){g.g=new ti(g,g.j,"rpc",g.Y),g.u===null&&(g.g.J=g.o),g.g.P=0;var S=Rt(g.na);Ze(S,"RID","rpc"),Ze(S,"SID",g.M),Ze(S,"AID",g.K),Ze(S,"CI",g.F?"0":"1"),!g.F&&g.ia&&Ze(S,"TO",g.ia),Ze(S,"TYPE","xmlhttp"),Ys(g,S),g.u&&g.o&&zs(S,g.u,g.o),g.O&&(g.g.H=g.O);var C=g.g;g=g.ba,C.M=1,C.A=Bs(Rt(S)),C.u=null,C.R=!0,Do(C,g)}n.Va=function(){this.C!=null&&(this.C=null,Fr(this),$s(this),Ct(19))};function Bo(g){g.C!=null&&(u.clearTimeout(g.C),g.C=null)}function _c(g,S){var C=null;if(g.g==S){Bo(g),Il(g),g.g=null;var b=2}else if(Mi(g.h,S))C=S.G,pl(g.h,S),b=1;else return;if(g.I!=0){if(S.o)if(b==1){C=S.u?S.u.length:0,S=Date.now()-S.F;var J=g.D;b=Mo(),kt(b,new Ai(b,C)),Li(g)}else gc(g);else if(J=S.m,J==3||J==0&&S.X>0||!(b==1&&qo(g,S)||b==2&&$s(g)))switch(C&&C.length>0&&(S=g.h,S.i=S.i.concat(C)),J){case 1:ki(g,5);break;case 4:ki(g,10);break;case 3:ki(g,6);break;default:ki(g,2)}}}function vc(g,S){let C=g.Qa+Math.floor(Math.random()*g.Za);return g.isActive()||(C*=2),C*S}function ki(g,S){if(g.j.info("Error code "+S),S==2){var C=p(g.bb,g),b=g.Ua;const J=!b;b=new Cn(b||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Ht(b,"https"),Bs(b),J?ii(b.toString(),C):El(b.toString(),C)}else Ct(2);g.I=0,g.l&&g.l.pa(S),Ec(g),Fo(g)}n.bb=function(g){g?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function Ec(g){if(g.I=0,g.ja=[],g.l){const S=ml(g.h);(S.length!=0||g.i.length!=0)&&(x(g.ja,S),x(g.ja,g.i),g.h.i.length=0,I(g.i),g.i.length=0),g.l.oa()}}function Tc(g,S,C){var b=C instanceof Cn?Rt(C):new Cn(C);if(b.g!="")S&&(b.g=S+"."+b.g),Dr(b,b.u);else{var J=u.location;b=J.protocol,S=S?S+"."+J.hostname:J.hostname,J=+J.port;const X=new Cn(null);b&&Ht(X,b),S&&(X.g=S),J&&Dr(X,J),C&&(X.h=C),b=X}return C=g.G,S=g.wa,C&&S&&Ze(b,C,S),Ze(b,"VER",g.ka),Ys(g,b),b}function Sc(g,S,C){if(S&&!g.L)throw Error("Can't create secondary domain capable XhrIo object.");return S=g.Aa&&!g.ma?new tt(new Pi({ab:C})):new tt(g.ma),S.Fa(g.L),S}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ac(){}n=Ac.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function qr(){}qr.prototype.g=function(g,S){return new cn(g,S)};function cn(g,S){At.call(this),this.g=new Or(S),this.l=g,this.h=S&&S.messageUrlParams||null,g=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(g?g["X-WebChannel-Content-Type"]=S.messageContentType:g={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.sa&&(g?g["X-WebChannel-Client-Profile"]=S.sa:g={"X-WebChannel-Client-Profile":S.sa}),this.g.U=g,(g=S&&S.Qb)&&!V(g)&&(this.g.u=g),this.A=S&&S.supportsCrossDomainXhr||!1,this.v=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!V(S)&&(this.g.G=S,g=this.h,g!==null&&S in g&&(g=this.h,S in g&&delete g[S])),this.j=new nr(this)}E(cn,At),cn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){Al(this.g)},cn.prototype.o=function(g){var S=this.g;if(typeof g=="string"){var C={};C.__data__=g,g=C}else this.v&&(C={},C.__data__=Mr(g),g=C);S.i.push(new wt(S.Ya++,g)),S.I==3&&Li(S)},cn.prototype.N=function(){this.g.l=null,delete this.j,Al(this.g),delete this.g,cn.Z.N.call(this)};function Cc(g){Kt.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var S=g.__sm__;if(S){e:{for(const C in S){g=C;break e}g=void 0}(this.i=g)&&(g=this.i,S=S!==null&&g in S?S[g]:void 0),this.data=S}else this.data=g}E(Cc,Kt);function Ic(){Vn.call(this),this.status=1}E(Ic,Vn);function nr(g){this.g=g}E(nr,Ac),nr.prototype.ra=function(){kt(this.g,"a")},nr.prototype.qa=function(g){kt(this.g,new Cc(g))},nr.prototype.pa=function(g){kt(this.g,new Ic)},nr.prototype.oa=function(){kt(this.g,"b")},qr.prototype.createWebChannel=qr.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,oC=function(){return new qr},sC=function(){return Mo()},rC=_t,Mm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Fs.NO_ERROR=0,Fs.TIMEOUT=8,Fs.HTTP_ERROR=6,zf=Fs,ul.COMPLETE="complete",iC=ul,ic.EventType=jn,jn.OPEN="a",jn.CLOSE="b",jn.ERROR="c",jn.MESSAGE="d",At.prototype.listen=At.prototype.J,gu=ic,tt.prototype.listenOnce=tt.prototype.K,tt.prototype.getLastError=tt.prototype.Ha,tt.prototype.getLastErrorCode=tt.prototype.ya,tt.prototype.getStatus=tt.prototype.ca,tt.prototype.getResponseJson=tt.prototype.La,tt.prototype.getResponseText=tt.prototype.la,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Fa,nC=tt}).apply(typeof Mf<"u"?Mf:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}sn.UNAUTHENTICATED=new sn(null),sn.GOOGLE_CREDENTIALS=new sn("google-credentials-uid"),sn.FIRST_PARTY=new sn("first-party-uid"),sn.MOCK_USER=new sn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $a="12.8.0";function f1(n){$a=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vo=new Tg("@firebase/firestore");function _a(){return vo.logLevel}function pe(n,...e){if(vo.logLevel<=Fe.DEBUG){const t=e.map(Cg);vo.debug(`Firestore (${$a}): ${n}`,...t)}}function Ar(n,...e){if(vo.logLevel<=Fe.ERROR){const t=e.map(Cg);vo.error(`Firestore (${$a}): ${n}`,...t)}}function Ua(n,...e){if(vo.logLevel<=Fe.WARN){const t=e.map(Cg);vo.warn(`Firestore (${$a}): ${n}`,...t)}}function Cg(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,aC(n,i,t)}function aC(n,e,t){let i=`FIRESTORE (${$a}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Ar(i),new Error(i)}function We(n,e,t,i){let s="Unexpected state";typeof t=="string"?s=t:i=t,n||aC(e,s,i)}function be(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Rr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class d1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(sn.UNAUTHENTICATED)))}shutdown(){}}class h1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class p1{constructor(e){this.t=e,this.currentUser=sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){We(this.o===void 0,42304);let i=this.i;const s=h=>this.i!==i?(i=this.i,t(h)):Promise.resolve();let a=new Es;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Es,e.enqueueRetryable((()=>s(this.currentUser)))};const u=()=>{const h=a;e.enqueueRetryable((async()=>{await h.promise,await s(this.currentUser)}))},f=h=>{pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((h=>f(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?f(h):(pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Es)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(We(typeof i.accessToken=="string",31837,{l:i}),new lC(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string",2055,{h:e}),new sn(e)}}class m1{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=sn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class g1{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new m1(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(sn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class IT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class y1{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,fi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){We(this.o===void 0,3512);const i=a=>{a.error!=null&&pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const u=a.token!==this.m;return this.m=a.token,pe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const s=a=>{pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>s(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new IT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(We(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new IT(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _1(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=_1(40);for(let a=0;a<s.length;++a)i.length<20&&s[a]<t&&(i+=e.charAt(s[a]%62))}return i}}function qe(n,e){return n<e?-1:n>e?1:0}function Dm(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const s=n.charAt(i),a=e.charAt(i);if(s!==a)return hm(s)===hm(a)?qe(s,a):hm(s)?1:-1}return qe(n.length,e.length)}const v1=55296,E1=57343;function hm(n){const e=n.charCodeAt(0);return e>=v1&&e<=E1}function La(n,e,t){return n.length===e.length&&n.every(((i,s)=>t(i,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT="__name__";class zi{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ae(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ae(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return zi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof zi?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let s=0;s<i;s++){const a=zi.compareSegments(e.get(s),t.get(s));if(a!==0)return a}return qe(e.length,t.length)}static compareSegments(e,t){const i=zi.isNumericId(e),s=zi.isNumericId(t);return i&&!s?-1:!i&&s?1:i&&s?zi.extractNumericId(e).compare(zi.extractNumericId(t)):Dm(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return vs.fromString(e.substring(4,e.length-2))}}class at extends zi{construct(e,t,i){return new at(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new he(re.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((s=>s.length>0)))}return new at(t)}static emptyPath(){return new at([])}}const T1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class jt extends zi{construct(e,t,i){return new jt(e,t,i)}static isValidIdentifier(e){return T1.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),jt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===wT}static keyField(){return new jt([wT])}static fromServerFormat(e){const t=[];let i="",s=0;const a=()=>{if(i.length===0)throw new he(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let u=!1;for(;s<e.length;){const f=e[s];if(f==="\\"){if(s+1===e.length)throw new he(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[s+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new he(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=h,s+=2}else f==="`"?(u=!u,s++):f!=="."||u?(i+=f,s++):(a(),s++)}if(a(),u)throw new he(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new jt(t)}static emptyPath(){return new jt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(at.fromString(e))}static fromName(e){return new Ee(at.fromString(e).popFirst(5))}static empty(){return new Ee(at.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&at.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return at.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new at(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(n,e,t){if(!t)throw new he(re.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function S1(n,e,t,i){if(e===!0&&i===!0)throw new he(re.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function RT(n){if(!Ee.isDocumentKey(n))throw new he(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function bT(n){if(Ee.isDocumentKey(n))throw new he(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function cC(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function xd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ae(12329,{type:typeof n})}function Ji(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new he(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=xd(n);throw new he(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Ju(n,e){if(!cC(n))throw new he(re.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const s=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const u=n[i];if(s&&typeof u!==s){t=`JSON field '${i}' must be a ${s}.`;break}if(a!==void 0&&u!==a.value){t=`Expected '${i}' field to equal '${a.value}'`;break}}if(t)throw new he(re.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT=-62135596800,xT=1e6;class ct{static now(){return ct.fromMillis(Date.now())}static fromDate(e){return ct.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*xT);return new ct(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<NT)throw new he(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/xT}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ct._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ju(e,ct._jsonSchema))return new ct(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-NT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ct._jsonSchemaVersion="firestore/timestamp/1.0",ct._jsonSchema={type:Vt("string",ct._jsonSchemaVersion),seconds:Vt("number"),nanoseconds:Vt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{static fromTimestamp(e){return new we(e)}static min(){return new we(new ct(0,0))}static max(){return new we(new ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nu=-1;function A1(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=we.fromTimestamp(i===1e9?new ct(t+1,0):new ct(t,i));return new As(s,Ee.empty(),e)}function C1(n){return new As(n.readTime,n.key,Nu)}class As{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new As(we.min(),Ee.empty(),Nu)}static max(){return new As(we.max(),Ee.empty(),Nu)}}function I1(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(n.documentKey,e.documentKey),t!==0?t:qe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class R1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qa(n){if(n.code!==re.FAILED_PRECONDITION||n.message!==w1)throw n;pe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe(((i,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,s)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.reject(t)}static resolve(e){return new oe(((t,i)=>{t(e)}))}static reject(e){return new oe(((t,i)=>{i(e)}))}static waitFor(e){return new oe(((t,i)=>{let s=0,a=0,u=!1;e.forEach((f=>{++s,f.next((()=>{++a,u&&a===s&&t()}),(h=>i(h)))})),u=!0,a===s&&t()}))}static or(e){let t=oe.resolve(!1);for(const i of e)t=t.next((s=>s?oe.resolve(s):i()));return t}static forEach(e,t){const i=[];return e.forEach(((s,a)=>{i.push(t.call(this,s,a))})),this.waitFor(i)}static mapArray(e,t){return new oe(((i,s)=>{const a=e.length,u=new Array(a);let f=0;for(let h=0;h<a;h++){const p=h;t(e[p]).next((_=>{u[p]=_,++f,f===a&&i(u)}),(_=>s(_)))}}))}static doWhile(e,t){return new oe(((i,s)=>{const a=()=>{e()===!0?t().next((()=>{a()}),s):i()};a()}))}}function b1(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Wa(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Md.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wg=-1;function Dd(n){return n==null}function sd(n){return n===0&&1/n==-1/0}function N1(n){return typeof n=="number"&&Number.isInteger(n)&&!sd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC="";function x1(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=MT(e)),e=M1(n.get(t),e);return MT(e)}function M1(n,e){let t=e;const i=n.length;for(let s=0;s<i;s++){const a=n.charAt(s);switch(a){case"\0":t+="";break;case fC:t+="";break;default:t+=a}}return t}function MT(n){return n+fC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ns(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function dC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,t){this.comparator=e,this.root=t||Zt.EMPTY}insert(e,t){return new mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zt.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return t+i.left.size;s<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Df(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Df(this.root,e,this.comparator,!1)}getReverseIterator(){return new Df(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Df(this.root,e,this.comparator,!0)}}class Df{constructor(e,t,i,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zt{constructor(e,t,i,s,a){this.key=e,this.value=t,this.color=i??Zt.RED,this.left=s??Zt.EMPTY,this.right=a??Zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,s,a){return new Zt(e??this.key,t??this.value,i??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this;const a=i(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,t,i),null):a===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Zt.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ae(27949);return e+(this.isRed()?0:1)}}Zt.EMPTY=null,Zt.RED=!0,Zt.BLACK=!1;Zt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae(57766)}get value(){throw Ae(16141)}get color(){throw Ae(16727)}get left(){throw Ae(29726)}get right(){throw Ae(36894)}copy(e,t,i,s,a){return this}insert(e,t,i){return new Zt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new PT(this.data.getIterator())}getIteratorFrom(e){return new PT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Ft)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=i.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ft(this.comparator);return t.data=e,t}}class PT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.fields=e,e.sort(jt.comparator)}static empty(){return new Dn([])}unionWith(e){let t=new Ft(jt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Dn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return La(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new hC("Invalid base64 string: "+a):a}})(e);return new en(t)}static fromUint8Array(e){const t=(function(s){let a="";for(let u=0;u<s.length;++u)a+=String.fromCharCode(s[u]);return a})(e);return new en(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}en.EMPTY_BYTE_STRING=new en("");const D1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cs(n){if(We(!!n,39018),typeof n=="string"){let e=0;const t=D1.exec(n);if(We(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:St(n.seconds),nanos:St(n.nanos)}}function St(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Is(n){return typeof n=="string"?en.fromBase64String(n):en.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC="server_timestamp",mC="__type__",gC="__previous_value__",yC="__local_write_time__";function Rg(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[mC])==null?void 0:i.stringValue)===pC}function Pd(n){const e=n.mapValue.fields[gC];return Rg(e)?Pd(e):e}function xu(n){const e=Cs(n.mapValue.fields[yC].timestampValue);return new ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e,t,i,s,a,u,f,h,p,_,E){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=s,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=h,this.useFetchStreams=p,this.isUsingEmulator=_,this.apiKey=E}}const od="(default)";class Mu{constructor(e,t){this.projectId=e,this.database=t||od}static empty(){return new Mu("","")}get isDefaultDatabase(){return this.database===od}isEqual(e){return e instanceof Mu&&e.projectId===this.projectId&&e.database===this.database}}function V1(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new he(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mu(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C="__type__",U1="__max__",Pf={mapValue:{}},vC="__vector__",ad="value";function ws(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Rg(n)?4:k1(n)?9007199254740991:L1(n)?10:11:Ae(28295,{value:n})}function Xi(n,e){if(n===e)return!0;const t=ws(n);if(t!==ws(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return xu(n).isEqual(xu(e));case 3:return(function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const u=Cs(s.timestampValue),f=Cs(a.timestampValue);return u.seconds===f.seconds&&u.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,a){return Is(s.bytesValue).isEqual(Is(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,a){return St(s.geoPointValue.latitude)===St(a.geoPointValue.latitude)&&St(s.geoPointValue.longitude)===St(a.geoPointValue.longitude)})(n,e);case 2:return(function(s,a){if("integerValue"in s&&"integerValue"in a)return St(s.integerValue)===St(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const u=St(s.doubleValue),f=St(a.doubleValue);return u===f?sd(u)===sd(f):isNaN(u)&&isNaN(f)}return!1})(n,e);case 9:return La(n.arrayValue.values||[],e.arrayValue.values||[],Xi);case 10:case 11:return(function(s,a){const u=s.mapValue.fields||{},f=a.mapValue.fields||{};if(DT(u)!==DT(f))return!1;for(const h in u)if(u.hasOwnProperty(h)&&(f[h]===void 0||!Xi(u[h],f[h])))return!1;return!0})(n,e);default:return Ae(52216,{left:n})}}function Du(n,e){return(n.values||[]).find((t=>Xi(t,e)))!==void 0}function ka(n,e){if(n===e)return 0;const t=ws(n),i=ws(e);if(t!==i)return qe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return qe(n.booleanValue,e.booleanValue);case 2:return(function(a,u){const f=St(a.integerValue||a.doubleValue),h=St(u.integerValue||u.doubleValue);return f<h?-1:f>h?1:f===h?0:isNaN(f)?isNaN(h)?0:-1:1})(n,e);case 3:return VT(n.timestampValue,e.timestampValue);case 4:return VT(xu(n),xu(e));case 5:return Dm(n.stringValue,e.stringValue);case 6:return(function(a,u){const f=Is(a),h=Is(u);return f.compareTo(h)})(n.bytesValue,e.bytesValue);case 7:return(function(a,u){const f=a.split("/"),h=u.split("/");for(let p=0;p<f.length&&p<h.length;p++){const _=qe(f[p],h[p]);if(_!==0)return _}return qe(f.length,h.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,u){const f=qe(St(a.latitude),St(u.latitude));return f!==0?f:qe(St(a.longitude),St(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return UT(n.arrayValue,e.arrayValue);case 10:return(function(a,u){var T,I,x,U;const f=a.fields||{},h=u.fields||{},p=(T=f[ad])==null?void 0:T.arrayValue,_=(I=h[ad])==null?void 0:I.arrayValue,E=qe(((x=p==null?void 0:p.values)==null?void 0:x.length)||0,((U=_==null?void 0:_.values)==null?void 0:U.length)||0);return E!==0?E:UT(p,_)})(n.mapValue,e.mapValue);case 11:return(function(a,u){if(a===Pf.mapValue&&u===Pf.mapValue)return 0;if(a===Pf.mapValue)return 1;if(u===Pf.mapValue)return-1;const f=a.fields||{},h=Object.keys(f),p=u.fields||{},_=Object.keys(p);h.sort(),_.sort();for(let E=0;E<h.length&&E<_.length;++E){const T=Dm(h[E],_[E]);if(T!==0)return T;const I=ka(f[h[E]],p[_[E]]);if(I!==0)return I}return qe(h.length,_.length)})(n.mapValue,e.mapValue);default:throw Ae(23264,{he:t})}}function VT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return qe(n,e);const t=Cs(n),i=Cs(e),s=qe(t.seconds,i.seconds);return s!==0?s:qe(t.nanos,i.nanos)}function UT(n,e){const t=n.values||[],i=e.values||[];for(let s=0;s<t.length&&s<i.length;++s){const a=ka(t[s],i[s]);if(a)return a}return qe(t.length,i.length)}function Oa(n){return Pm(n)}function Pm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Cs(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Is(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ee.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",s=!0;for(const a of t.values||[])s?s=!1:i+=",",i+=Pm(a);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let s="{",a=!0;for(const u of i)a?a=!1:s+=",",s+=`${u}:${Pm(t.fields[u])}`;return s+"}"})(n.mapValue):Ae(61005,{value:n})}function Jf(n){switch(ws(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Pd(n);return e?16+Jf(e):16;case 5:return 2*n.stringValue.length;case 6:return Is(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((s,a)=>s+Jf(a)),0)})(n.arrayValue);case 10:case 11:return(function(i){let s=0;return Ns(i.fields,((a,u)=>{s+=a.length+Jf(u)})),s})(n.mapValue);default:throw Ae(13486,{value:n})}}function LT(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Vm(n){return!!n&&"integerValue"in n}function bg(n){return!!n&&"arrayValue"in n}function kT(n){return!!n&&"nullValue"in n}function OT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Kf(n){return!!n&&"mapValue"in n}function L1(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[_C])==null?void 0:i.stringValue)===vC}function Su(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ns(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Su(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Su(n.arrayValue.values[t]);return e}return{...n}}function k1(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===U1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.value=e}static empty(){return new Sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Kf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Su(t)}setAll(e){let t=jt.emptyPath(),i={},s=[];e.forEach(((u,f)=>{if(!t.isImmediateParentOf(f)){const h=this.getFieldsMap(t);this.applyChanges(h,i,s),i={},s=[],t=f.popLast()}u?i[f.lastSegment()]=Su(u):s.push(f.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,i,s)}delete(e){const t=this.field(e.popLast());Kf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Xi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=t.mapValue.fields[e.get(i)];Kf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,i){Ns(t,((s,a)=>e[s]=a));for(const s of i)delete e[s]}clone(){return new Sn(Su(this.value))}}function EC(n){const e=[];return Ns(n.fields,((t,i)=>{const s=new jt([t]);if(Kf(i)){const a=EC(i.mapValue).fields;if(a.length===0)e.push(s);else for(const u of a)e.push(s.child(u))}else e.push(s)})),new Dn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,t,i,s,a,u,f){this.key=e,this.documentType=t,this.version=i,this.readTime=s,this.createTime=a,this.data=u,this.documentState=f}static newInvalidDocument(e){return new on(e,0,we.min(),we.min(),we.min(),Sn.empty(),0)}static newFoundDocument(e,t,i,s){return new on(e,1,t,we.min(),i,s,0)}static newNoDocument(e,t){return new on(e,2,t,we.min(),we.min(),Sn.empty(),0)}static newUnknownDocument(e,t){return new on(e,3,t,we.min(),we.min(),Sn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof on&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new on(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,t){this.position=e,this.inclusive=t}}function FT(n,e,t){let i=0;for(let s=0;s<n.position.length;s++){const a=e[s],u=n.position[s];if(a.field.isKeyField()?i=Ee.comparator(Ee.fromName(u.referenceValue),t.key):i=ka(u,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function qT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Xi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e,t="asc"){this.field=e,this.dir=t}}function O1(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{}class Pt extends TC{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new q1(e,t,i):t==="array-contains"?new G1(e,i):t==="in"?new z1(e,i):t==="not-in"?new J1(e,i):t==="array-contains-any"?new K1(e,i):new Pt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new B1(e,i):new H1(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ka(t,this.value)):t!==null&&ws(this.value)===ws(t)&&this.matchesComparison(ka(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _i extends TC{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new _i(e,t)}matches(e){return SC(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function SC(n){return n.op==="and"}function AC(n){return F1(n)&&SC(n)}function F1(n){for(const e of n.filters)if(e instanceof _i)return!1;return!0}function Um(n){if(n instanceof Pt)return n.field.canonicalString()+n.op.toString()+Oa(n.value);if(AC(n))return n.filters.map((e=>Um(e))).join(",");{const e=n.filters.map((t=>Um(t))).join(",");return`${n.op}(${e})`}}function CC(n,e){return n instanceof Pt?(function(i,s){return s instanceof Pt&&i.op===s.op&&i.field.isEqual(s.field)&&Xi(i.value,s.value)})(n,e):n instanceof _i?(function(i,s){return s instanceof _i&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce(((a,u,f)=>a&&CC(u,s.filters[f])),!0):!1})(n,e):void Ae(19439)}function IC(n){return n instanceof Pt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Oa(t.value)}`})(n):n instanceof _i?(function(t){return t.op.toString()+" {"+t.getFilters().map(IC).join(" ,")+"}"})(n):"Filter"}class q1 extends Pt{constructor(e,t,i){super(e,t,i),this.key=Ee.fromName(i.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class B1 extends Pt{constructor(e,t){super(e,"in",t),this.keys=wC("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class H1 extends Pt{constructor(e,t){super(e,"not-in",t),this.keys=wC("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function wC(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>Ee.fromName(i.referenceValue)))}class G1 extends Pt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return bg(t)&&Du(t.arrayValue,this.value)}}class z1 extends Pt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Du(this.value.arrayValue,t)}}class J1 extends Pt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Du(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Du(this.value.arrayValue,t)}}class K1 extends Pt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!bg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Du(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(e,t=null,i=[],s=[],a=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=s,this.limit=a,this.startAt=u,this.endAt=f,this.Te=null}}function BT(n,e=null,t=[],i=[],s=null,a=null,u=null){return new Y1(n,e,t,i,s,a,u)}function Ng(n){const e=be(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Um(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),Dd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Oa(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Oa(i))).join(",")),e.Te=t}return e.Te}function xg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!O1(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!CC(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!qT(n.startAt,e.startAt)&&qT(n.endAt,e.endAt)}function Lm(n){return Ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e,t=null,i=[],s=[],a=null,u="F",f=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=s,this.limit=a,this.limitType=u,this.startAt=f,this.endAt=h,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function $1(n,e,t,i,s,a,u,f){return new Xa(n,e,t,i,s,a,u,f)}function Mg(n){return new Xa(n)}function HT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Q1(n){return Ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function RC(n){return n.collectionGroup!==null}function Au(n){const e=be(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let f=new Ft(jt.comparator);return u.filters.forEach((h=>{h.getFlattenedFilters().forEach((p=>{p.isInequality()&&(f=f.add(p.field))}))})),f})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Pu(a,i))})),t.has(jt.keyField().canonicalString())||e.Ie.push(new Pu(jt.keyField(),i))}return e.Ie}function Ki(n){const e=be(n);return e.Ee||(e.Ee=W1(e,Au(n))),e.Ee}function W1(n,e){if(n.limitType==="F")return BT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const a=s.dir==="desc"?"asc":"desc";return new Pu(s.field,a)}));const t=n.endAt?new ld(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new ld(n.startAt.position,n.startAt.inclusive):null;return BT(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function km(n,e){const t=n.filters.concat([e]);return new Xa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function X1(n,e){const t=n.explicitOrderBy.concat([e]);return new Xa(n.path,n.collectionGroup,t,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}function Om(n,e,t){return new Xa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Vd(n,e){return xg(Ki(n),Ki(e))&&n.limitType===e.limitType}function bC(n){return`${Ng(Ki(n))}|lt:${n.limitType}`}function va(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((s=>IC(s))).join(", ")}]`),Dd(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((s=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(s))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((s=>Oa(s))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((s=>Oa(s))).join(",")),`Target(${i})`})(Ki(n))}; limitType=${n.limitType})`}function Ud(n,e){return e.isFoundDocument()&&(function(i,s){const a=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Ee.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(n,e)&&(function(i,s){for(const a of Au(i))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(i,s){for(const a of i.filters)if(!a.matches(s))return!1;return!0})(n,e)&&(function(i,s){return!(i.startAt&&!(function(u,f,h){const p=FT(u,f,h);return u.inclusive?p<=0:p<0})(i.startAt,Au(i),s)||i.endAt&&!(function(u,f,h){const p=FT(u,f,h);return u.inclusive?p>=0:p>0})(i.endAt,Au(i),s))})(n,e)}function Z1(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function NC(n){return(e,t)=>{let i=!1;for(const s of Au(n)){const a=j1(s,e,t);if(a!==0)return a;i=i||s.field.isKeyField()}return 0}}function j1(n,e,t){const i=n.field.isKeyField()?Ee.comparator(e.key,t.key):(function(a,u,f){const h=u.data.field(a),p=f.data.field(a);return h!==null&&p!==null?ka(h,p):Ae(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ae(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[s,a]of i)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[t]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ns(this.inner,((t,i)=>{for(const[s,a]of i)e(s,a)}))}isEmpty(){return dC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD=new mt(Ee.comparator);function Cr(){return eD}const xC=new mt(Ee.comparator);function yu(...n){let e=xC;for(const t of n)e=e.insert(t.key,t);return e}function MC(n){let e=xC;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function po(){return Cu()}function DC(){return Cu()}function Cu(){return new Co((n=>n.toString()),((n,e)=>n.isEqual(e)))}const tD=new mt(Ee.comparator),nD=new Ft(Ee.comparator);function Be(...n){let e=nD;for(const t of n)e=e.add(t);return e}const iD=new Ft(qe);function rD(){return iD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sd(e)?"-0":e}}function PC(n){return{integerValue:""+n}}function sD(n,e){return N1(e)?PC(e):Dg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(){this._=void 0}}function oD(n,e,t){return n instanceof Vu?(function(s,a){const u={fields:{[mC]:{stringValue:pC},[yC]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Rg(a)&&(a=Pd(a)),a&&(u.fields[gC]=a),{mapValue:u}})(t,e):n instanceof Uu?UC(n,e):n instanceof Lu?LC(n,e):(function(s,a){const u=VC(s,a),f=GT(u)+GT(s.Ae);return Vm(u)&&Vm(s.Ae)?PC(f):Dg(s.serializer,f)})(n,e)}function aD(n,e,t){return n instanceof Uu?UC(n,e):n instanceof Lu?LC(n,e):t}function VC(n,e){return n instanceof ud?(function(i){return Vm(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class Vu extends Ld{}class Uu extends Ld{constructor(e){super(),this.elements=e}}function UC(n,e){const t=kC(e);for(const i of n.elements)t.some((s=>Xi(s,i)))||t.push(i);return{arrayValue:{values:t}}}class Lu extends Ld{constructor(e){super(),this.elements=e}}function LC(n,e){let t=kC(e);for(const i of n.elements)t=t.filter((s=>!Xi(s,i)));return{arrayValue:{values:t}}}class ud extends Ld{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function GT(n){return St(n.integerValue||n.doubleValue)}function kC(n){return bg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(e,t){this.field=e,this.transform=t}}function uD(n,e){return n.field.isEqual(e.field)&&(function(i,s){return i instanceof Uu&&s instanceof Uu||i instanceof Lu&&s instanceof Lu?La(i.elements,s.elements,Xi):i instanceof ud&&s instanceof ud?Xi(i.Ae,s.Ae):i instanceof Vu&&s instanceof Vu})(n.transform,e.transform)}class cD{constructor(e,t){this.version=e,this.transformResults=t}}class hi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new hi}static exists(e){return new hi(void 0,e)}static updateTime(e){return new hi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class kd{}function OC(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Pg(n.key,hi.none()):new Ku(n.key,n.data,hi.none());{const t=n.data,i=Sn.empty();let s=new Ft(jt.comparator);for(let a of e.fields)if(!s.has(a)){let u=t.field(a);u===null&&a.length>1&&(a=a.popLast(),u=t.field(a)),u===null?i.delete(a):i.set(a,u),s=s.add(a)}return new xs(n.key,i,new Dn(s.toArray()),hi.none())}}function fD(n,e,t){n instanceof Ku?(function(s,a,u){const f=s.value.clone(),h=JT(s.fieldTransforms,a,u.transformResults);f.setAll(h),a.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(n,e,t):n instanceof xs?(function(s,a,u){if(!Yf(s.precondition,a))return void a.convertToUnknownDocument(u.version);const f=JT(s.fieldTransforms,a,u.transformResults),h=a.data;h.setAll(FC(s)),h.setAll(f),a.convertToFoundDocument(u.version,h).setHasCommittedMutations()})(n,e,t):(function(s,a,u){a.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function Iu(n,e,t,i){return n instanceof Ku?(function(a,u,f,h){if(!Yf(a.precondition,u))return f;const p=a.value.clone(),_=KT(a.fieldTransforms,h,u);return p.setAll(_),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null})(n,e,t,i):n instanceof xs?(function(a,u,f,h){if(!Yf(a.precondition,u))return f;const p=KT(a.fieldTransforms,h,u),_=u.data;return _.setAll(FC(a)),_.setAll(p),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),f===null?null:f.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((E=>E.field)))})(n,e,t,i):(function(a,u,f){return Yf(a.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):f})(n,e,t)}function dD(n,e){let t=null;for(const i of n.fieldTransforms){const s=e.data.field(i.field),a=VC(i.transform,s||null);a!=null&&(t===null&&(t=Sn.empty()),t.set(i.field,a))}return t||null}function zT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&La(i,s,((a,u)=>uD(a,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ku extends kd{constructor(e,t,i,s=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class xs extends kd{constructor(e,t,i,s,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function FC(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function JT(n,e,t){const i=new Map;We(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let s=0;s<t.length;s++){const a=n[s],u=a.transform,f=e.data.field(a.field);i.set(a.field,aD(u,f,t[s]))}return i}function KT(n,e,t){const i=new Map;for(const s of n){const a=s.transform,u=t.data.field(s.field);i.set(s.field,oD(a,u,e))}return i}class Pg extends kd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hD extends kd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e,t,i,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&fD(a,e,i[s])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Iu(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Iu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=DC();return this.mutations.forEach((s=>{const a=e.get(s.key),u=a.overlayedDocument;let f=this.applyToLocalView(u,a.mutatedFields);f=t.has(s.key)?null:f;const h=OC(u,f);h!==null&&i.set(s.key,h),u.isValidDocument()||u.convertToNoDocument(we.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Be())}isEqual(e){return this.batchId===e.batchId&&La(this.mutations,e.mutations,((t,i)=>zT(t,i)))&&La(this.baseMutations,e.baseMutations,((t,i)=>zT(t,i)))}}class Vg{constructor(e,t,i,s){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=s}static from(e,t,i){We(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let s=(function(){return tD})();const a=e.mutations;for(let u=0;u<a.length;u++)s=s.insert(a[u].key,i[u].version);return new Vg(e,t,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dt,ze;function yD(n){switch(n){case re.OK:return Ae(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return Ae(15467,{code:n})}}function qC(n){if(n===void 0)return Ar("GRPC error has no .code"),re.UNKNOWN;switch(n){case Dt.OK:return re.OK;case Dt.CANCELLED:return re.CANCELLED;case Dt.UNKNOWN:return re.UNKNOWN;case Dt.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Dt.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Dt.INTERNAL:return re.INTERNAL;case Dt.UNAVAILABLE:return re.UNAVAILABLE;case Dt.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Dt.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Dt.NOT_FOUND:return re.NOT_FOUND;case Dt.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Dt.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Dt.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Dt.ABORTED:return re.ABORTED;case Dt.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Dt.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Dt.DATA_LOSS:return re.DATA_LOSS;default:return Ae(39323,{code:n})}}(ze=Dt||(Dt={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _D(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vD=new vs([4294967295,4294967295],0);function YT(n){const e=_D().encode(n),t=new tC;return t.update(e),new Uint8Array(t.digest())}function $T(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new vs([t,i],0),new vs([s,a],0)]}class Ug{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new _u(`Invalid padding: ${t}`);if(i<0)throw new _u(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new _u(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new _u(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=vs.fromNumber(this.ge)}ye(e,t,i){let s=e.add(t.multiply(vs.fromNumber(i)));return s.compare(vD)===1&&(s=new vs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=YT(e),[i,s]=$T(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,s,a);if(!this.we(u))return!1}return!0}static create(e,t,i){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),u=new Ug(a,s,t);return i.forEach((f=>u.insert(f))),u}insert(e){if(this.ge===0)return;const t=YT(e),[i,s]=$T(t);for(let a=0;a<this.hashCount;a++){const u=this.ye(i,s,a);this.be(u)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class _u extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(e,t,i,s,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const s=new Map;return s.set(e,Yu.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Od(we.min(),s,new mt(qe),Cr(),Be())}}class Yu{constructor(e,t,i,s,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Yu(i,t,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e,t,i,s){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=s}}class BC{constructor(e,t){this.targetId=e,this.Ce=t}}class HC{constructor(e,t,i=en.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=s}}class QT{constructor(){this.ve=0,this.Fe=WT(),this.Me=en.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Be(),t=Be(),i=Be();return this.Fe.forEach(((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:i=i.add(s);break;default:Ae(38017,{changeType:a})}})),new Yu(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=WT()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,We(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class ED{constructor(e){this.Ge=e,this.ze=new Map,this.je=Cr(),this.He=Vf(),this.Je=Vf(),this.Ze=new mt(qe)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Ae(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,i=e.Ce.count,s=this.ot(t);if(s){const a=s.target;if(Lm(a))if(i===0){const u=new Ee(a.path);this.et(t,u,on.newNoDocument(u,we.min()))}else We(i===1,20013,{expectedCount:i});else{const u=this._t(t);if(u!==i){const f=this.ut(e),h=f?this.ct(f,e,u):1;if(h!==0){this.it(t);const p=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:a=0}=t;let u,f;try{u=Is(i).toUint8Array()}catch(h){if(h instanceof hC)return Ua("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{f=new Ug(u,s,a)}catch(h){return Ua(h instanceof _u?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return f.ge===0?null:f}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let s=0;return i.forEach((a=>{const u=this.Ge.ht(),f=`projects/${u.projectId}/databases/${u.database}/documents/${a.path.canonicalString()}`;e.mightContain(f)||(this.et(t,a,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((a,u)=>{const f=this.ot(u);if(f){if(a.current&&Lm(f.target)){const h=new Ee(f.target.path);this.It(h).has(u)||this.Et(u,h)||this.et(u,h,on.newNoDocument(h,e))}a.Be&&(t.set(u,a.ke()),a.Ke())}}));let i=Be();this.Je.forEach(((a,u)=>{let f=!0;u.forEachWhile((h=>{const p=this.ot(h);return!p||p.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(i=i.add(a))})),this.je.forEach(((a,u)=>u.setReadTime(e)));const s=new Od(e,t,this.Ze,this.je,i);return this.je=Cr(),this.He=Vf(),this.Je=Vf(),this.Ze=new mt(qe),s}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.qe(t,1):s.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new QT,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Ft(qe),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Ft(qe),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||pe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new QT),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Vf(){return new mt(Ee.comparator)}function WT(){return new mt(Ee.comparator)}const TD={asc:"ASCENDING",desc:"DESCENDING"},SD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},AD={and:"AND",or:"OR"};class CD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Fm(n,e){return n.useProto3Json||Dd(e)?e:{value:e}}function cd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function GC(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function ID(n,e){return cd(n,e.toTimestamp())}function Yi(n){return We(!!n,49232),we.fromTimestamp((function(t){const i=Cs(t);return new ct(i.seconds,i.nanos)})(n))}function Lg(n,e){return qm(n,e).canonicalString()}function qm(n,e){const t=(function(s){return new at(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function zC(n){const e=at.fromString(n);return We(QC(e),10190,{key:e.toString()}),e}function Bm(n,e){return Lg(n.databaseId,e.path)}function pm(n,e){const t=zC(e);if(t.get(1)!==n.databaseId.projectId)throw new he(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new he(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ee(KC(t))}function JC(n,e){return Lg(n.databaseId,e)}function wD(n){const e=zC(n);return e.length===4?at.emptyPath():KC(e)}function Hm(n){return new at(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function KC(n){return We(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function XT(n,e,t){return{name:Bm(n,e),fields:t.value.mapValue.fields}}function RD(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ae(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=(function(p,_){return p.useProto3Json?(We(_===void 0||typeof _=="string",58123),en.fromBase64String(_||"")):(We(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),en.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&(function(p){const _=p.code===void 0?re.UNKNOWN:qC(p.code);return new he(_,p.message||"")})(u);t=new HC(i,s,a,f||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=pm(n,i.document.name),a=Yi(i.document.updateTime),u=i.document.createTime?Yi(i.document.createTime):we.min(),f=new Sn({mapValue:{fields:i.document.fields}}),h=on.newFoundDocument(s,a,u,f),p=i.targetIds||[],_=i.removedTargetIds||[];t=new $f(p,_,h.key,h)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=pm(n,i.document),a=i.readTime?Yi(i.readTime):we.min(),u=on.newNoDocument(s,a),f=i.removedTargetIds||[];t=new $f([],f,u.key,u)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=pm(n,i.document),a=i.removedTargetIds||[];t=new $f([],a,s,null)}else{if(!("filter"in e))return Ae(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:a}=i,u=new gD(s,a),f=i.targetId;t=new BC(f,u)}}return t}function bD(n,e){let t;if(e instanceof Ku)t={update:XT(n,e.key,e.value)};else if(e instanceof Pg)t={delete:Bm(n,e.key)};else if(e instanceof xs)t={update:XT(n,e.key,e.data),updateMask:kD(e.fieldMask)};else{if(!(e instanceof hD))return Ae(16599,{dt:e.type});t={verify:Bm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(a,u){const f=u.transform;if(f instanceof Vu)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Uu)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Lu)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof ud)return{fieldPath:u.field.canonicalString(),increment:f.Ae};throw Ae(20930,{transform:u.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(s,a){return a.updateTime!==void 0?{updateTime:ID(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ae(27497)})(n,e.precondition)),t}function ND(n,e){return n&&n.length>0?(We(e!==void 0,14353),n.map((t=>(function(s,a){let u=s.updateTime?Yi(s.updateTime):Yi(a);return u.isEqual(we.min())&&(u=Yi(a)),new cD(u,s.transformResults||[])})(t,e)))):[]}function xD(n,e){return{documents:[JC(n,e.path)]}}function MD(n,e){const t={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=JC(n,s);const a=(function(p){if(p.length!==0)return $C(_i.create(p,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const u=(function(p){if(p.length!==0)return p.map((_=>(function(T){return{field:Ea(T.field),direction:VD(T.dir)}})(_)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const f=Fm(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:s}}function DD(n){let e=wD(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let s=null;if(i>0){We(i===1,65062);const _=t.from[0];_.allDescendants?s=_.collectionId:e=e.child(_.collectionId)}let a=[];t.where&&(a=(function(E){const T=YC(E);return T instanceof _i&&AC(T)?T.getFilters():[T]})(t.where));let u=[];t.orderBy&&(u=(function(E){return E.map((T=>(function(x){return new Pu(Ta(x.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(x.direction))})(T)))})(t.orderBy));let f=null;t.limit&&(f=(function(E){let T;return T=typeof E=="object"?E.value:E,Dd(T)?null:T})(t.limit));let h=null;t.startAt&&(h=(function(E){const T=!!E.before,I=E.values||[];return new ld(I,T)})(t.startAt));let p=null;return t.endAt&&(p=(function(E){const T=!E.before,I=E.values||[];return new ld(I,T)})(t.endAt)),$1(e,s,u,a,f,"F",h,p)}function PD(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function YC(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Ta(t.unaryFilter.field);return Pt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Ta(t.unaryFilter.field);return Pt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Ta(t.unaryFilter.field);return Pt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Ta(t.unaryFilter.field);return Pt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ae(61313);default:return Ae(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Pt.create(Ta(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ae(58110);default:return Ae(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return _i.create(t.compositeFilter.filters.map((i=>YC(i))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ae(1026)}})(t.compositeFilter.op))})(n):Ae(30097,{filter:n})}function VD(n){return TD[n]}function UD(n){return SD[n]}function LD(n){return AD[n]}function Ea(n){return{fieldPath:n.canonicalString()}}function Ta(n){return jt.fromServerFormat(n.fieldPath)}function $C(n){return n instanceof Pt?(function(t){if(t.op==="=="){if(OT(t.value))return{unaryFilter:{field:Ea(t.field),op:"IS_NAN"}};if(kT(t.value))return{unaryFilter:{field:Ea(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(OT(t.value))return{unaryFilter:{field:Ea(t.field),op:"IS_NOT_NAN"}};if(kT(t.value))return{unaryFilter:{field:Ea(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ea(t.field),op:UD(t.op),value:t.value}}})(n):n instanceof _i?(function(t){const i=t.getFilters().map((s=>$C(s)));return i.length===1?i[0]:{compositeFilter:{op:LD(t.op),filters:i}}})(n):Ae(54877,{filter:n})}function kD(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function QC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function WC(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e,t,i,s,a=we.min(),u=we.min(),f=en.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=h}withSequenceNumber(e){return new ps(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ps(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ps(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ps(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e){this.yt=e}}function FD(n){const e=DD({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Om(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(){this.Sn=new BD}addToCollectionParentIndex(e,t){return this.Sn.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(As.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(As.min())}updateCollectionGroup(e,t,i){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class BD{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t]||new Ft(at.comparator),a=!s.has(i);return this.index[t]=s.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t];return s&&s.has(i)}getEntries(e){return(this.index[e]||new Ft(at.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},XC=41943040;class Tn{static withCacheSize(e){return new Tn(e,Tn.DEFAULT_COLLECTION_PERCENTILE,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tn.DEFAULT_COLLECTION_PERCENTILE=10,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Tn.DEFAULT=new Tn(XC,Tn.DEFAULT_COLLECTION_PERCENTILE,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Tn.DISABLED=new Tn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Fa(0)}static ar(){return new Fa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jT="LruGarbageCollector",HD=1048576;function e0([n,e],[t,i]){const s=qe(n,t);return s===0?qe(e,i):s}class GD{constructor(e){this.Pr=e,this.buffer=new Ft(e0),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();e0(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class zD{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){pe(jT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Wa(t)?pe(jT,"Ignoring IndexedDB error during garbage collection: ",t):await Qa(t)}await this.Ar(3e5)}))}}class JD{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return oe.resolve(Md.ce);const i=new GD(t);return this.Vr.forEachTarget(e,(s=>i.Er(s.sequenceNumber))).next((()=>this.Vr.mr(e,(s=>i.Er(s))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(pe("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(ZT)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ZT):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,s,a,u,f,h,p;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),s=this.params.maximumSequenceNumbersToCollect):s=E,u=Date.now(),this.nthSequenceNumber(e,s)))).next((E=>(i=E,f=Date.now(),this.removeTargets(e,i,t)))).next((E=>(a=E,h=Date.now(),this.removeOrphanedDocuments(e,i)))).next((E=>(p=Date.now(),_a()<=Fe.DEBUG&&pe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${s} in `+(f-u)+`ms
	Removed ${a} targets in `+(h-f)+`ms
	Removed ${E} documents in `+(p-h)+`ms
Total Duration: ${p-_}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:E}))))}}function KD(n,e){return new JD(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(){this.changes=new Co((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,on.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?oe.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e,t,i,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(i=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(i!==null&&Iu(i.mutation,s,Dn.empty(),ct.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Be()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Be()){const s=po();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,i).next((a=>{let u=yu();return a.forEach(((f,h)=>{u=u.insert(f,h.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const i=po();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Be())))}populateOverlays(e,t,i){const s=[];return i.forEach((a=>{t.has(a)||s.push(a)})),this.documentOverlayCache.getOverlays(e,s).next((a=>{a.forEach(((u,f)=>{t.set(u,f)}))}))}computeViews(e,t,i,s){let a=Cr();const u=Cu(),f=(function(){return Cu()})();return t.forEach(((h,p)=>{const _=i.get(p.key);s.has(p.key)&&(_===void 0||_.mutation instanceof xs)?a=a.insert(p.key,p):_!==void 0?(u.set(p.key,_.mutation.getFieldMask()),Iu(_.mutation,p,_.mutation.getFieldMask(),ct.now())):u.set(p.key,Dn.empty())})),this.recalculateAndSaveOverlays(e,a).next((h=>(h.forEach(((p,_)=>u.set(p,_))),t.forEach(((p,_)=>f.set(p,new $D(_,u.get(p)??null)))),f)))}recalculateAndSaveOverlays(e,t){const i=Cu();let s=new mt(((u,f)=>u-f)),a=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const f of u)f.keys().forEach((h=>{const p=t.get(h);if(p===null)return;let _=i.get(h)||Dn.empty();_=f.applyToLocalView(p,_),i.set(h,_);const E=(s.get(f.batchId)||Be()).add(h);s=s.insert(f.batchId,E)}))})).next((()=>{const u=[],f=s.getReverseIterator();for(;f.hasNext();){const h=f.getNext(),p=h.key,_=h.value,E=DC();_.forEach((T=>{if(!a.has(T)){const I=OC(t.get(T),i.get(T));I!==null&&E.set(T,I),a=a.add(T)}})),u.push(this.documentOverlayCache.saveOverlays(e,p,E))}return oe.waitFor(u)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,s){return Q1(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):RC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,s):this.getDocumentsMatchingCollectionQuery(e,t,i,s)}getNextDocuments(e,t,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,s).next((a=>{const u=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,s-a.size):oe.resolve(po());let f=Nu,h=a;return u.next((p=>oe.forEach(p,((_,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),a.get(_)?oe.resolve():this.remoteDocumentCache.getEntry(e,_).next((T=>{h=h.insert(_,T)}))))).next((()=>this.populateOverlays(e,p,a))).next((()=>this.computeViews(e,h,p,Be()))).next((_=>({batchId:f,changes:MC(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next((i=>{let s=yu();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,s){const a=t.collectionGroup;let u=yu();return this.indexManager.getCollectionParents(e,a).next((f=>oe.forEach(f,(h=>{const p=(function(E,T){return new Xa(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,h.child(a));return this.getDocumentsMatchingCollectionQuery(e,p,i,s).next((_=>{_.forEach(((E,T)=>{u=u.insert(E,T)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,i,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((u=>(a=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,s)))).next((u=>{a.forEach(((h,p)=>{const _=p.getKey();u.get(_)===null&&(u=u.insert(_,on.newInvalidDocument(_)))}));let f=yu();return u.forEach(((h,p)=>{const _=a.get(h);_!==void 0&&Iu(_.mutation,p,Dn.empty(),ct.now()),Ud(t,p)&&(f=f.insert(h,p))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return oe.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Yi(s.createTime)}})(t)),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(s){return{name:s.name,query:FD(s.bundledQuery),readTime:Yi(s.readTime)}})(t)),oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(){this.overlays=new mt(Ee.comparator),this.Lr=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const i=po();return oe.forEach(t,(s=>this.getOverlay(e,s).next((a=>{a!==null&&i.set(s,a)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((s,a)=>{this.bt(e,t,a)})),oe.resolve()}removeOverlaysForBatchId(e,t,i){const s=this.Lr.get(i);return s!==void 0&&(s.forEach((a=>this.overlays=this.overlays.remove(a))),this.Lr.delete(i)),oe.resolve()}getOverlaysForCollection(e,t,i){const s=po(),a=t.length+1,u=new Ee(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const h=f.getNext().value,p=h.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===a&&h.largestBatchId>i&&s.set(h.getKey(),h)}return oe.resolve(s)}getOverlaysForCollectionGroup(e,t,i,s){let a=new mt(((p,_)=>p-_));const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>i){let _=a.get(p.largestBatchId);_===null&&(_=po(),a=a.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const f=po(),h=a.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((p,_)=>f.set(p,_))),!(f.size()>=s)););return oe.resolve(f)}bt(e,t,i){const s=this.overlays.get(i.key);if(s!==null){const u=this.Lr.get(s.largestBatchId).delete(i.key);this.Lr.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(i.key,new mD(t,i));let a=this.Lr.get(t);a===void 0&&(a=Be(),this.Lr.set(t,a)),this.Lr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(){this.sessionToken=en.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(){this.kr=new Ft(zt.Kr),this.qr=new Ft(zt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new zt(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new zt(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new Ee(new at([])),i=new zt(t,e),s=new zt(t,e+1),a=[];return this.qr.forEachInRange([i,s],(u=>{this.Wr(u),a.push(u.key)})),a}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Ee(new at([])),i=new zt(t,e),s=new zt(t,e+1);let a=Be();return this.qr.forEachInRange([i,s],(u=>{a=a.add(u.key)})),a}containsKey(e){const t=new zt(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class zt{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Ee.comparator(e.key,t.key)||qe(e.Hr,t.Hr)}static Ur(e,t){return qe(e.Hr,t.Hr)||Ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Ft(zt.Kr)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,s){const a=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new pD(a,t,i,s);this.mutationQueue.push(u);for(const f of s)this.Jr=this.Jr.add(new zt(f.key,a)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return oe.resolve(u)}lookupMutationBatch(e,t){return oe.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,s=this.Xr(i),a=s<0?0:s;return oe.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?wg:this.Yn-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new zt(t,0),s=new zt(t,Number.POSITIVE_INFINITY),a=[];return this.Jr.forEachInRange([i,s],(u=>{const f=this.Zr(u.Hr);a.push(f)})),oe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ft(qe);return t.forEach((s=>{const a=new zt(s,0),u=new zt(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([a,u],(f=>{i=i.add(f.Hr)}))})),oe.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1;let a=i;Ee.isDocumentKey(a)||(a=a.child(""));const u=new zt(new Ee(a),0);let f=new Ft(qe);return this.Jr.forEachWhile((h=>{const p=h.key.path;return!!i.isPrefixOf(p)&&(p.length===s&&(f=f.add(h.Hr)),!0)}),u),oe.resolve(this.Yr(f))}Yr(e){const t=[];return e.forEach((i=>{const s=this.Zr(i);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){We(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return oe.forEach(t.mutations,(s=>{const a=new zt(s.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new zt(t,0),s=this.Jr.firstAfterOrEqual(i);return oe.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(e){this.ti=e,this.docs=(function(){return new mt(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,s=this.docs.get(i),a=s?s.size:0,u=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:u}),this.size+=u-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return oe.resolve(i?i.document.mutableCopy():on.newInvalidDocument(t))}getEntries(e,t){let i=Cr();return t.forEach((s=>{const a=this.docs.get(s);i=i.insert(s,a?a.document.mutableCopy():on.newInvalidDocument(s))})),oe.resolve(i)}getDocumentsMatchingQuery(e,t,i,s){let a=Cr();const u=t.path,f=new Ee(u.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(f);for(;h.hasNext();){const{key:p,value:{document:_}}=h.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||I1(C1(_),i)<=0||(s.has(_.key)||Ud(t,_))&&(a=a.insert(_.key,_.mutableCopy()))}return oe.resolve(a)}getAllFromCollectionGroup(e,t,i,s){Ae(9500)}ni(e,t){return oe.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new tP(this)}getSize(e){return oe.resolve(this.size)}}class tP extends YD{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,s)=>{s.isValidDocument()?t.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(i)})),oe.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e){this.persistence=e,this.ri=new Co((t=>Ng(t)),xg),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.ii=0,this.si=new kg,this.targetCount=0,this.oi=Fa._r()}forEachTarget(e,t){return this.ri.forEach(((i,s)=>t(s))),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),oe.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Fa(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.lr(t),oe.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,i){let s=0;const a=[];return this.ri.forEach(((u,f)=>{f.sequenceNumber<=t&&i.get(f.targetId)===null&&(this.ri.delete(u),a.push(this.removeMatchingKeysForTargetId(e,f.targetId)),s++)})),oe.waitFor(a).next((()=>s))}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return oe.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),oe.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const s=this.persistence.referenceDelegate,a=[];return s&&t.forEach((u=>{a.push(s.markPotentiallyOrphaned(e,u))})),oe.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return oe.resolve(i)}containsKey(e,t){return oe.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e,t){this._i={},this.overlays={},this.ai=new Md(0),this.ui=!1,this.ui=!0,this.ci=new ZD,this.referenceDelegate=e(this),this.li=new nP(this),this.indexManager=new qD,this.remoteDocumentCache=(function(s){return new eP(s)})((i=>this.referenceDelegate.hi(i))),this.serializer=new OD(t),this.Pi=new WD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new XD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new jD(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){pe("MemoryPersistence","Starting transaction:",e);const s=new iP(this.ai.next());return this.referenceDelegate.Ti(),i(s).next((a=>this.referenceDelegate.Ii(s).next((()=>a)))).toPromise().then((a=>(s.raiseOnCommittedEvent(),a)))}Ei(e,t){return oe.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class iP extends R1{constructor(e){super(),this.currentSequenceNumber=e}}class Og{constructor(e){this.persistence=e,this.Ri=new kg,this.Ai=null}static Vi(e){return new Og(e)}get di(){if(this.Ai)return this.Ai;throw Ae(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),oe.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((s=>this.di.add(s.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((a=>this.di.add(a.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.di,(i=>{const s=Ee.fromPath(i);return this.mi(e,s).next((a=>{a||t.removeEntry(s,we.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return oe.or([()=>oe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class fd{constructor(e,t){this.persistence=e,this.fi=new Co((i=>x1(i.path)),((i,s)=>i.isEqual(s))),this.garbageCollector=KD(this,t)}static Vi(e,t){return new fd(e,t)}Ti(){}Ii(e){return oe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((s=>i+s))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return oe.forEach(this.fi,((i,s)=>this.wr(e,i,s).next((a=>a?oe.resolve():t(s)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ni(e,(u=>this.wr(e,u,t).next((f=>{f||(i++,a.removeEntry(u,we.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),oe.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),oe.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),oe.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),oe.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Jf(e.data.value)),t}wr(e,t,i){return oe.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.fi.get(t);return oe.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e,t,i,s){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=s}static Es(e,t){let i=Be(),s=Be();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new Fg(e,t.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return Yx()?8:b1(ln())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,s){const a={result:null};return this.gs(e,t).next((u=>{a.result=u})).next((()=>{if(!a.result)return this.ps(e,t,s,i).next((u=>{a.result=u}))})).next((()=>{if(a.result)return;const u=new rP;return this.ys(e,t,u).next((f=>{if(a.result=f,this.As)return this.ws(e,t,u,f.size)}))})).next((()=>a.result))}ws(e,t,i,s){return i.documentReadCount<this.Vs?(_a()<=Fe.DEBUG&&pe("QueryEngine","SDK will not create cache indexes for query:",va(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),oe.resolve()):(_a()<=Fe.DEBUG&&pe("QueryEngine","Query:",va(t),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.ds*s?(_a()<=Fe.DEBUG&&pe("QueryEngine","The SDK decides to create cache indexes for query:",va(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ki(t))):oe.resolve())}gs(e,t){if(HT(t))return oe.resolve(null);let i=Ki(t);return this.indexManager.getIndexType(e,i).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Om(t,null,"F"),i=Ki(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const u=Be(...a);return this.fs.getDocuments(e,u).next((f=>this.indexManager.getMinOffset(e,i).next((h=>{const p=this.bs(t,f);return this.Ss(t,p,u,h.readTime)?this.gs(e,Om(t,null,"F")):this.Ds(e,p,t,h)}))))})))))}ps(e,t,i,s){return HT(t)||s.isEqual(we.min())?oe.resolve(null):this.fs.getDocuments(e,i).next((a=>{const u=this.bs(t,a);return this.Ss(t,u,i,s)?oe.resolve(null):(_a()<=Fe.DEBUG&&pe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),va(t)),this.Ds(e,u,t,A1(s,Nu)).next((f=>f)))}))}bs(e,t){let i=new Ft(NC(e));return t.forEach(((s,a)=>{Ud(e,a)&&(i=i.add(a))})),i}Ss(e,t,i,s){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}ys(e,t,i){return _a()<=Fe.DEBUG&&pe("QueryEngine","Using full collection scan to execute query:",va(t)),this.fs.getDocumentsMatchingQuery(e,t,As.min(),i)}Ds(e,t,i,s){return this.fs.getDocumentsMatchingQuery(e,i,s).next((a=>(t.forEach((u=>{a=a.insert(u.key,u)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qg="LocalStore",oP=3e8;class aP{constructor(e,t,i,s){this.persistence=e,this.Cs=t,this.serializer=s,this.vs=new mt(qe),this.Fs=new Co((a=>Ng(a)),xg),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new QD(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function lP(n,e,t,i){return new aP(n,e,t,i)}async function jC(n,e){const t=be(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let s;return t.mutationQueue.getAllMutationBatches(i).next((a=>(s=a,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((a=>{const u=[],f=[];let h=Be();for(const p of s){u.push(p.batchId);for(const _ of p.mutations)h=h.add(_.key)}for(const p of a){f.push(p.batchId);for(const _ of p.mutations)h=h.add(_.key)}return t.localDocuments.getDocuments(i,h).next((p=>({Ns:p,removedBatchIds:u,addedBatchIds:f})))}))}))}function uP(n,e){const t=be(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const s=e.batch.keys(),a=t.xs.newChangeBuffer({trackRemovals:!0});return(function(f,h,p,_){const E=p.batch,T=E.keys();let I=oe.resolve();return T.forEach((x=>{I=I.next((()=>_.getEntry(h,x))).next((U=>{const P=p.docVersions.get(x);We(P!==null,48541),U.version.compareTo(P)<0&&(E.applyToRemoteDocument(U,p),U.isValidDocument()&&(U.setReadTime(p.commitVersion),_.addEntry(U)))}))})),I.next((()=>f.mutationQueue.removeMutationBatch(h,E)))})(t,i,e,a).next((()=>a.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(f){let h=Be();for(let p=0;p<f.mutationResults.length;++p)f.mutationResults[p].transformResults.length>0&&(h=h.add(f.batch.mutations[p].key));return h})(e)))).next((()=>t.localDocuments.getDocuments(i,s)))}))}function eI(n){const e=be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function cP(n,e){const t=be(n),i=e.snapshotVersion;let s=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const u=t.xs.newChangeBuffer({trackRemovals:!0});s=t.vs;const f=[];e.targetChanges.forEach(((_,E)=>{const T=s.get(E);if(!T)return;f.push(t.li.removeMatchingKeys(a,_.removedDocuments,E).next((()=>t.li.addMatchingKeys(a,_.addedDocuments,E))));let I=T.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(E)!==null?I=I.withResumeToken(en.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):_.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(_.resumeToken,i)),s=s.insert(E,I),(function(U,P,G){return U.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=oP?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0})(T,I,_)&&f.push(t.li.updateTargetData(a,I))}));let h=Cr(),p=Be();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(a,_))})),f.push(fP(a,u,e.documentUpdates).next((_=>{h=_.Bs,p=_.Ls}))),!i.isEqual(we.min())){const _=t.li.getLastRemoteSnapshotVersion(a).next((E=>t.li.setTargetsMetadata(a,a.currentSequenceNumber,i)));f.push(_)}return oe.waitFor(f).next((()=>u.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,h,p))).next((()=>h))})).then((a=>(t.vs=s,a)))}function fP(n,e,t){let i=Be(),s=Be();return t.forEach((a=>i=i.add(a))),e.getEntries(n,i).next((a=>{let u=Cr();return t.forEach(((f,h)=>{const p=a.get(f);h.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(f)),h.isNoDocument()&&h.version.isEqual(we.min())?(e.removeEntry(f,h.readTime),u=u.insert(f,h)):!p.isValidDocument()||h.version.compareTo(p.version)>0||h.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(h),u=u.insert(f,h)):pe(qg,"Ignoring outdated watch update for ",f,". Current version:",p.version," Watch version:",h.version)})),{Bs:u,Ls:s}}))}function dP(n,e){const t=be(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=wg),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function hP(n,e){const t=be(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let s;return t.li.getTargetData(i,e).next((a=>a?(s=a,oe.resolve(s)):t.li.allocateTargetId(i).next((u=>(s=new ps(e,u,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,s).next((()=>s)))))))})).then((i=>{const s=t.vs.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function Gm(n,e,t){const i=be(n),s=i.vs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,(u=>i.persistence.referenceDelegate.removeTarget(u,s)))}catch(u){if(!Wa(u))throw u;pe(qg,`Failed to update sequence numbers for target ${e}: ${u}`)}i.vs=i.vs.remove(e),i.Fs.delete(s.target)}function t0(n,e,t){const i=be(n);let s=we.min(),a=Be();return i.persistence.runTransaction("Execute query","readwrite",(u=>(function(h,p,_){const E=be(h),T=E.Fs.get(_);return T!==void 0?oe.resolve(E.vs.get(T)):E.li.getTargetData(p,_)})(i,u,Ki(e)).next((f=>{if(f)return s=f.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(u,f.targetId).next((h=>{a=h}))})).next((()=>i.Cs.getDocumentsMatchingQuery(u,e,t?s:we.min(),t?a:Be()))).next((f=>(pP(i,Z1(e),f),{documents:f,ks:a})))))}function pP(n,e,t){let i=n.Ms.get(e)||we.min();t.forEach(((s,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),n.Ms.set(e,i)}class n0{constructor(){this.activeTargetIds=rD()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class mP{constructor(){this.vo=new n0,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new n0,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0="ConnectivityMonitor";class r0{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){pe(i0,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){pe(i0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uf=null;function zm(){return Uf===null?Uf=(function(){return 268435456+Math.round(2147483648*Math.random())})():Uf++,"0x"+Uf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm="RestConnection",yP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class _P{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${s}`,this.$o=this.databaseId.database===od?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Wo(e,t,i,s,a){const u=zm(),f=this.Qo(e,t.toUriEncodedString());pe(mm,`Sending RPC '${e}' ${u}:`,f,i);const h={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(h,s,a);const{host:p}=new URL(f),_=Ka(p);return this.zo(e,f,h,i,_).then((E=>(pe(mm,`Received RPC '${e}' ${u}: `,E),E)),(E=>{throw Ua(mm,`RPC '${e}' ${u} failed with error: `,E,"url: ",f,"request:",i),E}))}jo(e,t,i,s,a,u){return this.Wo(e,t,i,s,a)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+$a})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,a)=>e[a]=s)),i&&i.headers.forEach(((s,a)=>e[a]=s))}Qo(e,t){const i=yP[e];let s=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn="WebChannelConnection",fu=(n,e,t)=>{n.listen(e,(i=>{try{t(i)}catch(s){setTimeout((()=>{throw s}),0)}}))};class wa extends _P{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!wa.c_){const e=sC();fu(e,rC.STAT_EVENT,(t=>{t.stat===Mm.PROXY?pe(nn,"STAT_EVENT: detected buffering proxy"):t.stat===Mm.NOPROXY&&pe(nn,"STAT_EVENT: detected no buffering proxy")})),wa.c_=!0}}zo(e,t,i,s,a){const u=zm();return new Promise(((f,h)=>{const p=new nC;p.setWithCredentials(!0),p.listenOnce(iC.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case zf.NO_ERROR:const E=p.getResponseJson();pe(nn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(E)),f(E);break;case zf.TIMEOUT:pe(nn,`RPC '${e}' ${u} timed out`),h(new he(re.DEADLINE_EXCEEDED,"Request time out"));break;case zf.HTTP_ERROR:const T=p.getStatus();if(pe(nn,`RPC '${e}' ${u} failed with status:`,T,"response text:",p.getResponseText()),T>0){let I=p.getResponseJson();Array.isArray(I)&&(I=I[0]);const x=I==null?void 0:I.error;if(x&&x.status&&x.message){const U=(function(G){const Q=G.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(Q)>=0?Q:re.UNKNOWN})(x.status);h(new he(U,x.message))}else h(new he(re.UNKNOWN,"Server responded with status "+p.getStatus()))}else h(new he(re.UNAVAILABLE,"Connection failed."));break;default:Ae(9055,{l_:e,streamId:u,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{pe(nn,`RPC '${e}' ${u} completed.`)}}));const _=JSON.stringify(s);pe(nn,`RPC '${e}' ${u} sending request:`,s),p.send(t,"POST",_,i,15)}))}T_(e,t,i){const s=zm(),a=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=this.createWebChannelTransport(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(f.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Go(f.initMessageHeaders,t,i),f.encodeInitMessageHeaders=!0;const p=a.join("");pe(nn,`Creating RPC '${e}' stream ${s}: ${p}`,f);const _=u.createWebChannel(p,f);this.I_(_);let E=!1,T=!1;const I=new vP({Ho:x=>{T?pe(nn,`Not sending because RPC '${e}' stream ${s} is closed:`,x):(E||(pe(nn,`Opening RPC '${e}' stream ${s} transport.`),_.open(),E=!0),pe(nn,`RPC '${e}' stream ${s} sending:`,x),_.send(x))},Jo:()=>_.close()});return fu(_,gu.EventType.OPEN,(()=>{T||(pe(nn,`RPC '${e}' stream ${s} transport opened.`),I.i_())})),fu(_,gu.EventType.CLOSE,(()=>{T||(T=!0,pe(nn,`RPC '${e}' stream ${s} transport closed`),I.o_(),this.E_(_))})),fu(_,gu.EventType.ERROR,(x=>{T||(T=!0,Ua(nn,`RPC '${e}' stream ${s} transport errored. Name:`,x.name,"Message:",x.message),I.o_(new he(re.UNAVAILABLE,"The operation could not be completed")))})),fu(_,gu.EventType.MESSAGE,(x=>{var U;if(!T){const P=x.data[0];We(!!P,16349);const G=P,Q=(G==null?void 0:G.error)||((U=G[0])==null?void 0:U.error);if(Q){pe(nn,`RPC '${e}' stream ${s} received error:`,Q);const z=Q.status;let ae=(function(D){const M=Dt[D];if(M!==void 0)return qC(M)})(z),Z=Q.message;ae===void 0&&(ae=re.INTERNAL,Z="Unknown error status: "+z+" with message "+Q.message),T=!0,I.o_(new he(ae,Z)),_.close()}else pe(nn,`RPC '${e}' stream ${s} received:`,P),I.__(P)}})),wa.u_(),setTimeout((()=>{I.s_()}),0),I}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return oC()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EP(n){return new wa(n)}function gm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fd(n){return new CD(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wa.c_=!1;class tI{constructor(e,t,i=1e3,s=1.5,a=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=s,this.V_=a,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-i);s>0&&pe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0="PersistentStream";class nI{constructor(e,t,i,s,a,u,f,h){this.Ci=e,this.b_=i,this.S_=s,this.connection=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new tI(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===re.RESOURCE_EXHAUSTED?(Ar(t.toString()),Ar("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,s])=>{this.D_===t&&this.G_(i,s)}),(i=>{e((()=>{const s=new he(re.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((s=>{i((()=>this.z_(s)))})),this.stream.onMessage((s=>{i((()=>++this.F_==1?this.H_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return pe(s0,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(pe(s0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class TP extends nI{constructor(e,t,i,s,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,s,u),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=RD(this.serializer,e),i=(function(a){if(!("targetChange"in a))return we.min();const u=a.targetChange;return u.targetIds&&u.targetIds.length?we.min():u.readTime?Yi(u.readTime):we.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=Hm(this.serializer),t.addTarget=(function(a,u){let f;const h=u.target;if(f=Lm(h)?{documents:xD(a,h)}:{query:MD(a,h).ft},f.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){f.resumeToken=GC(a,u.resumeToken);const p=Fm(a,u.expectedCount);p!==null&&(f.expectedCount=p)}else if(u.snapshotVersion.compareTo(we.min())>0){f.readTime=cd(a,u.snapshotVersion.toTimestamp());const p=Fm(a,u.expectedCount);p!==null&&(f.expectedCount=p)}return f})(this.serializer,e);const i=PD(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=Hm(this.serializer),t.removeTarget=e,this.K_(t)}}class SP extends nI{constructor(e,t,i,s,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,s,u),this.serializer=a}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return We(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){We(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=ND(e.writeResults,e.commitTime),i=Yi(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=Hm(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>bD(this.serializer,i)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{}class CP extends AP{constructor(e,t,i,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new he(re.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Wo(e,qm(t,i),s,a,u))).catch((a=>{throw a.name==="FirebaseError"?(a.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new he(re.UNKNOWN,a.toString())}))}jo(e,t,i,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.jo(e,qm(t,i),s,u,f,a))).catch((u=>{throw u.name==="FirebaseError"?(u.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new he(re.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function IP(n,e,t,i){return new CP(n,e,t,i)}class wP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ar(t),this.aa=!1):pe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo="RemoteStore";class RP{constructor(e,t,i,s,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=a,this.Aa.Mo((u=>{i.enqueueAndForget((async()=>{Io(this)&&(pe(Eo,"Restarting streams for network reachability change."),await(async function(h){const p=be(h);p.Ea.add(4),await $u(p),p.Va.set("Unknown"),p.Ea.delete(4),await qd(p)})(this))}))})),this.Va=new wP(i,s)}}async function qd(n){if(Io(n))for(const e of n.Ra)await e(!0)}async function $u(n){for(const e of n.Ra)await e(!1)}function iI(n,e){const t=be(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),zg(t)?Gg(t):Za(t).O_()&&Hg(t,e))}function Bg(n,e){const t=be(n),i=Za(t);t.Ia.delete(e),i.O_()&&rI(t,e),t.Ia.size===0&&(i.O_()?i.L_():Io(t)&&t.Va.set("Unknown"))}function Hg(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Za(n).Z_(e)}function rI(n,e){n.da.$e(e),Za(n).X_(e)}function Gg(n){n.da=new ED({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Za(n).start(),n.Va.ua()}function zg(n){return Io(n)&&!Za(n).x_()&&n.Ia.size>0}function Io(n){return be(n).Ea.size===0}function sI(n){n.da=void 0}async function bP(n){n.Va.set("Online")}async function NP(n){n.Ia.forEach(((e,t)=>{Hg(n,e)}))}async function xP(n,e){sI(n),zg(n)?(n.Va.ha(e),Gg(n)):n.Va.set("Unknown")}async function MP(n,e,t){if(n.Va.set("Online"),e instanceof HC&&e.state===2&&e.cause)try{await(async function(s,a){const u=a.cause;for(const f of a.targetIds)s.Ia.has(f)&&(await s.remoteSyncer.rejectListen(f,u),s.Ia.delete(f),s.da.removeTarget(f))})(n,e)}catch(i){pe(Eo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await dd(n,i)}else if(e instanceof $f?n.da.Xe(e):e instanceof BC?n.da.st(e):n.da.tt(e),!t.isEqual(we.min()))try{const i=await eI(n.localStore);t.compareTo(i)>=0&&await(function(a,u){const f=a.da.Tt(u);return f.targetChanges.forEach(((h,p)=>{if(h.resumeToken.approximateByteSize()>0){const _=a.Ia.get(p);_&&a.Ia.set(p,_.withResumeToken(h.resumeToken,u))}})),f.targetMismatches.forEach(((h,p)=>{const _=a.Ia.get(h);if(!_)return;a.Ia.set(h,_.withResumeToken(en.EMPTY_BYTE_STRING,_.snapshotVersion)),rI(a,h);const E=new ps(_.target,h,p,_.sequenceNumber);Hg(a,E)})),a.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(i){pe(Eo,"Failed to raise snapshot:",i),await dd(n,i)}}async function dd(n,e,t){if(!Wa(e))throw e;n.Ea.add(1),await $u(n),n.Va.set("Offline"),t||(t=()=>eI(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{pe(Eo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await qd(n)}))}function oI(n,e){return e().catch((t=>dd(n,t,e)))}async function Bd(n){const e=be(n),t=Rs(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:wg;for(;DP(e);)try{const s=await dP(e.localStore,i);if(s===null){e.Ta.length===0&&t.L_();break}i=s.batchId,PP(e,s)}catch(s){await dd(e,s)}aI(e)&&lI(e)}function DP(n){return Io(n)&&n.Ta.length<10}function PP(n,e){n.Ta.push(e);const t=Rs(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function aI(n){return Io(n)&&!Rs(n).x_()&&n.Ta.length>0}function lI(n){Rs(n).start()}async function VP(n){Rs(n).ra()}async function UP(n){const e=Rs(n);for(const t of n.Ta)e.ea(t.mutations)}async function LP(n,e,t){const i=n.Ta.shift(),s=Vg.from(i,e,t);await oI(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await Bd(n)}async function kP(n,e){e&&Rs(n).Y_&&await(async function(i,s){if((function(u){return yD(u)&&u!==re.ABORTED})(s.code)){const a=i.Ta.shift();Rs(i).B_(),await oI(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,s))),await Bd(i)}})(n,e),aI(n)&&lI(n)}async function o0(n,e){const t=be(n);t.asyncQueue.verifyOperationInProgress(),pe(Eo,"RemoteStore received new credentials");const i=Io(t);t.Ea.add(3),await $u(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await qd(t)}async function OP(n,e){const t=be(n);e?(t.Ea.delete(2),await qd(t)):e||(t.Ea.add(2),await $u(t),t.Va.set("Unknown"))}function Za(n){return n.ma||(n.ma=(function(t,i,s){const a=be(t);return a.sa(),new TP(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Zo:bP.bind(null,n),Yo:NP.bind(null,n),t_:xP.bind(null,n),J_:MP.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),zg(n)?Gg(n):n.Va.set("Unknown")):(await n.ma.stop(),sI(n))}))),n.ma}function Rs(n){return n.fa||(n.fa=(function(t,i,s){const a=be(t);return a.sa(),new SP(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:VP.bind(null,n),t_:kP.bind(null,n),ta:UP.bind(null,n),na:LP.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await Bd(n)):(await n.fa.stop(),n.Ta.length>0&&(pe(Eo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e,t,i,s,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=s,this.removalCallback=a,this.deferred=new Es,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,s,a){const u=Date.now()+i,f=new Jg(e,t,u,s,a);return f.start(i),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kg(n,e){if(Ar("AsyncQueue",`${e}: ${n}`),Wa(n))return new he(re.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{static emptySet(e){return new Ra(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ee.comparator(t.key,i.key):(t,i)=>Ee.comparator(t.key,i.key),this.keyedMap=yu(),this.sortedSet=new mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ra)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,a=i.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Ra;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(){this.ga=new mt(Ee.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ae(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class qa{constructor(e,t,i,s,a,u,f,h,p){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=h,this.hasCachedResults=p}static fromInitialDocuments(e,t,i,s,a){const u=[];return t.forEach((f=>{u.push({type:0,doc:f})})),new qa(e,t,Ra.emptySet(t),u,i,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==i[s].type||!t[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class qP{constructor(){this.queries=l0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const s=be(t),a=s.queries;s.queries=l0(),a.forEach(((u,f)=>{for(const h of f.ba)h.onError(i)}))})(this,new he(re.ABORTED,"Firestore shutting down"))}}function l0(){return new Co((n=>bC(n)),Vd)}async function uI(n,e){const t=be(n);let i=3;const s=e.query;let a=t.queries.get(s);a?!a.Sa()&&e.Da()&&(i=2):(a=new FP,i=e.Da()?0:1);try{switch(i){case 0:a.wa=await t.onListen(s,!0);break;case 1:a.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(u){const f=Kg(u,`Initialization of query '${va(e.query)}' failed`);return void e.onError(f)}t.queries.set(s,a),a.ba.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&Yg(t)}async function cI(n,e){const t=be(n),i=e.query;let s=3;const a=t.queries.get(i);if(a){const u=a.ba.indexOf(e);u>=0&&(a.ba.splice(u,1),a.ba.length===0?s=e.Da()?0:1:!a.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function BP(n,e){const t=be(n);let i=!1;for(const s of e){const a=s.query,u=t.queries.get(a);if(u){for(const f of u.ba)f.Fa(s)&&(i=!0);u.wa=s}}i&&Yg(t)}function HP(n,e,t){const i=be(n),s=i.queries.get(e);if(s)for(const a of s.ba)a.onError(t);i.queries.delete(e)}function Yg(n){n.Ca.forEach((e=>{e.next()}))}var Jm,u0;(u0=Jm||(Jm={})).Ma="default",u0.Cache="cache";class fI{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new qa(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=qa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Jm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e){this.key=e}}class hI{constructor(e){this.key=e}}class GP{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Be(),this.mutatedKeys=Be(),this.eu=NC(e),this.tu=new Ra(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new a0,s=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,u=s,f=!1;const h=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((_,E)=>{const T=s.get(_),I=Ud(this.query,E)?E:null,x=!!T&&this.mutatedKeys.has(T.key),U=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let P=!1;T&&I?T.data.isEqual(I.data)?x!==U&&(i.track({type:3,doc:I}),P=!0):this.su(T,I)||(i.track({type:2,doc:I}),P=!0,(h&&this.eu(I,h)>0||p&&this.eu(I,p)<0)&&(f=!0)):!T&&I?(i.track({type:0,doc:I}),P=!0):T&&!I&&(i.track({type:1,doc:T}),P=!0,(h||p)&&(f=!0)),P&&(I?(u=u.add(I),a=U?a.add(_):a.delete(_)):(u=u.delete(_),a=a.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),a=a.delete(_.key),i.track({type:1,doc:_})}return{tu:u,iu:i,Ss:f,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,s){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((_,E)=>(function(I,x){const U=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae(20277,{Vt:P})}};return U(I)-U(x)})(_.type,E.type)||this.eu(_.doc,E.doc))),this.ou(i),s=s??!1;const f=t&&!s?this._u():[],h=this.Ya.size===0&&this.current&&!s?1:0,p=h!==this.Xa;return this.Xa=h,u.length!==0||p?{snapshot:new qa(this.query,e.tu,a,u,e.mutatedKeys,h===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new a0,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Be(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new hI(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new dI(i))})),t}cu(e){this.Za=e.ks,this.Ya=Be();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return qa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const $g="SyncEngine";class zP{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class JP{constructor(e){this.key=e,this.hu=!1}}class KP{constructor(e,t,i,s,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Co((f=>bC(f)),Vd),this.Iu=new Map,this.Eu=new Set,this.Ru=new mt(Ee.comparator),this.Au=new Map,this.Vu=new kg,this.du={},this.mu=new Map,this.fu=Fa.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function YP(n,e,t=!0){const i=vI(n);let s;const a=i.Tu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await pI(i,e,t,!0),s}async function $P(n,e){const t=vI(n);await pI(t,e,!0,!1)}async function pI(n,e,t,i){const s=await hP(n.localStore,Ki(e)),a=s.targetId,u=n.sharedClientState.addLocalQueryTarget(a,t);let f;return i&&(f=await QP(n,e,a,u==="current",s.resumeToken)),n.isPrimaryClient&&t&&iI(n.remoteStore,s),f}async function QP(n,e,t,i,s){n.pu=(E,T,I)=>(async function(U,P,G,Q){let z=P.view.ru(G);z.Ss&&(z=await t0(U.localStore,P.query,!1).then((({documents:D})=>P.view.ru(D,z))));const ae=Q&&Q.targetChanges.get(P.targetId),Z=Q&&Q.targetMismatches.get(P.targetId)!=null,ue=P.view.applyChanges(z,U.isPrimaryClient,ae,Z);return f0(U,P.targetId,ue.au),ue.snapshot})(n,E,T,I);const a=await t0(n.localStore,e,!0),u=new GP(e,a.ks),f=u.ru(a.documents),h=Yu.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",s),p=u.applyChanges(f,n.isPrimaryClient,h);f0(n,t,p.au);const _=new zP(e,t,u);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function WP(n,e,t){const i=be(n),s=i.Tu.get(e),a=i.Iu.get(s.targetId);if(a.length>1)return i.Iu.set(s.targetId,a.filter((u=>!Vd(u,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Gm(i.localStore,s.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(s.targetId),t&&Bg(i.remoteStore,s.targetId),Km(i,s.targetId)})).catch(Qa)):(Km(i,s.targetId),await Gm(i.localStore,s.targetId,!0))}async function XP(n,e){const t=be(n),i=t.Tu.get(e),s=t.Iu.get(i.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Bg(t.remoteStore,i.targetId))}async function ZP(n,e,t){const i=sV(n);try{const s=await(function(u,f){const h=be(u),p=ct.now(),_=f.reduce(((I,x)=>I.add(x.key)),Be());let E,T;return h.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let x=Cr(),U=Be();return h.xs.getEntries(I,_).next((P=>{x=P,x.forEach(((G,Q)=>{Q.isValidDocument()||(U=U.add(G))}))})).next((()=>h.localDocuments.getOverlayedDocuments(I,x))).next((P=>{E=P;const G=[];for(const Q of f){const z=dD(Q,E.get(Q.key).overlayedDocument);z!=null&&G.push(new xs(Q.key,z,EC(z.value.mapValue),hi.exists(!0)))}return h.mutationQueue.addMutationBatch(I,p,G,f)})).next((P=>{T=P;const G=P.applyToLocalDocumentSet(E,U);return h.documentOverlayCache.saveOverlays(I,P.batchId,G)}))})).then((()=>({batchId:T.batchId,changes:MC(E)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),(function(u,f,h){let p=u.du[u.currentUser.toKey()];p||(p=new mt(qe)),p=p.insert(f,h),u.du[u.currentUser.toKey()]=p})(i,s.batchId,t),await Qu(i,s.changes),await Bd(i.remoteStore)}catch(s){const a=Kg(s,"Failed to persist write");t.reject(a)}}async function mI(n,e){const t=be(n);try{const i=await cP(t.localStore,e);e.targetChanges.forEach(((s,a)=>{const u=t.Au.get(a);u&&(We(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?u.hu=!0:s.modifiedDocuments.size>0?We(u.hu,14607):s.removedDocuments.size>0&&(We(u.hu,42227),u.hu=!1))})),await Qu(t,i,e)}catch(i){await Qa(i)}}function c0(n,e,t){const i=be(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const s=[];i.Tu.forEach(((a,u)=>{const f=u.view.va(e);f.snapshot&&s.push(f.snapshot)})),(function(u,f){const h=be(u);h.onlineState=f;let p=!1;h.queries.forEach(((_,E)=>{for(const T of E.ba)T.va(f)&&(p=!0)})),p&&Yg(h)})(i.eventManager,e),s.length&&i.Pu.J_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function jP(n,e,t){const i=be(n);i.sharedClientState.updateQueryState(e,"rejected",t);const s=i.Au.get(e),a=s&&s.key;if(a){let u=new mt(Ee.comparator);u=u.insert(a,on.newNoDocument(a,we.min()));const f=Be().add(a),h=new Od(we.min(),new Map,new mt(qe),u,f);await mI(i,h),i.Ru=i.Ru.remove(a),i.Au.delete(e),Qg(i)}else await Gm(i.localStore,e,!1).then((()=>Km(i,e,t))).catch(Qa)}async function eV(n,e){const t=be(n),i=e.batch.batchId;try{const s=await uP(t.localStore,e);yI(t,i,null),gI(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Qu(t,s)}catch(s){await Qa(s)}}async function tV(n,e,t){const i=be(n);try{const s=await(function(u,f){const h=be(u);return h.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let _;return h.mutationQueue.lookupMutationBatch(p,f).next((E=>(We(E!==null,37113),_=E.keys(),h.mutationQueue.removeMutationBatch(p,E)))).next((()=>h.mutationQueue.performConsistencyCheck(p))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(p,_,f))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_))).next((()=>h.localDocuments.getDocuments(p,_)))}))})(i.localStore,e);yI(i,e,t),gI(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Qu(i,s)}catch(s){await Qa(s)}}function gI(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function yI(n,e,t){const i=be(n);let s=i.du[i.currentUser.toKey()];if(s){const a=s.get(e);a&&(t?a.reject(t):a.resolve(),s=s.remove(e)),i.du[i.currentUser.toKey()]=s}}function Km(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((i=>{n.Vu.containsKey(i)||_I(n,i)}))}function _I(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(Bg(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),Qg(n))}function f0(n,e,t){for(const i of t)i instanceof dI?(n.Vu.addReference(i.key,e),nV(n,i)):i instanceof hI?(pe($g,"Document no longer in limbo: "+i.key),n.Vu.removeReference(i.key,e),n.Vu.containsKey(i.key)||_I(n,i.key)):Ae(19791,{wu:i})}function nV(n,e){const t=e.key,i=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(i)||(pe($g,"New document in limbo: "+t),n.Eu.add(i),Qg(n))}function Qg(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ee(at.fromString(e)),i=n.fu.next();n.Au.set(i,new JP(t)),n.Ru=n.Ru.insert(t,i),iI(n.remoteStore,new ps(Ki(Mg(t.path)),i,"TargetPurposeLimboResolution",Md.ce))}}async function Qu(n,e,t){const i=be(n),s=[],a=[],u=[];i.Tu.isEmpty()||(i.Tu.forEach(((f,h)=>{u.push(i.pu(h,e,t).then((p=>{var _;if((p||t)&&i.isPrimaryClient){const E=p?!p.fromCache:(_=t==null?void 0:t.targetChanges.get(h.targetId))==null?void 0:_.current;i.sharedClientState.updateQueryState(h.targetId,E?"current":"not-current")}if(p){s.push(p);const E=Fg.Es(h.targetId,p);a.push(E)}})))})),await Promise.all(u),i.Pu.J_(s),await(async function(h,p){const _=be(h);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>oe.forEach(p,(T=>oe.forEach(T.Ts,(I=>_.persistence.referenceDelegate.addReference(E,T.targetId,I))).next((()=>oe.forEach(T.Is,(I=>_.persistence.referenceDelegate.removeReference(E,T.targetId,I)))))))))}catch(E){if(!Wa(E))throw E;pe(qg,"Failed to update sequence numbers: "+E)}for(const E of p){const T=E.targetId;if(!E.fromCache){const I=_.vs.get(T),x=I.snapshotVersion,U=I.withLastLimboFreeSnapshotVersion(x);_.vs=_.vs.insert(T,U)}}})(i.localStore,a))}async function iV(n,e){const t=be(n);if(!t.currentUser.isEqual(e)){pe($g,"User change. New user:",e.toKey());const i=await jC(t.localStore,e);t.currentUser=e,(function(a,u){a.mu.forEach((f=>{f.forEach((h=>{h.reject(new he(re.CANCELLED,u))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Qu(t,i.Ns)}}function rV(n,e){const t=be(n),i=t.Au.get(e);if(i&&i.hu)return Be().add(i.key);{let s=Be();const a=t.Iu.get(e);if(!a)return s;for(const u of a){const f=t.Tu.get(u);s=s.unionWith(f.view.nu)}return s}}function vI(n){const e=be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=mI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jP.bind(null,e),e.Pu.J_=BP.bind(null,e.eventManager),e.Pu.yu=HP.bind(null,e.eventManager),e}function sV(n){const e=be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=eV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tV.bind(null,e),e}class hd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Fd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return lP(this.persistence,new sP,e.initialUser,this.serializer)}Cu(e){return new ZC(Og.Vi,this.serializer)}Du(e){return new mP}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}hd.provider={build:()=>new hd};class oV extends hd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){We(this.persistence.referenceDelegate instanceof fd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new zD(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Tn.withCacheSize(this.cacheSizeBytes):Tn.DEFAULT;return new ZC((i=>fd.Vi(i,t)),this.serializer)}}class Ym{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>c0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=iV.bind(null,this.syncEngine),await OP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new qP})()}createDatastore(e){const t=Fd(e.databaseInfo.databaseId),i=EP(e.databaseInfo);return IP(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,s,a,u,f){return new RP(i,s,a,u,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>c0(this.syncEngine,t,0)),(function(){return r0.v()?new r0:new gP})())}createSyncEngine(e,t){return(function(s,a,u,f,h,p,_){const E=new KP(s,a,u,f,h,p);return _&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const a=be(s);pe(Eo,"RemoteStore shutting down."),a.Ea.add(5),await $u(a),a.Aa.shutdown(),a.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Ym.provider={build:()=>new Ym};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ar("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs="FirestoreClient";class aV{constructor(e,t,i,s,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=s,this.user=sn.UNAUTHENTICATED,this.clientId=Ig.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async u=>{pe(bs,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(i,(u=>(pe(bs,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Es;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Kg(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function ym(n,e){n.asyncQueue.verifyOperationInProgress(),pe(bs,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async s=>{i.isEqual(s)||(await jC(e.localStore,s),i=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function d0(n,e){n.asyncQueue.verifyOperationInProgress();const t=await lV(n);pe(bs,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>o0(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,s)=>o0(e.remoteStore,s))),n._onlineComponents=e}async function lV(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){pe(bs,"Using user provided OfflineComponentProvider");try{await ym(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===re.FAILED_PRECONDITION||s.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;Ua("Error using user provided cache. Falling back to memory cache: "+t),await ym(n,new hd)}}else pe(bs,"Using default OfflineComponentProvider"),await ym(n,new oV(void 0));return n._offlineComponents}async function TI(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(pe(bs,"Using user provided OnlineComponentProvider"),await d0(n,n._uninitializedComponentsProvider._online)):(pe(bs,"Using default OnlineComponentProvider"),await d0(n,new Ym))),n._onlineComponents}function uV(n){return TI(n).then((e=>e.syncEngine))}async function $m(n){const e=await TI(n),t=e.eventManager;return t.onListen=YP.bind(null,e.syncEngine),t.onUnlisten=WP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=$P.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=XP.bind(null,e.syncEngine),t}function cV(n,e,t,i){const s=new EI(i),a=new fI(e,s,t);return n.asyncQueue.enqueueAndForget((async()=>uI(await $m(n),a))),()=>{s.Nu(),n.asyncQueue.enqueueAndForget((async()=>cI(await $m(n),a)))}}function fV(n,e,t={}){const i=new Es;return n.asyncQueue.enqueueAndForget((async()=>(function(a,u,f,h,p){const _=new EI({next:T=>{_.Nu(),u.enqueueAndForget((()=>cI(a,E))),T.fromCache&&h.source==="server"?p.reject(new he(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(T)},error:T=>p.reject(T)}),E=new fI(f,_,{includeMetadataChanges:!0,Ka:!0});return uI(a,E)})(await $m(n),n.asyncQueue,e,t,i))),i.promise}function dV(n,e){const t=new Es;return n.asyncQueue.enqueueAndForget((async()=>ZP(await uV(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hV="ComponentProvider",h0=new Map;function pV(n,e,t,i,s){return new P1(n,e,t,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,SI(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI="firestore.googleapis.com",p0=!0;class m0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=AI,this.ssl=p0}else this.host=e.host,this.ssl=e.ssl??p0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=XC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<HD)throw new he(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}S1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=SI(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new he(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new he(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new he(re.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,s){return i.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hd{constructor(e,t,i,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new m0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new m0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new d1;switch(i.type){case"firstParty":return new g1(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new he(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=h0.get(t);i&&(pe(hV,"Removing Datastore"),h0.delete(t),i.terminate())})(this),Promise.resolve()}}function mV(n,e,t,i={}){var p;n=Ji(n,Hd);const s=Ka(e),a=n._getSettings(),u={...a,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;s&&(YA(`https://${f}`),$A("Firestore",!0)),a.host!==AI&&a.host!==f&&Ua("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...a,host:f,ssl:s,emulatorOptions:i};if(!yo(h,u)&&(n._setSettings(h),i.mockUserToken)){let _,E;if(typeof i.mockUserToken=="string")_=i.mockUserToken,E=sn.MOCK_USER;else{_=Ox(i.mockUserToken,(p=n._app)==null?void 0:p.options.projectId);const T=i.mockUserToken.sub||i.mockUserToken.user_id;if(!T)throw new he(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new sn(T)}n._authCredentials=new h1(new lC(_,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ms(this.firestore,e,this._query)}}class Ut{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ts(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ut(this.firestore,e,this._key)}toJSON(){return{type:Ut._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Ju(t,Ut._jsonSchema))return new Ut(e,i||null,new Ee(at.fromString(t.referencePath)))}}Ut._jsonSchemaVersion="firestore/documentReference/1.0",Ut._jsonSchema={type:Vt("string",Ut._jsonSchemaVersion),referencePath:Vt("string")};class Ts extends Ms{constructor(e,t,i){super(e,t,Mg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ut(this.firestore,null,new Ee(e))}withConverter(e){return new Ts(this.firestore,e,this._path)}}function ba(n,e,...t){if(n=qt(n),uC("collection","path",e),n instanceof Hd){const i=at.fromString(e,...t);return bT(i),new Ts(n,null,i)}{if(!(n instanceof Ut||n instanceof Ts))throw new he(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(at.fromString(e,...t));return bT(i),new Ts(n.firestore,null,i)}}function Ba(n,e,...t){if(n=qt(n),arguments.length===1&&(e=Ig.newId()),uC("doc","path",e),n instanceof Hd){const i=at.fromString(e,...t);return RT(i),new Ut(n,null,new Ee(i))}{if(!(n instanceof Ut||n instanceof Ts))throw new he(re.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(at.fromString(e,...t));return RT(i),new Ut(n.firestore,n instanceof Ts?n.converter:null,new Ee(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g0="AsyncQueue";class y0{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new tI(this,"async_queue_retry"),this._c=()=>{const i=gm();i&&pe(g0,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=gm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=gm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Es;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Wa(e))throw e;pe(g0,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Ar("INTERNAL UNHANDLED ERROR: ",_0(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=Jg.createAndSchedule(this,e,t,i,(a=>this.hc(a)));return this.tc.push(s),s}uc(){this.nc&&Ae(47125,{Pc:_0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function _0(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class To extends Hd{constructor(e,t,i,s){super(e,t,i,s),this.type="firestore",this._queue=new y0,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new y0(e),this._firestoreClient=void 0,await e}}}function gV(n,e){const t=typeof n=="object"?n:ZA(),i=typeof n=="string"?n:od,s=Ag(t,"firestore").getImmediate({identifier:i});if(!s._initialized){const a=Lx("firestore");a&&mV(s,...a)}return s}function Wg(n){if(n._terminated)throw new he(re.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||yV(n),n._firestoreClient}function yV(n){var i,s,a,u;const e=n._freezeSettings(),t=pV(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,(s=n._app)==null?void 0:s.options.apiKey,e);n._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((u=e.localCache)!=null&&u._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new aV(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(h){const p=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(p),_online:p}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yn(en.fromBase64String(e))}catch(t){throw new he(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Yn(en.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Yn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ju(e,Yn._jsonSchema))return Yn.fromBase64String(e.bytes)}}Yn._jsonSchemaVersion="firestore/bytes/1.0",Yn._jsonSchema={type:Vt("string",Yn._jsonSchemaVersion),bytes:Vt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:$i._jsonSchemaVersion}}static fromJSON(e){if(Ju(e,$i._jsonSchema))return new $i(e.latitude,e.longitude)}}$i._jsonSchemaVersion="firestore/geoPoint/1.0",$i._jsonSchema={type:Vt("string",$i._jsonSchemaVersion),latitude:Vt("number"),longitude:Vt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,s){if(i.length!==s.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==s[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:pi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ju(e,pi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new pi(e.vectorValues);throw new he(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}pi._jsonSchemaVersion="firestore/vectorValue/1.0",pi._jsonSchema={type:Vt("string",pi._jsonSchemaVersion),vectorValues:Vt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _V=/^__.*__$/;class vV{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new xs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ku(e,this.data,t,this.fieldTransforms)}}class CI{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new xs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function II(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae(40011,{dataSource:n})}}class Zg{constructor(e,t,i,s,a,u){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=s,a===void 0&&this.validatePath(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Zg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const t=(s=this.path)==null?void 0:s.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var s;const t=(s=this.path)==null?void 0:s.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return pd(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(II(this.dataSource)&&_V.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class EV{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Fd(e)}createContext(e,t,i,s=!1){return new Zg({dataSource:e,methodName:t,targetDoc:i,path:jt.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function jg(n){const e=n._freezeSettings(),t=Fd(n._databaseId);return new EV(n._databaseId,!!e.ignoreUndefinedProperties,t)}function TV(n,e,t,i,s,a={}){const u=n.createContext(a.merge||a.mergeFields?2:0,e,t,s);ty("Data must be an object, but it was:",u,i);const f=wI(i,u);let h,p;if(a.merge)h=new Dn(u.fieldMask),p=u.fieldTransforms;else if(a.mergeFields){const _=[];for(const E of a.mergeFields){const T=Ha(e,E,t);if(!u.contains(T))throw new he(re.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);NI(_,T)||_.push(T)}h=new Dn(_),p=u.fieldTransforms.filter((E=>h.covers(E.field)))}else h=null,p=u.fieldTransforms;return new vV(new Sn(f),h,p)}class zd extends Gd{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zd}}class ey extends Gd{_toFieldTransform(e){return new lD(e.path,new Vu)}isEqual(e){return e instanceof ey}}function SV(n,e,t,i){const s=n.createContext(1,e,t);ty("Data must be an object, but it was:",s,i);const a=[],u=Sn.empty();Ns(i,((h,p)=>{const _=bI(e,h,t);p=qt(p);const E=s.childContextForFieldPath(_);if(p instanceof zd)a.push(_);else{const T=Wu(p,E);T!=null&&(a.push(_),u.set(_,T))}}));const f=new Dn(a);return new CI(u,f,s.fieldTransforms)}function AV(n,e,t,i,s,a){const u=n.createContext(1,e,t),f=[Ha(e,i,t)],h=[s];if(a.length%2!=0)throw new he(re.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<a.length;T+=2)f.push(Ha(e,a[T])),h.push(a[T+1]);const p=[],_=Sn.empty();for(let T=f.length-1;T>=0;--T)if(!NI(p,f[T])){const I=f[T];let x=h[T];x=qt(x);const U=u.childContextForFieldPath(I);if(x instanceof zd)p.push(I);else{const P=Wu(x,U);P!=null&&(p.push(I),_.set(I,P))}}const E=new Dn(p);return new CI(_,E,u.fieldTransforms)}function CV(n,e,t,i=!1){return Wu(t,n.createContext(i?4:3,e))}function Wu(n,e){if(RI(n=qt(n)))return ty("Unsupported field value:",e,n),wI(n,e);if(n instanceof Gd)return(function(i,s){if(!II(s.dataSource))throw s.createError(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(s);a&&s.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,s){const a=[];let u=0;for(const f of i){let h=Wu(f,s.childContextForArray(u));h==null&&(h={nullValue:"NULL_VALUE"}),a.push(h),u++}return{arrayValue:{values:a}}})(n,e)}return(function(i,s){if((i=qt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return sD(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=ct.fromDate(i);return{timestampValue:cd(s.serializer,a)}}if(i instanceof ct){const a=new ct(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:cd(s.serializer,a)}}if(i instanceof $i)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Yn)return{bytesValue:GC(s.serializer,i._byteString)};if(i instanceof Ut){const a=s.databaseId,u=i.firestore._databaseId;if(!u.isEqual(a))throw s.createError(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Lg(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof pi)return(function(u,f){const h=u instanceof pi?u.toArray():u;return{mapValue:{fields:{[_C]:{stringValue:vC},[ad]:{arrayValue:{values:h.map((_=>{if(typeof _!="number")throw f.createError("VectorValues must only contain numeric values.");return Dg(f.serializer,_)}))}}}}}})(i,s);if(WC(i))return i._toProto(s.serializer);throw s.createError(`Unsupported field value: ${xd(i)}`)})(n,e)}function wI(n,e){const t={};return dC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ns(n,((i,s)=>{const a=Wu(s,e.childContextForField(i));a!=null&&(t[i]=a)})),{mapValue:{fields:t}}}function RI(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ct||n instanceof $i||n instanceof Yn||n instanceof Ut||n instanceof Gd||n instanceof pi||WC(n))}function ty(n,e,t){if(!RI(t)||!cC(t)){const i=xd(t);throw i==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+i)}}function Ha(n,e,t){if((e=qt(e))instanceof Xg)return e._internalPath;if(typeof e=="string")return bI(n,e);throw pd("Field path arguments must be of type string or ",n,!1,void 0,t)}const IV=new RegExp("[~\\*/\\[\\]]");function bI(n,e,t){if(e.search(IV)>=0)throw pd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Xg(...e.split("."))._internalPath}catch{throw pd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function pd(n,e,t,i,s){const a=i&&!i.isEmpty(),u=s!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let h="";return(a||u)&&(h+=" (found",a&&(h+=` in field ${i}`),u&&(h+=` in document ${s}`),h+=")"),new he(re.INVALID_ARGUMENT,f+n+h)}function NI(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wV{convertValue(e,t="none"){switch(ws(e)){case 0:return null;case 1:return e.booleanValue;case 2:return St(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Is(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ns(e,((s,a)=>{i[s]=this.convertValue(a,t)})),i}convertVectorValue(e){var i,s,a;const t=(a=(s=(i=e.fields)==null?void 0:i[ad].arrayValue)==null?void 0:s.values)==null?void 0:a.map((u=>St(u.doubleValue)));return new pi(t)}convertGeoPoint(e){return new $i(St(e.latitude),St(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Pd(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(xu(e));default:return null}}convertTimestamp(e){const t=Cs(e);return new ct(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=at.fromString(e);We(QC(i),9688,{name:e});const s=new Mu(i.get(1),i.get(3)),a=new Ee(i.popFirst(5));return s.isEqual(t)||Ar(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny extends wV{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ut(this.firestore,null,t)}}function RV(){return new ey("serverTimestamp")}const v0="@firebase/firestore",E0="4.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T0(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const s=t;for(const a of i)if(a in s&&typeof s[a]=="function")return!0;return!1})(n,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e,t,i,s,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new bV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Ha("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class bV extends xI{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MI(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new he(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class iy{}class DI extends iy{}function NV(n,e,...t){let i=[];e instanceof iy&&i.push(e),i=i.concat(t),(function(a){const u=a.filter((h=>h instanceof sy)).length,f=a.filter((h=>h instanceof ry)).length;if(u>1||u>0&&f>0)throw new he(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const s of i)n=s._apply(n);return n}class ry extends DI{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new ry(e,t,i)}_apply(e){const t=this._parse(e);return PI(e._query,t),new Ms(e.firestore,e.converter,km(e._query,t))}_parse(e){const t=jg(e.firestore);return(function(a,u,f,h,p,_,E){let T;if(p.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new he(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){A0(E,_);const x=[];for(const U of E)x.push(S0(h,a,U));T={arrayValue:{values:x}}}else T=S0(h,a,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||A0(E,_),T=CV(f,u,E,_==="in"||_==="not-in");return Pt.create(p,_,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class sy extends iy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new sy(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:_i.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,a){let u=s;const f=a.getFlattenedFilters();for(const h of f)PI(u,h),u=km(u,h)})(e._query,t),new Ms(e.firestore,e.converter,km(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class oy extends DI{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new oy(e,t)}_apply(e){const t=(function(s,a,u){if(s.startAt!==null)throw new he(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new he(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Pu(a,u)})(e._query,this._field,this._direction);return new Ms(e.firestore,e.converter,X1(e._query,t))}}function xV(n,e="asc"){const t=e,i=Ha("orderBy",n);return oy._create(i,t)}function S0(n,e,t){if(typeof(t=qt(t))=="string"){if(t==="")throw new he(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!RC(e)&&t.indexOf("/")!==-1)throw new he(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(at.fromString(t));if(!Ee.isDocumentKey(i))throw new he(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return LT(n,new Ee(i))}if(t instanceof Ut)return LT(n,t._key);throw new he(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xd(t)}.`)}function A0(n,e){if(!Array.isArray(n)||n.length===0)throw new he(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function PI(n,e){const t=(function(s,a){for(const u of s)for(const f of u.getFlattenedFilters())if(a.indexOf(f.op)>=0)return f.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new he(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function MV(n,e,t){let i;return i=n?n.toFirestore(e):e,i}class vu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class mo extends xI{constructor(e,t,i,s,a,u){super(e,t,i,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Qf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(Ha("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=mo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}mo._jsonSchemaVersion="firestore/documentSnapshot/1.0",mo._jsonSchema={type:Vt("string",mo._jsonSchemaVersion),bundleSource:Vt("string","DocumentSnapshot"),bundleName:Vt("string"),bundle:Vt("string")};class Qf extends mo{data(e={}){return super.data(e)}}class go{constructor(e,t,i,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new vu(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Qf(this._firestore,this._userDataWriter,i.key,i,new vu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,a){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map((f=>{const h=new Qf(s._firestore,s._userDataWriter,f.doc.key,f.doc,new vu(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);return f.doc,{type:"added",doc:h,oldIndex:-1,newIndex:u++}}))}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((f=>a||f.type!==3)).map((f=>{const h=new Qf(s._firestore,s._userDataWriter,f.doc.key,f.doc,new vu(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,_=-1;return f.type!==0&&(p=u.indexOf(f.doc.key),u=u.delete(f.doc.key)),f.type!==1&&(u=u.add(f.doc),_=u.indexOf(f.doc.key)),{type:DV(f.type),doc:h,oldIndex:p,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=go._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ig.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],s=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function DV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */go._jsonSchemaVersion="firestore/querySnapshot/1.0",go._jsonSchema={type:Vt("string",go._jsonSchemaVersion),bundleSource:Vt("string","QuerySnapshot"),bundleName:Vt("string"),bundle:Vt("string")};function PV(n){n=Ji(n,Ms);const e=Ji(n.firestore,To),t=Wg(e),i=new ny(e);return MI(n._query),fV(t,n._query).then((s=>new go(e,i,n,s)))}function ay(n,e,t,...i){n=Ji(n,Ut);const s=Ji(n.firestore,To),a=jg(s);let u;return u=typeof(e=qt(e))=="string"||e instanceof Xg?AV(a,"updateDoc",n._key,e,t,i):SV(a,"updateDoc",n._key,e),ly(s,[u.toMutation(n._key,hi.exists(!0))])}function VI(n){return ly(Ji(n.firestore,To),[new Pg(n._key,hi.none())])}function UI(n,e){const t=Ji(n.firestore,To),i=Ba(n),s=MV(n.converter,e),a=jg(n.firestore);return ly(t,[TV(a,"addDoc",i._key,s,n.converter!==null,{}).toMutation(i._key,hi.exists(!1))]).then((()=>i))}function _m(n,...e){var p,_,E;n=qt(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||T0(e[i])||(t=e[i++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(T0(e[i])){const T=e[i];e[i]=(p=T.next)==null?void 0:p.bind(T),e[i+1]=(_=T.error)==null?void 0:_.bind(T),e[i+2]=(E=T.complete)==null?void 0:E.bind(T)}let a,u,f;if(n instanceof Ut)u=Ji(n.firestore,To),f=Mg(n._key.path),a={next:T=>{e[i]&&e[i](VV(u,n,T))},error:e[i+1],complete:e[i+2]};else{const T=Ji(n,Ms);u=Ji(T.firestore,To),f=T._query;const I=new ny(u);a={next:x=>{e[i]&&e[i](new go(u,I,T,x))},error:e[i+1],complete:e[i+2]},MI(n._query)}const h=Wg(u);return cV(h,f,s,a)}function ly(n,e){const t=Wg(n);return dV(t,e)}function VV(n,e,t){const i=t.docs.get(e._key),s=new ny(n);return new mo(n,s,e._key,i,new vu(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){f1(Ya),Va(new _o("firestore",((i,{instanceIdentifier:s,options:a})=>{const u=i.getProvider("app").getImmediate(),f=new To(new p1(i.getProvider("auth-internal")),new y1(u,i.getProvider("app-check-internal")),V1(u,s),u);return a={useFetchStreams:t,...a},f._setSettings(a),f}),"PUBLIC").setMultipleInstances(!0)),_s(v0,E0,e),_s(v0,E0,"esm2020")})();function LI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const UV=LI,kI=new Gu("auth","Firebase",LI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md=new Tg("@firebase/auth");function LV(n,...e){md.logLevel<=Fe.WARN&&md.warn(`Auth (${Ya}): ${n}`,...e)}function Wf(n,...e){md.logLevel<=Fe.ERROR&&md.error(`Auth (${Ya}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(n,...e){throw uy(n,...e)}function Qi(n,...e){return uy(n,...e)}function OI(n,e,t){const i={...UV(),[e]:t};return new Gu("auth","Firebase",i).create(e,{appName:n.name})}function Ss(n){return OI(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function uy(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return kI.create(n,...e)}function Se(n,e,...t){if(!n)throw uy(e,...t)}function _r(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Wf(e),new Error(e)}function Ir(n,e){n||_r(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function kV(){return C0()==="http:"||C0()==="https:"}function C0(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(kV()||zx()||"connection"in navigator)?navigator.onLine:!0}function FV(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ir(t>e,"Short delay should be less than long delay!"),this.isMobile=Bx()||Jx()}get(){return OV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cy(n,e){Ir(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_r("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_r("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_r("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],HV=new Xu(3e4,6e4);function wo(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Ds(n,e,t,i,s={}){return qI(n,s,async()=>{let a={},u={};i&&(e==="GET"?u=i:a={body:JSON.stringify(i)});const f=zu({key:n.config.apiKey,...u}).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const p={method:e,headers:h,...a};return Gx()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&Ka(n.emulatorConfig.host)&&(p.credentials="include"),FI.fetch()(await BI(n,n.config.apiHost,t,f),p)})}async function qI(n,e,t){n._canInitEmulator=!1;const i={...qV,...e};try{const s=new zV(n),a=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const u=await a.json();if("needConfirmation"in u)throw Lf(n,"account-exists-with-different-credential",u);if(a.ok&&!("errorMessage"in u))return u;{const f=a.ok?u.errorMessage:u.error.message,[h,p]=f.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Lf(n,"credential-already-in-use",u);if(h==="EMAIL_EXISTS")throw Lf(n,"email-already-in-use",u);if(h==="USER_DISABLED")throw Lf(n,"user-disabled",u);const _=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw OI(n,_,p);vi(n,_)}}catch(s){if(s instanceof Rr)throw s;vi(n,"network-request-failed",{message:String(s)})}}async function Jd(n,e,t,i,s={}){const a=await Ds(n,e,t,i,s);return"mfaPendingCredential"in a&&vi(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function BI(n,e,t,i){const s=`${e}${t}?${i}`,a=n,u=a.config.emulator?cy(n.config,s):`${n.config.apiScheme}://${s}`;return BV.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(u).toString():u}function GV(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class zV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Qi(this.auth,"network-request-failed")),HV.get())})}}function Lf(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const s=Qi(n,e,i);return s.customData._tokenResponse=t,s}function I0(n){return n!==void 0&&n.enterprise!==void 0}class JV{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return GV(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function KV(n,e){return Ds(n,"GET","/v2/recaptchaConfig",wo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YV(n,e){return Ds(n,"POST","/v1/accounts:delete",e)}async function gd(n,e){return Ds(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function $V(n,e=!1){const t=qt(n),i=await t.getIdToken(e),s=fy(i);Se(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,u=a==null?void 0:a.sign_in_provider;return{claims:s,token:i,authTime:wu(vm(s.auth_time)),issuedAtTime:wu(vm(s.iat)),expirationTime:wu(vm(s.exp)),signInProvider:u||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function vm(n){return Number(n)*1e3}function fy(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Wf("JWT malformed, contained fewer than 3 sections"),null;try{const s=GA(t);return s?JSON.parse(s):(Wf("Failed to decode base64 JWT payload"),null)}catch(s){return Wf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function w0(n){const e=fy(n);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ku(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Rr&&QV(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function QV({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=wu(this.lastLoginAt),this.creationTime=wu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yd(n){var E;const e=n.auth,t=await n.getIdToken(),i=await ku(n,gd(e,{idToken:t}));Se(i==null?void 0:i.users.length,e,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const a=(E=s.providerUserInfo)!=null&&E.length?HI(s.providerUserInfo):[],u=ZV(n.providerData,a),f=n.isAnonymous,h=!(n.email&&s.passwordHash)&&!(u!=null&&u.length),p=f?h:!1,_={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:u,metadata:new Wm(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(n,_)}async function XV(n){const e=qt(n);await yd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ZV(n,e){return[...n.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function HI(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jV(n,e){const t=await qI(n,{},async()=>{const i=zu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=n.config,u=await BI(n,s,"/v1/token",`key=${a}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:f,body:i};return n.emulatorConfig&&Ka(n.emulatorConfig.host)&&(h.credentials="include"),FI.fetch()(u,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function eU(n,e){return Ds(n,"POST","/v2/accounts:revokeToken",wo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):w0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const t=w0(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:s,expiresIn:a}=await jV(e,t);this.updateTokensAndExpiration(i,s,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:s,expirationTime:a}=t,u=new Na;return i&&(Se(typeof i=="string","internal-error",{appName:e}),u.refreshToken=i),s&&(Se(typeof s=="string","internal-error",{appName:e}),u.accessToken=s),a&&(Se(typeof a=="number","internal-error",{appName:e}),u.expirationTime=a),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Na,this.toJSON())}_performRefresh(){return _r("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function us(n,e){Se(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class di{constructor({uid:e,auth:t,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new WV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Wm(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await ku(this,this.stsTokenManager.getToken(this.auth,e));return Se(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return $V(this,e)}reload(){return XV(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new di({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await yd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(fi(this.auth.app))return Promise.reject(Ss(this.auth));const e=await this.getIdToken();return await ku(this,YV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,s=t.email??void 0,a=t.phoneNumber??void 0,u=t.photoURL??void 0,f=t.tenantId??void 0,h=t._redirectEventId??void 0,p=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:E,emailVerified:T,isAnonymous:I,providerData:x,stsTokenManager:U}=t;Se(E&&U,e,"internal-error");const P=Na.fromJSON(this.name,U);Se(typeof E=="string",e,"internal-error"),us(i,e.name),us(s,e.name),Se(typeof T=="boolean",e,"internal-error"),Se(typeof I=="boolean",e,"internal-error"),us(a,e.name),us(u,e.name),us(f,e.name),us(h,e.name),us(p,e.name),us(_,e.name);const G=new di({uid:E,auth:e,email:s,emailVerified:T,displayName:i,isAnonymous:I,photoURL:u,phoneNumber:a,tenantId:f,stsTokenManager:P,createdAt:p,lastLoginAt:_});return x&&Array.isArray(x)&&(G.providerData=x.map(Q=>({...Q}))),h&&(G._redirectEventId=h),G}static async _fromIdTokenResponse(e,t,i=!1){const s=new Na;s.updateFromServerResponse(t);const a=new di({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await yd(a),a}static async _fromGetAccountInfoResponse(e,t,i){const s=t.users[0];Se(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?HI(s.providerUserInfo):[],u=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),f=new Na;f.updateFromIdToken(i);const h=new di({uid:s.localId,auth:e,stsTokenManager:f,isAnonymous:u}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Wm(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(h,p),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0=new Map;function vr(n){Ir(n instanceof Function,"Expected a class definition");let e=R0.get(n);return e?(Ir(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,R0.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}GI.type="NONE";const b0=GI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(n,e,t){return`firebase:${n}:${e}:${t}`}class xa{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:s,name:a}=this.auth;this.fullUserKey=Xf(this.userKey,s.apiKey,a),this.fullPersistenceKey=Xf("persistence",s.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await gd(this.auth,{idToken:e}).catch(()=>{});return t?di._fromGetAccountInfoResponse(this.auth,t,e):null}return di._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new xa(vr(b0),e,i);const s=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let a=s[0]||vr(b0);const u=Xf(i,e.config.apiKey,e.name);let f=null;for(const p of t)try{const _=await p._get(u);if(_){let E;if(typeof _=="string"){const T=await gd(e,{idToken:_}).catch(()=>{});if(!T)break;E=await di._fromGetAccountInfoResponse(e,T,_)}else E=di._fromJSON(e,_);p!==a&&(f=E),a=p;break}}catch{}const h=s.filter(p=>p._shouldAllowMigration);return!a._shouldAllowMigration||!h.length?new xa(a,e,i):(a=h[0],f&&await a._set(u,f.toJSON()),await Promise.all(t.map(async p=>{if(p!==a)try{await p._remove(u)}catch{}})),new xa(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N0(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(YI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(zI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(QI(e))return"Blackberry";if(WI(e))return"Webos";if(JI(e))return"Safari";if((e.includes("chrome/")||KI(e))&&!e.includes("edge/"))return"Chrome";if($I(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function zI(n=ln()){return/firefox\//i.test(n)}function JI(n=ln()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function KI(n=ln()){return/crios\//i.test(n)}function YI(n=ln()){return/iemobile/i.test(n)}function $I(n=ln()){return/android/i.test(n)}function QI(n=ln()){return/blackberry/i.test(n)}function WI(n=ln()){return/webos/i.test(n)}function dy(n=ln()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function tU(n=ln()){var e;return dy(n)&&!!((e=window.navigator)!=null&&e.standalone)}function nU(){return Kx()&&document.documentMode===10}function XI(n=ln()){return dy(n)||$I(n)||WI(n)||QI(n)||/windows phone/i.test(n)||YI(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(n,e=[]){let t;switch(n){case"Browser":t=N0(ln());break;case"Worker":t=`${N0(ln())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ya}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iU{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((u,f)=>{try{const h=e(a);u(h)}catch(h){f(h)}});i.onAbort=t,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rU(n,e={}){return Ds(n,"GET","/v2/passwordPolicy",wo(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sU=6;class oU{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??sU,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aU{constructor(e,t,i,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new x0(this),this.idTokenSubscription=new x0(this),this.beforeStateQueue=new iU(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=kI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=vr(t)),this._initializationPromise=this.queue(async()=>{var i,s,a;if(!this._deleted&&(this.persistenceManager=await xa.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await gd(this,{idToken:e}),i=await di._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(fi(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(a=this.redirectUser)==null?void 0:a._redirectEventId,f=i==null?void 0:i._redirectEventId,h=await this.tryRedirectSignIn(e);(!u||u===f)&&(h!=null&&h.user)&&(i=h.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(u){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await yd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=FV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(fi(this.app))return Promise.reject(Ss(this));const t=e?qt(e):null;return t&&Se(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return fi(this.app)?Promise.reject(Ss(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return fi(this.app)?Promise.reject(Ss(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(vr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await rU(this),t=new oU(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Gu("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await eU(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&vr(e)||this._popupRedirectResolver;Se(t,this,"argument-error"),this.redirectPersistenceManager=await xa.create(this,[vr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,s){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let u=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(f,this,"internal-error"),f.then(()=>{u||a(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,i,s);return()=>{u=!0,h()}}else{const h=e.addObserver(t);return()=>{u=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ZI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(fi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&LV(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ja(n){return qt(n)}class x0{constructor(e){this.auth=e,this.observer=null,this.addObserver=eM(t=>this.observer=t)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function lU(n){Kd=n}function jI(n){return Kd.loadJS(n)}function uU(){return Kd.recaptchaEnterpriseScript}function cU(){return Kd.gapiScript}function fU(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class dU{constructor(){this.enterprise=new hU}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class hU{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const pU="recaptcha-enterprise",ew="NO_RECAPTCHA";class mU{constructor(e){this.type=pU,this.auth=ja(e)}async verify(e="verify",t=!1){async function i(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(u,f)=>{KV(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const p=new JV(h);return a.tenantId==null?a._agentRecaptchaConfig=p:a._tenantRecaptchaConfigs[a.tenantId]=p,u(p.siteKey)}}).catch(h=>{f(h)})})}function s(a,u,f){const h=window.grecaptcha;I0(h)?h.enterprise.ready(()=>{h.enterprise.execute(a,{action:e}).then(p=>{u(p)}).catch(()=>{u(ew)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new dU().execute("siteKey",{action:"verify"}):new Promise((a,u)=>{i(this.auth).then(f=>{if(!t&&I0(window.grecaptcha))s(f,a,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let h=uU();h.length!==0&&(h+=f),jI(h).then(()=>{s(f,a,u)}).catch(p=>{u(p)})}}).catch(f=>{u(f)})})}}async function M0(n,e,t,i=!1,s=!1){const a=new mU(n);let u;if(s)u=ew;else try{u=await a.verify(t)}catch{u=await a.verify(t,!0)}const f={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const h=f.phoneEnrollmentInfo.phoneNumber,p=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const h=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return i?Object.assign(f,{captchaResp:u}):Object.assign(f,{captchaResponse:u}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function D0(n,e,t,i,s){var a;if((a=n._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await M0(n,e,t,t==="getOobCode");return i(n,u)}else return i(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await M0(n,e,t,t==="getOobCode");return i(n,f)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gU(n,e){const t=Ag(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),a=t.getOptions();if(yo(a,e??{}))return s;vi(s,"already-initialized")}return t.initialize({options:e})}function yU(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(vr);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function _U(n,e,t){const i=ja(n);Se(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,a=tw(e),{host:u,port:f}=vU(e),h=f===null?"":`:${f}`,p={url:`${a}//${u}${h}/`},_=Object.freeze({host:u,port:f,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){Se(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Se(yo(p,i.config.emulator)&&yo(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,Ka(u)?(YA(`${a}//${u}${h}`),$A("Auth",!0)):EU()}function tw(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function vU(n){const e=tw(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const a=s[1];return{host:a,port:P0(i.substr(a.length+1))}}else{const[a,u]=i.split(":");return{host:a,port:P0(u)}}}function P0(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function EU(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return _r("not implemented")}_getIdTokenResponse(e){return _r("not implemented")}_linkToIdToken(e,t){return _r("not implemented")}_getReauthenticationResolver(e){return _r("not implemented")}}async function TU(n,e){return Ds(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SU(n,e){return Jd(n,"POST","/v1/accounts:signInWithPassword",wo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AU(n,e){return Jd(n,"POST","/v1/accounts:signInWithEmailLink",wo(n,e))}async function CU(n,e){return Jd(n,"POST","/v1/accounts:signInWithEmailLink",wo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou extends hy{constructor(e,t,i,s=null){super("password",i),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Ou(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Ou(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return D0(e,t,"signInWithPassword",SU);case"emailLink":return AU(e,{email:this._email,oobCode:this._password});default:vi(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return D0(e,i,"signUpPassword",TU);case"emailLink":return CU(e,{idToken:t,email:this._email,oobCode:this._password});default:vi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ma(n,e){return Jd(n,"POST","/v1/accounts:signInWithIdp",wo(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IU="http://localhost";class So extends hy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new So(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):vi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...a}=t;if(!i||!s)return null;const u=new So(i,s);return u.idToken=a.idToken||void 0,u.accessToken=a.accessToken||void 0,u.secret=a.secret,u.nonce=a.nonce,u.pendingToken=a.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Ma(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Ma(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ma(e,t)}buildRequest(){const e={requestUri:IU,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=zu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wU(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function RU(n){const e=pu(mu(n)).link,t=e?pu(mu(e)).deep_link_id:null,i=pu(mu(n)).deep_link_id;return(i?pu(mu(i)).link:null)||i||t||e||n}class py{constructor(e){const t=pu(mu(e)),i=t.apiKey??null,s=t.oobCode??null,a=wU(t.mode??null);Se(i&&s&&a,"argument-error"),this.apiKey=i,this.operation=a,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=RU(e);try{return new py(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(){this.providerId=el.PROVIDER_ID}static credential(e,t){return Ou._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=py.parseLink(t);return Se(i,"argument-error"),Ou._fromEmailAndCode(e,i.code,i.tenantId)}}el.PROVIDER_ID="password";el.EMAIL_PASSWORD_SIGN_IN_METHOD="password";el.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu extends nw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends Zu{constructor(){super("facebook.com")}static credential(e){return So._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cs.credential(e.oauthAccessToken)}catch{return null}}}cs.FACEBOOK_SIGN_IN_METHOD="facebook.com";cs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs extends Zu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return So._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return fs.credential(t,i)}catch{return null}}}fs.GOOGLE_SIGN_IN_METHOD="google.com";fs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends Zu{constructor(){super("github.com")}static credential(e){return So._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ds.credential(e.oauthAccessToken)}catch{return null}}}ds.GITHUB_SIGN_IN_METHOD="github.com";ds.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs extends Zu{constructor(){super("twitter.com")}static credential(e,t){return So._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return hs.credentialFromTaggedObject(e)}static credentialFromError(e){return hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return hs.credential(t,i)}catch{return null}}}hs.TWITTER_SIGN_IN_METHOD="twitter.com";hs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,s=!1){const a=await di._fromIdTokenResponse(e,i,s),u=V0(i);return new Ga({user:a,providerId:u,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const s=V0(i);return new Ga({user:e,providerId:s,_tokenResponse:i,operationType:t})}}function V0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d extends Rr{constructor(e,t,i,s){super(t.code,t.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,_d.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,s){return new _d(e,t,i,s)}}function iw(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?_d._fromErrorAndOperation(n,a,e,i):a})}async function bU(n,e,t=!1){const i=await ku(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ga._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NU(n,e,t=!1){const{auth:i}=n;if(fi(i.app))return Promise.reject(Ss(i));const s="reauthenticate";try{const a=await ku(n,iw(i,s,e,n),t);Se(a.idToken,i,"internal-error");const u=fy(a.idToken);Se(u,i,"internal-error");const{sub:f}=u;return Se(n.uid===f,i,"user-mismatch"),Ga._forOperation(n,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&vi(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rw(n,e,t=!1){if(fi(n.app))return Promise.reject(Ss(n));const i="signIn",s=await iw(n,i,e),a=await Ga._fromIdTokenResponse(n,i,s);return t||await n._updateCurrentUser(a.user),a}async function xU(n,e){return rw(ja(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MU(n){const e=ja(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function DU(n,e,t){return fi(n.app)?Promise.reject(Ss(n)):xU(qt(n),el.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&MU(n),i})}function PU(n,e,t,i){return qt(n).onIdTokenChanged(e,t,i)}function VU(n,e,t){return qt(n).beforeAuthStateChanged(e,t)}function UU(n,e,t,i){return qt(n).onAuthStateChanged(e,t,i)}function LU(n){return qt(n).signOut()}const vd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(vd,"1"),this.storage.removeItem(vd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kU=1e3,OU=10;class ow extends sw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=XI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),s=this.localCache[t];i!==s&&e(t,s,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,f,h)=>{this.notifyListeners(u,h)});return}const i=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const u=this.storage.getItem(i);!t&&this.localCache[i]===u||this.notifyListeners(i,u)},a=this.storage.getItem(i);nU()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,OU):s()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},kU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ow.type="LOCAL";const FU=ow;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw extends sw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}aw.type="SESSION";const lw=aw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qU(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const i=new Yd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:s,data:a}=t.data,u=this.handlersMap[s];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const f=Array.from(u).map(async p=>p(t.origin,a)),h=await qU(f);t.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Yd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function my(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BU{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,u;return new Promise((f,h)=>{const p=my("",20);s.port1.start();const _=setTimeout(()=>{h(new Error("unsupported_event"))},i);u={messageChannel:s,onMessage(E){const T=E;if(T.data.eventId===p)switch(T.data.status){case"ack":clearTimeout(_),a=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),f(T.data.response);break;default:clearTimeout(_),clearTimeout(a),h(new Error("invalid_response"));break}}},this.handlers.add(u),s.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[s.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wi(){return window}function HU(n){Wi().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uw(){return typeof Wi().WorkerGlobalScope<"u"&&typeof Wi().importScripts=="function"}async function GU(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function zU(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function JU(){return uw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw="firebaseLocalStorageDb",KU=1,Ed="firebaseLocalStorage",fw="fbase_key";class ju{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function $d(n,e){return n.transaction([Ed],e?"readwrite":"readonly").objectStore(Ed)}function YU(){const n=indexedDB.deleteDatabase(cw);return new ju(n).toPromise()}function Xm(){const n=indexedDB.open(cw,KU);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Ed,{keyPath:fw})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Ed)?e(i):(i.close(),await YU(),e(await Xm()))})})}async function U0(n,e,t){const i=$d(n,!0).put({[fw]:e,value:t});return new ju(i).toPromise()}async function $U(n,e){const t=$d(n,!1).get(e),i=await new ju(t).toPromise();return i===void 0?null:i.value}function L0(n,e){const t=$d(n,!0).delete(e);return new ju(t).toPromise()}const QU=800,WU=3;class dw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Xm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>WU)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return uw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Yd._getInstance(JU()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await GU(),!this.activeServiceWorker)return;this.sender=new BU(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||zU()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Xm();return await U0(e,vd,"1"),await L0(e,vd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>U0(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>$U(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>L0(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=$d(s,!1).getAll();return new ju(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),QU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}dw.type="LOCAL";const XU=dw;new Xu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZU(n,e){return e?vr(e):(Se(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy extends hy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ma(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ma(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ma(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function jU(n){return rw(n.auth,new gy(n),n.bypassAuthState)}function eL(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),NU(t,new gy(n),n.bypassAuthState)}async function tL(n){const{auth:e,user:t}=n;return Se(t,e,"internal-error"),bU(t,new gy(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(e,t,i,s,a=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:s,tenantId:a,error:u,type:f}=e;if(u){this.reject(u);return}const h={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(h))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jU;case"linkViaPopup":case"linkViaRedirect":return tL;case"reauthViaPopup":case"reauthViaRedirect":return eL;default:vi(this.auth,"internal-error")}}resolve(e){Ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nL=new Xu(2e3,1e4);class Aa extends hw{constructor(e,t,i,s,a){super(e,t,s,a),this.provider=i,this.authWindow=null,this.pollId=null,Aa.currentPopupAction&&Aa.currentPopupAction.cancel(),Aa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){Ir(this.filter.length===1,"Popup operations only handle one event");const e=my();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Qi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Qi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Aa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,nL.get())};e()}}Aa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL="pendingRedirect",Zf=new Map;class rL extends hw{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Zf.get(this.auth._key());if(!e){try{const i=await sL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Zf.set(this.auth._key(),e)}return this.bypassAuthState||Zf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function sL(n,e){const t=lL(e),i=aL(n);if(!await i._isAvailable())return!1;const s=await i._get(t)==="true";return await i._remove(t),s}function oL(n,e){Zf.set(n._key(),e)}function aL(n){return vr(n._redirectPersistence)}function lL(n){return Xf(iL,n.config.apiKey,n.name)}async function uL(n,e,t=!1){if(fi(n.app))return Promise.reject(Ss(n));const i=ja(n),s=ZU(i,e),u=await new rL(i,s,t).execute();return u&&!t&&(delete u.user._redirectEventId,await i._persistUserIfCurrent(u.user),await i._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cL=600*1e3;class fL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!dL(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!pw(e)){const s=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(Qi(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=cL&&this.cachedEventUids.clear(),this.cachedEventUids.has(k0(e))}saveEventToCache(e){this.cachedEventUids.add(k0(e)),this.lastProcessedEventTime=Date.now()}}function k0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function pw({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function dL(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pw(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hL(n,e={}){return Ds(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mL=/^https?/;async function gL(n){if(n.config.emulator)return;const{authorizedDomains:e}=await hL(n);for(const t of e)try{if(yL(t))return}catch{}vi(n,"unauthorized-domain")}function yL(n){const e=Qm(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===i}if(!mL.test(t))return!1;if(pL.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _L=new Xu(3e4,6e4);function O0(){const n=Wi().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function vL(n){return new Promise((e,t)=>{var s,a,u;function i(){O0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{O0(),t(Qi(n,"network-request-failed"))},timeout:_L.get()})}if((a=(s=Wi().gapi)==null?void 0:s.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((u=Wi().gapi)!=null&&u.load)i();else{const f=fU("iframefcb");return Wi()[f]=()=>{gapi.load?i():t(Qi(n,"network-request-failed"))},jI(`${cU()}?onload=${f}`).catch(h=>t(h))}}).catch(e=>{throw jf=null,e})}let jf=null;function EL(n){return jf=jf||vL(n),jf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL=new Xu(5e3,15e3),SL="__/auth/iframe",AL="emulator/auth/iframe",CL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},IL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wL(n){const e=n.config;Se(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?cy(e,AL):`https://${n.config.authDomain}/${SL}`,i={apiKey:e.apiKey,appName:n.name,v:Ya},s=IL.get(n.config.apiHost);s&&(i.eid=s);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${zu(i).slice(1)}`}async function RL(n){const e=await EL(n),t=Wi().gapi;return Se(t,n,"internal-error"),e.open({where:document.body,url:wL(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:CL,dontclear:!0},i=>new Promise(async(s,a)=>{await i.restyle({setHideOnLeave:!1});const u=Qi(n,"network-request-failed"),f=Wi().setTimeout(()=>{a(u)},TL.get());function h(){Wi().clearTimeout(f),s(i)}i.ping(h).then(h,()=>{a(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},NL=500,xL=600,ML="_blank",DL="http://localhost";class F0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function PL(n,e,t,i=NL,s=xL){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString();let f="";const h={...bL,width:i.toString(),height:s.toString(),top:a,left:u},p=ln().toLowerCase();t&&(f=KI(p)?ML:t),zI(p)&&(e=e||DL,h.scrollbars="yes");const _=Object.entries(h).reduce((T,[I,x])=>`${T}${I}=${x},`,"");if(tU(p)&&f!=="_self")return VL(e||"",f),new F0(null);const E=window.open(e||"",f,_);Se(E,n,"popup-blocked");try{E.focus()}catch{}return new F0(E)}function VL(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UL="__/auth/handler",LL="emulator/auth/handler",kL=encodeURIComponent("fac");async function q0(n,e,t,i,s,a){Se(n.config.authDomain,n,"auth-domain-config-required"),Se(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Ya,eventId:s};if(e instanceof nw){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",jx(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))u[_]=E}if(e instanceof Zu){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(u.scopes=_.join(","))}n.tenantId&&(u.tid=n.tenantId);const f=u;for(const _ of Object.keys(f))f[_]===void 0&&delete f[_];const h=await n._getAppCheckToken(),p=h?`#${kL}=${encodeURIComponent(h)}`:"";return`${OL(n)}?${zu(f).slice(1)}${p}`}function OL({config:n}){return n.emulator?cy(n,LL):`https://${n.authDomain}/${UL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Em="webStorageSupport";class FL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lw,this._completeRedirectFn=uL,this._overrideRedirectResult=oL}async _openPopup(e,t,i,s){var u;Ir((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const a=await q0(e,t,i,Qm(),s);return PL(e,a,my())}async _openRedirect(e,t,i,s){await this._originValidation(e);const a=await q0(e,t,i,Qm(),s);return HU(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:a}=this.eventManagers[t];return s?Promise.resolve(s):(Ir(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await RL(e),i=new fL(e);return t.register("authEvent",s=>(Se(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Em,{type:Em},s=>{var u;const a=(u=s==null?void 0:s[0])==null?void 0:u[Em];a!==void 0&&t(!!a),vi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=gL(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return XI()||JI()||dy()}}const qL=FL;var B0="@firebase/auth",H0="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HL(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function GL(n){Va(new _o("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:u,authDomain:f}=i.options;Se(u&&!u.includes(":"),"invalid-api-key",{appName:i.name});const h={apiKey:u,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ZI(n)},p=new aU(i,s,a,h);return yU(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Va(new _o("auth-internal",e=>{const t=ja(e.getProvider("auth").getImmediate());return(i=>new BL(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),_s(B0,H0,HL(n)),_s(B0,H0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zL=300,JL=KA("authIdTokenMaxAge")||zL;let G0=null;const KL=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>JL)return;const s=t==null?void 0:t.token;G0!==s&&(G0=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function YL(n=ZA()){const e=Ag(n,"auth");if(e.isInitialized())return e.getImmediate();const t=gU(n,{popupRedirectResolver:qL,persistence:[XU,FU,lw]}),i=KA("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const u=KL(a.toString());VU(t,u,()=>u(t.currentUser)),PU(t,f=>u(f))}}const s=zA("auth");return s&&_U(t,`http://${s}`),t}function $L(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}lU({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=s=>{const a=Qi("internal-error");a.customData=s,t(a)},i.type="text/javascript",i.charset="UTF-8",$L().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});GL("Browser");var QL="firebase",WL="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_s(QL,WL,"app");const XL={apiKey:"AIzaSyCe0599_J8WfytyFhFOSCjWydv-WnvEyzc",authDomain:"nafs-essence.firebaseapp.com",projectId:"nafs-essence",storageBucket:"nafs-essence.firebasestorage.app",messagingSenderId:"929823070397",appId:"1:929823070397:web:ce537127271c2d59173fd4"},mw=XA(XL),yy=YL(mw),mi=gV(mw);var ZL={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let jL,ek;function tk(){return{geminiUrl:jL,vertexUrl:ek}}function nk(n,e,t,i){var s,a;if(!(n!=null&&n.baseUrl)){const u=tk();return e?(s=u.vertexUrl)!==null&&s!==void 0?s:t:(a=u.geminiUrl)!==null&&a!==void 0?a:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class br{}function de(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const a=e[s];return a!=null?String(a):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function m(n,e,t){for(let a=0;a<e.length-1;a++){const u=e[a];if(u.endsWith("[]")){const f=u.slice(0,-2);if(!(f in n))if(Array.isArray(t))n[f]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[f])){const h=n[f];if(Array.isArray(t))for(let p=0;p<h.length;p++){const _=h[p];m(_,e.slice(a+1),t[p])}else for(const p of h)m(p,e.slice(a+1),t)}return}else if(u.endsWith("[0]")){const f=u.slice(0,-3);f in n||(n[f]=[{}]);const h=n[f];m(h[0],e.slice(a+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const i=e[e.length-1],s=n[i];if(s!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===s)return;if(typeof s=="object"&&typeof t=="object"&&s!==null&&t!==null)Object.assign(s,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function d(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;const s=e[i];if(s.endsWith("[]")){const a=s.slice(0,-2);if(a in n){const u=n[a];return Array.isArray(u)?u.map(f=>d(f,e.slice(i+1),t)):t}else return t}else n=n[s]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function ik(n,e){for(const[t,i]of Object.entries(e)){const s=t.split("."),a=i.split("."),u=new Set;let f=-1;for(let h=0;h<s.length;h++)if(s[h]==="*"){f=h;break}if(f!==-1&&a.length>f)for(let h=f;h<a.length;h++){const p=a[h];p!=="*"&&!p.endsWith("[]")&&!p.endsWith("[0]")&&u.add(p)}Zm(n,s,a,0,u)}}function Zm(n,e,t,i,s){if(i>=e.length||typeof n!="object"||n===null)return;const a=e[i];if(a.endsWith("[]")){const u=a.slice(0,-2),f=n;if(u in f&&Array.isArray(f[u]))for(const h of f[u])Zm(h,e,t,i+1,s)}else if(a==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,f=Object.keys(u).filter(p=>!p.startsWith("_")&&!s.has(p)),h={};for(const p of f)h[p]=u[p];for(const[p,_]of Object.entries(h)){const E=[];for(const T of t.slice(i))T==="*"?E.push(p):E.push(T);m(u,E,_)}for(const p of f)delete u[p]}}else{const u=n;a in u&&Zm(u[a],e,t,i+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _y(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rk(n){const e={},t=d(n,["operationName"]);t!=null&&m(e,["operationName"],t);const i=d(n,["resourceName"]);return i!=null&&m(e,["_url","resourceName"],i),e}function sk(n){const e={},t=d(n,["name"]);t!=null&&m(e,["name"],t);const i=d(n,["metadata"]);i!=null&&m(e,["metadata"],i);const s=d(n,["done"]);s!=null&&m(e,["done"],s);const a=d(n,["error"]);a!=null&&m(e,["error"],a);const u=d(n,["response","generateVideoResponse"]);return u!=null&&m(e,["response"],ak(u)),e}function ok(n){const e={},t=d(n,["name"]);t!=null&&m(e,["name"],t);const i=d(n,["metadata"]);i!=null&&m(e,["metadata"],i);const s=d(n,["done"]);s!=null&&m(e,["done"],s);const a=d(n,["error"]);a!=null&&m(e,["error"],a);const u=d(n,["response"]);return u!=null&&m(e,["response"],lk(u)),e}function ak(n){const e={},t=d(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>uk(u))),m(e,["generatedVideos"],a)}const i=d(n,["raiMediaFilteredCount"]);i!=null&&m(e,["raiMediaFilteredCount"],i);const s=d(n,["raiMediaFilteredReasons"]);return s!=null&&m(e,["raiMediaFilteredReasons"],s),e}function lk(n){const e={},t=d(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(u=>ck(u))),m(e,["generatedVideos"],a)}const i=d(n,["raiMediaFilteredCount"]);i!=null&&m(e,["raiMediaFilteredCount"],i);const s=d(n,["raiMediaFilteredReasons"]);return s!=null&&m(e,["raiMediaFilteredReasons"],s),e}function uk(n){const e={},t=d(n,["video"]);return t!=null&&m(e,["video"],gk(t)),e}function ck(n){const e={},t=d(n,["_self"]);return t!=null&&m(e,["video"],yk(t)),e}function fk(n){const e={},t=d(n,["operationName"]);return t!=null&&m(e,["_url","operationName"],t),e}function dk(n){const e={},t=d(n,["operationName"]);return t!=null&&m(e,["_url","operationName"],t),e}function hk(n){const e={},t=d(n,["name"]);t!=null&&m(e,["name"],t);const i=d(n,["metadata"]);i!=null&&m(e,["metadata"],i);const s=d(n,["done"]);s!=null&&m(e,["done"],s);const a=d(n,["error"]);a!=null&&m(e,["error"],a);const u=d(n,["response"]);return u!=null&&m(e,["response"],pk(u)),e}function pk(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["parent"]);i!=null&&m(e,["parent"],i);const s=d(n,["documentName"]);return s!=null&&m(e,["documentName"],s),e}function gw(n){const e={},t=d(n,["name"]);t!=null&&m(e,["name"],t);const i=d(n,["metadata"]);i!=null&&m(e,["metadata"],i);const s=d(n,["done"]);s!=null&&m(e,["done"],s);const a=d(n,["error"]);a!=null&&m(e,["error"],a);const u=d(n,["response"]);return u!=null&&m(e,["response"],mk(u)),e}function mk(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["parent"]);i!=null&&m(e,["parent"],i);const s=d(n,["documentName"]);return s!=null&&m(e,["documentName"],s),e}function gk(n){const e={},t=d(n,["uri"]);t!=null&&m(e,["uri"],t);const i=d(n,["encodedVideo"]);i!=null&&m(e,["videoBytes"],_y(i));const s=d(n,["encoding"]);return s!=null&&m(e,["mimeType"],s),e}function yk(n){const e={},t=d(n,["gcsUri"]);t!=null&&m(e,["uri"],t);const i=d(n,["bytesBase64Encoded"]);i!=null&&m(e,["videoBytes"],_y(i));const s=d(n,["mimeType"]);return s!=null&&m(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var z0;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(z0||(z0={}));var J0;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(J0||(J0={}));var K0;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(K0||(K0={}));var ms;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(ms||(ms={}));var Y0;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Y0||(Y0={}));var $0;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})($0||($0={}));var Q0;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Q0||(Q0={}));var W0;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(W0||(W0={}));var X0;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(X0||(X0={}));var Z0;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Z0||(Z0={}));var j0;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(j0||(j0={}));var eS;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(eS||(eS={}));var tS;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(tS||(tS={}));var nS;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(nS||(nS={}));var iS;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(iS||(iS={}));var rS;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(rS||(rS={}));var sS;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(sS||(sS={}));var oS;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(oS||(oS={}));var aS;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(aS||(aS={}));var lS;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(lS||(lS={}));var uS;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(uS||(uS={}));var Td;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Td||(Td={}));var cS;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(cS||(cS={}));var fS;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(fS||(fS={}));var dS;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(dS||(dS={}));var jm;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(jm||(jm={}));var hS;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(hS||(hS={}));var pS;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(pS||(pS={}));var eg;(function(n){n.COLLECTION="COLLECTION"})(eg||(eg={}));var mS;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(mS||(mS={}));var gS;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(gS||(gS={}));var yS;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(yS||(yS={}));var _S;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(_S||(_S={}));var vS;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(vS||(vS={}));var ES;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(ES||(ES={}));var TS;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(TS||(TS={}));var SS;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(SS||(SS={}));var AS;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(AS||(AS={}));var CS;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(CS||(CS={}));var IS;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(IS||(IS={}));var wS;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(wS||(wS={}));var RS;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(RS||(RS={}));var bS;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING",n.DISTILLATION="DISTILLATION"})(bS||(bS={}));var NS;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(NS||(NS={}));var xS;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(xS||(xS={}));var MS;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED",n.REGISTERED="REGISTERED"})(MS||(MS={}));var DS;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(DS||(DS={}));var PS;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(PS||(PS={}));var VS;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(VS||(VS={}));var US;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.ACTIVITY_START="ACTIVITY_START",n.ACTIVITY_END="ACTIVITY_END"})(US||(US={}));var LS;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(LS||(LS={}));var kS;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(kS||(kS={}));var OS;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(OS||(OS={}));var FS;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(FS||(FS={}));var qS;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(qS||(qS={}));var BS;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(BS||(BS={}));var Ca;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Ca||(Ca={}));class tg{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class du{get text(){var e,t,i,s,a,u,f,h;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let p="",_=!1;const E=[];for(const T of(h=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&h!==void 0?h:[]){for(const[I,x]of Object.entries(T))I!=="text"&&I!=="thought"&&I!=="thoughtSignature"&&(x!==null||x!==void 0)&&E.push(I);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;_=!0,p+=T.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),_?p:void 0}get data(){var e,t,i,s,a,u,f,h;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let p="";const _=[];for(const E of(h=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&h!==void 0?h:[]){for(const[T,I]of Object.entries(E))T!=="inlineData"&&(I!==null||I!==void 0)&&_.push(T);E.inlineData&&typeof E.inlineData.data=="string"&&(p+=atob(E.inlineData.data))}return _.length>0&&console.warn(`there are non-data parts ${_} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),p.length>0?btoa(p):void 0}get functionCalls(){var e,t,i,s,a,u,f,h;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const p=(h=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||h===void 0?void 0:h.filter(_=>_.functionCall).map(_=>_.functionCall).filter(_=>_!==void 0);if((p==null?void 0:p.length)!==0)return p}get executableCode(){var e,t,i,s,a,u,f,h,p;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const _=(h=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||h===void 0?void 0:h.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((_==null?void 0:_.length)!==0)return(p=_==null?void 0:_[0])===null||p===void 0?void 0:p.code}get codeExecutionResult(){var e,t,i,s,a,u,f,h,p;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const _=(h=(f=(u=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||h===void 0?void 0:h.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((_==null?void 0:_.length)!==0)return(p=_==null?void 0:_[0])===null||p===void 0?void 0:p.output}}class HS{}class GS{}class _k{}class vk{}class Ek{}class Tk{}class zS{}class JS{}class KS{}class Sk{}class Sd{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Sd;let s;const a=e;return t?s=ok(a):s=sk(a),Object.assign(i,s),i}}class YS{}class $S{}class QS{}class WS{}class Ak{}class Ck{}class Ik{}class vy{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new vy,a=hk(e);return Object.assign(i,a),i}}class wk{}class Rk{}class bk{}class Nk{}class XS{}class xk{get text(){var e,t,i;let s="",a=!1;const u=[];for(const f of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[h,p]of Object.entries(f))h!=="text"&&h!=="thought"&&p!==null&&u.push(h);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;a=!0,s+=f.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?s:void 0}get data(){var e,t,i;let s="";const a=[];for(const u of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[f,h]of Object.entries(u))f!=="inlineData"&&h!==null&&a.push(f);u.inlineData&&typeof u.inlineData.data=="string"&&(s+=atob(u.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class Mk{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Ey{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Ey,a=gw(e);return Object.assign(i,a),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ye(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function yw(n,e){const t=Ye(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function _w(n){return Array.isArray(n)?n.map(e=>Ad(e)):[Ad(n)]}function Ad(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function vw(n){const e=Ad(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Ew(n){const e=Ad(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function ZS(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function Tw(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>ZS(e)):[ZS(n)]}function ng(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function jS(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function eA(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function an(n){if(n==null)throw new Error("ContentUnion is required");return ng(n)?n:{role:"user",parts:Tw(n)}}function Ty(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=an(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=an(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>an(t)):[an(e)]}function $n(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(jS(n)||eA(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[an(n)]}const e=[],t=[],i=ng(n[0]);for(const s of n){const a=ng(s);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(s);else{if(jS(s)||eA(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(s)}}return i||e.push({role:"user",parts:Tw(t)}),e}function Dk(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(ms).includes(t[0].toUpperCase())?t[0].toUpperCase():ms.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(ms).includes(i.toUpperCase())?i.toUpperCase():ms.TYPE_UNSPECIFIED})}}function Da(n){const e={},t=["items"],i=["anyOf"],s=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=n.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,n=a[1]):a[1].type==="null"&&(e.nullable=!0,n=a[0])),n.type instanceof Array&&Dk(n.type,e);for(const[u,f]of Object.entries(n))if(f!=null)if(u=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.values(ms).includes(f.toUpperCase())?f.toUpperCase():ms.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=Da(f);else if(i.includes(u)){const h=[];for(const p of f){if(p.type=="null"){e.nullable=!0;continue}h.push(Da(p))}e[u]=h}else if(s.includes(u)){const h={};for(const[p,_]of Object.entries(f))h[p]=Da(_);e[u]=h}else{if(u==="additionalProperties")continue;e[u]=f}return e}function Sy(n){return Da(n)}function Ay(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Cy(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function tl(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Da(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Da(e.response));return n}function nl(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function Pk(n,e,t,i=1){const s=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:s?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:s?`${t}/${e}`:e}function Nr(n,e){if(typeof e!="string")throw new Error("name must be a string");return Pk(n,e,"cachedContents")}function Sw(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Ps(n){return _y(n)}function Vk(n){return n!=null&&typeof n=="object"&&"name"in n}function Uk(n){return n!=null&&typeof n=="object"&&"video"in n}function Lk(n){return n!=null&&typeof n=="object"&&"uri"in n}function Aw(n){var e;let t;if(Vk(n)&&(t=n.name),!(Lk(n)&&(t=n.uri,t===void 0))&&!(Uk(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const s=t.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${t}`);t=s[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function Cw(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function Iw(n){for(const e of["models","tunedModels","publisherModels"])if(kk(n,e))return n[e];return[]}function kk(n,e){return n!==null&&typeof n=="object"&&e in n}function Ok(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function Fk(n,e={}){const t=[],i=new Set;for(const s of n){const a=s.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const u=Ok(s,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function ww(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,s=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(s>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function qk(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Rw(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const s=t.inlinedResponses;if(!Array.isArray(s)||s.length===0)return n;let a=!1;for(const u of s){if(typeof u!="object"||u===null)continue;const h=u.response;if(typeof h!="object"||h===null)continue;if(h.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function il(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function bw(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bk(n){const e={},t=d(n,["responsesFile"]);t!=null&&m(e,["fileName"],t);const i=d(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>T2(u))),m(e,["inlinedResponses"],a)}const s=d(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["inlinedEmbedContentResponses"],a)}return e}function Hk(n){const e={},t=d(n,["predictionsFormat"]);t!=null&&m(e,["format"],t);const i=d(n,["gcsDestination","outputUriPrefix"]);i!=null&&m(e,["gcsUri"],i);const s=d(n,["bigqueryDestination","outputUri"]);return s!=null&&m(e,["bigqueryUri"],s),e}function Gk(n){const e={},t=d(n,["format"]);t!=null&&m(e,["predictionsFormat"],t);const i=d(n,["gcsUri"]);i!=null&&m(e,["gcsDestination","outputUriPrefix"],i);const s=d(n,["bigqueryUri"]);if(s!=null&&m(e,["bigqueryDestination","outputUri"],s),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function ed(n){const e={},t=d(n,["name"]);t!=null&&m(e,["name"],t);const i=d(n,["metadata","displayName"]);i!=null&&m(e,["displayName"],i);const s=d(n,["metadata","state"]);s!=null&&m(e,["state"],bw(s));const a=d(n,["metadata","createTime"]);a!=null&&m(e,["createTime"],a);const u=d(n,["metadata","endTime"]);u!=null&&m(e,["endTime"],u);const f=d(n,["metadata","updateTime"]);f!=null&&m(e,["updateTime"],f);const h=d(n,["metadata","model"]);h!=null&&m(e,["model"],h);const p=d(n,["metadata","output"]);return p!=null&&m(e,["dest"],Bk(Rw(p))),e}function ig(n){const e={},t=d(n,["name"]);t!=null&&m(e,["name"],t);const i=d(n,["displayName"]);i!=null&&m(e,["displayName"],i);const s=d(n,["state"]);s!=null&&m(e,["state"],bw(s));const a=d(n,["error"]);a!=null&&m(e,["error"],a);const u=d(n,["createTime"]);u!=null&&m(e,["createTime"],u);const f=d(n,["startTime"]);f!=null&&m(e,["startTime"],f);const h=d(n,["endTime"]);h!=null&&m(e,["endTime"],h);const p=d(n,["updateTime"]);p!=null&&m(e,["updateTime"],p);const _=d(n,["model"]);_!=null&&m(e,["model"],_);const E=d(n,["inputConfig"]);E!=null&&m(e,["src"],zk(E));const T=d(n,["outputConfig"]);T!=null&&m(e,["dest"],Hk(Rw(T)));const I=d(n,["completionStats"]);return I!=null&&m(e,["completionStats"],I),e}function zk(n){const e={},t=d(n,["instancesFormat"]);t!=null&&m(e,["format"],t);const i=d(n,["gcsSource","uris"]);i!=null&&m(e,["gcsUri"],i);const s=d(n,["bigquerySource","inputUri"]);return s!=null&&m(e,["bigqueryUri"],s),e}function Jk(n,e){const t={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=d(e,["fileName"]);i!=null&&m(t,["fileName"],i);const s=d(e,["inlinedRequests"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>E2(n,u))),m(t,["requests","requests"],a)}return t}function Kk(n){const e={},t=d(n,["format"]);t!=null&&m(e,["instancesFormat"],t);const i=d(n,["gcsUri"]);i!=null&&m(e,["gcsSource","uris"],i);const s=d(n,["bigqueryUri"]);if(s!=null&&m(e,["bigquerySource","inputUri"],s),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Yk(n){const e={},t=d(n,["data"]);if(t!=null&&m(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function $k(n,e){const t={},i=d(e,["name"]);return i!=null&&m(t,["_url","name"],il(n,i)),t}function Qk(n,e){const t={},i=d(e,["name"]);return i!=null&&m(t,["_url","name"],il(n,i)),t}function Wk(n){const e={},t=d(n,["content"]);t!=null&&m(e,["content"],t);const i=d(n,["citationMetadata"]);i!=null&&m(e,["citationMetadata"],Xk(i));const s=d(n,["tokenCount"]);s!=null&&m(e,["tokenCount"],s);const a=d(n,["finishReason"]);a!=null&&m(e,["finishReason"],a);const u=d(n,["avgLogprobs"]);u!=null&&m(e,["avgLogprobs"],u);const f=d(n,["groundingMetadata"]);f!=null&&m(e,["groundingMetadata"],f);const h=d(n,["index"]);h!=null&&m(e,["index"],h);const p=d(n,["logprobsResult"]);p!=null&&m(e,["logprobsResult"],p);const _=d(n,["safetyRatings"]);if(_!=null){let T=_;Array.isArray(T)&&(T=T.map(I=>I)),m(e,["safetyRatings"],T)}const E=d(n,["urlContextMetadata"]);return E!=null&&m(e,["urlContextMetadata"],E),e}function Xk(n){const e={},t=d(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>s)),m(e,["citations"],i)}return e}function Nw(n){const e={},t=d(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>b2(a))),m(e,["parts"],s)}const i=d(n,["role"]);return i!=null&&m(e,["role"],i),e}function Zk(n,e){const t={},i=d(n,["displayName"]);if(e!==void 0&&i!=null&&m(e,["batch","displayName"],i),d(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function jk(n,e){const t={},i=d(n,["displayName"]);e!==void 0&&i!=null&&m(e,["displayName"],i);const s=d(n,["dest"]);return e!==void 0&&s!=null&&m(e,["outputConfig"],Gk(qk(s))),t}function tA(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["_url","model"],Ye(n,i));const s=d(e,["src"]);s!=null&&m(t,["batch","inputConfig"],Jk(n,ww(n,s)));const a=d(e,["config"]);return a!=null&&Zk(a,t),t}function e2(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["model"],Ye(n,i));const s=d(e,["src"]);s!=null&&m(t,["inputConfig"],Kk(ww(n,s)));const a=d(e,["config"]);return a!=null&&jk(a,t),t}function t2(n,e){const t={},i=d(n,["displayName"]);return e!==void 0&&i!=null&&m(e,["batch","displayName"],i),t}function n2(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["_url","model"],Ye(n,i));const s=d(e,["src"]);s!=null&&m(t,["batch","inputConfig"],u2(n,s));const a=d(e,["config"]);return a!=null&&t2(a,t),t}function i2(n,e){const t={},i=d(e,["name"]);return i!=null&&m(t,["_url","name"],il(n,i)),t}function r2(n,e){const t={},i=d(e,["name"]);return i!=null&&m(t,["_url","name"],il(n,i)),t}function s2(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["name"]);i!=null&&m(e,["name"],i);const s=d(n,["done"]);s!=null&&m(e,["done"],s);const a=d(n,["error"]);return a!=null&&m(e,["error"],a),e}function o2(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["name"]);i!=null&&m(e,["name"],i);const s=d(n,["done"]);s!=null&&m(e,["done"],s);const a=d(n,["error"]);return a!=null&&m(e,["error"],a),e}function a2(n,e){const t={},i=d(e,["contents"]);if(i!=null){let a=Ty(n,i);Array.isArray(a)&&(a=a.map(u=>u)),m(t,["requests[]","request","content"],a)}const s=d(e,["config"]);return s!=null&&(m(t,["_self"],l2(s,t)),ik(t,{"requests[].*":"requests[].request.*"})),t}function l2(n,e){const t={},i=d(n,["taskType"]);e!==void 0&&i!=null&&m(e,["requests[]","taskType"],i);const s=d(n,["title"]);e!==void 0&&s!=null&&m(e,["requests[]","title"],s);const a=d(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&m(e,["requests[]","outputDimensionality"],a),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function u2(n,e){const t={},i=d(e,["fileName"]);i!=null&&m(t,["file_name"],i);const s=d(e,["inlinedRequests"]);return s!=null&&m(t,["requests"],a2(n,s)),t}function c2(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function f2(n){const e={},t=d(n,["id"]);t!=null&&m(e,["id"],t);const i=d(n,["args"]);i!=null&&m(e,["args"],i);const s=d(n,["name"]);if(s!=null&&m(e,["name"],s),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function d2(n){const e={},t=d(n,["allowedFunctionNames"]);t!=null&&m(e,["allowedFunctionNames"],t);const i=d(n,["mode"]);if(i!=null&&m(e,["mode"],i),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function h2(n,e,t){const i={},s=d(e,["systemInstruction"]);t!==void 0&&s!=null&&m(t,["systemInstruction"],Nw(an(s)));const a=d(e,["temperature"]);a!=null&&m(i,["temperature"],a);const u=d(e,["topP"]);u!=null&&m(i,["topP"],u);const f=d(e,["topK"]);f!=null&&m(i,["topK"],f);const h=d(e,["candidateCount"]);h!=null&&m(i,["candidateCount"],h);const p=d(e,["maxOutputTokens"]);p!=null&&m(i,["maxOutputTokens"],p);const _=d(e,["stopSequences"]);_!=null&&m(i,["stopSequences"],_);const E=d(e,["responseLogprobs"]);E!=null&&m(i,["responseLogprobs"],E);const T=d(e,["logprobs"]);T!=null&&m(i,["logprobs"],T);const I=d(e,["presencePenalty"]);I!=null&&m(i,["presencePenalty"],I);const x=d(e,["frequencyPenalty"]);x!=null&&m(i,["frequencyPenalty"],x);const U=d(e,["seed"]);U!=null&&m(i,["seed"],U);const P=d(e,["responseMimeType"]);P!=null&&m(i,["responseMimeType"],P);const G=d(e,["responseSchema"]);G!=null&&m(i,["responseSchema"],Sy(G));const Q=d(e,["responseJsonSchema"]);if(Q!=null&&m(i,["responseJsonSchema"],Q),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const z=d(e,["safetySettings"]);if(t!==void 0&&z!=null){let V=z;Array.isArray(V)&&(V=V.map(Me=>N2(Me))),m(t,["safetySettings"],V)}const ae=d(e,["tools"]);if(t!==void 0&&ae!=null){let V=nl(ae);Array.isArray(V)&&(V=V.map(Me=>M2(tl(Me)))),m(t,["tools"],V)}const Z=d(e,["toolConfig"]);if(t!==void 0&&Z!=null&&m(t,["toolConfig"],x2(Z)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ue=d(e,["cachedContent"]);t!==void 0&&ue!=null&&m(t,["cachedContent"],Nr(n,ue));const D=d(e,["responseModalities"]);D!=null&&m(i,["responseModalities"],D);const M=d(e,["mediaResolution"]);M!=null&&m(i,["mediaResolution"],M);const N=d(e,["speechConfig"]);if(N!=null&&m(i,["speechConfig"],Ay(N)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const k=d(e,["thinkingConfig"]);k!=null&&m(i,["thinkingConfig"],k);const O=d(e,["imageConfig"]);O!=null&&m(i,["imageConfig"],v2(O));const B=d(e,["enableEnhancedCivicAnswers"]);if(B!=null&&m(i,["enableEnhancedCivicAnswers"],B),d(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function p2(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(p=>Wk(p))),m(e,["candidates"],h)}const s=d(n,["modelVersion"]);s!=null&&m(e,["modelVersion"],s);const a=d(n,["promptFeedback"]);a!=null&&m(e,["promptFeedback"],a);const u=d(n,["responseId"]);u!=null&&m(e,["responseId"],u);const f=d(n,["usageMetadata"]);return f!=null&&m(e,["usageMetadata"],f),e}function m2(n,e){const t={},i=d(e,["name"]);return i!=null&&m(t,["_url","name"],il(n,i)),t}function g2(n,e){const t={},i=d(e,["name"]);return i!=null&&m(t,["_url","name"],il(n,i)),t}function y2(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function _2(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function v2(n){const e={},t=d(n,["aspectRatio"]);t!=null&&m(e,["aspectRatio"],t);const i=d(n,["imageSize"]);if(i!=null&&m(e,["imageSize"],i),d(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(d(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function E2(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["request","model"],Ye(n,i));const s=d(e,["contents"]);if(s!=null){let f=$n(s);Array.isArray(f)&&(f=f.map(h=>Nw(h))),m(t,["request","contents"],f)}const a=d(e,["metadata"]);a!=null&&m(t,["metadata"],a);const u=d(e,["config"]);return u!=null&&m(t,["request","generationConfig"],h2(n,u,d(t,["request"],{}))),t}function T2(n){const e={},t=d(n,["response"]);t!=null&&m(e,["response"],p2(t));const i=d(n,["metadata"]);i!=null&&m(e,["metadata"],i);const s=d(n,["error"]);return s!=null&&m(e,["error"],s),e}function S2(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const s=d(n,["pageToken"]);if(e!==void 0&&s!=null&&m(e,["_query","pageToken"],s),d(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function A2(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const s=d(n,["pageToken"]);e!==void 0&&s!=null&&m(e,["_query","pageToken"],s);const a=d(n,["filter"]);return e!==void 0&&a!=null&&m(e,["_query","filter"],a),t}function C2(n){const e={},t=d(n,["config"]);return t!=null&&S2(t,e),e}function I2(n){const e={},t=d(n,["config"]);return t!=null&&A2(t,e),e}function w2(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const s=d(n,["operations"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>ed(u))),m(e,["batchJobs"],a)}return e}function R2(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const s=d(n,["batchPredictionJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>ig(u))),m(e,["batchJobs"],a)}return e}function b2(n){const e={},t=d(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const s=d(n,["executableCode"]);s!=null&&m(e,["executableCode"],s);const a=d(n,["fileData"]);a!=null&&m(e,["fileData"],c2(a));const u=d(n,["functionCall"]);u!=null&&m(e,["functionCall"],f2(u));const f=d(n,["functionResponse"]);f!=null&&m(e,["functionResponse"],f);const h=d(n,["inlineData"]);h!=null&&m(e,["inlineData"],Yk(h));const p=d(n,["text"]);p!=null&&m(e,["text"],p);const _=d(n,["thought"]);_!=null&&m(e,["thought"],_);const E=d(n,["thoughtSignature"]);E!=null&&m(e,["thoughtSignature"],E);const T=d(n,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function N2(n){const e={},t=d(n,["category"]);if(t!=null&&m(e,["category"],t),d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=d(n,["threshold"]);return i!=null&&m(e,["threshold"],i),e}function x2(n){const e={},t=d(n,["retrievalConfig"]);t!=null&&m(e,["retrievalConfig"],t);const i=d(n,["functionCallingConfig"]);return i!=null&&m(e,["functionCallingConfig"],d2(i)),e}function M2(n){const e={};if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=d(n,["computerUse"]);t!=null&&m(e,["computerUse"],t);const i=d(n,["fileSearch"]);i!=null&&m(e,["fileSearch"],i);const s=d(n,["codeExecution"]);if(s!=null&&m(e,["codeExecution"],s),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=d(n,["functionDeclarations"]);if(a!=null){let _=a;Array.isArray(_)&&(_=_.map(E=>E)),m(e,["functionDeclarations"],_)}const u=d(n,["googleMaps"]);u!=null&&m(e,["googleMaps"],y2(u));const f=d(n,["googleSearch"]);f!=null&&m(e,["googleSearch"],_2(f));const h=d(n,["googleSearchRetrieval"]);h!=null&&m(e,["googleSearchRetrieval"],h);const p=d(n,["urlContext"]);return p!=null&&m(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var wr;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(wr||(wr={}));class Ro{constructor(e,t,i,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,s)}init(e,t,i){var s,a;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!i||Object.keys(i).length===0?u={config:{}}:typeof i=="object"?u=Object.assign({},i):u=i,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(a=(s=u.config)===null||s===void 0?void 0:s.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class D2 extends br{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Ro(wr.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=tA(this.apiClient,e),i=t._url,s=de("{model}:batchGenerateContent",i),f=t.batch.inputConfig.requests,h=f.requests,p=[];for(const _ of h){const E=Object.assign({},_);if(E.systemInstruction){const T=E.systemInstruction;delete E.systemInstruction;const I=E.request;I.systemInstruction=T,E.request=I}p.push(E)}return f.requests=p,delete t.config,delete t._url,delete t._query,{path:s,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const i=t?Object.assign({},t):{},s=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${s}`),i.dest===void 0){const a=this.getGcsUri(e),u=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${s}`;else if(u)i.dest=`${u}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,s,a;let u,f="",h={};if(this.apiClient.isVertexAI()){const p=e2(this.apiClient,e);return f=de("batchPredictionJobs",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>ig(_))}else{const p=tA(this.apiClient,e);return f=de("{model}:batchGenerateContent",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>ed(_))}}async createEmbeddingsInternal(e){var t,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=n2(this.apiClient,e);return a=de("{model}:asyncBatchEmbedContent",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),s.then(h=>ed(h))}}async get(e){var t,i,s,a;let u,f="",h={};if(this.apiClient.isVertexAI()){const p=g2(this.apiClient,e);return f=de("batchPredictionJobs/{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>ig(_))}else{const p=m2(this.apiClient,e);return f=de("batches/{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>ed(_))}}async cancel(e){var t,i,s,a;let u="",f={};if(this.apiClient.isVertexAI()){const h=Qk(this.apiClient,e);u=de("batchPredictionJobs/{name}:cancel",h._url),f=h._query,delete h._url,delete h._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const h=$k(this.apiClient,e);u=de("batches/{name}:cancel",h._url),f=h._query,delete h._url,delete h._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var t,i,s,a;let u,f="",h={};if(this.apiClient.isVertexAI()){const p=I2(e);return f=de("batchPredictionJobs",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=R2(_),T=new XS;return Object.assign(T,E),T})}else{const p=C2(e);return f=de("batches",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=w2(_),T=new XS;return Object.assign(T,E),T})}}async delete(e){var t,i,s,a;let u,f="",h={};if(this.apiClient.isVertexAI()){const p=r2(this.apiClient,e);return f=de("batchPredictionJobs/{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>o2(_))}else{const p=i2(this.apiClient,e);return f=de("batches/{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>s2(_))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function P2(n){const e={},t=d(n,["data"]);if(t!=null&&m(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function nA(n){const e={},t=d(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>nO(a))),m(e,["parts"],s)}const i=d(n,["role"]);return i!=null&&m(e,["role"],i),e}function V2(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const s=d(n,["expireTime"]);e!==void 0&&s!=null&&m(e,["expireTime"],s);const a=d(n,["displayName"]);e!==void 0&&a!=null&&m(e,["displayName"],a);const u=d(n,["contents"]);if(e!==void 0&&u!=null){let _=$n(u);Array.isArray(_)&&(_=_.map(E=>nA(E))),m(e,["contents"],_)}const f=d(n,["systemInstruction"]);e!==void 0&&f!=null&&m(e,["systemInstruction"],nA(an(f)));const h=d(n,["tools"]);if(e!==void 0&&h!=null){let _=h;Array.isArray(_)&&(_=_.map(E=>rO(E))),m(e,["tools"],_)}const p=d(n,["toolConfig"]);if(e!==void 0&&p!=null&&m(e,["toolConfig"],iO(p)),d(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function U2(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const s=d(n,["expireTime"]);e!==void 0&&s!=null&&m(e,["expireTime"],s);const a=d(n,["displayName"]);e!==void 0&&a!=null&&m(e,["displayName"],a);const u=d(n,["contents"]);if(e!==void 0&&u!=null){let E=$n(u);Array.isArray(E)&&(E=E.map(T=>T)),m(e,["contents"],E)}const f=d(n,["systemInstruction"]);e!==void 0&&f!=null&&m(e,["systemInstruction"],an(f));const h=d(n,["tools"]);if(e!==void 0&&h!=null){let E=h;Array.isArray(E)&&(E=E.map(T=>sO(T))),m(e,["tools"],E)}const p=d(n,["toolConfig"]);e!==void 0&&p!=null&&m(e,["toolConfig"],p);const _=d(n,["kmsKeyName"]);return e!==void 0&&_!=null&&m(e,["encryption_spec","kmsKeyName"],_),t}function L2(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["model"],yw(n,i));const s=d(e,["config"]);return s!=null&&V2(s,t),t}function k2(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["model"],yw(n,i));const s=d(e,["config"]);return s!=null&&U2(s,t),t}function O2(n,e){const t={},i=d(e,["name"]);return i!=null&&m(t,["_url","name"],Nr(n,i)),t}function F2(n,e){const t={},i=d(e,["name"]);return i!=null&&m(t,["_url","name"],Nr(n,i)),t}function q2(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function B2(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function H2(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function G2(n){const e={},t=d(n,["id"]);t!=null&&m(e,["id"],t);const i=d(n,["args"]);i!=null&&m(e,["args"],i);const s=d(n,["name"]);if(s!=null&&m(e,["name"],s),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function z2(n){const e={},t=d(n,["allowedFunctionNames"]);t!=null&&m(e,["allowedFunctionNames"],t);const i=d(n,["mode"]);if(i!=null&&m(e,["mode"],i),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function J2(n){const e={},t=d(n,["description"]);t!=null&&m(e,["description"],t);const i=d(n,["name"]);i!=null&&m(e,["name"],i);const s=d(n,["parameters"]);s!=null&&m(e,["parameters"],s);const a=d(n,["parametersJsonSchema"]);a!=null&&m(e,["parametersJsonSchema"],a);const u=d(n,["response"]);u!=null&&m(e,["response"],u);const f=d(n,["responseJsonSchema"]);if(f!=null&&m(e,["responseJsonSchema"],f),d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function K2(n,e){const t={},i=d(e,["name"]);return i!=null&&m(t,["_url","name"],Nr(n,i)),t}function Y2(n,e){const t={},i=d(e,["name"]);return i!=null&&m(t,["_url","name"],Nr(n,i)),t}function $2(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function Q2(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function W2(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const s=d(n,["pageToken"]);return e!==void 0&&s!=null&&m(e,["_query","pageToken"],s),t}function X2(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const s=d(n,["pageToken"]);return e!==void 0&&s!=null&&m(e,["_query","pageToken"],s),t}function Z2(n){const e={},t=d(n,["config"]);return t!=null&&W2(t,e),e}function j2(n){const e={},t=d(n,["config"]);return t!=null&&X2(t,e),e}function eO(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const s=d(n,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["cachedContents"],a)}return e}function tO(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const s=d(n,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["cachedContents"],a)}return e}function nO(n){const e={},t=d(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const s=d(n,["executableCode"]);s!=null&&m(e,["executableCode"],s);const a=d(n,["fileData"]);a!=null&&m(e,["fileData"],H2(a));const u=d(n,["functionCall"]);u!=null&&m(e,["functionCall"],G2(u));const f=d(n,["functionResponse"]);f!=null&&m(e,["functionResponse"],f);const h=d(n,["inlineData"]);h!=null&&m(e,["inlineData"],P2(h));const p=d(n,["text"]);p!=null&&m(e,["text"],p);const _=d(n,["thought"]);_!=null&&m(e,["thought"],_);const E=d(n,["thoughtSignature"]);E!=null&&m(e,["thoughtSignature"],E);const T=d(n,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function iO(n){const e={},t=d(n,["retrievalConfig"]);t!=null&&m(e,["retrievalConfig"],t);const i=d(n,["functionCallingConfig"]);return i!=null&&m(e,["functionCallingConfig"],z2(i)),e}function rO(n){const e={};if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=d(n,["computerUse"]);t!=null&&m(e,["computerUse"],t);const i=d(n,["fileSearch"]);i!=null&&m(e,["fileSearch"],i);const s=d(n,["codeExecution"]);if(s!=null&&m(e,["codeExecution"],s),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=d(n,["functionDeclarations"]);if(a!=null){let _=a;Array.isArray(_)&&(_=_.map(E=>E)),m(e,["functionDeclarations"],_)}const u=d(n,["googleMaps"]);u!=null&&m(e,["googleMaps"],$2(u));const f=d(n,["googleSearch"]);f!=null&&m(e,["googleSearch"],Q2(f));const h=d(n,["googleSearchRetrieval"]);h!=null&&m(e,["googleSearchRetrieval"],h);const p=d(n,["urlContext"]);return p!=null&&m(e,["urlContext"],p),e}function sO(n){const e={},t=d(n,["retrieval"]);t!=null&&m(e,["retrieval"],t);const i=d(n,["computerUse"]);if(i!=null&&m(e,["computerUse"],i),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=d(n,["codeExecution"]);s!=null&&m(e,["codeExecution"],s);const a=d(n,["enterpriseWebSearch"]);a!=null&&m(e,["enterpriseWebSearch"],a);const u=d(n,["functionDeclarations"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(T=>J2(T))),m(e,["functionDeclarations"],E)}const f=d(n,["googleMaps"]);f!=null&&m(e,["googleMaps"],f);const h=d(n,["googleSearch"]);h!=null&&m(e,["googleSearch"],h);const p=d(n,["googleSearchRetrieval"]);p!=null&&m(e,["googleSearchRetrieval"],p);const _=d(n,["urlContext"]);return _!=null&&m(e,["urlContext"],_),e}function oO(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const s=d(n,["expireTime"]);return e!==void 0&&s!=null&&m(e,["expireTime"],s),t}function aO(n,e){const t={},i=d(n,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const s=d(n,["expireTime"]);return e!==void 0&&s!=null&&m(e,["expireTime"],s),t}function lO(n,e){const t={},i=d(e,["name"]);i!=null&&m(t,["_url","name"],Nr(n,i));const s=d(e,["config"]);return s!=null&&oO(s,t),t}function uO(n,e){const t={},i=d(e,["name"]);i!=null&&m(t,["_url","name"],Nr(n,i));const s=d(e,["config"]);return s!=null&&aO(s,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cO extends br{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Ro(wr.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,s,a;let u,f="",h={};if(this.apiClient.isVertexAI()){const p=k2(this.apiClient,e);return f=de("cachedContents",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const p=L2(this.apiClient,e);return f=de("cachedContents",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async get(e){var t,i,s,a;let u,f="",h={};if(this.apiClient.isVertexAI()){const p=Y2(this.apiClient,e);return f=de("{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const p=K2(this.apiClient,e);return f=de("{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async delete(e){var t,i,s,a;let u,f="",h={};if(this.apiClient.isVertexAI()){const p=F2(this.apiClient,e);return f=de("{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=B2(_),T=new QS;return Object.assign(T,E),T})}else{const p=O2(this.apiClient,e);return f=de("{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=q2(_),T=new QS;return Object.assign(T,E),T})}}async update(e){var t,i,s,a;let u,f="",h={};if(this.apiClient.isVertexAI()){const p=uO(this.apiClient,e);return f=de("{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const p=lO(this.apiClient,e);return f=de("{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async listInternal(e){var t,i,s,a;let u,f="",h={};if(this.apiClient.isVertexAI()){const p=j2(e);return f=de("cachedContents",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=tO(_),T=new WS;return Object.assign(T,E),T})}else{const p=Z2(e);return f=de("cachedContents",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=eO(_),T=new WS;return Object.assign(T,E),T})}}}function Cd(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(t[i[s]]=n[i[s]]);return t}function iA(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ie(n){return this instanceof Ie?(this.v=n,this):new Ie(n)}function gi(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",u),s[Symbol.asyncIterator]=function(){return this},s;function u(I){return function(x){return Promise.resolve(x).then(I,E)}}function f(I,x){i[I]&&(s[I]=function(U){return new Promise(function(P,G){a.push([I,U,P,G])>1||h(I,U)})},x&&(s[I]=x(s[I])))}function h(I,x){try{p(i[I](x))}catch(U){T(a[0][3],U)}}function p(I){I.value instanceof Ie?Promise.resolve(I.value.v).then(_,E):T(a[0][2],I)}function _(I){h("next",I)}function E(I){h("throw",I)}function T(I,x){I(x),a.shift(),a.length&&h(a[0][0],a[0][1])}}function yi(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof iA=="function"?iA(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=n[a]&&function(u){return new Promise(function(f,h){u=n[a](u),s(f,h,u.done,u.value)})}}function s(a,u,f,h){Promise.resolve(h).then(function(p){a({value:p,done:f})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fO(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:xw(t)}function xw(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function dO(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function rA(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const s=[];let a=!0;for(;i<t&&n[i].role==="model";)s.push(n[i]),a&&!xw(n[i])&&(a=!1),i++;a?e.push(...s):e.pop()}return e}class hO{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new pO(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class pO{constructor(e,t,i,s={},a=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=s,this.history=a,this.sendPromise=Promise.resolve(),dO(a)}async sendMessage(e){var t;await this.sendPromise;const i=an(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var a,u,f;const h=await s,p=(u=(a=h.candidates)===null||a===void 0?void 0:a[0])===null||u===void 0?void 0:u.content,_=h.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let T=[];_!=null&&(T=(f=_.slice(E))!==null&&f!==void 0?f:[]);const I=p?[p]:[];this.recordHistory(i,I,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var t;await this.sendPromise;const i=an(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const a=await s;return this.processStreamResponse(a,i)}getHistory(e=!1){const t=e?rA(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return gi(this,arguments,function*(){var s,a,u,f,h,p;const _=[];try{for(var E=!0,T=yi(e),I;I=yield Ie(T.next()),s=I.done,!s;E=!0){f=I.value,E=!1;const x=f;if(fO(x)){const U=(p=(h=x.candidates)===null||h===void 0?void 0:h[0])===null||p===void 0?void 0:p.content;U!==void 0&&_.push(U)}yield yield Ie(x)}}catch(x){a={error:x}}finally{try{!E&&!s&&(u=T.return)&&(yield Ie(u.call(T)))}finally{if(a)throw a.error}}this.recordHistory(t,_)})}recordHistory(e,t,i){let s=[];t.length>0&&t.every(a=>a.role!==void 0)?s=t:s.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...rA(i)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fu extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Fu.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mO(n){const e={},t=d(n,["file"]);return t!=null&&m(e,["file"],t),e}function gO(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function yO(n){const e={},t=d(n,["name"]);return t!=null&&m(e,["_url","file"],Aw(t)),e}function _O(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function vO(n){const e={},t=d(n,["name"]);return t!=null&&m(e,["_url","file"],Aw(t)),e}function EO(n){const e={},t=d(n,["uris"]);return t!=null&&m(e,["uris"],t),e}function TO(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const s=d(n,["pageToken"]);return e!==void 0&&s!=null&&m(e,["_query","pageToken"],s),t}function SO(n){const e={},t=d(n,["config"]);return t!=null&&TO(t,e),e}function AO(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const s=d(n,["files"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["files"],a)}return e}function CO(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["files"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),m(e,["files"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class IO extends br{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Ro(wr.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var t,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=SO(e);return a=de("files",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:h.headers},_})),s.then(h=>{const p=AO(h),_=new wk;return Object.assign(_,p),_})}}async createInternal(e){var t,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=mO(e);return a=de("upload/v1beta/files",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),s.then(h=>{const p=gO(h),_=new Rk;return Object.assign(_,p),_})}}async get(e){var t,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=vO(e);return a=de("files/{file}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async delete(e){var t,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=yO(e);return a=de("files/{file}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:h.headers},_})),s.then(h=>{const p=_O(h),_=new bk;return Object.assign(_,p),_})}}async registerFilesInternal(e){var t,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=EO(e);return a=de("files:register",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),s.then(h=>{const p=CO(h),_=new Nk;return Object.assign(_,p),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function td(n){const e={},t=d(n,["data"]);if(t!=null&&m(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function wO(n){const e={},t=d(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>HO(a))),m(e,["parts"],s)}const i=d(n,["role"]);return i!=null&&m(e,["role"],i),e}function RO(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function bO(n){const e={},t=d(n,["id"]);t!=null&&m(e,["id"],t);const i=d(n,["args"]);i!=null&&m(e,["args"],i);const s=d(n,["name"]);if(s!=null&&m(e,["name"],s),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function NO(n){const e={},t=d(n,["description"]);t!=null&&m(e,["description"],t);const i=d(n,["name"]);i!=null&&m(e,["name"],i);const s=d(n,["parameters"]);s!=null&&m(e,["parameters"],s);const a=d(n,["parametersJsonSchema"]);a!=null&&m(e,["parametersJsonSchema"],a);const u=d(n,["response"]);u!=null&&m(e,["response"],u);const f=d(n,["responseJsonSchema"]);if(f!=null&&m(e,["responseJsonSchema"],f),d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function xO(n){const e={},t=d(n,["modelSelectionConfig"]);t!=null&&m(e,["modelConfig"],t);const i=d(n,["responseJsonSchema"]);i!=null&&m(e,["responseJsonSchema"],i);const s=d(n,["audioTimestamp"]);s!=null&&m(e,["audioTimestamp"],s);const a=d(n,["candidateCount"]);a!=null&&m(e,["candidateCount"],a);const u=d(n,["enableAffectiveDialog"]);u!=null&&m(e,["enableAffectiveDialog"],u);const f=d(n,["frequencyPenalty"]);f!=null&&m(e,["frequencyPenalty"],f);const h=d(n,["logprobs"]);h!=null&&m(e,["logprobs"],h);const p=d(n,["maxOutputTokens"]);p!=null&&m(e,["maxOutputTokens"],p);const _=d(n,["mediaResolution"]);_!=null&&m(e,["mediaResolution"],_);const E=d(n,["presencePenalty"]);E!=null&&m(e,["presencePenalty"],E);const T=d(n,["responseLogprobs"]);T!=null&&m(e,["responseLogprobs"],T);const I=d(n,["responseMimeType"]);I!=null&&m(e,["responseMimeType"],I);const x=d(n,["responseModalities"]);x!=null&&m(e,["responseModalities"],x);const U=d(n,["responseSchema"]);U!=null&&m(e,["responseSchema"],U);const P=d(n,["routingConfig"]);P!=null&&m(e,["routingConfig"],P);const G=d(n,["seed"]);G!=null&&m(e,["seed"],G);const Q=d(n,["speechConfig"]);Q!=null&&m(e,["speechConfig"],Q);const z=d(n,["stopSequences"]);z!=null&&m(e,["stopSequences"],z);const ae=d(n,["temperature"]);ae!=null&&m(e,["temperature"],ae);const Z=d(n,["thinkingConfig"]);Z!=null&&m(e,["thinkingConfig"],Z);const ue=d(n,["topK"]);ue!=null&&m(e,["topK"],ue);const D=d(n,["topP"]);if(D!=null&&m(e,["topP"],D),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function MO(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function DO(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function PO(n,e){const t={},i=d(n,["generationConfig"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig"],i);const s=d(n,["responseModalities"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig","responseModalities"],s);const a=d(n,["temperature"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","temperature"],a);const u=d(n,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const f=d(n,["topK"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","topK"],f);const h=d(n,["maxOutputTokens"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","maxOutputTokens"],h);const p=d(n,["mediaResolution"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","mediaResolution"],p);const _=d(n,["seed"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","seed"],_);const E=d(n,["speechConfig"]);e!==void 0&&E!=null&&m(e,["setup","generationConfig","speechConfig"],Cy(E));const T=d(n,["thinkingConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","thinkingConfig"],T);const I=d(n,["enableAffectiveDialog"]);e!==void 0&&I!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],I);const x=d(n,["systemInstruction"]);e!==void 0&&x!=null&&m(e,["setup","systemInstruction"],wO(an(x)));const U=d(n,["tools"]);if(e!==void 0&&U!=null){let ue=nl(U);Array.isArray(ue)&&(ue=ue.map(D=>zO(tl(D)))),m(e,["setup","tools"],ue)}const P=d(n,["sessionResumption"]);e!==void 0&&P!=null&&m(e,["setup","sessionResumption"],GO(P));const G=d(n,["inputAudioTranscription"]);e!==void 0&&G!=null&&m(e,["setup","inputAudioTranscription"],G);const Q=d(n,["outputAudioTranscription"]);e!==void 0&&Q!=null&&m(e,["setup","outputAudioTranscription"],Q);const z=d(n,["realtimeInputConfig"]);e!==void 0&&z!=null&&m(e,["setup","realtimeInputConfig"],z);const ae=d(n,["contextWindowCompression"]);e!==void 0&&ae!=null&&m(e,["setup","contextWindowCompression"],ae);const Z=d(n,["proactivity"]);if(e!==void 0&&Z!=null&&m(e,["setup","proactivity"],Z),d(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function VO(n,e){const t={},i=d(n,["generationConfig"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig"],xO(i));const s=d(n,["responseModalities"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig","responseModalities"],s);const a=d(n,["temperature"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","temperature"],a);const u=d(n,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const f=d(n,["topK"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","topK"],f);const h=d(n,["maxOutputTokens"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","maxOutputTokens"],h);const p=d(n,["mediaResolution"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","mediaResolution"],p);const _=d(n,["seed"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","seed"],_);const E=d(n,["speechConfig"]);e!==void 0&&E!=null&&m(e,["setup","generationConfig","speechConfig"],Cy(E));const T=d(n,["thinkingConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","thinkingConfig"],T);const I=d(n,["enableAffectiveDialog"]);e!==void 0&&I!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],I);const x=d(n,["systemInstruction"]);e!==void 0&&x!=null&&m(e,["setup","systemInstruction"],an(x));const U=d(n,["tools"]);if(e!==void 0&&U!=null){let D=nl(U);Array.isArray(D)&&(D=D.map(M=>JO(tl(M)))),m(e,["setup","tools"],D)}const P=d(n,["sessionResumption"]);e!==void 0&&P!=null&&m(e,["setup","sessionResumption"],P);const G=d(n,["inputAudioTranscription"]);e!==void 0&&G!=null&&m(e,["setup","inputAudioTranscription"],G);const Q=d(n,["outputAudioTranscription"]);e!==void 0&&Q!=null&&m(e,["setup","outputAudioTranscription"],Q);const z=d(n,["realtimeInputConfig"]);e!==void 0&&z!=null&&m(e,["setup","realtimeInputConfig"],z);const ae=d(n,["contextWindowCompression"]);e!==void 0&&ae!=null&&m(e,["setup","contextWindowCompression"],ae);const Z=d(n,["proactivity"]);e!==void 0&&Z!=null&&m(e,["setup","proactivity"],Z);const ue=d(n,["explicitVadSignal"]);return e!==void 0&&ue!=null&&m(e,["setup","explicitVadSignal"],ue),t}function UO(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["setup","model"],Ye(n,i));const s=d(e,["config"]);return s!=null&&m(t,["config"],PO(s,t)),t}function LO(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["setup","model"],Ye(n,i));const s=d(e,["config"]);return s!=null&&m(t,["config"],VO(s,t)),t}function kO(n){const e={},t=d(n,["musicGenerationConfig"]);return t!=null&&m(e,["musicGenerationConfig"],t),e}function OO(n){const e={},t=d(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>s)),m(e,["weightedPrompts"],i)}return e}function FO(n){const e={},t=d(n,["media"]);if(t!=null){let p=_w(t);Array.isArray(p)&&(p=p.map(_=>td(_))),m(e,["mediaChunks"],p)}const i=d(n,["audio"]);i!=null&&m(e,["audio"],td(Ew(i)));const s=d(n,["audioStreamEnd"]);s!=null&&m(e,["audioStreamEnd"],s);const a=d(n,["video"]);a!=null&&m(e,["video"],td(vw(a)));const u=d(n,["text"]);u!=null&&m(e,["text"],u);const f=d(n,["activityStart"]);f!=null&&m(e,["activityStart"],f);const h=d(n,["activityEnd"]);return h!=null&&m(e,["activityEnd"],h),e}function qO(n){const e={},t=d(n,["media"]);if(t!=null){let p=_w(t);Array.isArray(p)&&(p=p.map(_=>_)),m(e,["mediaChunks"],p)}const i=d(n,["audio"]);i!=null&&m(e,["audio"],Ew(i));const s=d(n,["audioStreamEnd"]);s!=null&&m(e,["audioStreamEnd"],s);const a=d(n,["video"]);a!=null&&m(e,["video"],vw(a));const u=d(n,["text"]);u!=null&&m(e,["text"],u);const f=d(n,["activityStart"]);f!=null&&m(e,["activityStart"],f);const h=d(n,["activityEnd"]);return h!=null&&m(e,["activityEnd"],h),e}function BO(n){const e={},t=d(n,["setupComplete"]);t!=null&&m(e,["setupComplete"],t);const i=d(n,["serverContent"]);i!=null&&m(e,["serverContent"],i);const s=d(n,["toolCall"]);s!=null&&m(e,["toolCall"],s);const a=d(n,["toolCallCancellation"]);a!=null&&m(e,["toolCallCancellation"],a);const u=d(n,["usageMetadata"]);u!=null&&m(e,["usageMetadata"],KO(u));const f=d(n,["goAway"]);f!=null&&m(e,["goAway"],f);const h=d(n,["sessionResumptionUpdate"]);h!=null&&m(e,["sessionResumptionUpdate"],h);const p=d(n,["voiceActivityDetectionSignal"]);p!=null&&m(e,["voiceActivityDetectionSignal"],p);const _=d(n,["voiceActivity"]);return _!=null&&m(e,["voiceActivity"],YO(_)),e}function HO(n){const e={},t=d(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const s=d(n,["executableCode"]);s!=null&&m(e,["executableCode"],s);const a=d(n,["fileData"]);a!=null&&m(e,["fileData"],RO(a));const u=d(n,["functionCall"]);u!=null&&m(e,["functionCall"],bO(u));const f=d(n,["functionResponse"]);f!=null&&m(e,["functionResponse"],f);const h=d(n,["inlineData"]);h!=null&&m(e,["inlineData"],td(h));const p=d(n,["text"]);p!=null&&m(e,["text"],p);const _=d(n,["thought"]);_!=null&&m(e,["thought"],_);const E=d(n,["thoughtSignature"]);E!=null&&m(e,["thoughtSignature"],E);const T=d(n,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function GO(n){const e={},t=d(n,["handle"]);if(t!=null&&m(e,["handle"],t),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function zO(n){const e={};if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=d(n,["computerUse"]);t!=null&&m(e,["computerUse"],t);const i=d(n,["fileSearch"]);i!=null&&m(e,["fileSearch"],i);const s=d(n,["codeExecution"]);if(s!=null&&m(e,["codeExecution"],s),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=d(n,["functionDeclarations"]);if(a!=null){let _=a;Array.isArray(_)&&(_=_.map(E=>E)),m(e,["functionDeclarations"],_)}const u=d(n,["googleMaps"]);u!=null&&m(e,["googleMaps"],MO(u));const f=d(n,["googleSearch"]);f!=null&&m(e,["googleSearch"],DO(f));const h=d(n,["googleSearchRetrieval"]);h!=null&&m(e,["googleSearchRetrieval"],h);const p=d(n,["urlContext"]);return p!=null&&m(e,["urlContext"],p),e}function JO(n){const e={},t=d(n,["retrieval"]);t!=null&&m(e,["retrieval"],t);const i=d(n,["computerUse"]);if(i!=null&&m(e,["computerUse"],i),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=d(n,["codeExecution"]);s!=null&&m(e,["codeExecution"],s);const a=d(n,["enterpriseWebSearch"]);a!=null&&m(e,["enterpriseWebSearch"],a);const u=d(n,["functionDeclarations"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(T=>NO(T))),m(e,["functionDeclarations"],E)}const f=d(n,["googleMaps"]);f!=null&&m(e,["googleMaps"],f);const h=d(n,["googleSearch"]);h!=null&&m(e,["googleSearch"],h);const p=d(n,["googleSearchRetrieval"]);p!=null&&m(e,["googleSearchRetrieval"],p);const _=d(n,["urlContext"]);return _!=null&&m(e,["urlContext"],_),e}function KO(n){const e={},t=d(n,["promptTokenCount"]);t!=null&&m(e,["promptTokenCount"],t);const i=d(n,["cachedContentTokenCount"]);i!=null&&m(e,["cachedContentTokenCount"],i);const s=d(n,["candidatesTokenCount"]);s!=null&&m(e,["responseTokenCount"],s);const a=d(n,["toolUsePromptTokenCount"]);a!=null&&m(e,["toolUsePromptTokenCount"],a);const u=d(n,["thoughtsTokenCount"]);u!=null&&m(e,["thoughtsTokenCount"],u);const f=d(n,["totalTokenCount"]);f!=null&&m(e,["totalTokenCount"],f);const h=d(n,["promptTokensDetails"]);if(h!=null){let I=h;Array.isArray(I)&&(I=I.map(x=>x)),m(e,["promptTokensDetails"],I)}const p=d(n,["cacheTokensDetails"]);if(p!=null){let I=p;Array.isArray(I)&&(I=I.map(x=>x)),m(e,["cacheTokensDetails"],I)}const _=d(n,["candidatesTokensDetails"]);if(_!=null){let I=_;Array.isArray(I)&&(I=I.map(x=>x)),m(e,["responseTokensDetails"],I)}const E=d(n,["toolUsePromptTokensDetails"]);if(E!=null){let I=E;Array.isArray(I)&&(I=I.map(x=>x)),m(e,["toolUsePromptTokensDetails"],I)}const T=d(n,["trafficType"]);return T!=null&&m(e,["trafficType"],T),e}function YO(n){const e={},t=d(n,["type"]);return t!=null&&m(e,["voiceActivityType"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $O(n,e){const t={},i=d(n,["data"]);if(i!=null&&m(t,["data"],i),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(n,["mimeType"]);return s!=null&&m(t,["mimeType"],s),t}function QO(n,e){const t={},i=d(n,["content"]);i!=null&&m(t,["content"],i);const s=d(n,["citationMetadata"]);s!=null&&m(t,["citationMetadata"],WO(s));const a=d(n,["tokenCount"]);a!=null&&m(t,["tokenCount"],a);const u=d(n,["finishReason"]);u!=null&&m(t,["finishReason"],u);const f=d(n,["avgLogprobs"]);f!=null&&m(t,["avgLogprobs"],f);const h=d(n,["groundingMetadata"]);h!=null&&m(t,["groundingMetadata"],h);const p=d(n,["index"]);p!=null&&m(t,["index"],p);const _=d(n,["logprobsResult"]);_!=null&&m(t,["logprobsResult"],_);const E=d(n,["safetyRatings"]);if(E!=null){let I=E;Array.isArray(I)&&(I=I.map(x=>x)),m(t,["safetyRatings"],I)}const T=d(n,["urlContextMetadata"]);return T!=null&&m(t,["urlContextMetadata"],T),t}function WO(n,e){const t={},i=d(n,["citationSources"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),m(t,["citations"],s)}return t}function XO(n,e,t){const i={},s=d(e,["model"]);s!=null&&m(i,["_url","model"],Ye(n,s));const a=d(e,["contents"]);if(a!=null){let u=$n(a);Array.isArray(u)&&(u=u.map(f=>f)),m(i,["contents"],u)}return i}function ZO(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const s=d(n,["tokensInfo"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>u)),m(t,["tokensInfo"],a)}return t}function jO(n,e){const t={},i=d(n,["values"]);i!=null&&m(t,["values"],i);const s=d(n,["statistics"]);return s!=null&&m(t,["statistics"],e4(s)),t}function e4(n,e){const t={},i=d(n,["truncated"]);i!=null&&m(t,["truncated"],i);const s=d(n,["token_count"]);return s!=null&&m(t,["tokenCount"],s),t}function Qd(n,e){const t={},i=d(n,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u3(u))),m(t,["parts"],a)}const s=d(n,["role"]);return s!=null&&m(t,["role"],s),t}function t4(n,e){const t={},i=d(n,["controlType"]);i!=null&&m(t,["controlType"],i);const s=d(n,["enableControlImageComputation"]);return s!=null&&m(t,["computeControl"],s),t}function n4(n,e){const t={};if(d(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function i4(n,e,t){const i={},s=d(n,["systemInstruction"]);e!==void 0&&s!=null&&m(e,["systemInstruction"],an(s));const a=d(n,["tools"]);if(e!==void 0&&a!=null){let f=a;Array.isArray(f)&&(f=f.map(h=>Vw(h))),m(e,["tools"],f)}const u=d(n,["generationConfig"]);return e!==void 0&&u!=null&&m(e,["generationConfig"],$4(u)),i}function r4(n,e,t){const i={},s=d(e,["model"]);s!=null&&m(i,["_url","model"],Ye(n,s));const a=d(e,["contents"]);if(a!=null){let f=$n(a);Array.isArray(f)&&(f=f.map(h=>Qd(h))),m(i,["contents"],f)}const u=d(e,["config"]);return u!=null&&n4(u),i}function s4(n,e,t){const i={},s=d(e,["model"]);s!=null&&m(i,["_url","model"],Ye(n,s));const a=d(e,["contents"]);if(a!=null){let f=$n(a);Array.isArray(f)&&(f=f.map(h=>h)),m(i,["contents"],f)}const u=d(e,["config"]);return u!=null&&i4(u,i),i}function o4(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const s=d(n,["totalTokens"]);s!=null&&m(t,["totalTokens"],s);const a=d(n,["cachedContentTokenCount"]);return a!=null&&m(t,["cachedContentTokenCount"],a),t}function a4(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const s=d(n,["totalTokens"]);return s!=null&&m(t,["totalTokens"],s),t}function l4(n,e,t){const i={},s=d(e,["model"]);return s!=null&&m(i,["_url","name"],Ye(n,s)),i}function u4(n,e,t){const i={},s=d(e,["model"]);return s!=null&&m(i,["_url","name"],Ye(n,s)),i}function c4(n,e){const t={},i=d(n,["sdkHttpResponse"]);return i!=null&&m(t,["sdkHttpResponse"],i),t}function f4(n,e){const t={},i=d(n,["sdkHttpResponse"]);return i!=null&&m(t,["sdkHttpResponse"],i),t}function d4(n,e,t){const i={},s=d(n,["outputGcsUri"]);e!==void 0&&s!=null&&m(e,["parameters","storageUri"],s);const a=d(n,["negativePrompt"]);e!==void 0&&a!=null&&m(e,["parameters","negativePrompt"],a);const u=d(n,["numberOfImages"]);e!==void 0&&u!=null&&m(e,["parameters","sampleCount"],u);const f=d(n,["aspectRatio"]);e!==void 0&&f!=null&&m(e,["parameters","aspectRatio"],f);const h=d(n,["guidanceScale"]);e!==void 0&&h!=null&&m(e,["parameters","guidanceScale"],h);const p=d(n,["seed"]);e!==void 0&&p!=null&&m(e,["parameters","seed"],p);const _=d(n,["safetyFilterLevel"]);e!==void 0&&_!=null&&m(e,["parameters","safetySetting"],_);const E=d(n,["personGeneration"]);e!==void 0&&E!=null&&m(e,["parameters","personGeneration"],E);const T=d(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&m(e,["parameters","includeSafetyAttributes"],T);const I=d(n,["includeRaiReason"]);e!==void 0&&I!=null&&m(e,["parameters","includeRaiReason"],I);const x=d(n,["language"]);e!==void 0&&x!=null&&m(e,["parameters","language"],x);const U=d(n,["outputMimeType"]);e!==void 0&&U!=null&&m(e,["parameters","outputOptions","mimeType"],U);const P=d(n,["outputCompressionQuality"]);e!==void 0&&P!=null&&m(e,["parameters","outputOptions","compressionQuality"],P);const G=d(n,["addWatermark"]);e!==void 0&&G!=null&&m(e,["parameters","addWatermark"],G);const Q=d(n,["labels"]);e!==void 0&&Q!=null&&m(e,["labels"],Q);const z=d(n,["editMode"]);e!==void 0&&z!=null&&m(e,["parameters","editMode"],z);const ae=d(n,["baseSteps"]);return e!==void 0&&ae!=null&&m(e,["parameters","editConfig","baseSteps"],ae),i}function h4(n,e,t){const i={},s=d(e,["model"]);s!=null&&m(i,["_url","model"],Ye(n,s));const a=d(e,["prompt"]);a!=null&&m(i,["instances[0]","prompt"],a);const u=d(e,["referenceImages"]);if(u!=null){let h=u;Array.isArray(h)&&(h=h.map(p=>m3(p))),m(i,["instances[0]","referenceImages"],h)}const f=d(e,["config"]);return f!=null&&d4(f,i),i}function p4(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const s=d(n,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>Wd(u))),m(t,["generatedImages"],a)}return t}function m4(n,e,t){const i={},s=d(n,["taskType"]);e!==void 0&&s!=null&&m(e,["requests[]","taskType"],s);const a=d(n,["title"]);e!==void 0&&a!=null&&m(e,["requests[]","title"],a);const u=d(n,["outputDimensionality"]);if(e!==void 0&&u!=null&&m(e,["requests[]","outputDimensionality"],u),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function g4(n,e,t){const i={},s=d(n,["taskType"]);e!==void 0&&s!=null&&m(e,["instances[]","task_type"],s);const a=d(n,["title"]);e!==void 0&&a!=null&&m(e,["instances[]","title"],a);const u=d(n,["outputDimensionality"]);e!==void 0&&u!=null&&m(e,["parameters","outputDimensionality"],u);const f=d(n,["mimeType"]);e!==void 0&&f!=null&&m(e,["instances[]","mimeType"],f);const h=d(n,["autoTruncate"]);return e!==void 0&&h!=null&&m(e,["parameters","autoTruncate"],h),i}function y4(n,e,t){const i={},s=d(e,["model"]);s!=null&&m(i,["_url","model"],Ye(n,s));const a=d(e,["contents"]);if(a!=null){let h=Ty(n,a);Array.isArray(h)&&(h=h.map(p=>p)),m(i,["requests[]","content"],h)}const u=d(e,["config"]);u!=null&&m4(u,i);const f=d(e,["model"]);return f!==void 0&&m(i,["requests[]","model"],Ye(n,f)),i}function _4(n,e,t){const i={},s=d(e,["model"]);s!=null&&m(i,["_url","model"],Ye(n,s));const a=d(e,["contents"]);if(a!=null){let f=Ty(n,a);Array.isArray(f)&&(f=f.map(h=>h)),m(i,["instances[]","content"],f)}const u=d(e,["config"]);return u!=null&&g4(u,i),i}function v4(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const s=d(n,["embeddings"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(f=>f)),m(t,["embeddings"],u)}const a=d(n,["metadata"]);return a!=null&&m(t,["metadata"],a),t}function E4(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const s=d(n,["predictions[]","embeddings"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(f=>jO(f))),m(t,["embeddings"],u)}const a=d(n,["metadata"]);return a!=null&&m(t,["metadata"],a),t}function T4(n,e){const t={},i=d(n,["endpoint"]);i!=null&&m(t,["name"],i);const s=d(n,["deployedModelId"]);return s!=null&&m(t,["deployedModelId"],s),t}function S4(n,e){const t={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["fileUri"]);i!=null&&m(t,["fileUri"],i);const s=d(n,["mimeType"]);return s!=null&&m(t,["mimeType"],s),t}function A4(n,e){const t={},i=d(n,["id"]);i!=null&&m(t,["id"],i);const s=d(n,["args"]);s!=null&&m(t,["args"],s);const a=d(n,["name"]);if(a!=null&&m(t,["name"],a),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function C4(n,e){const t={},i=d(n,["allowedFunctionNames"]);i!=null&&m(t,["allowedFunctionNames"],i);const s=d(n,["mode"]);if(s!=null&&m(t,["mode"],s),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function I4(n,e){const t={},i=d(n,["description"]);i!=null&&m(t,["description"],i);const s=d(n,["name"]);s!=null&&m(t,["name"],s);const a=d(n,["parameters"]);a!=null&&m(t,["parameters"],a);const u=d(n,["parametersJsonSchema"]);u!=null&&m(t,["parametersJsonSchema"],u);const f=d(n,["response"]);f!=null&&m(t,["response"],f);const h=d(n,["responseJsonSchema"]);if(h!=null&&m(t,["responseJsonSchema"],h),d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function w4(n,e,t,i){const s={},a=d(e,["systemInstruction"]);t!==void 0&&a!=null&&m(t,["systemInstruction"],Qd(an(a)));const u=d(e,["temperature"]);u!=null&&m(s,["temperature"],u);const f=d(e,["topP"]);f!=null&&m(s,["topP"],f);const h=d(e,["topK"]);h!=null&&m(s,["topK"],h);const p=d(e,["candidateCount"]);p!=null&&m(s,["candidateCount"],p);const _=d(e,["maxOutputTokens"]);_!=null&&m(s,["maxOutputTokens"],_);const E=d(e,["stopSequences"]);E!=null&&m(s,["stopSequences"],E);const T=d(e,["responseLogprobs"]);T!=null&&m(s,["responseLogprobs"],T);const I=d(e,["logprobs"]);I!=null&&m(s,["logprobs"],I);const x=d(e,["presencePenalty"]);x!=null&&m(s,["presencePenalty"],x);const U=d(e,["frequencyPenalty"]);U!=null&&m(s,["frequencyPenalty"],U);const P=d(e,["seed"]);P!=null&&m(s,["seed"],P);const G=d(e,["responseMimeType"]);G!=null&&m(s,["responseMimeType"],G);const Q=d(e,["responseSchema"]);Q!=null&&m(s,["responseSchema"],Sy(Q));const z=d(e,["responseJsonSchema"]);if(z!=null&&m(s,["responseJsonSchema"],z),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const ae=d(e,["safetySettings"]);if(t!==void 0&&ae!=null){let Me=ae;Array.isArray(Me)&&(Me=Me.map(ot=>g3(ot))),m(t,["safetySettings"],Me)}const Z=d(e,["tools"]);if(t!==void 0&&Z!=null){let Me=nl(Z);Array.isArray(Me)&&(Me=Me.map(ot=>A3(tl(ot)))),m(t,["tools"],Me)}const ue=d(e,["toolConfig"]);if(t!==void 0&&ue!=null&&m(t,["toolConfig"],S3(ue)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const D=d(e,["cachedContent"]);t!==void 0&&D!=null&&m(t,["cachedContent"],Nr(n,D));const M=d(e,["responseModalities"]);M!=null&&m(s,["responseModalities"],M);const N=d(e,["mediaResolution"]);N!=null&&m(s,["mediaResolution"],N);const k=d(e,["speechConfig"]);if(k!=null&&m(s,["speechConfig"],Ay(k)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const O=d(e,["thinkingConfig"]);O!=null&&m(s,["thinkingConfig"],O);const B=d(e,["imageConfig"]);B!=null&&m(s,["imageConfig"],j4(B));const V=d(e,["enableEnhancedCivicAnswers"]);if(V!=null&&m(s,["enableEnhancedCivicAnswers"],V),d(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return s}function R4(n,e,t,i){const s={},a=d(e,["systemInstruction"]);t!==void 0&&a!=null&&m(t,["systemInstruction"],an(a));const u=d(e,["temperature"]);u!=null&&m(s,["temperature"],u);const f=d(e,["topP"]);f!=null&&m(s,["topP"],f);const h=d(e,["topK"]);h!=null&&m(s,["topK"],h);const p=d(e,["candidateCount"]);p!=null&&m(s,["candidateCount"],p);const _=d(e,["maxOutputTokens"]);_!=null&&m(s,["maxOutputTokens"],_);const E=d(e,["stopSequences"]);E!=null&&m(s,["stopSequences"],E);const T=d(e,["responseLogprobs"]);T!=null&&m(s,["responseLogprobs"],T);const I=d(e,["logprobs"]);I!=null&&m(s,["logprobs"],I);const x=d(e,["presencePenalty"]);x!=null&&m(s,["presencePenalty"],x);const U=d(e,["frequencyPenalty"]);U!=null&&m(s,["frequencyPenalty"],U);const P=d(e,["seed"]);P!=null&&m(s,["seed"],P);const G=d(e,["responseMimeType"]);G!=null&&m(s,["responseMimeType"],G);const Q=d(e,["responseSchema"]);Q!=null&&m(s,["responseSchema"],Sy(Q));const z=d(e,["responseJsonSchema"]);z!=null&&m(s,["responseJsonSchema"],z);const ae=d(e,["routingConfig"]);ae!=null&&m(s,["routingConfig"],ae);const Z=d(e,["modelSelectionConfig"]);Z!=null&&m(s,["modelConfig"],Z);const ue=d(e,["safetySettings"]);if(t!==void 0&&ue!=null){let ye=ue;Array.isArray(ye)&&(ye=ye.map(Ve=>Ve)),m(t,["safetySettings"],ye)}const D=d(e,["tools"]);if(t!==void 0&&D!=null){let ye=nl(D);Array.isArray(ye)&&(ye=ye.map(Ve=>Vw(tl(Ve)))),m(t,["tools"],ye)}const M=d(e,["toolConfig"]);t!==void 0&&M!=null&&m(t,["toolConfig"],M);const N=d(e,["labels"]);t!==void 0&&N!=null&&m(t,["labels"],N);const k=d(e,["cachedContent"]);t!==void 0&&k!=null&&m(t,["cachedContent"],Nr(n,k));const O=d(e,["responseModalities"]);O!=null&&m(s,["responseModalities"],O);const B=d(e,["mediaResolution"]);B!=null&&m(s,["mediaResolution"],B);const V=d(e,["speechConfig"]);V!=null&&m(s,["speechConfig"],Ay(V));const Me=d(e,["audioTimestamp"]);Me!=null&&m(s,["audioTimestamp"],Me);const ot=d(e,["thinkingConfig"]);ot!=null&&m(s,["thinkingConfig"],ot);const ee=d(e,["imageConfig"]);if(ee!=null&&m(s,["imageConfig"],e3(ee)),d(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const ce=d(e,["modelArmorConfig"]);return t!==void 0&&ce!=null&&m(t,["modelArmorConfig"],ce),s}function sA(n,e,t){const i={},s=d(e,["model"]);s!=null&&m(i,["_url","model"],Ye(n,s));const a=d(e,["contents"]);if(a!=null){let f=$n(a);Array.isArray(f)&&(f=f.map(h=>Qd(h))),m(i,["contents"],f)}const u=d(e,["config"]);return u!=null&&m(i,["generationConfig"],w4(n,u,i)),i}function oA(n,e,t){const i={},s=d(e,["model"]);s!=null&&m(i,["_url","model"],Ye(n,s));const a=d(e,["contents"]);if(a!=null){let f=$n(a);Array.isArray(f)&&(f=f.map(h=>h)),m(i,["contents"],f)}const u=d(e,["config"]);return u!=null&&m(i,["generationConfig"],R4(n,u,i)),i}function aA(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const s=d(n,["candidates"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(_=>QO(_))),m(t,["candidates"],p)}const a=d(n,["modelVersion"]);a!=null&&m(t,["modelVersion"],a);const u=d(n,["promptFeedback"]);u!=null&&m(t,["promptFeedback"],u);const f=d(n,["responseId"]);f!=null&&m(t,["responseId"],f);const h=d(n,["usageMetadata"]);return h!=null&&m(t,["usageMetadata"],h),t}function lA(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const s=d(n,["candidates"]);if(s!=null){let _=s;Array.isArray(_)&&(_=_.map(E=>E)),m(t,["candidates"],_)}const a=d(n,["createTime"]);a!=null&&m(t,["createTime"],a);const u=d(n,["modelVersion"]);u!=null&&m(t,["modelVersion"],u);const f=d(n,["promptFeedback"]);f!=null&&m(t,["promptFeedback"],f);const h=d(n,["responseId"]);h!=null&&m(t,["responseId"],h);const p=d(n,["usageMetadata"]);return p!=null&&m(t,["usageMetadata"],p),t}function b4(n,e,t){const i={};if(d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=d(n,["numberOfImages"]);e!==void 0&&s!=null&&m(e,["parameters","sampleCount"],s);const a=d(n,["aspectRatio"]);e!==void 0&&a!=null&&m(e,["parameters","aspectRatio"],a);const u=d(n,["guidanceScale"]);if(e!==void 0&&u!=null&&m(e,["parameters","guidanceScale"],u),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const f=d(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&m(e,["parameters","safetySetting"],f);const h=d(n,["personGeneration"]);e!==void 0&&h!=null&&m(e,["parameters","personGeneration"],h);const p=d(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&m(e,["parameters","includeSafetyAttributes"],p);const _=d(n,["includeRaiReason"]);e!==void 0&&_!=null&&m(e,["parameters","includeRaiReason"],_);const E=d(n,["language"]);e!==void 0&&E!=null&&m(e,["parameters","language"],E);const T=d(n,["outputMimeType"]);e!==void 0&&T!=null&&m(e,["parameters","outputOptions","mimeType"],T);const I=d(n,["outputCompressionQuality"]);if(e!==void 0&&I!=null&&m(e,["parameters","outputOptions","compressionQuality"],I),d(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const x=d(n,["imageSize"]);if(e!==void 0&&x!=null&&m(e,["parameters","sampleImageSize"],x),d(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function N4(n,e,t){const i={},s=d(n,["outputGcsUri"]);e!==void 0&&s!=null&&m(e,["parameters","storageUri"],s);const a=d(n,["negativePrompt"]);e!==void 0&&a!=null&&m(e,["parameters","negativePrompt"],a);const u=d(n,["numberOfImages"]);e!==void 0&&u!=null&&m(e,["parameters","sampleCount"],u);const f=d(n,["aspectRatio"]);e!==void 0&&f!=null&&m(e,["parameters","aspectRatio"],f);const h=d(n,["guidanceScale"]);e!==void 0&&h!=null&&m(e,["parameters","guidanceScale"],h);const p=d(n,["seed"]);e!==void 0&&p!=null&&m(e,["parameters","seed"],p);const _=d(n,["safetyFilterLevel"]);e!==void 0&&_!=null&&m(e,["parameters","safetySetting"],_);const E=d(n,["personGeneration"]);e!==void 0&&E!=null&&m(e,["parameters","personGeneration"],E);const T=d(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&m(e,["parameters","includeSafetyAttributes"],T);const I=d(n,["includeRaiReason"]);e!==void 0&&I!=null&&m(e,["parameters","includeRaiReason"],I);const x=d(n,["language"]);e!==void 0&&x!=null&&m(e,["parameters","language"],x);const U=d(n,["outputMimeType"]);e!==void 0&&U!=null&&m(e,["parameters","outputOptions","mimeType"],U);const P=d(n,["outputCompressionQuality"]);e!==void 0&&P!=null&&m(e,["parameters","outputOptions","compressionQuality"],P);const G=d(n,["addWatermark"]);e!==void 0&&G!=null&&m(e,["parameters","addWatermark"],G);const Q=d(n,["labels"]);e!==void 0&&Q!=null&&m(e,["labels"],Q);const z=d(n,["imageSize"]);e!==void 0&&z!=null&&m(e,["parameters","sampleImageSize"],z);const ae=d(n,["enhancePrompt"]);return e!==void 0&&ae!=null&&m(e,["parameters","enhancePrompt"],ae),i}function x4(n,e,t){const i={},s=d(e,["model"]);s!=null&&m(i,["_url","model"],Ye(n,s));const a=d(e,["prompt"]);a!=null&&m(i,["instances[0]","prompt"],a);const u=d(e,["config"]);return u!=null&&b4(u,i),i}function M4(n,e,t){const i={},s=d(e,["model"]);s!=null&&m(i,["_url","model"],Ye(n,s));const a=d(e,["prompt"]);a!=null&&m(i,["instances[0]","prompt"],a);const u=d(e,["config"]);return u!=null&&N4(u,i),i}function D4(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const s=d(n,["predictions"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(f=>z4(f))),m(t,["generatedImages"],u)}const a=d(n,["positivePromptSafetyAttributes"]);return a!=null&&m(t,["positivePromptSafetyAttributes"],Dw(a)),t}function P4(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const s=d(n,["predictions"]);if(s!=null){let u=s;Array.isArray(u)&&(u=u.map(f=>Wd(f))),m(t,["generatedImages"],u)}const a=d(n,["positivePromptSafetyAttributes"]);return a!=null&&m(t,["positivePromptSafetyAttributes"],Pw(a)),t}function V4(n,e,t){const i={},s=d(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&m(e,["parameters","sampleCount"],s),d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=d(n,["durationSeconds"]);if(e!==void 0&&a!=null&&m(e,["parameters","durationSeconds"],a),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=d(n,["aspectRatio"]);e!==void 0&&u!=null&&m(e,["parameters","aspectRatio"],u);const f=d(n,["resolution"]);e!==void 0&&f!=null&&m(e,["parameters","resolution"],f);const h=d(n,["personGeneration"]);if(e!==void 0&&h!=null&&m(e,["parameters","personGeneration"],h),d(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const p=d(n,["negativePrompt"]);e!==void 0&&p!=null&&m(e,["parameters","negativePrompt"],p);const _=d(n,["enhancePrompt"]);if(e!==void 0&&_!=null&&m(e,["parameters","enhancePrompt"],_),d(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const E=d(n,["lastFrame"]);e!==void 0&&E!=null&&m(e,["instances[0]","lastFrame"],Xd(E));const T=d(n,["referenceImages"]);if(e!==void 0&&T!=null){let I=T;Array.isArray(I)&&(I=I.map(x=>L3(x))),m(e,["instances[0]","referenceImages"],I)}if(d(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return i}function U4(n,e,t){const i={},s=d(n,["numberOfVideos"]);e!==void 0&&s!=null&&m(e,["parameters","sampleCount"],s);const a=d(n,["outputGcsUri"]);e!==void 0&&a!=null&&m(e,["parameters","storageUri"],a);const u=d(n,["fps"]);e!==void 0&&u!=null&&m(e,["parameters","fps"],u);const f=d(n,["durationSeconds"]);e!==void 0&&f!=null&&m(e,["parameters","durationSeconds"],f);const h=d(n,["seed"]);e!==void 0&&h!=null&&m(e,["parameters","seed"],h);const p=d(n,["aspectRatio"]);e!==void 0&&p!=null&&m(e,["parameters","aspectRatio"],p);const _=d(n,["resolution"]);e!==void 0&&_!=null&&m(e,["parameters","resolution"],_);const E=d(n,["personGeneration"]);e!==void 0&&E!=null&&m(e,["parameters","personGeneration"],E);const T=d(n,["pubsubTopic"]);e!==void 0&&T!=null&&m(e,["parameters","pubsubTopic"],T);const I=d(n,["negativePrompt"]);e!==void 0&&I!=null&&m(e,["parameters","negativePrompt"],I);const x=d(n,["enhancePrompt"]);e!==void 0&&x!=null&&m(e,["parameters","enhancePrompt"],x);const U=d(n,["generateAudio"]);e!==void 0&&U!=null&&m(e,["parameters","generateAudio"],U);const P=d(n,["lastFrame"]);e!==void 0&&P!=null&&m(e,["instances[0]","lastFrame"],Ei(P));const G=d(n,["referenceImages"]);if(e!==void 0&&G!=null){let ae=G;Array.isArray(ae)&&(ae=ae.map(Z=>k3(Z))),m(e,["instances[0]","referenceImages"],ae)}const Q=d(n,["mask"]);e!==void 0&&Q!=null&&m(e,["instances[0]","mask"],U3(Q));const z=d(n,["compressionQuality"]);return e!==void 0&&z!=null&&m(e,["parameters","compressionQuality"],z),i}function L4(n,e){const t={},i=d(n,["name"]);i!=null&&m(t,["name"],i);const s=d(n,["metadata"]);s!=null&&m(t,["metadata"],s);const a=d(n,["done"]);a!=null&&m(t,["done"],a);const u=d(n,["error"]);u!=null&&m(t,["error"],u);const f=d(n,["response","generateVideoResponse"]);return f!=null&&m(t,["response"],q4(f)),t}function k4(n,e){const t={},i=d(n,["name"]);i!=null&&m(t,["name"],i);const s=d(n,["metadata"]);s!=null&&m(t,["metadata"],s);const a=d(n,["done"]);a!=null&&m(t,["done"],a);const u=d(n,["error"]);u!=null&&m(t,["error"],u);const f=d(n,["response"]);return f!=null&&m(t,["response"],B4(f)),t}function O4(n,e,t){const i={},s=d(e,["model"]);s!=null&&m(i,["_url","model"],Ye(n,s));const a=d(e,["prompt"]);a!=null&&m(i,["instances[0]","prompt"],a);const u=d(e,["image"]);u!=null&&m(i,["instances[0]","image"],Xd(u));const f=d(e,["video"]);f!=null&&m(i,["instances[0]","video"],Uw(f));const h=d(e,["source"]);h!=null&&H4(h,i);const p=d(e,["config"]);return p!=null&&V4(p,i),i}function F4(n,e,t){const i={},s=d(e,["model"]);s!=null&&m(i,["_url","model"],Ye(n,s));const a=d(e,["prompt"]);a!=null&&m(i,["instances[0]","prompt"],a);const u=d(e,["image"]);u!=null&&m(i,["instances[0]","image"],Ei(u));const f=d(e,["video"]);f!=null&&m(i,["instances[0]","video"],Lw(f));const h=d(e,["source"]);h!=null&&G4(h,i);const p=d(e,["config"]);return p!=null&&U4(p,i),i}function q4(n,e){const t={},i=d(n,["generatedSamples"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(f=>K4(f))),m(t,["generatedVideos"],u)}const s=d(n,["raiMediaFilteredCount"]);s!=null&&m(t,["raiMediaFilteredCount"],s);const a=d(n,["raiMediaFilteredReasons"]);return a!=null&&m(t,["raiMediaFilteredReasons"],a),t}function B4(n,e){const t={},i=d(n,["videos"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(f=>Y4(f))),m(t,["generatedVideos"],u)}const s=d(n,["raiMediaFilteredCount"]);s!=null&&m(t,["raiMediaFilteredCount"],s);const a=d(n,["raiMediaFilteredReasons"]);return a!=null&&m(t,["raiMediaFilteredReasons"],a),t}function H4(n,e,t){const i={},s=d(n,["prompt"]);e!==void 0&&s!=null&&m(e,["instances[0]","prompt"],s);const a=d(n,["image"]);e!==void 0&&a!=null&&m(e,["instances[0]","image"],Xd(a));const u=d(n,["video"]);return e!==void 0&&u!=null&&m(e,["instances[0]","video"],Uw(u)),i}function G4(n,e,t){const i={},s=d(n,["prompt"]);e!==void 0&&s!=null&&m(e,["instances[0]","prompt"],s);const a=d(n,["image"]);e!==void 0&&a!=null&&m(e,["instances[0]","image"],Ei(a));const u=d(n,["video"]);return e!==void 0&&u!=null&&m(e,["instances[0]","video"],Lw(u)),i}function z4(n,e){const t={},i=d(n,["_self"]);i!=null&&m(t,["image"],t3(i));const s=d(n,["raiFilteredReason"]);s!=null&&m(t,["raiFilteredReason"],s);const a=d(n,["_self"]);return a!=null&&m(t,["safetyAttributes"],Dw(a)),t}function Wd(n,e){const t={},i=d(n,["_self"]);i!=null&&m(t,["image"],Mw(i));const s=d(n,["raiFilteredReason"]);s!=null&&m(t,["raiFilteredReason"],s);const a=d(n,["_self"]);a!=null&&m(t,["safetyAttributes"],Pw(a));const u=d(n,["prompt"]);return u!=null&&m(t,["enhancedPrompt"],u),t}function J4(n,e){const t={},i=d(n,["_self"]);i!=null&&m(t,["mask"],Mw(i));const s=d(n,["labels"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>u)),m(t,["labels"],a)}return t}function K4(n,e){const t={},i=d(n,["video"]);return i!=null&&m(t,["video"],P3(i)),t}function Y4(n,e){const t={},i=d(n,["_self"]);return i!=null&&m(t,["video"],V3(i)),t}function $4(n,e){const t={},i=d(n,["modelSelectionConfig"]);i!=null&&m(t,["modelConfig"],i);const s=d(n,["responseJsonSchema"]);s!=null&&m(t,["responseJsonSchema"],s);const a=d(n,["audioTimestamp"]);a!=null&&m(t,["audioTimestamp"],a);const u=d(n,["candidateCount"]);u!=null&&m(t,["candidateCount"],u);const f=d(n,["enableAffectiveDialog"]);f!=null&&m(t,["enableAffectiveDialog"],f);const h=d(n,["frequencyPenalty"]);h!=null&&m(t,["frequencyPenalty"],h);const p=d(n,["logprobs"]);p!=null&&m(t,["logprobs"],p);const _=d(n,["maxOutputTokens"]);_!=null&&m(t,["maxOutputTokens"],_);const E=d(n,["mediaResolution"]);E!=null&&m(t,["mediaResolution"],E);const T=d(n,["presencePenalty"]);T!=null&&m(t,["presencePenalty"],T);const I=d(n,["responseLogprobs"]);I!=null&&m(t,["responseLogprobs"],I);const x=d(n,["responseMimeType"]);x!=null&&m(t,["responseMimeType"],x);const U=d(n,["responseModalities"]);U!=null&&m(t,["responseModalities"],U);const P=d(n,["responseSchema"]);P!=null&&m(t,["responseSchema"],P);const G=d(n,["routingConfig"]);G!=null&&m(t,["routingConfig"],G);const Q=d(n,["seed"]);Q!=null&&m(t,["seed"],Q);const z=d(n,["speechConfig"]);z!=null&&m(t,["speechConfig"],z);const ae=d(n,["stopSequences"]);ae!=null&&m(t,["stopSequences"],ae);const Z=d(n,["temperature"]);Z!=null&&m(t,["temperature"],Z);const ue=d(n,["thinkingConfig"]);ue!=null&&m(t,["thinkingConfig"],ue);const D=d(n,["topK"]);D!=null&&m(t,["topK"],D);const M=d(n,["topP"]);if(M!=null&&m(t,["topP"],M),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function Q4(n,e,t){const i={},s=d(e,["model"]);return s!=null&&m(i,["_url","name"],Ye(n,s)),i}function W4(n,e,t){const i={},s=d(e,["model"]);return s!=null&&m(i,["_url","name"],Ye(n,s)),i}function X4(n,e){const t={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=d(n,["enableWidget"]);return i!=null&&m(t,["enableWidget"],i),t}function Z4(n,e){const t={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=d(n,["timeRangeFilter"]);return i!=null&&m(t,["timeRangeFilter"],i),t}function j4(n,e){const t={},i=d(n,["aspectRatio"]);i!=null&&m(t,["aspectRatio"],i);const s=d(n,["imageSize"]);if(s!=null&&m(t,["imageSize"],s),d(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(d(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function e3(n,e){const t={},i=d(n,["aspectRatio"]);i!=null&&m(t,["aspectRatio"],i);const s=d(n,["imageSize"]);s!=null&&m(t,["imageSize"],s);const a=d(n,["personGeneration"]);a!=null&&m(t,["personGeneration"],a);const u=d(n,["outputMimeType"]);u!=null&&m(t,["imageOutputOptions","mimeType"],u);const f=d(n,["outputCompressionQuality"]);return f!=null&&m(t,["imageOutputOptions","compressionQuality"],f),t}function t3(n,e){const t={},i=d(n,["bytesBase64Encoded"]);i!=null&&m(t,["imageBytes"],Ps(i));const s=d(n,["mimeType"]);return s!=null&&m(t,["mimeType"],s),t}function Mw(n,e){const t={},i=d(n,["gcsUri"]);i!=null&&m(t,["gcsUri"],i);const s=d(n,["bytesBase64Encoded"]);s!=null&&m(t,["imageBytes"],Ps(s));const a=d(n,["mimeType"]);return a!=null&&m(t,["mimeType"],a),t}function Xd(n,e){const t={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=d(n,["imageBytes"]);i!=null&&m(t,["bytesBase64Encoded"],Ps(i));const s=d(n,["mimeType"]);return s!=null&&m(t,["mimeType"],s),t}function Ei(n,e){const t={},i=d(n,["gcsUri"]);i!=null&&m(t,["gcsUri"],i);const s=d(n,["imageBytes"]);s!=null&&m(t,["bytesBase64Encoded"],Ps(s));const a=d(n,["mimeType"]);return a!=null&&m(t,["mimeType"],a),t}function n3(n,e,t,i){const s={},a=d(e,["pageSize"]);t!==void 0&&a!=null&&m(t,["_query","pageSize"],a);const u=d(e,["pageToken"]);t!==void 0&&u!=null&&m(t,["_query","pageToken"],u);const f=d(e,["filter"]);t!==void 0&&f!=null&&m(t,["_query","filter"],f);const h=d(e,["queryBase"]);return t!==void 0&&h!=null&&m(t,["_url","models_url"],Cw(n,h)),s}function i3(n,e,t,i){const s={},a=d(e,["pageSize"]);t!==void 0&&a!=null&&m(t,["_query","pageSize"],a);const u=d(e,["pageToken"]);t!==void 0&&u!=null&&m(t,["_query","pageToken"],u);const f=d(e,["filter"]);t!==void 0&&f!=null&&m(t,["_query","filter"],f);const h=d(e,["queryBase"]);return t!==void 0&&h!=null&&m(t,["_url","models_url"],Cw(n,h)),s}function r3(n,e,t){const i={},s=d(e,["config"]);return s!=null&&n3(n,s,i),i}function s3(n,e,t){const i={},s=d(e,["config"]);return s!=null&&i3(n,s,i),i}function o3(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const s=d(n,["nextPageToken"]);s!=null&&m(t,["nextPageToken"],s);const a=d(n,["_self"]);if(a!=null){let u=Iw(a);Array.isArray(u)&&(u=u.map(f=>rg(f))),m(t,["models"],u)}return t}function a3(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const s=d(n,["nextPageToken"]);s!=null&&m(t,["nextPageToken"],s);const a=d(n,["_self"]);if(a!=null){let u=Iw(a);Array.isArray(u)&&(u=u.map(f=>sg(f))),m(t,["models"],u)}return t}function l3(n,e){const t={},i=d(n,["maskMode"]);i!=null&&m(t,["maskMode"],i);const s=d(n,["segmentationClasses"]);s!=null&&m(t,["maskClasses"],s);const a=d(n,["maskDilation"]);return a!=null&&m(t,["dilation"],a),t}function rg(n,e){const t={},i=d(n,["name"]);i!=null&&m(t,["name"],i);const s=d(n,["displayName"]);s!=null&&m(t,["displayName"],s);const a=d(n,["description"]);a!=null&&m(t,["description"],a);const u=d(n,["version"]);u!=null&&m(t,["version"],u);const f=d(n,["_self"]);f!=null&&m(t,["tunedModelInfo"],C3(f));const h=d(n,["inputTokenLimit"]);h!=null&&m(t,["inputTokenLimit"],h);const p=d(n,["outputTokenLimit"]);p!=null&&m(t,["outputTokenLimit"],p);const _=d(n,["supportedGenerationMethods"]);_!=null&&m(t,["supportedActions"],_);const E=d(n,["temperature"]);E!=null&&m(t,["temperature"],E);const T=d(n,["maxTemperature"]);T!=null&&m(t,["maxTemperature"],T);const I=d(n,["topP"]);I!=null&&m(t,["topP"],I);const x=d(n,["topK"]);x!=null&&m(t,["topK"],x);const U=d(n,["thinking"]);return U!=null&&m(t,["thinking"],U),t}function sg(n,e){const t={},i=d(n,["name"]);i!=null&&m(t,["name"],i);const s=d(n,["displayName"]);s!=null&&m(t,["displayName"],s);const a=d(n,["description"]);a!=null&&m(t,["description"],a);const u=d(n,["versionId"]);u!=null&&m(t,["version"],u);const f=d(n,["deployedModels"]);if(f!=null){let T=f;Array.isArray(T)&&(T=T.map(I=>T4(I))),m(t,["endpoints"],T)}const h=d(n,["labels"]);h!=null&&m(t,["labels"],h);const p=d(n,["_self"]);p!=null&&m(t,["tunedModelInfo"],I3(p));const _=d(n,["defaultCheckpointId"]);_!=null&&m(t,["defaultCheckpointId"],_);const E=d(n,["checkpoints"]);if(E!=null){let T=E;Array.isArray(T)&&(T=T.map(I=>I)),m(t,["checkpoints"],T)}return t}function u3(n,e){const t={},i=d(n,["mediaResolution"]);i!=null&&m(t,["mediaResolution"],i);const s=d(n,["codeExecutionResult"]);s!=null&&m(t,["codeExecutionResult"],s);const a=d(n,["executableCode"]);a!=null&&m(t,["executableCode"],a);const u=d(n,["fileData"]);u!=null&&m(t,["fileData"],S4(u));const f=d(n,["functionCall"]);f!=null&&m(t,["functionCall"],A4(f));const h=d(n,["functionResponse"]);h!=null&&m(t,["functionResponse"],h);const p=d(n,["inlineData"]);p!=null&&m(t,["inlineData"],$O(p));const _=d(n,["text"]);_!=null&&m(t,["text"],_);const E=d(n,["thought"]);E!=null&&m(t,["thought"],E);const T=d(n,["thoughtSignature"]);T!=null&&m(t,["thoughtSignature"],T);const I=d(n,["videoMetadata"]);return I!=null&&m(t,["videoMetadata"],I),t}function c3(n,e){const t={},i=d(n,["productImage"]);return i!=null&&m(t,["image"],Ei(i)),t}function f3(n,e,t){const i={},s=d(n,["numberOfImages"]);e!==void 0&&s!=null&&m(e,["parameters","sampleCount"],s);const a=d(n,["baseSteps"]);e!==void 0&&a!=null&&m(e,["parameters","baseSteps"],a);const u=d(n,["outputGcsUri"]);e!==void 0&&u!=null&&m(e,["parameters","storageUri"],u);const f=d(n,["seed"]);e!==void 0&&f!=null&&m(e,["parameters","seed"],f);const h=d(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&m(e,["parameters","safetySetting"],h);const p=d(n,["personGeneration"]);e!==void 0&&p!=null&&m(e,["parameters","personGeneration"],p);const _=d(n,["addWatermark"]);e!==void 0&&_!=null&&m(e,["parameters","addWatermark"],_);const E=d(n,["outputMimeType"]);e!==void 0&&E!=null&&m(e,["parameters","outputOptions","mimeType"],E);const T=d(n,["outputCompressionQuality"]);e!==void 0&&T!=null&&m(e,["parameters","outputOptions","compressionQuality"],T);const I=d(n,["enhancePrompt"]);e!==void 0&&I!=null&&m(e,["parameters","enhancePrompt"],I);const x=d(n,["labels"]);return e!==void 0&&x!=null&&m(e,["labels"],x),i}function d3(n,e,t){const i={},s=d(e,["model"]);s!=null&&m(i,["_url","model"],Ye(n,s));const a=d(e,["source"]);a!=null&&p3(a,i);const u=d(e,["config"]);return u!=null&&f3(u,i),i}function h3(n,e){const t={},i=d(n,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>Wd(a))),m(t,["generatedImages"],s)}return t}function p3(n,e,t){const i={},s=d(n,["prompt"]);e!==void 0&&s!=null&&m(e,["instances[0]","prompt"],s);const a=d(n,["personImage"]);e!==void 0&&a!=null&&m(e,["instances[0]","personImage","image"],Ei(a));const u=d(n,["productImages"]);if(e!==void 0&&u!=null){let f=u;Array.isArray(f)&&(f=f.map(h=>c3(h))),m(e,["instances[0]","productImages"],f)}return i}function m3(n,e){const t={},i=d(n,["referenceImage"]);i!=null&&m(t,["referenceImage"],Ei(i));const s=d(n,["referenceId"]);s!=null&&m(t,["referenceId"],s);const a=d(n,["referenceType"]);a!=null&&m(t,["referenceType"],a);const u=d(n,["maskImageConfig"]);u!=null&&m(t,["maskImageConfig"],l3(u));const f=d(n,["controlImageConfig"]);f!=null&&m(t,["controlImageConfig"],t4(f));const h=d(n,["styleImageConfig"]);h!=null&&m(t,["styleImageConfig"],h);const p=d(n,["subjectImageConfig"]);return p!=null&&m(t,["subjectImageConfig"],p),t}function Dw(n,e){const t={},i=d(n,["safetyAttributes","categories"]);i!=null&&m(t,["categories"],i);const s=d(n,["safetyAttributes","scores"]);s!=null&&m(t,["scores"],s);const a=d(n,["contentType"]);return a!=null&&m(t,["contentType"],a),t}function Pw(n,e){const t={},i=d(n,["safetyAttributes","categories"]);i!=null&&m(t,["categories"],i);const s=d(n,["safetyAttributes","scores"]);s!=null&&m(t,["scores"],s);const a=d(n,["contentType"]);return a!=null&&m(t,["contentType"],a),t}function g3(n,e){const t={},i=d(n,["category"]);if(i!=null&&m(t,["category"],i),d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=d(n,["threshold"]);return s!=null&&m(t,["threshold"],s),t}function y3(n,e){const t={},i=d(n,["image"]);return i!=null&&m(t,["image"],Ei(i)),t}function _3(n,e,t){const i={},s=d(n,["mode"]);e!==void 0&&s!=null&&m(e,["parameters","mode"],s);const a=d(n,["maxPredictions"]);e!==void 0&&a!=null&&m(e,["parameters","maxPredictions"],a);const u=d(n,["confidenceThreshold"]);e!==void 0&&u!=null&&m(e,["parameters","confidenceThreshold"],u);const f=d(n,["maskDilation"]);e!==void 0&&f!=null&&m(e,["parameters","maskDilation"],f);const h=d(n,["binaryColorThreshold"]);e!==void 0&&h!=null&&m(e,["parameters","binaryColorThreshold"],h);const p=d(n,["labels"]);return e!==void 0&&p!=null&&m(e,["labels"],p),i}function v3(n,e,t){const i={},s=d(e,["model"]);s!=null&&m(i,["_url","model"],Ye(n,s));const a=d(e,["source"]);a!=null&&T3(a,i);const u=d(e,["config"]);return u!=null&&_3(u,i),i}function E3(n,e){const t={},i=d(n,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>J4(a))),m(t,["generatedMasks"],s)}return t}function T3(n,e,t){const i={},s=d(n,["prompt"]);e!==void 0&&s!=null&&m(e,["instances[0]","prompt"],s);const a=d(n,["image"]);e!==void 0&&a!=null&&m(e,["instances[0]","image"],Ei(a));const u=d(n,["scribbleImage"]);return e!==void 0&&u!=null&&m(e,["instances[0]","scribble"],y3(u)),i}function S3(n,e){const t={},i=d(n,["retrievalConfig"]);i!=null&&m(t,["retrievalConfig"],i);const s=d(n,["functionCallingConfig"]);return s!=null&&m(t,["functionCallingConfig"],C4(s)),t}function A3(n,e){const t={};if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=d(n,["computerUse"]);i!=null&&m(t,["computerUse"],i);const s=d(n,["fileSearch"]);s!=null&&m(t,["fileSearch"],s);const a=d(n,["codeExecution"]);if(a!=null&&m(t,["codeExecution"],a),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const u=d(n,["functionDeclarations"]);if(u!=null){let E=u;Array.isArray(E)&&(E=E.map(T=>T)),m(t,["functionDeclarations"],E)}const f=d(n,["googleMaps"]);f!=null&&m(t,["googleMaps"],X4(f));const h=d(n,["googleSearch"]);h!=null&&m(t,["googleSearch"],Z4(h));const p=d(n,["googleSearchRetrieval"]);p!=null&&m(t,["googleSearchRetrieval"],p);const _=d(n,["urlContext"]);return _!=null&&m(t,["urlContext"],_),t}function Vw(n,e){const t={},i=d(n,["retrieval"]);i!=null&&m(t,["retrieval"],i);const s=d(n,["computerUse"]);if(s!=null&&m(t,["computerUse"],s),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=d(n,["codeExecution"]);a!=null&&m(t,["codeExecution"],a);const u=d(n,["enterpriseWebSearch"]);u!=null&&m(t,["enterpriseWebSearch"],u);const f=d(n,["functionDeclarations"]);if(f!=null){let T=f;Array.isArray(T)&&(T=T.map(I=>I4(I))),m(t,["functionDeclarations"],T)}const h=d(n,["googleMaps"]);h!=null&&m(t,["googleMaps"],h);const p=d(n,["googleSearch"]);p!=null&&m(t,["googleSearch"],p);const _=d(n,["googleSearchRetrieval"]);_!=null&&m(t,["googleSearchRetrieval"],_);const E=d(n,["urlContext"]);return E!=null&&m(t,["urlContext"],E),t}function C3(n,e){const t={},i=d(n,["baseModel"]);i!=null&&m(t,["baseModel"],i);const s=d(n,["createTime"]);s!=null&&m(t,["createTime"],s);const a=d(n,["updateTime"]);return a!=null&&m(t,["updateTime"],a),t}function I3(n,e){const t={},i=d(n,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&m(t,["baseModel"],i);const s=d(n,["createTime"]);s!=null&&m(t,["createTime"],s);const a=d(n,["updateTime"]);return a!=null&&m(t,["updateTime"],a),t}function w3(n,e,t){const i={},s=d(n,["displayName"]);e!==void 0&&s!=null&&m(e,["displayName"],s);const a=d(n,["description"]);e!==void 0&&a!=null&&m(e,["description"],a);const u=d(n,["defaultCheckpointId"]);return e!==void 0&&u!=null&&m(e,["defaultCheckpointId"],u),i}function R3(n,e,t){const i={},s=d(n,["displayName"]);e!==void 0&&s!=null&&m(e,["displayName"],s);const a=d(n,["description"]);e!==void 0&&a!=null&&m(e,["description"],a);const u=d(n,["defaultCheckpointId"]);return e!==void 0&&u!=null&&m(e,["defaultCheckpointId"],u),i}function b3(n,e,t){const i={},s=d(e,["model"]);s!=null&&m(i,["_url","name"],Ye(n,s));const a=d(e,["config"]);return a!=null&&w3(a,i),i}function N3(n,e,t){const i={},s=d(e,["model"]);s!=null&&m(i,["_url","model"],Ye(n,s));const a=d(e,["config"]);return a!=null&&R3(a,i),i}function x3(n,e,t){const i={},s=d(n,["outputGcsUri"]);e!==void 0&&s!=null&&m(e,["parameters","storageUri"],s);const a=d(n,["safetyFilterLevel"]);e!==void 0&&a!=null&&m(e,["parameters","safetySetting"],a);const u=d(n,["personGeneration"]);e!==void 0&&u!=null&&m(e,["parameters","personGeneration"],u);const f=d(n,["includeRaiReason"]);e!==void 0&&f!=null&&m(e,["parameters","includeRaiReason"],f);const h=d(n,["outputMimeType"]);e!==void 0&&h!=null&&m(e,["parameters","outputOptions","mimeType"],h);const p=d(n,["outputCompressionQuality"]);e!==void 0&&p!=null&&m(e,["parameters","outputOptions","compressionQuality"],p);const _=d(n,["enhanceInputImage"]);e!==void 0&&_!=null&&m(e,["parameters","upscaleConfig","enhanceInputImage"],_);const E=d(n,["imagePreservationFactor"]);e!==void 0&&E!=null&&m(e,["parameters","upscaleConfig","imagePreservationFactor"],E);const T=d(n,["labels"]);e!==void 0&&T!=null&&m(e,["labels"],T);const I=d(n,["numberOfImages"]);e!==void 0&&I!=null&&m(e,["parameters","sampleCount"],I);const x=d(n,["mode"]);return e!==void 0&&x!=null&&m(e,["parameters","mode"],x),i}function M3(n,e,t){const i={},s=d(e,["model"]);s!=null&&m(i,["_url","model"],Ye(n,s));const a=d(e,["image"]);a!=null&&m(i,["instances[0]","image"],Ei(a));const u=d(e,["upscaleFactor"]);u!=null&&m(i,["parameters","upscaleConfig","upscaleFactor"],u);const f=d(e,["config"]);return f!=null&&x3(f,i),i}function D3(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const s=d(n,["predictions"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>Wd(u))),m(t,["generatedImages"],a)}return t}function P3(n,e){const t={},i=d(n,["uri"]);i!=null&&m(t,["uri"],i);const s=d(n,["encodedVideo"]);s!=null&&m(t,["videoBytes"],Ps(s));const a=d(n,["encoding"]);return a!=null&&m(t,["mimeType"],a),t}function V3(n,e){const t={},i=d(n,["gcsUri"]);i!=null&&m(t,["uri"],i);const s=d(n,["bytesBase64Encoded"]);s!=null&&m(t,["videoBytes"],Ps(s));const a=d(n,["mimeType"]);return a!=null&&m(t,["mimeType"],a),t}function U3(n,e){const t={},i=d(n,["image"]);i!=null&&m(t,["_self"],Ei(i));const s=d(n,["maskMode"]);return s!=null&&m(t,["maskMode"],s),t}function L3(n,e){const t={},i=d(n,["image"]);i!=null&&m(t,["image"],Xd(i));const s=d(n,["referenceType"]);return s!=null&&m(t,["referenceType"],s),t}function k3(n,e){const t={},i=d(n,["image"]);i!=null&&m(t,["image"],Ei(i));const s=d(n,["referenceType"]);return s!=null&&m(t,["referenceType"],s),t}function Uw(n,e){const t={},i=d(n,["uri"]);i!=null&&m(t,["uri"],i);const s=d(n,["videoBytes"]);s!=null&&m(t,["encodedVideo"],Ps(s));const a=d(n,["mimeType"]);return a!=null&&m(t,["encoding"],a),t}function Lw(n,e){const t={},i=d(n,["uri"]);i!=null&&m(t,["gcsUri"],i);const s=d(n,["videoBytes"]);s!=null&&m(t,["bytesBase64Encoded"],Ps(s));const a=d(n,["mimeType"]);return a!=null&&m(t,["mimeType"],a),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function O3(n,e){const t={},i=d(n,["displayName"]);return e!==void 0&&i!=null&&m(e,["displayName"],i),t}function F3(n){const e={},t=d(n,["config"]);return t!=null&&O3(t,e),e}function q3(n,e){const t={},i=d(n,["force"]);return e!==void 0&&i!=null&&m(e,["_query","force"],i),t}function B3(n){const e={},t=d(n,["name"]);t!=null&&m(e,["_url","name"],t);const i=d(n,["config"]);return i!=null&&q3(i,e),e}function H3(n){const e={},t=d(n,["name"]);return t!=null&&m(e,["_url","name"],t),e}function G3(n,e){const t={},i=d(n,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["customMetadata"],a)}const s=d(n,["chunkingConfig"]);return e!==void 0&&s!=null&&m(e,["chunkingConfig"],s),t}function z3(n){const e={},t=d(n,["name"]);t!=null&&m(e,["name"],t);const i=d(n,["metadata"]);i!=null&&m(e,["metadata"],i);const s=d(n,["done"]);s!=null&&m(e,["done"],s);const a=d(n,["error"]);a!=null&&m(e,["error"],a);const u=d(n,["response"]);return u!=null&&m(e,["response"],K3(u)),e}function J3(n){const e={},t=d(n,["fileSearchStoreName"]);t!=null&&m(e,["_url","file_search_store_name"],t);const i=d(n,["fileName"]);i!=null&&m(e,["fileName"],i);const s=d(n,["config"]);return s!=null&&G3(s,e),e}function K3(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["parent"]);i!=null&&m(e,["parent"],i);const s=d(n,["documentName"]);return s!=null&&m(e,["documentName"],s),e}function Y3(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const s=d(n,["pageToken"]);return e!==void 0&&s!=null&&m(e,["_query","pageToken"],s),t}function $3(n){const e={},t=d(n,["config"]);return t!=null&&Y3(t,e),e}function Q3(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const s=d(n,["fileSearchStores"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["fileSearchStores"],a)}return e}function kw(n,e){const t={},i=d(n,["mimeType"]);e!==void 0&&i!=null&&m(e,["mimeType"],i);const s=d(n,["displayName"]);e!==void 0&&s!=null&&m(e,["displayName"],s);const a=d(n,["customMetadata"]);if(e!==void 0&&a!=null){let f=a;Array.isArray(f)&&(f=f.map(h=>h)),m(e,["customMetadata"],f)}const u=d(n,["chunkingConfig"]);return e!==void 0&&u!=null&&m(e,["chunkingConfig"],u),t}function W3(n){const e={},t=d(n,["fileSearchStoreName"]);t!=null&&m(e,["_url","file_search_store_name"],t);const i=d(n,["config"]);return i!=null&&kw(i,e),e}function X3(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Z3="Content-Type",j3="X-Server-Timeout",eF="User-Agent",og="x-goog-api-client",tF="1.39.0",nF=`google-genai-sdk/${tF}`,iF="v1beta1",rF="v1beta";class sF{constructor(e){var t,i,s;this.clientOptions=Object.assign({},e),this.customBaseUrl=(t=e.httpOptions)===null||t===void 0?void 0:t.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const a={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const f=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!f?(a.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?a.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(a.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),a.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:iF}else{if(!this.clientOptions.apiKey)throw new Fu({message:"API key must be set when using the Gemini API.",status:403});a.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:rF,a.baseUrl="https://generativelanguage.googleapis.com/"}a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const s=[this.getRequestUrlInternal(t)];return i&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e,t){return!(t.baseUrl&&t.baseUrlResourceScope===eg.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,t),s=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[u,f]of Object.entries(e.queryParams))s.searchParams.append(u,String(f));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,t,s.toString(),e.abortSignal),this.unaryApiCall(s,a,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[s,a]of Object.entries(t))typeof a=="object"?i[s]=Object.assign(Object.assign({},i[s]),a):a!==void 0&&(i[s]=a);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,t),s=this.constructUrl(e.path,t,i);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,t,s.toString(),e.abortSignal),this.streamApiCall(s,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i,s){if(t&&t.timeout||s){const a=new AbortController,u=a.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const f=setTimeout(()=>a.abort(),t.timeout);f&&typeof f.unref=="function"&&f.unref()}s&&s.addEventListener("abort",()=>{a.abort()}),e.signal=u}return t&&t.extraBody!==null&&oF(e,t.extraBody),e.headers=await this.getHeadersInternal(t,i),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async s=>(await uA(s),new tg(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async s=>(await uA(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){return gi(this,arguments,function*(){var i;const s=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),a=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let u="";const f="data:",h=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:p,value:_}=yield Ie(s.read());if(p){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const E=a.decode(_,{stream:!0});try{const x=JSON.parse(E);if("error"in x){const U=JSON.parse(JSON.stringify(x.error)),P=U.status,G=U.code,Q=`got status: ${P}. ${JSON.stringify(x)}`;if(G>=400&&G<600)throw new Fu({message:Q,status:G})}}catch(x){if(x.name==="ApiError")throw x}u+=E;let T=-1,I=0;for(;;){T=-1,I=0;for(const P of h){const G=u.indexOf(P);G!==-1&&(T===-1||G<T)&&(T=G,I=P.length)}if(T===-1)break;const x=u.substring(0,T);u=u.substring(T+I);const U=x.trim();if(U.startsWith(f)){const P=U.substring(f.length).trim();try{const G=new Response(P,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ie(new tg(G))}catch(G){throw new Error(`exception parsing stream chunk ${P}. ${G}`)}}}}}finally{s.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=nF+" "+this.clientOptions.userAgentExtra;return e[eF]=t,e[og]=t,e[Z3]="application/json",e}async getHeadersInternal(e,t){const i=new Headers;if(e&&e.headers){for(const[s,a]of Object.entries(e.headers))i.append(s,a);e.timeout&&e.timeout>0&&i.append(j3,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,t),i}getFileName(e){var t;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(t=i.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),i}async uploadFile(e,t){var i;const s={};t!=null&&(s.mimeType=t.mimeType,s.name=t.name,s.displayName=t.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const a=this.clientOptions.uploader,u=await a.stat(e);s.sizeBytes=String(u.size);const f=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:u.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=f;const h={file:s},p=this.getFileName(e),_=de("upload/v1beta/files",h._url),E=await this.fetchUploadUrl(_,s.sizeBytes,s.mimeType,p,h,t==null?void 0:t.httpOptions);return a.upload(e,E,this)}async uploadFileToFileSearchStore(e,t,i){var s;const a=this.clientOptions.uploader,u=await a.stat(t),f=String(u.size),h=(s=i==null?void 0:i.mimeType)!==null&&s!==void 0?s:u.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const p=`upload/v1beta/${e}:uploadToFileSearchStore`,_=this.getFileName(t),E={};i!=null&&kw(i,E);const T=await this.fetchUploadUrl(p,f,h,_,E,i==null?void 0:i.httpOptions);return a.uploadToFileSearchStore(t,T,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,i,s,a,u){var f;let h={};u?h=u:h={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${i}`},s?{"X-Goog-Upload-File-Name":s}:{})};const p=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:h});if(!p||!(p!=null&&p.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const _=(f=p==null?void 0:p.headers)===null||f===void 0?void 0:f["x-goog-upload-url"];if(_===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return _}}async function uA(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const s=JSON.stringify(i);throw t>=400&&t<600?new Fu({message:s,status:t}):new Error(s)}}function oF(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const a=JSON.parse(n.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))t=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,u){const f=Object.assign({},a);for(const h in u)if(Object.prototype.hasOwnProperty.call(u,h)){const p=u[h],_=f[h];p&&typeof p=="object"&&!Array.isArray(p)&&_&&typeof _=="object"&&!Array.isArray(_)?f[h]=i(_,p):(_&&p&&typeof _!=typeof p&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${h}". Original type: ${typeof _}, New type: ${typeof p}. Overwriting.`),f[h]=p)}return f}const s=i(t,e);n.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const aF="mcp_used/unknown";let lF=!1;function Ow(n){for(const e of n)if(uF(e)||typeof e=="object"&&"inputSchema"in e)return!0;return lF}function Fw(n){var e;const t=(e=n[og])!==null&&e!==void 0?e:"";n[og]=(t+` ${aF}`).trimStart()}function uF(n){return n!==null&&typeof n=="object"&&n instanceof Iy}function cF(n){return gi(this,arguments,function*(t,i=100){let s,a=0;for(;a<i;){const u=yield Ie(t.listTools({cursor:s}));for(const f of u.tools)yield yield Ie(f),a++;if(!u.nextCursor)break;s=u.nextCursor}})}class Iy{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Iy(e,t)}async initialize(){var e,t,i,s;if(this.mcpTools.length>0)return;const a={},u=[];for(const _ of this.mcpClients)try{for(var f=!0,h=(t=void 0,yi(cF(_))),p;p=await h.next(),e=p.done,!e;f=!0){s=p.value,f=!1;const E=s;u.push(E);const T=E.name;if(a[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);a[T]=_}}catch(E){t={error:E}}finally{try{!f&&!e&&(i=h.return)&&await i.call(h)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),Fk(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const u=await s.callTool({name:i.name,arguments:i.args},void 0,a);t.push({functionResponse:{name:i.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function fF(n,e,t){const i=new Mk;let s;t.data instanceof Blob?s=JSON.parse(await t.data.text()):s=JSON.parse(t.data),Object.assign(i,s),e(i)}class dF{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),u=mF(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),h=`${s}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${f}`;let p=()=>{};const _=new Promise(z=>{p=z}),E=e.callbacks,T=function(){p({})},I=this.apiClient,x={onopen:T,onmessage:z=>{fF(I,E.onmessage,z)},onerror:(t=E==null?void 0:E.onerror)!==null&&t!==void 0?t:function(z){},onclose:(i=E==null?void 0:E.onclose)!==null&&i!==void 0?i:function(z){}},U=this.webSocketFactory.create(h,pF(u),x);U.connect(),await _;const Q={setup:{model:Ye(this.apiClient,e.model)}};return U.send(JSON.stringify(Q)),new hF(U,this.apiClient)}}class hF{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=OO(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=kO(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Ca.PLAY)}pause(){this.sendPlaybackControl(Ca.PAUSE)}stop(){this.sendPlaybackControl(Ca.STOP)}resetContext(){this.sendPlaybackControl(Ca.RESET_CONTEXT)}close(){this.conn.close()}}function pF(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function mF(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gF="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function yF(n,e,t){const i=new xk;let s;t.data instanceof Blob?s=await t.data.text():t.data instanceof ArrayBuffer?s=new TextDecoder().decode(t.data):s=t.data;const a=JSON.parse(s);if(n.isVertexAI()){const u=BO(a);Object.assign(i,u)}else Object.assign(i,a);e(i)}class _F{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new dF(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,s,a,u,f;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const h=this.apiClient.getWebsocketBaseUrl(),p=this.apiClient.getApiVersion();let _;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&Ow(e.config.tools)&&Fw(E);const T=SF(E);if(this.apiClient.isVertexAI()){const N=this.apiClient.getProject(),k=this.apiClient.getLocation(),O=this.apiClient.getApiKey(),B=!!N&&!!k||!!O;this.apiClient.getCustomBaseUrl()&&!B?_=h:(_=`${h}/ws/google.cloud.aiplatform.${p}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,_))}else{const N=this.apiClient.getApiKey();let k="BidiGenerateContent",O="key";N!=null&&N.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),p!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),k="BidiGenerateContentConstrained",O="access_token"),_=`${h}/ws/google.ai.generativelanguage.${p}.GenerativeService.${k}?${O}=${N}`}let I=()=>{};const x=new Promise(N=>{I=N}),U=e.callbacks,P=function(){var N;(N=U==null?void 0:U.onopen)===null||N===void 0||N.call(U),I({})},G=this.apiClient,Q={onopen:P,onmessage:N=>{yF(G,U.onmessage,N)},onerror:(t=U==null?void 0:U.onerror)!==null&&t!==void 0?t:function(N){},onclose:(i=U==null?void 0:U.onclose)!==null&&i!==void 0?i:function(N){}},z=this.webSocketFactory.create(_,TF(T),Q);z.connect(),await x;let ae=Ye(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&ae.startsWith("publishers/")){const N=this.apiClient.getProject(),k=this.apiClient.getLocation();N&&k&&(ae=`projects/${N}/locations/${k}/`+ae)}let Z={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Td.AUDIO]}:e.config.responseModalities=[Td.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ue=(f=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[],D=[];for(const N of ue)if(this.isCallableTool(N)){const k=N;D.push(await k.tool())}else D.push(N);D.length>0&&(e.config.tools=D);const M={model:ae,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?Z=LO(this.apiClient,M):Z=UO(this.apiClient,M),delete Z.config,z.send(JSON.stringify(Z)),new EF(z,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const vF={turnComplete:!0};class EF{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=$n(t.turns),e.isVertexAI()||(i=i.map(s=>Qd(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(gF)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},vF),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:qO(e)}:t={realtimeInput:FO(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function TF(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function SF(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cA=10;function fA(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Pa(u)){s=!0;break}if(!s)return!0;const a=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Pa(n){return"callTool"in n&&typeof n.callTool=="function"}function AF(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(s=>Pa(s)))!==null&&i!==void 0?i:!1}function dA(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((i,s)=>{if(Pa(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&t.push(s)}),t}function hA(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class CF extends br{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,s,a,u,f;const h=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!AF(t)||fA(t.config))return await this.generateContentInternal(h);const p=dA(t);if(p.length>0){const U=p.map(P=>`tools[${P}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${U}.`)}let _,E;const T=$n(h.contents),I=(a=(s=(i=h.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:cA;let x=0;for(;x<I&&(_=await this.generateContentInternal(h),!(!_.functionCalls||_.functionCalls.length===0));){const U=_.candidates[0].content,P=[];for(const G of(f=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[])if(Pa(G)){const z=await G.callTool(_.functionCalls);P.push(...z)}x++,E={role:"user",parts:P},h.contents=$n(h.contents),h.contents.push(U),h.contents.push(E),hA(h.config)&&(T.push(U),T.push(E))}return hA(h.config)&&(_.automaticFunctionCallingHistory=T),_},this.generateContentStream=async t=>{var i,s,a,u,f;if(this.maybeMoveToResponseJsonSchem(t),fA(t.config)){const E=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(E)}const h=dA(t);if(h.length>0){const E=h.map(T=>`tools[${T}]`).join(", ");throw new Error(`Incompatible tools found at ${E}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const p=(a=(s=(i=t==null?void 0:t.config)===null||i===void 0?void 0:i.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,_=(f=(u=t==null?void 0:t.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||f===void 0?void 0:f.disable;if(p&&!_)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var s;let a;const u=[];if(i!=null&&i.generatedImages)for(const h of i.generatedImages)h&&(h!=null&&h.safetyAttributes)&&((s=h==null?void 0:h.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?a=h==null?void 0:h.safetyAttributes:u.push(h);let f;return a?f={generatedImages:u,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:f={generatedImages:u,sdkHttpResponse:i.sdkHttpResponse},f}),this.list=async t=>{var i;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((i=u.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new Ro(wr.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(u),u)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const s={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(s)},this.generateVideos=async t=>{var i,s,a,u,f,h;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((s=t.video)===null||s===void 0)&&s.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(a=t.source)===null||a===void 0?void 0:a.video)===null||u===void 0)&&u.uri&&(!((h=(f=t.source)===null||f===void 0?void 0:f.video)===null||h===void 0)&&h.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,s;const a=(t=e.config)===null||t===void 0?void 0:t.tools;if(!a)return e;const u=await Promise.all(a.map(async h=>Pa(h)?await h.tool():h)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(f.config.tools=u,e.config&&e.config.tools&&Ow(e.config.tools)){const h=(s=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&s!==void 0?s:{};let p=Object.assign({},h);Object.keys(p).length===0&&(p=this.apiClient.getDefaultHeaders()),Fw(p),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:p})}return f}async initAfcToolsMap(e){var t,i,s;const a=new Map;for(const u of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(Pa(u)){const f=u,h=await f.tool();for(const p of(s=h.functionDeclarations)!==null&&s!==void 0?s:[]){if(!p.name)throw new Error("Function declaration name is required.");if(a.has(p.name))throw new Error(`Duplicate tool declaration name: ${p.name}`);a.set(p.name,f)}}return a}async processAfcStream(e){var t,i,s;const a=(s=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:cA;let u=!1,f=0;const h=await this.initAfcToolsMap(e);return(function(p,_,E){return gi(this,arguments,function*(){for(var T,I,x,U,P,G;f<a;){u&&(f++,u=!1);const Z=yield Ie(p.processParamsMaybeAddMcpUsage(E)),ue=yield Ie(p.generateContentStreamInternal(Z)),D=[],M=[];try{for(var Q=!0,z=(I=void 0,yi(ue)),ae;ae=yield Ie(z.next()),T=ae.done,!T;Q=!0){U=ae.value,Q=!1;const N=U;if(yield yield Ie(N),N.candidates&&(!((P=N.candidates[0])===null||P===void 0)&&P.content)){M.push(N.candidates[0].content);for(const k of(G=N.candidates[0].content.parts)!==null&&G!==void 0?G:[])if(f<a&&k.functionCall){if(!k.functionCall.name)throw new Error("Function call name was not returned by the model.");if(_.has(k.functionCall.name)){const O=yield Ie(_.get(k.functionCall.name).callTool([k.functionCall]));D.push(...O)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${_.keys()}, mising tool: ${k.functionCall.name}`)}}}}catch(N){I={error:N}}finally{try{!Q&&!T&&(x=z.return)&&(yield Ie(x.call(z)))}finally{if(I)throw I.error}}if(D.length>0){u=!0;const N=new du;N.candidates=[{content:{role:"user",parts:D}}],yield yield Ie(N);const k=[];k.push(...M),k.push({role:"user",parts:D});const O=$n(E.contents).concat(k);E.contents=O}else break}})})(this,h,e)}async generateContentInternal(e){var t,i,s,a;let u,f="",h={};if(this.apiClient.isVertexAI()){const p=oA(this.apiClient,e);return f=de("{model}:generateContent",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=lA(_),T=new du;return Object.assign(T,E),T})}else{const p=sA(this.apiClient,e);return f=de("{model}:generateContent",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=aA(_),T=new du;return Object.assign(T,E),T})}}async generateContentStreamInternal(e){var t,i,s,a;let u,f="",h={};if(this.apiClient.isVertexAI()){const p=oA(this.apiClient,e);return f=de("{model}:streamGenerateContent?alt=sse",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.requestStream({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),u.then(function(E){return gi(this,arguments,function*(){var T,I,x,U;try{for(var P=!0,G=yi(E),Q;Q=yield Ie(G.next()),T=Q.done,!T;P=!0){U=Q.value,P=!1;const z=U,ae=lA(yield Ie(z.json()),e);ae.sdkHttpResponse={headers:z.headers};const Z=new du;Object.assign(Z,ae),yield yield Ie(Z)}}catch(z){I={error:z}}finally{try{!P&&!T&&(x=G.return)&&(yield Ie(x.call(G)))}finally{if(I)throw I.error}}})})}else{const p=sA(this.apiClient,e);return f=de("{model}:streamGenerateContent?alt=sse",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.requestStream({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),u.then(function(E){return gi(this,arguments,function*(){var T,I,x,U;try{for(var P=!0,G=yi(E),Q;Q=yield Ie(G.next()),T=Q.done,!T;P=!0){U=Q.value,P=!1;const z=U,ae=aA(yield Ie(z.json()),e);ae.sdkHttpResponse={headers:z.headers};const Z=new du;Object.assign(Z,ae),yield yield Ie(Z)}}catch(z){I={error:z}}finally{try{!P&&!T&&(x=G.return)&&(yield Ie(x.call(G)))}finally{if(I)throw I.error}}})})}}async embedContent(e){var t,i,s,a;let u,f="",h={};if(this.apiClient.isVertexAI()){const p=_4(this.apiClient,e);return f=de("{model}:predict",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=E4(_),T=new HS;return Object.assign(T,E),T})}else{const p=y4(this.apiClient,e);return f=de("{model}:batchEmbedContents",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=v4(_),T=new HS;return Object.assign(T,E),T})}}async generateImagesInternal(e){var t,i,s,a;let u,f="",h={};if(this.apiClient.isVertexAI()){const p=M4(this.apiClient,e);return f=de("{model}:predict",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=P4(_),T=new GS;return Object.assign(T,E),T})}else{const p=x4(this.apiClient,e);return f=de("{model}:predict",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=D4(_),T=new GS;return Object.assign(T,E),T})}}async editImageInternal(e){var t,i;let s,a="",u={};if(this.apiClient.isVertexAI()){const f=h4(this.apiClient,e);return a=de("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:h.headers},_})),s.then(h=>{const p=p4(h),_=new _k;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let s,a="",u={};if(this.apiClient.isVertexAI()){const f=M3(this.apiClient,e);return a=de("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:h.headers},_})),s.then(h=>{const p=D3(h),_=new vk;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let s,a="",u={};if(this.apiClient.isVertexAI()){const f=d3(this.apiClient,e);return a=de("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),s.then(h=>{const p=h3(h),_=new Ek;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let s,a="",u={};if(this.apiClient.isVertexAI()){const f=v3(this.apiClient,e);return a=de("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),s.then(h=>{const p=E3(h),_=new Tk;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,s,a;let u,f="",h={};if(this.apiClient.isVertexAI()){const p=W4(this.apiClient,e);return f=de("{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>sg(_))}else{const p=Q4(this.apiClient,e);return f=de("{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>rg(_))}}async listInternal(e){var t,i,s,a;let u,f="",h={};if(this.apiClient.isVertexAI()){const p=s3(this.apiClient,e);return f=de("{models_url}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=a3(_),T=new zS;return Object.assign(T,E),T})}else{const p=r3(this.apiClient,e);return f=de("{models_url}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=o3(_),T=new zS;return Object.assign(T,E),T})}}async update(e){var t,i,s,a;let u,f="",h={};if(this.apiClient.isVertexAI()){const p=N3(this.apiClient,e);return f=de("{model}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>sg(_))}else{const p=b3(this.apiClient,e);return f=de("{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>rg(_))}}async delete(e){var t,i,s,a;let u,f="",h={};if(this.apiClient.isVertexAI()){const p=u4(this.apiClient,e);return f=de("{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=f4(_),T=new JS;return Object.assign(T,E),T})}else{const p=l4(this.apiClient,e);return f=de("{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=c4(_),T=new JS;return Object.assign(T,E),T})}}async countTokens(e){var t,i,s,a;let u,f="",h={};if(this.apiClient.isVertexAI()){const p=s4(this.apiClient,e);return f=de("{model}:countTokens",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=a4(_),T=new KS;return Object.assign(T,E),T})}else{const p=r4(this.apiClient,e);return f=de("{model}:countTokens",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=o4(_),T=new KS;return Object.assign(T,E),T})}}async computeTokens(e){var t,i;let s,a="",u={};if(this.apiClient.isVertexAI()){const f=XO(this.apiClient,e);return a=de("{model}:computeTokens",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:h.headers},_})),s.then(h=>{const p=ZO(h),_=new Sk;return Object.assign(_,p),_})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,s,a;let u,f="",h={};if(this.apiClient.isVertexAI()){const p=F4(this.apiClient,e);return f=de("{model}:predictLongRunning",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u.then(_=>{const E=k4(_),T=new Sd;return Object.assign(T,E),T})}else{const p=O4(this.apiClient,e);return f=de("{model}:predictLongRunning",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u.then(_=>{const E=L4(_),T=new Sd;return Object.assign(T,E),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class IF extends br{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:s,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:s,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,s,a;let u,f="",h={};if(this.apiClient.isVertexAI()){const p=dk(e);return f=de("{operationName}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),u}else{const p=fk(e);return f=de("{operationName}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),u}}async fetchPredictVideosOperationInternal(e){var t,i;let s,a="",u={};if(this.apiClient.isVertexAI()){const f=rk(e);return a=de("{resourceName}:fetchPredictOperation",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wF(n){const e={},t=d(n,["data"]);if(t!=null&&m(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=d(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function RF(n){const e={},t=d(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>LF(a))),m(e,["parts"],s)}const i=d(n,["role"]);return i!=null&&m(e,["role"],i),e}function bF(n,e,t){const i={},s=d(e,["expireTime"]);t!==void 0&&s!=null&&m(t,["expireTime"],s);const a=d(e,["newSessionExpireTime"]);t!==void 0&&a!=null&&m(t,["newSessionExpireTime"],a);const u=d(e,["uses"]);t!==void 0&&u!=null&&m(t,["uses"],u);const f=d(e,["liveConnectConstraints"]);t!==void 0&&f!=null&&m(t,["bidiGenerateContentSetup"],UF(n,f));const h=d(e,["lockAdditionalFields"]);return t!==void 0&&h!=null&&m(t,["fieldMask"],h),i}function NF(n,e){const t={},i=d(e,["config"]);return i!=null&&m(t,["config"],bF(n,i,t)),t}function xF(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const i=d(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function MF(n){const e={},t=d(n,["id"]);t!=null&&m(e,["id"],t);const i=d(n,["args"]);i!=null&&m(e,["args"],i);const s=d(n,["name"]);if(s!=null&&m(e,["name"],s),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function DF(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function PF(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function VF(n,e){const t={},i=d(n,["generationConfig"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig"],i);const s=d(n,["responseModalities"]);e!==void 0&&s!=null&&m(e,["setup","generationConfig","responseModalities"],s);const a=d(n,["temperature"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","temperature"],a);const u=d(n,["topP"]);e!==void 0&&u!=null&&m(e,["setup","generationConfig","topP"],u);const f=d(n,["topK"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","topK"],f);const h=d(n,["maxOutputTokens"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","maxOutputTokens"],h);const p=d(n,["mediaResolution"]);e!==void 0&&p!=null&&m(e,["setup","generationConfig","mediaResolution"],p);const _=d(n,["seed"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","seed"],_);const E=d(n,["speechConfig"]);e!==void 0&&E!=null&&m(e,["setup","generationConfig","speechConfig"],Cy(E));const T=d(n,["thinkingConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","thinkingConfig"],T);const I=d(n,["enableAffectiveDialog"]);e!==void 0&&I!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],I);const x=d(n,["systemInstruction"]);e!==void 0&&x!=null&&m(e,["setup","systemInstruction"],RF(an(x)));const U=d(n,["tools"]);if(e!==void 0&&U!=null){let ue=nl(U);Array.isArray(ue)&&(ue=ue.map(D=>OF(tl(D)))),m(e,["setup","tools"],ue)}const P=d(n,["sessionResumption"]);e!==void 0&&P!=null&&m(e,["setup","sessionResumption"],kF(P));const G=d(n,["inputAudioTranscription"]);e!==void 0&&G!=null&&m(e,["setup","inputAudioTranscription"],G);const Q=d(n,["outputAudioTranscription"]);e!==void 0&&Q!=null&&m(e,["setup","outputAudioTranscription"],Q);const z=d(n,["realtimeInputConfig"]);e!==void 0&&z!=null&&m(e,["setup","realtimeInputConfig"],z);const ae=d(n,["contextWindowCompression"]);e!==void 0&&ae!=null&&m(e,["setup","contextWindowCompression"],ae);const Z=d(n,["proactivity"]);if(e!==void 0&&Z!=null&&m(e,["setup","proactivity"],Z),d(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function UF(n,e){const t={},i=d(e,["model"]);i!=null&&m(t,["setup","model"],Ye(n,i));const s=d(e,["config"]);return s!=null&&m(t,["config"],VF(s,t)),t}function LF(n){const e={},t=d(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const i=d(n,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const s=d(n,["executableCode"]);s!=null&&m(e,["executableCode"],s);const a=d(n,["fileData"]);a!=null&&m(e,["fileData"],xF(a));const u=d(n,["functionCall"]);u!=null&&m(e,["functionCall"],MF(u));const f=d(n,["functionResponse"]);f!=null&&m(e,["functionResponse"],f);const h=d(n,["inlineData"]);h!=null&&m(e,["inlineData"],wF(h));const p=d(n,["text"]);p!=null&&m(e,["text"],p);const _=d(n,["thought"]);_!=null&&m(e,["thought"],_);const E=d(n,["thoughtSignature"]);E!=null&&m(e,["thoughtSignature"],E);const T=d(n,["videoMetadata"]);return T!=null&&m(e,["videoMetadata"],T),e}function kF(n){const e={},t=d(n,["handle"]);if(t!=null&&m(e,["handle"],t),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function OF(n){const e={};if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=d(n,["computerUse"]);t!=null&&m(e,["computerUse"],t);const i=d(n,["fileSearch"]);i!=null&&m(e,["fileSearch"],i);const s=d(n,["codeExecution"]);if(s!=null&&m(e,["codeExecution"],s),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=d(n,["functionDeclarations"]);if(a!=null){let _=a;Array.isArray(_)&&(_=_.map(E=>E)),m(e,["functionDeclarations"],_)}const u=d(n,["googleMaps"]);u!=null&&m(e,["googleMaps"],DF(u));const f=d(n,["googleSearch"]);f!=null&&m(e,["googleSearch"],PF(f));const h=d(n,["googleSearchRetrieval"]);h!=null&&m(e,["googleSearchRetrieval"],h);const p=d(n,["urlContext"]);return p!=null&&m(e,["urlContext"],p),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FF(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const s=Object.keys(i).map(a=>`${t}.${a}`);e.push(...s)}else e.push(t)}return e.join(",")}function qF(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(n.bidiGenerateContentSetup=a,t=a):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const s=n.fieldMask;if(t){const a=FF(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?n.fieldMask=a:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];s.length>0&&(f=s.map(p=>u.includes(p)?`generationConfig.${p}`:p));const h=[];a&&h.push(a),f.length>0&&h.push(...f),h.length>0?n.fieldMask=h.join(","):delete n.fieldMask}else delete n.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?n.fieldMask=s.join(","):delete n.fieldMask;return n}class BF extends br{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=NF(this.apiClient,e);a=de("auth_tokens",f._url),u=f._query,delete f.config,delete f._url,delete f._query;const h=qF(f,e.config);return s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(p=>p.json()),s.then(p=>p)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function HF(n,e){const t={},i=d(n,["force"]);return e!==void 0&&i!=null&&m(e,["_query","force"],i),t}function GF(n){const e={},t=d(n,["name"]);t!=null&&m(e,["_url","name"],t);const i=d(n,["config"]);return i!=null&&HF(i,e),e}function zF(n){const e={},t=d(n,["name"]);return t!=null&&m(e,["_url","name"],t),e}function JF(n,e){const t={},i=d(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const s=d(n,["pageToken"]);return e!==void 0&&s!=null&&m(e,["_query","pageToken"],s),t}function KF(n){const e={},t=d(n,["parent"]);t!=null&&m(e,["_url","parent"],t);const i=d(n,["config"]);return i!=null&&JF(i,e),e}function YF(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=d(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const s=d(n,["documents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(u=>u)),m(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $F extends br{constructor(e){super(),this.apiClient=e,this.list=async t=>new Ro(wr.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:t.parent,config:i.config}),await this.listInternal(t),t)}async get(e){var t,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=zF(e);return a=de("{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async delete(e){var t,i;let s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=GF(e);s=de("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=KF(e);return a=de("{parent}/documents",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),s.then(h=>{const p=YF(h),_=new Ak;return Object.assign(_,p),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QF extends br{constructor(e,t=new $F(e)){super(),this.apiClient=e,this.documents=t,this.list=async(i={})=>new Ro(wr.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=F3(e);return a=de("fileSearchStores",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async get(e){var t,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=H3(e);return a=de("{name}",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async delete(e){var t,i;let s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=B3(e);s=de("{name}",u._url),a=u._query,delete u._url,delete u._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=$3(e);return a=de("fileSearchStores",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),s.then(h=>{const p=Q3(h),_=new Ck;return Object.assign(_,p),_})}}async uploadToFileSearchStoreInternal(e){var t,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=W3(e);return a=de("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),s.then(h=>{const p=X3(h),_=new Ik;return Object.assign(_,p),_})}}async importFile(e){var t,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=J3(e);return a=de("{file_search_store_name}:importFile",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),s.then(h=>{const p=z3(h),_=new vy;return Object.assign(_,p),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let qw=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return qw=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^t()&15>>+i/4).toString(16))};const WF=()=>qw();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ag(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const lg=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Wn extends Error{}class hn extends Wn{constructor(e,t,i,s){super(`${hn.makeMessage(e,t,i)}`),this.status=e,this.headers=s,this.error=t}static makeMessage(e,t,i){const s=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):i;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,t,i,s){if(!e||!s)return new Zd({message:i,cause:lg(t)});const a=t;return e===400?new Hw(e,a,i,s):e===401?new Gw(e,a,i,s):e===403?new zw(e,a,i,s):e===404?new Jw(e,a,i,s):e===409?new Kw(e,a,i,s):e===422?new Yw(e,a,i,s):e===429?new $w(e,a,i,s):e>=500?new Qw(e,a,i,s):new hn(e,a,i,s)}}class ug extends hn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Zd extends hn{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class Bw extends Zd{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Hw extends hn{}class Gw extends hn{}class zw extends hn{}class Jw extends hn{}class Kw extends hn{}class Yw extends hn{}class $w extends hn{}class Qw extends hn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const XF=/^[a-z][a-z0-9+.-]*:/i,ZF=n=>XF.test(n);let cg=n=>(cg=Array.isArray,cg(n));const jF=cg;let e6=jF;const pA=e6;function t6(n){if(!n)return!0;for(const e in n)return!1;return!0}function n6(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const i6=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Wn(`${n} must be an integer`);if(e<0)throw new Wn(`${n} must be a positive integer`);return e},r6=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const s6=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Sa="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function o6(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const a6=()=>{var n,e,t,i,s;const a=o6();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Sa,"X-Stainless-OS":gA(Deno.build.os),"X-Stainless-Arch":mA(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Sa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Sa,"X-Stainless-OS":gA((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":mA((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(s=globalThis.process.version)!==null&&s!==void 0?s:"unknown"};const u=l6();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Sa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Sa,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function l6(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const i=t.exec(navigator.userAgent);if(i){const s=i[1]||0,a=i[2]||0,u=i[3]||0;return{browser:e,version:`${s}.${a}.${u}`}}}return null}const mA=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",gA=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let kf;const u6=()=>kf??(kf=a6());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function c6(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Ww(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function f6(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return Ww({start(){},async pull(t){const{done:i,value:s}=await e.next();i?t.close():t.enqueue(s)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function Xw(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function d6(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const i=n.getReader(),s=i.cancel();i.releaseLock(),await s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const h6=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zw=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Tm(n,e,t){return Zw(),new File(n,e??"unknown_file",t)}function p6(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const m6=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const jw=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",g6=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&jw(n),y6=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function _6(n,e,t){if(Zw(),n=await n,g6(n))return n instanceof File?n:Tm([await n.arrayBuffer()],n.name);if(y6(n)){const s=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),Tm(await fg(s),e,t)}const i=await fg(n);if(e||(e=p6(n)),!(t!=null&&t.type)){const s=i.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof s=="string"&&(t=Object.assign(Object.assign({},t),{type:s}))}return Tm(i,e,t)}async function fg(n){var e,t,i,s,a;let u=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)u.push(n);else if(jw(n))u.push(n instanceof Blob?n:await n.arrayBuffer());else if(m6(n))try{for(var f=!0,h=yi(n),p;p=await h.next(),e=p.done,!e;f=!0){s=p.value,f=!1;const _=s;u.push(...await fg(_))}}catch(_){t={error:_}}finally{try{!f&&!e&&(i=h.return)&&await i.call(h)}finally{if(t)throw t.error}}else{const _=(a=n==null?void 0:n.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof n}${_?`; constructor: ${_}`:""}${v6(n)}`)}return u}function v6(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eR{constructor(e){this._client=e}}eR._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tR(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const yA=Object.freeze(Object.create(null)),E6=(n=tR)=>(function(t,...i){if(t.length===1)return t[0];let s=!1;const a=[],u=t.reduce((_,E,T)=>{var I,x,U;/[?#]/.test(E)&&(s=!0);const P=i[T];let G=(s?encodeURIComponent:n)(""+P);return T!==i.length&&(P==null||typeof P=="object"&&P.toString===((U=Object.getPrototypeOf((x=Object.getPrototypeOf((I=P.hasOwnProperty)!==null&&I!==void 0?I:yA))!==null&&x!==void 0?x:yA))===null||U===void 0?void 0:U.toString))&&(G=P+"",a.push({start:_.length+E.length,length:G.length,error:`Value of type ${Object.prototype.toString.call(P).slice(8,-1)} is not a valid path parameter`})),_+E+(T===i.length?"":G)},""),f=u.split(/[?#]/,1)[0],h=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let p;for(;(p=h.exec(f))!==null;)a.push({start:p.index,length:p[0].length,error:`Value "${p[0]}" can't be safely passed as a path parameter`});if(a.sort((_,E)=>_.start-E.start),a.length>0){let _=0;const E=a.reduce((T,I)=>{const x=" ".repeat(I.start-_),U="^".repeat(I.length);return _=I.start+I.length,T+x+U},"");throw new Wn(`Path parameters result in path with invalid segments:
${a.map(T=>T.error).join(`
`)}
${u}
${E}`)}return u}),Of=E6(tR);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nR extends eR{create(e,t){var i;const{api_version:s=this._client.apiVersion}=e,a=Cd(e,["api_version"]);if("model"in a&&"agent_config"in a)throw new Wn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new Wn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Of`/${s}/interactions`,Object.assign(Object.assign({body:a},t),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,t={},i){const{api_version:s=this._client.apiVersion}=t??{};return this._client.delete(Of`/${s}/interactions/${e}`,i)}cancel(e,t={},i){const{api_version:s=this._client.apiVersion}=t??{};return this._client.post(Of`/${s}/interactions/${e}/cancel`,i)}get(e,t={},i){var s;const a=t??{},{api_version:u=this._client.apiVersion}=a,f=Cd(a,["api_version"]);return this._client.get(Of`/${u}/interactions/${e}`,Object.assign(Object.assign({query:f},i),{stream:(s=t==null?void 0:t.stream)!==null&&s!==void 0?s:!1}))}}nR._key=Object.freeze(["interactions"]);class iR extends nR{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function T6(n){let e=0;for(const s of n)e+=s.length;const t=new Uint8Array(e);let i=0;for(const s of n)t.set(s,i),i+=s.length;return t}let Ff;function wy(n){let e;return(Ff??(e=new globalThis.TextEncoder,Ff=e.encode.bind(e)))(n)}let qf;function _A(n){let e;return(qf??(e=new globalThis.TextDecoder,qf=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jd{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?wy(e):e;this.buffer=T6([this.buffer,t]);const i=[];let s;for(;(s=S6(this.buffer,this.carriageReturnIndex))!=null;){if(s.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=s.index;continue}if(this.carriageReturnIndex!=null&&(s.index!==this.carriageReturnIndex+1||s.carriage)){i.push(_A(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?s.preceding-1:s.preceding,u=_A(this.buffer.subarray(0,a));i.push(u),this.buffer=this.buffer.subarray(s.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}jd.NEWLINE_CHARS=new Set([`
`,"\r"]);jd.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function S6(n,e){for(let s=e??0;s<n.length;s++){if(n[s]===10)return{preceding:s,index:s+1,carriage:!1};if(n[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function A6(n){for(let i=0;i<n.length-1;i++){if(n[i]===10&&n[i+1]===10||n[i]===13&&n[i+1]===13)return i+2;if(n[i]===13&&n[i+1]===10&&i+3<n.length&&n[i+2]===13&&n[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Id={off:0,error:200,warn:300,info:400,debug:500},vA=(n,e,t)=>{if(n){if(n6(Id,n))return n;dn(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(Id))}`)}};function Eu(){}function Bf(n,e,t){return!e||Id[n]>Id[t]?Eu:e[n].bind(e)}const C6={error:Eu,warn:Eu,info:Eu,debug:Eu};let EA=new WeakMap;function dn(n){var e;const t=n.logger,i=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return C6;const s=EA.get(t);if(s&&s[0]===i)return s[1];const a={error:Bf("error",t,i),warn:Bf("warn",t,i),info:Bf("info",t,i),debug:Bf("debug",t,i)};return EA.set(t,[i,a]),a}const ho=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ia{constructor(e,t,i){this.iterator=e,this.controller=t,this.client=i}static fromSSEResponse(e,t,i){let s=!1;const a=i?dn(i):console;function u(){return gi(this,arguments,function*(){var h,p,_,E;if(s)throw new Wn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let T=!1;try{try{for(var I=!0,x=yi(I6(e,t)),U;U=yield Ie(x.next()),h=U.done,!h;I=!0){E=U.value,I=!1;const P=E;if(!T)if(P.data.startsWith("[DONE]")){T=!0;continue}else try{yield yield Ie(JSON.parse(P.data))}catch(G){throw a.error("Could not parse message into JSON:",P.data),a.error("From chunk:",P.raw),G}}}catch(P){p={error:P}}finally{try{!I&&!h&&(_=x.return)&&(yield Ie(_.call(x)))}finally{if(p)throw p.error}}T=!0}catch(P){if(ag(P))return yield Ie(void 0);throw P}finally{T||t.abort()}})}return new Ia(u,t,i)}static fromReadableStream(e,t,i){let s=!1;function a(){return gi(this,arguments,function*(){var h,p,_,E;const T=new jd,I=Xw(e);try{for(var x=!0,U=yi(I),P;P=yield Ie(U.next()),h=P.done,!h;x=!0){E=P.value,x=!1;const G=E;for(const Q of T.decode(G))yield yield Ie(Q)}}catch(G){p={error:G}}finally{try{!x&&!h&&(_=U.return)&&(yield Ie(_.call(U)))}finally{if(p)throw p.error}}for(const G of T.flush())yield yield Ie(G)})}function u(){return gi(this,arguments,function*(){var h,p,_,E;if(s)throw new Wn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let T=!1;try{try{for(var I=!0,x=yi(a()),U;U=yield Ie(x.next()),h=U.done,!h;I=!0){E=U.value,I=!1;const P=E;T||P&&(yield yield Ie(JSON.parse(P)))}}catch(P){p={error:P}}finally{try{!I&&!h&&(_=x.return)&&(yield Ie(_.call(x)))}finally{if(p)throw p.error}}T=!0}catch(P){if(ag(P))return yield Ie(void 0);throw P}finally{T||t.abort()}})}return new Ia(u,t,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],i=this.iterator(),s=a=>({next:()=>{if(a.length===0){const u=i.next();e.push(u),t.push(u)}return a.shift()}});return[new Ia(()=>s(e),this.controller,this.client),new Ia(()=>s(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return Ww({async start(){t=e[Symbol.asyncIterator]()},async pull(i){try{const{value:s,done:a}=await t.next();if(a)return i.close();const u=wy(JSON.stringify(s)+`
`);i.enqueue(u)}catch(s){i.error(s)}},async cancel(){var i;await((i=t.return)===null||i===void 0?void 0:i.call(t))}})}}function I6(n,e){return gi(this,arguments,function*(){var i,s,a,u;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Wn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Wn("Attempted to iterate over a response with no body");const f=new R6,h=new jd,p=Xw(n.body);try{for(var _=!0,E=yi(w6(p)),T;T=yield Ie(E.next()),i=T.done,!i;_=!0){u=T.value,_=!1;const I=u;for(const x of h.decode(I)){const U=f.decode(x);U&&(yield yield Ie(U))}}}catch(I){s={error:I}}finally{try{!_&&!i&&(a=E.return)&&(yield Ie(a.call(E)))}finally{if(s)throw s.error}}for(const I of h.flush()){const x=f.decode(I);x&&(yield yield Ie(x))}})}function w6(n){return gi(this,arguments,function*(){var t,i,s,a;let u=new Uint8Array;try{for(var f=!0,h=yi(n),p;p=yield Ie(h.next()),t=p.done,!t;f=!0){a=p.value,f=!1;const _=a;if(_==null)continue;const E=_ instanceof ArrayBuffer?new Uint8Array(_):typeof _=="string"?wy(_):_;let T=new Uint8Array(u.length+E.length);T.set(u),T.set(E,u.length),u=T;let I;for(;(I=A6(u))!==-1;)yield yield Ie(u.slice(0,I)),u=u.slice(I)}}catch(_){i={error:_}}finally{try{!f&&!t&&(s=h.return)&&(yield Ie(s.call(h)))}finally{if(i)throw i.error}}u.length>0&&(yield yield Ie(u))})}class R6{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,i,s]=b6(e,":");return s.startsWith(" ")&&(s=s.substring(1)),t==="event"?this.event=s:t==="data"&&this.data.push(s),null}}function b6(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function N6(n,e){const{response:t,requestLogID:i,retryOfRequestLogID:s,startTime:a}=e,u=await(async()=>{var f;if(e.options.stream)return dn(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):Ia.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const h=t.headers.get("content-type"),p=(f=h==null?void 0:h.split(";")[0])===null||f===void 0?void 0:f.trim();return(p==null?void 0:p.includes("application/json"))||(p==null?void 0:p.endsWith("+json"))?await t.json():await t.text()})();return dn(n).debug(`[${i}] response parsed`,ho({retryOfRequestLogID:s,url:t.url,status:t.status,body:u,durationMs:Date.now()-a})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ry extends Promise{constructor(e,t,i=N6){super(s=>{s(null)}),this.responsePromise=t,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new Ry(this.client,this.responsePromise,async(t,i)=>e(await this.parseResponse(t,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const rR=Symbol("brand.privateNullableHeaders");function*x6(n){if(!n)return;if(rR in n){const{values:i,nulls:s}=n;yield*i.entries();for(const a of s)yield[a,null];return}let e=!1,t;n instanceof Headers?t=n.entries():pA(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let i of t){const s=i[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const a=pA(i[1])?i[1]:[i[1]];let u=!1;for(const f of a)f!==void 0&&(e&&!u&&(u=!0,yield[s,null]),yield[s,f])}}const hu=n=>{const e=new Headers,t=new Set;for(const i of n){const s=new Set;for(const[a,u]of x6(i)){const f=a.toLowerCase();s.has(f)||(e.delete(a),s.add(f)),u===null?(e.delete(a),t.add(f)):(e.append(a,u),t.delete(f))}}return{[rR]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Sm=n=>{var e,t,i,s,a,u;if(typeof globalThis.process<"u")return(i=(t=(e=ZL)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(u=(a=(s=globalThis.Deno.env)===null||s===void 0?void 0:s.get)===null||a===void 0?void 0:a.call(s,n))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var sR;class eh{constructor(e){var t,i,s,a,u,f,h,{baseURL:p=Sm("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:_=(t=Sm("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:E="v1beta"}=e,T=Cd(e,["baseURL","apiKey","apiVersion"]);const I=Object.assign(Object.assign({apiKey:_,apiVersion:E},T),{baseURL:p||"https://generativelanguage.googleapis.com"});this.baseURL=I.baseURL,this.timeout=(i=I.timeout)!==null&&i!==void 0?i:eh.DEFAULT_TIMEOUT,this.logger=(s=I.logger)!==null&&s!==void 0?s:console;const x="warn";this.logLevel=x,this.logLevel=(u=(a=vA(I.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:vA(Sm("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:x,this.fetchOptions=I.fetchOptions,this.maxRetries=(f=I.maxRetries)!==null&&f!==void 0?f:2,this.fetch=(h=I.fetch)!==null&&h!==void 0?h:c6(),this.encoder=h6,this._options=I,this.apiKey=_,this.apiVersion=E,this.clientAdapter=I.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=hu([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return hu([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return hu([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,i])=>typeof i<"u").map(([t,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(t)}=`;throw new Wn(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Sa}`}defaultIdempotencyKey(){return`stainless-node-retry-${WF()}`}makeStatusError(e,t,i,s){return hn.generate(e,t,i,s)}buildURL(e,t,i){const s=!this.baseURLOverridden()&&i||this.baseURL,a=ZF(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return t6(u)||(t=Object.assign(Object.assign({},u),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(a.search=this.stringifyQuery(t)),a.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:i}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,i){return this.request(Promise.resolve(i).then(s=>Object.assign({method:e,path:t},s)))}request(e,t=null){return new Ry(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,i){var s,a,u;const f=await e,h=(s=f.maxRetries)!==null&&s!==void 0?s:this.maxRetries;t==null&&(t=h),await this.prepareOptions(f);const{req:p,url:_,timeout:E}=await this.buildRequest(f,{retryCount:h-t});await this.prepareRequest(p,{url:_,options:f});const T="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),I=i===void 0?"":`, retryOf: ${i}`,x=Date.now();if(dn(this).debug(`[${T}] sending request`,ho({retryOfRequestLogID:i,method:f.method,url:_,options:f,headers:p.headers})),!((a=f.signal)===null||a===void 0)&&a.aborted)throw new ug;const U=new AbortController,P=await this.fetchWithTimeout(_,p,E,U).catch(lg),G=Date.now();if(P instanceof globalThis.Error){const z=`retrying, ${t} attempts remaining`;if(!((u=f.signal)===null||u===void 0)&&u.aborted)throw new ug;const ae=ag(P)||/timed? ?out/i.test(String(P)+("cause"in P?String(P.cause):""));if(t)return dn(this).info(`[${T}] connection ${ae?"timed out":"failed"} - ${z}`),dn(this).debug(`[${T}] connection ${ae?"timed out":"failed"} (${z})`,ho({retryOfRequestLogID:i,url:_,durationMs:G-x,message:P.message})),this.retryRequest(f,t,i??T);throw dn(this).info(`[${T}] connection ${ae?"timed out":"failed"} - error; no more retries left`),dn(this).debug(`[${T}] connection ${ae?"timed out":"failed"} (error; no more retries left)`,ho({retryOfRequestLogID:i,url:_,durationMs:G-x,message:P.message})),ae?new Bw:new Zd({cause:P})}const Q=`[${T}${I}] ${p.method} ${_} ${P.ok?"succeeded":"failed"} with status ${P.status} in ${G-x}ms`;if(!P.ok){const z=await this.shouldRetry(P);if(t&&z){const N=`retrying, ${t} attempts remaining`;return await d6(P.body),dn(this).info(`${Q} - ${N}`),dn(this).debug(`[${T}] response error (${N})`,ho({retryOfRequestLogID:i,url:P.url,status:P.status,headers:P.headers,durationMs:G-x})),this.retryRequest(f,t,i??T,P.headers)}const ae=z?"error; no more retries left":"error; not retryable";dn(this).info(`${Q} - ${ae}`);const Z=await P.text().catch(N=>lg(N).message),ue=r6(Z),D=ue?void 0:Z;throw dn(this).debug(`[${T}] response error (${ae})`,ho({retryOfRequestLogID:i,url:P.url,status:P.status,headers:P.headers,message:D,durationMs:Date.now()-x})),this.makeStatusError(P.status,ue,D,P.headers)}return dn(this).info(Q),dn(this).debug(`[${T}] response start`,ho({retryOfRequestLogID:i,url:P.url,status:P.status,headers:P.headers,durationMs:G-x})),{response:P,options:f,controller:U,requestLogID:T,retryOfRequestLogID:i,startTime:x}}async fetchWithTimeout(e,t,i,s){const a=t||{},{signal:u,method:f}=a,h=Cd(a,["signal","method"]);u&&u.addEventListener("abort",()=>s.abort());const p=setTimeout(()=>s.abort(),i),_=globalThis.ReadableStream&&h.body instanceof globalThis.ReadableStream||typeof h.body=="object"&&h.body!==null&&Symbol.asyncIterator in h.body,E=Object.assign(Object.assign(Object.assign({signal:s.signal},_?{duplex:"half"}:{}),{method:"GET"}),h);f&&(E.method=f.toUpperCase());try{return await this.fetch.call(void 0,e,E)}finally{clearTimeout(p)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,i,s){var a;let u;const f=s==null?void 0:s.get("retry-after-ms");if(f){const p=parseFloat(f);Number.isNaN(p)||(u=p)}const h=s==null?void 0:s.get("retry-after");if(h&&!u){const p=parseFloat(h);Number.isNaN(p)?u=Date.parse(h)-Date.now():u=p*1e3}if(!(u&&0<=u&&u<60*1e3)){const p=(a=e.maxRetries)!==null&&a!==void 0?a:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(t,p)}return await s6(u),this.makeRequest(e,t-1,i)}calculateDefaultRetryTimeoutMillis(e,t){const a=t-e,u=Math.min(.5*Math.pow(2,a),8),f=1-Math.random()*.25;return u*f*1e3}async buildRequest(e,{retryCount:t=0}={}){var i,s,a;const u=Object.assign({},e),{method:f,path:h,query:p,defaultBaseURL:_}=u,E=this.buildURL(h,p,_);"timeout"in u&&i6("timeout",u.timeout),u.timeout=(i=u.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:T,body:I}=this.buildBody({options:u}),x=await this.buildHeaders({options:e,method:f,bodyHeaders:T,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:f,headers:x},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&I instanceof globalThis.ReadableStream&&{duplex:"half"}),I&&{body:I}),(s=this.fetchOptions)!==null&&s!==void 0?s:{}),(a=u.fetchOptions)!==null&&a!==void 0?a:{}),url:E,timeout:u.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:i,retryCount:s}){let a={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let f=hu([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),u6()),this._options.defaultHeaders,i,e.headers,u]);return this.validateHeaders(f),f.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=hu([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:f6(e)}:this.encoder({body:e,headers:i})}}eh.DEFAULT_TIMEOUT=6e4;class Jt extends eh{constructor(){super(...arguments),this.interactions=new iR(this)}}sR=Jt;Jt.GeminiNextGenAPIClient=sR;Jt.GeminiNextGenAPIClientError=Wn;Jt.APIError=hn;Jt.APIConnectionError=Zd;Jt.APIConnectionTimeoutError=Bw;Jt.APIUserAbortError=ug;Jt.NotFoundError=Jw;Jt.ConflictError=Kw;Jt.RateLimitError=$w;Jt.BadRequestError=Hw;Jt.AuthenticationError=Gw;Jt.InternalServerError=Qw;Jt.PermissionDeniedError=zw;Jt.UnprocessableEntityError=Yw;Jt.toFile=_6;Jt.Interactions=iR;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function M6(n,e){const t={},i=d(n,["name"]);return i!=null&&m(t,["_url","name"],i),t}function D6(n,e){const t={},i=d(n,["name"]);return i!=null&&m(t,["_url","name"],i),t}function P6(n,e){const t={},i=d(n,["sdkHttpResponse"]);return i!=null&&m(t,["sdkHttpResponse"],i),t}function V6(n,e){const t={},i=d(n,["sdkHttpResponse"]);return i!=null&&m(t,["sdkHttpResponse"],i),t}function U6(n,e,t){const i={};if(d(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=d(n,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&m(e,["displayName"],s),d(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=d(n,["epochCount"]);e!==void 0&&a!=null&&m(e,["tuningTask","hyperparameters","epochCount"],a);const u=d(n,["learningRateMultiplier"]);if(u!=null&&m(i,["tuningTask","hyperparameters","learningRateMultiplier"],u),d(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(d(n,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(d(n,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const f=d(n,["batchSize"]);e!==void 0&&f!=null&&m(e,["tuningTask","hyperparameters","batchSize"],f);const h=d(n,["learningRate"]);if(e!==void 0&&h!=null&&m(e,["tuningTask","hyperparameters","learningRate"],h),d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(d(n,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(d(n,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(d(n,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(d(n,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");return i}function L6(n,e,t){const i={};let s=d(t,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const Z=d(n,["validationDataset"]);e!==void 0&&Z!=null&&m(e,["supervisedTuningSpec"],Am(Z))}else if(s==="PREFERENCE_TUNING"){const Z=d(n,["validationDataset"]);e!==void 0&&Z!=null&&m(e,["preferenceOptimizationSpec"],Am(Z))}else if(s==="DISTILLATION"){const Z=d(n,["validationDataset"]);e!==void 0&&Z!=null&&m(e,["distillationSpec"],Am(Z))}const a=d(n,["tunedModelDisplayName"]);e!==void 0&&a!=null&&m(e,["tunedModelDisplayName"],a);const u=d(n,["description"]);e!==void 0&&u!=null&&m(e,["description"],u);let f=d(t,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const Z=d(n,["epochCount"]);e!==void 0&&Z!=null&&m(e,["supervisedTuningSpec","hyperParameters","epochCount"],Z)}else if(f==="PREFERENCE_TUNING"){const Z=d(n,["epochCount"]);e!==void 0&&Z!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],Z)}else if(f==="DISTILLATION"){const Z=d(n,["epochCount"]);e!==void 0&&Z!=null&&m(e,["distillationSpec","hyperParameters","epochCount"],Z)}let h=d(t,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const Z=d(n,["learningRateMultiplier"]);e!==void 0&&Z!=null&&m(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],Z)}else if(h==="PREFERENCE_TUNING"){const Z=d(n,["learningRateMultiplier"]);e!==void 0&&Z!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],Z)}else if(h==="DISTILLATION"){const Z=d(n,["learningRateMultiplier"]);e!==void 0&&Z!=null&&m(e,["distillationSpec","hyperParameters","learningRateMultiplier"],Z)}let p=d(t,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const Z=d(n,["exportLastCheckpointOnly"]);e!==void 0&&Z!=null&&m(e,["supervisedTuningSpec","exportLastCheckpointOnly"],Z)}else if(p==="PREFERENCE_TUNING"){const Z=d(n,["exportLastCheckpointOnly"]);e!==void 0&&Z!=null&&m(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],Z)}else if(p==="DISTILLATION"){const Z=d(n,["exportLastCheckpointOnly"]);e!==void 0&&Z!=null&&m(e,["distillationSpec","exportLastCheckpointOnly"],Z)}let _=d(t,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const Z=d(n,["adapterSize"]);e!==void 0&&Z!=null&&m(e,["supervisedTuningSpec","hyperParameters","adapterSize"],Z)}else if(_==="PREFERENCE_TUNING"){const Z=d(n,["adapterSize"]);e!==void 0&&Z!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],Z)}else if(_==="DISTILLATION"){const Z=d(n,["adapterSize"]);e!==void 0&&Z!=null&&m(e,["distillationSpec","hyperParameters","adapterSize"],Z)}let E=d(t,["config","method"]);if(E===void 0&&(E="SUPERVISED_FINE_TUNING"),E==="SUPERVISED_FINE_TUNING"){const Z=d(n,["tuningMode"]);e!==void 0&&Z!=null&&m(e,["supervisedTuningSpec","tuningMode"],Z)}const T=d(n,["customBaseModel"]);e!==void 0&&T!=null&&m(e,["customBaseModel"],T);let I=d(t,["config","method"]);if(I===void 0&&(I="SUPERVISED_FINE_TUNING"),I==="SUPERVISED_FINE_TUNING"){const Z=d(n,["batchSize"]);e!==void 0&&Z!=null&&m(e,["supervisedTuningSpec","hyperParameters","batchSize"],Z)}let x=d(t,["config","method"]);if(x===void 0&&(x="SUPERVISED_FINE_TUNING"),x==="SUPERVISED_FINE_TUNING"){const Z=d(n,["learningRate"]);e!==void 0&&Z!=null&&m(e,["supervisedTuningSpec","hyperParameters","learningRate"],Z)}const U=d(n,["labels"]);e!==void 0&&U!=null&&m(e,["labels"],U);const P=d(n,["beta"]);e!==void 0&&P!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","beta"],P);const G=d(n,["baseTeacherModel"]);e!==void 0&&G!=null&&m(e,["distillationSpec","baseTeacherModel"],G);const Q=d(n,["tunedTeacherModelSource"]);e!==void 0&&Q!=null&&m(e,["distillationSpec","tunedTeacherModelSource"],Q);const z=d(n,["sftLossWeightMultiplier"]);e!==void 0&&z!=null&&m(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],z);const ae=d(n,["outputUri"]);return e!==void 0&&ae!=null&&m(e,["outputUri"],ae),i}function k6(n,e){const t={},i=d(n,["baseModel"]);i!=null&&m(t,["baseModel"],i);const s=d(n,["preTunedModel"]);s!=null&&m(t,["preTunedModel"],s);const a=d(n,["trainingDataset"]);a!=null&&$6(a);const u=d(n,["config"]);return u!=null&&U6(u,t),t}function O6(n,e){const t={},i=d(n,["baseModel"]);i!=null&&m(t,["baseModel"],i);const s=d(n,["preTunedModel"]);s!=null&&m(t,["preTunedModel"],s);const a=d(n,["trainingDataset"]);a!=null&&Q6(a,t,e);const u=d(n,["config"]);return u!=null&&L6(u,t,e),t}function F6(n,e){const t={},i=d(n,["name"]);return i!=null&&m(t,["_url","name"],i),t}function q6(n,e){const t={},i=d(n,["name"]);return i!=null&&m(t,["_url","name"],i),t}function B6(n,e,t){const i={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const a=d(n,["pageToken"]);e!==void 0&&a!=null&&m(e,["_query","pageToken"],a);const u=d(n,["filter"]);return e!==void 0&&u!=null&&m(e,["_query","filter"],u),i}function H6(n,e,t){const i={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&m(e,["_query","pageSize"],s);const a=d(n,["pageToken"]);e!==void 0&&a!=null&&m(e,["_query","pageToken"],a);const u=d(n,["filter"]);return e!==void 0&&u!=null&&m(e,["_query","filter"],u),i}function G6(n,e){const t={},i=d(n,["config"]);return i!=null&&B6(i,t),t}function z6(n,e){const t={},i=d(n,["config"]);return i!=null&&H6(i,t),t}function J6(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const s=d(n,["nextPageToken"]);s!=null&&m(t,["nextPageToken"],s);const a=d(n,["tunedModels"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(f=>oR(f))),m(t,["tuningJobs"],u)}return t}function K6(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const s=d(n,["nextPageToken"]);s!=null&&m(t,["nextPageToken"],s);const a=d(n,["tuningJobs"]);if(a!=null){let u=a;Array.isArray(u)&&(u=u.map(f=>dg(f))),m(t,["tuningJobs"],u)}return t}function Y6(n,e){const t={},i=d(n,["name"]);i!=null&&m(t,["model"],i);const s=d(n,["name"]);return s!=null&&m(t,["endpoint"],s),t}function $6(n,e){const t={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=d(n,["examples"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>a)),m(t,["examples","examples"],s)}return t}function Q6(n,e,t){const i={};let s=d(t,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const u=d(n,["gcsUri"]);e!==void 0&&u!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(s==="PREFERENCE_TUNING"){const u=d(n,["gcsUri"]);e!==void 0&&u!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}else if(s==="DISTILLATION"){const u=d(n,["gcsUri"]);e!==void 0&&u!=null&&m(e,["distillationSpec","promptDatasetUri"],u)}let a=d(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const u=d(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(a==="PREFERENCE_TUNING"){const u=d(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}else if(a==="DISTILLATION"){const u=d(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&m(e,["distillationSpec","promptDatasetUri"],u)}if(d(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function oR(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const s=d(n,["name"]);s!=null&&m(t,["name"],s);const a=d(n,["state"]);a!=null&&m(t,["state"],Sw(a));const u=d(n,["createTime"]);u!=null&&m(t,["createTime"],u);const f=d(n,["tuningTask","startTime"]);f!=null&&m(t,["startTime"],f);const h=d(n,["tuningTask","completeTime"]);h!=null&&m(t,["endTime"],h);const p=d(n,["updateTime"]);p!=null&&m(t,["updateTime"],p);const _=d(n,["description"]);_!=null&&m(t,["description"],_);const E=d(n,["baseModel"]);E!=null&&m(t,["baseModel"],E);const T=d(n,["_self"]);return T!=null&&m(t,["tunedModel"],Y6(T)),t}function dg(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const s=d(n,["name"]);s!=null&&m(t,["name"],s);const a=d(n,["state"]);a!=null&&m(t,["state"],Sw(a));const u=d(n,["createTime"]);u!=null&&m(t,["createTime"],u);const f=d(n,["startTime"]);f!=null&&m(t,["startTime"],f);const h=d(n,["endTime"]);h!=null&&m(t,["endTime"],h);const p=d(n,["updateTime"]);p!=null&&m(t,["updateTime"],p);const _=d(n,["error"]);_!=null&&m(t,["error"],_);const E=d(n,["description"]);E!=null&&m(t,["description"],E);const T=d(n,["baseModel"]);T!=null&&m(t,["baseModel"],T);const I=d(n,["tunedModel"]);I!=null&&m(t,["tunedModel"],I);const x=d(n,["preTunedModel"]);x!=null&&m(t,["preTunedModel"],x);const U=d(n,["supervisedTuningSpec"]);U!=null&&m(t,["supervisedTuningSpec"],U);const P=d(n,["preferenceOptimizationSpec"]);P!=null&&m(t,["preferenceOptimizationSpec"],P);const G=d(n,["distillationSpec"]);G!=null&&m(t,["distillationSpec"],G);const Q=d(n,["tuningDataStats"]);Q!=null&&m(t,["tuningDataStats"],Q);const z=d(n,["encryptionSpec"]);z!=null&&m(t,["encryptionSpec"],z);const ae=d(n,["partnerModelTuningSpec"]);ae!=null&&m(t,["partnerModelTuningSpec"],ae);const Z=d(n,["customBaseModel"]);Z!=null&&m(t,["customBaseModel"],Z);const ue=d(n,["experiment"]);ue!=null&&m(t,["experiment"],ue);const D=d(n,["labels"]);D!=null&&m(t,["labels"],D);const M=d(n,["outputUri"]);M!=null&&m(t,["outputUri"],M);const N=d(n,["pipelineJob"]);N!=null&&m(t,["pipelineJob"],N);const k=d(n,["serviceAccount"]);k!=null&&m(t,["serviceAccount"],k);const O=d(n,["tunedModelDisplayName"]);O!=null&&m(t,["tunedModelDisplayName"],O);const B=d(n,["veoTuningSpec"]);return B!=null&&m(t,["veoTuningSpec"],B),t}function W6(n,e){const t={},i=d(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const s=d(n,["name"]);s!=null&&m(t,["name"],s);const a=d(n,["metadata"]);a!=null&&m(t,["metadata"],a);const u=d(n,["done"]);u!=null&&m(t,["done"],u);const f=d(n,["error"]);return f!=null&&m(t,["error"],f),t}function Am(n,e){const t={},i=d(n,["gcsUri"]);i!=null&&m(t,["validationDatasetUri"],i);const s=d(n,["vertexDatasetResource"]);return s!=null&&m(t,["validationDatasetUri"],s),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class X6 extends br{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Ro(wr.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const s={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(s.checkpointId=t.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},t),{preTunedModel:s});return a.baseModel=void 0,await this.tuneInternal(a)}else{const s=Object.assign({},t);return await this.tuneInternal(s)}else{const s=Object.assign({},t),a=await this.tuneMldevInternal(s);let u="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?u=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(u=a.name.split("/operations/")[0]),{name:u,state:jm.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,s,a;let u,f="",h={};if(this.apiClient.isVertexAI()){const p=q6(e);return f=de("{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>dg(_))}else{const p=F6(e);return f=de("{name}",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>oR(_))}}async listInternal(e){var t,i,s,a;let u,f="",h={};if(this.apiClient.isVertexAI()){const p=z6(e);return f=de("tuningJobs",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=K6(_),T=new YS;return Object.assign(T,E),T})}else{const p=G6(e);return f=de("tunedModels",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=J6(_),T=new YS;return Object.assign(T,E),T})}}async cancel(e){var t,i,s,a;let u,f="",h={};if(this.apiClient.isVertexAI()){const p=D6(e);return f=de("{name}:cancel",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=V6(_),T=new $S;return Object.assign(T,E),T})}else{const p=M6(e);return f=de("{name}:cancel",p._url),h=p._query,delete p._url,delete p._query,u=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(p),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(E=>{const T=E;return T.sdkHttpResponse={headers:_.headers},T})),u.then(_=>{const E=P6(_),T=new $S;return Object.assign(T,E),T})}}async tuneInternal(e){var t,i;let s,a="",u={};if(this.apiClient.isVertexAI()){const f=O6(e,e);return a=de("tuningJobs",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:h.headers},_})),s.then(h=>dg(h))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let s,a="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=k6(e);return a=de("tunedModels",f._url),u=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:a,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const _=p;return _.sdkHttpResponse={headers:h.headers},_})),s.then(h=>W6(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Z6{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const j6=1024*1024*8,e5=3,t5=1e3,n5=2,wd="x-goog-upload-status";async function i5(n,e,t){var i;const s=await aR(n,e,t),a=await(s==null?void 0:s.json());if(((i=s==null?void 0:s.headers)===null||i===void 0?void 0:i[wd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function r5(n,e,t){var i;const s=await aR(n,e,t),a=await(s==null?void 0:s.json());if(((i=s==null?void 0:s.headers)===null||i===void 0?void 0:i[wd])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=gw(a),f=new Ey;return Object.assign(f,u),f}async function aR(n,e,t){var i,s;let a=0,u=0,f=new tg(new Response),h="upload";for(a=n.size;u<a;){const p=Math.min(j6,a-u),_=n.slice(u,u+p);u+p>=a&&(h+=", finalize");let E=0,T=t5;for(;E<e5&&(f=await t.request({path:"",body:_,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":h,"X-Goog-Upload-Offset":String(u),"Content-Length":String(p)}}}),!(!((i=f==null?void 0:f.headers)===null||i===void 0)&&i[wd]));)E++,await o5(T),T=T*n5;if(u+=p,((s=f==null?void 0:f.headers)===null||s===void 0?void 0:s[wd])!=="active")break;if(a<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return f}async function s5(n){return{size:n.size,type:n.type}}function o5(n){return new Promise(e=>setTimeout(e,n))}class a5{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await i5(e,t,i)}async uploadToFileSearchStore(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await r5(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await s5(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class l5{create(e,t,i){return new u5(e,t,i)}}class u5{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const TA="x-goog-api-key";class c5{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(TA)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(TA,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const f5="gl-node/";class d5{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const t=new Jt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=nk(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const s=new c5(this.apiKey);this.apiClient=new sF({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:f5+"web",uploader:new a5,downloader:new Z6}),this.models=new CF(this.apiClient),this.live=new _F(this.apiClient,s,new l5),this.batches=new D2(this.apiClient),this.chats=new hO(this.models,this.apiClient),this.caches=new cO(this.apiClient),this.files=new IO(this.apiClient),this.operations=new IF(this.apiClient),this.authTokens=new BF(this.apiClient),this.tunings=new X6(this.apiClient),this.fileSearchStores=new QF(this.apiClient)}}const SA=()=>new d5({apiKey:"PLACEHOLDER_API_KEY"}),h5={async generateProductDescription(n,e){const t=SA(),i=`You are a world-class luxury perfume copywriter for "Nafs Essence". 
    Write a short, evocative, and sophisticated description for a perfume oil.
    Name: ${n}
    Category: ${e}
    Tone: Deep, traditional, elegant, and mysterious.
    Length: 2-3 sentences max. Do not use emojis.`;try{return(await t.models.generateContent({model:"gemini-3-flash-preview",contents:i})).text||"A mysterious blend crafted for the soul."}catch(s){return console.error("AI Description Error:",s),"An exquisite essence of unmatched quality."}},async getScentRecommendation(n,e){const t=SA(),s=`You are the "Scent Alchemist" for Nafs Essence, a luxury perfume oil boutique.
    
    Our Current Inventory:
    ${e.map(a=>`- ${a.name}: ${a.description} (Category: ${a.category})`).join(`
`)}
    
    User Request: "${n}"
    
    Your Task: Recommend 1 or 2 specific oils from our inventory that match the user's request. 
    Explain why in a poetic, high-end manner. If nothing matches, suggest our signature Midnight Oud.
    Keep the response concise (under 80 words).`;try{return(await t.models.generateContent({model:"gemini-3-pro-preview",contents:s})).text||"I recommend our signature Midnight Oud for a timeless experience."}catch(a){return console.error("AI Recommendation Error:",a),"I recommend exploring our Oud collection for a truly profound experience."}}},p5=()=>{const{settings:n,products:e}=Zn(),[t,i]=W.useState(!1),[s,a]=W.useState(""),[u,f]=W.useState([{role:"ai",text:"Welcome to the inner sanctum of Nafs. I am your Scent Alchemist. How may I guide your senses today?"}]),[h,p]=W.useState(!1),_=W.useRef(null);W.useEffect(()=>{_.current&&(_.current.scrollTop=_.current.scrollHeight)},[u,h]);const E=async()=>{if(!s.trim()||h)return;const T=s;a(""),f(x=>[...x,{role:"user",text:T}]),p(!0);const I=await h5.getScentRecommendation(T,e);f(x=>[...x,{role:"ai",text:I}]),p(!1)};return w.jsxs(w.Fragment,{children:[w.jsxs("button",{onClick:()=>i(!t),className:"fixed bottom-8 right-8 z-[100] size-14 rounded-full flex items-center justify-center shadow-2xl transition-transform hover:scale-110 active:scale-95 group",style:{backgroundColor:n.primaryColor},children:[w.jsx("span",{className:"material-symbols-outlined text-black font-bold group-hover:rotate-12 transition-transform",children:t?"close":"temp_orient_low"}),w.jsxs("span",{className:"absolute -top-1 -right-1 flex h-4 w-4",children:[w.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-white opacity-75"}),w.jsx("span",{className:"relative inline-flex rounded-full h-4 w-4 bg-white/20"})]})]}),t&&w.jsxs("div",{className:"fixed bottom-24 right-8 z-[100] w-[350px] max-h-[500px] flex flex-col bg-[#121212]/95 backdrop-blur-xl border border-white/10 rounded-2xl shadow-2xl overflow-hidden animate-fade-in-up",children:[w.jsxs("div",{className:"p-4 border-b border-white/5 bg-white/5 flex items-center gap-3",children:[w.jsx("div",{className:"size-8 rounded-full flex items-center justify-center",style:{backgroundColor:`${n.primaryColor}22`,color:n.primaryColor},children:w.jsx("span",{className:"material-symbols-outlined text-sm",children:"auto_awesome"})}),w.jsxs("div",{children:[w.jsx("p",{className:"text-sm font-bold",children:"Scent Alchemist"}),w.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-widest",children:"Nafs Essence AI"})]})]}),w.jsxs("div",{ref:_,className:"flex-1 overflow-y-auto p-4 space-y-4 min-h-[300px] scroll-smooth custom-scrollbar",children:[u.map((T,I)=>w.jsx("div",{className:`flex ${T.role==="user"?"justify-end":"justify-start"}`,children:w.jsx("div",{className:`max-w-[85%] p-3 rounded-2xl text-xs leading-relaxed ${T.role==="user"?"bg-primary/20 text-white border border-primary/20":"bg-white/5 text-gray-300"}`,style:T.role==="user"?{borderColor:`${n.primaryColor}44`}:{},children:T.text})},I)),h&&w.jsx("div",{className:"flex justify-start",children:w.jsxs("div",{className:"bg-white/5 p-3 rounded-2xl flex gap-1 items-center",children:[w.jsx("div",{className:"size-1 bg-gray-500 rounded-full animate-bounce"}),w.jsx("div",{className:"size-1 bg-gray-500 rounded-full animate-bounce [animation-delay:0.2s]"}),w.jsx("div",{className:"size-1 bg-gray-500 rounded-full animate-bounce [animation-delay:0.4s]"})]})})]}),w.jsx("div",{className:"p-4 border-t border-white/5 bg-white/[0.02]",children:w.jsxs("div",{className:"relative",children:[w.jsx("input",{value:s,onChange:T=>a(T.target.value),onKeyDown:T=>T.key==="Enter"&&E(),placeholder:"Ask the Alchemist...",className:"w-full bg-white/5 border border-white/10 rounded-xl py-2 pl-4 pr-10 text-xs outline-none focus:border-primary transition-colors"}),w.jsx("button",{onClick:E,className:"absolute right-2 top-1/2 -translate-y-1/2 text-primary hover:scale-110 transition-transform",style:{color:n.primaryColor},children:w.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"send"})})]})})]})]})},by=({children:n})=>{const{settings:e}=Zn();return w.jsxs("div",{className:`min-h-screen transition-colors duration-300 ${e.isDarkMode?"bg-[#0a0a0a] text-white":"bg-white text-black"}`,children:[w.jsx("header",{className:"sticky top-0 z-50 border-b border-white/10 bg-black/80 backdrop-blur-md",children:w.jsxs("div",{className:"mx-auto flex h-16 max-w-7xl items-center justify-between px-4 sm:px-6 lg:px-8",children:[w.jsxs(rn,{to:"/",className:"flex items-center gap-3",children:[w.jsx("div",{className:"flex size-8 items-center justify-center rounded-full bg-primary/10",style:{color:e.primaryColor},children:w.jsx("span",{className:"material-symbols-outlined",style:{fontVariationSettings:"'FILL' 1"},children:"spa"})}),w.jsx("span",{className:"text-xl font-bold tracking-tight",children:e.websiteName})]}),w.jsxs("nav",{className:"hidden md:flex items-center gap-8",children:[w.jsx(rn,{to:"/",className:"text-sm font-medium hover:opacity-70 transition-opacity",children:"Home"}),w.jsx(rn,{to:"/shop",className:"text-sm font-medium hover:opacity-70 transition-opacity",children:"Shop"}),w.jsx(rn,{to:"/admin",className:"text-sm font-medium text-gray-500 hover:text-white transition-colors",children:"Admin"})]}),w.jsx("div",{className:"flex items-center gap-4",children:w.jsxs(rn,{to:"/checkout",className:"group flex items-center gap-2 rounded-full px-4 py-2 text-sm font-bold transition-all",style:{backgroundColor:e.primaryColor,color:"#000"},children:[w.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"shopping_cart"}),w.jsx("span",{children:"Checkout"})]})})]})}),w.jsx("main",{children:n}),w.jsx(p5,{}),w.jsx("footer",{className:"border-t border-white/10 py-16 px-4",children:w.jsxs("div",{className:"mx-auto max-w-7xl flex flex-col md:flex-row justify-between items-center gap-8 text-center md:text-left",children:[w.jsxs("div",{className:"flex flex-col gap-4",children:[w.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-3",children:[w.jsx("div",{className:"flex size-8 items-center justify-center rounded-full bg-primary/10",style:{color:e.primaryColor},children:w.jsx("span",{className:"material-symbols-outlined",children:"spa"})}),w.jsx("span",{className:"text-xl font-bold",children:e.websiteName})]}),w.jsx("p",{className:"text-gray-400 text-sm max-w-xs",children:e.footerText})]}),w.jsxs("div",{className:"flex gap-8 text-sm font-medium",children:[w.jsx(rn,{to:"/",className:"hover:text-primary transition-colors",children:"Home"}),w.jsx(rn,{to:"/shop",className:"hover:text-primary transition-colors",children:"Products"}),w.jsx(rn,{to:"/admin/login",className:"hover:text-primary transition-colors",children:"Admin Login"})]}),w.jsxs("p",{className:"text-gray-500 text-xs",children:[" 2024 ",e.websiteName,". All rights reserved."]})]})})]})},m5=()=>{const{settings:n,products:e}=Zn(),t=e.slice(0,3);return w.jsxs(by,{children:[w.jsxs("section",{className:"relative h-[90vh] flex items-center justify-center overflow-hidden",children:[w.jsxs("div",{className:"absolute inset-0 z-0",children:[w.jsx("img",{src:"https://images.unsplash.com/photo-1588405748353-0c58d3d3a89c?auto=format&fit=crop&q=80&w=2000",className:"w-full h-full object-cover opacity-40",alt:"Hero Background"}),w.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black via-transparent to-black"})]}),w.jsxs("div",{className:"relative z-10 text-center px-4 max-w-4xl",children:[w.jsx("h1",{className:"text-6xl md:text-8xl font-black mb-6 tracking-tighter",children:n.heroTitle}),w.jsx("p",{className:"text-xl md:text-2xl text-gray-400 mb-10 font-light leading-relaxed",children:n.heroSubtitle}),w.jsx(rn,{to:"/shop",className:"inline-block px-10 py-5 rounded-full font-bold text-black transition-transform hover:scale-105 active:scale-95",style:{backgroundColor:n.primaryColor},children:"Explore Collection"})]})]}),w.jsxs("section",{className:"py-32 px-4 max-w-7xl mx-auto",children:[w.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end mb-16 gap-6",children:[w.jsxs("div",{children:[w.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Our Masterpieces"}),w.jsx("p",{className:"text-gray-500 max-w-md",children:"Each essence is carefully distilled to bring out the deepest notes of tradition and luxury."})]}),w.jsx(rn,{to:"/shop",className:"text-sm font-bold border-b-2 pb-1",style:{borderColor:n.primaryColor},children:"View All Products"})]}),w.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:t.map(i=>w.jsxs(rn,{to:"/shop",className:"group bg-white/5 rounded-3xl overflow-hidden border border-white/10 transition-all hover:border-white/20",children:[w.jsx("div",{className:"aspect-[4/5] overflow-hidden",children:w.jsx("img",{src:i.image,alt:i.name,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"})}),w.jsxs("div",{className:"p-8",children:[w.jsx("p",{className:"text-xs font-bold uppercase tracking-widest text-gray-500 mb-2",children:i.category}),w.jsx("h3",{className:"text-2xl font-bold mb-4",children:i.name}),w.jsxs("div",{className:"flex justify-between items-center",children:[w.jsxs("span",{className:"text-xl font-black",style:{color:n.primaryColor},children:["",i.price]}),w.jsx("span",{className:"material-symbols-outlined opacity-0 group-hover:opacity-100 transition-opacity translate-x-4 group-hover:translate-x-0",children:"arrow_forward"})]})]})]},i.id))})]}),w.jsx("section",{className:"py-32 bg-white/[0.02] border-y border-white/5 px-4",children:w.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[w.jsx("span",{className:"material-symbols-outlined text-5xl mb-8",style:{color:n.primaryColor},children:"potted_plant"}),w.jsx("h2",{className:"text-3xl md:text-5xl font-bold mb-8 leading-tight",children:"Authentic Oud, Rare Musks, and the Art of Fine Perfumery."}),w.jsx("p",{className:"text-gray-400 text-lg leading-relaxed",children:n.footerText})]})})]})},g5=()=>{const{products:n,settings:e}=Zn(),[t,i]=W.useState("All"),s=["All",...new Set(n.map(u=>u.category))],a=t==="All"?n:n.filter(u=>u.category===t);return w.jsx(by,{children:w.jsxs("div",{className:"py-16 px-4 max-w-7xl mx-auto",children:[w.jsxs("header",{className:"mb-12 text-center",children:[w.jsx("h1",{className:"text-5xl font-black text-white mb-4",children:"Our Essence"}),w.jsx("p",{className:"text-gray-400 max-w-xl mx-auto",children:"Explore our range of artisanal perfume oils, hand-poured and steeped in tradition."})]}),w.jsx("div",{className:"flex flex-wrap justify-center gap-3 mb-12",children:s.map(u=>w.jsx("button",{onClick:()=>i(u),className:`px-6 py-2 rounded-full text-sm font-bold transition-all border ${t===u?"bg-primary border-primary text-black":"bg-white/5 border-white/10 text-white hover:border-primary/50"}`,style:t===u?{backgroundColor:e.primaryColor,borderColor:e.primaryColor}:{},children:u},u))}),w.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8",children:a.map(u=>w.jsxs("div",{className:"flex flex-col bg-[#121212] rounded-xl overflow-hidden border border-white/5 transition-all hover:border-primary/50 group",children:[w.jsx("div",{className:"aspect-[4/5] overflow-hidden",children:w.jsx("img",{src:u.image,alt:u.name,className:"w-full h-full object-cover transition-transform group-hover:scale-105"})}),w.jsxs("div",{className:"p-5 flex flex-col flex-1",children:[w.jsxs("div",{className:"flex justify-between items-start mb-2",children:[w.jsx("h3",{className:"text-lg font-bold text-white leading-tight",children:u.name}),w.jsxs("div",{className:"flex items-center text-primary text-xs font-bold",style:{color:e.primaryColor},children:[u.rating," ",w.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"star"})]})]}),w.jsx("p",{className:"text-xs text-gray-500 mb-4",children:u.category}),w.jsxs("div",{className:"mt-auto flex items-center justify-between pt-4 border-t border-white/5",children:[w.jsxs("span",{className:"text-xl font-bold text-white",children:["",u.price]}),w.jsx(rn,{to:"/checkout",state:{product:u},className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-primary text-black text-xs font-bold transition-transform active:scale-95",style:{backgroundColor:e.primaryColor},children:"Add to Cart"})]})]})]},u.id))})]})})},y5=()=>{var _,E;const{settings:n,products:e}=Zn(),t=Xn(),i=Bu(),s=((_=t.state)==null?void 0:_.product)||e[0],[a,u]=W.useState({name:"",email:"",mobile:"",address:"",productId:(s==null?void 0:s.id)||"",size:((E=s==null?void 0:s.sizes)==null?void 0:E[0])||"6ml",quantity:1}),f=e.find(T=>T.id===a.productId),h=f?f.price*a.quantity:0,p=async T=>{if(T.preventDefault(),!f)return;const I={customerName:a.name,email:a.email,mobile:a.mobile,address:a.address,items:[{productId:f.id,productName:f.name,quantity:a.quantity,price:f.price,size:a.size}],total:h,status:"Pending",date:new Date().toLocaleString(),createdAt:RV()};try{await UI(ba(mi,"orders"),I),alert("Order placed successfully! We will contact you soon."),i("/")}catch{alert("Error placing order. Please try again.")}};return w.jsx(by,{children:w.jsx("div",{className:"py-20 px-4 max-w-7xl mx-auto",children:w.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16",children:[w.jsxs("form",{onSubmit:p,className:"space-y-8",children:[w.jsx("h2",{className:"text-4xl font-black",children:"Checkout"}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[w.jsx("input",{required:!0,placeholder:"Full Name",className:"bg-white/5 border border-white/10 p-4 rounded-xl outline-none focus:border-primary",value:a.name,onChange:T=>u({...a,name:T.target.value})}),w.jsx("input",{required:!0,type:"email",placeholder:"Email Address",className:"bg-white/5 border border-white/10 p-4 rounded-xl outline-none focus:border-primary",value:a.email,onChange:T=>u({...a,email:T.target.value})})]}),w.jsx("input",{required:!0,placeholder:"Mobile Number",className:"bg-white/5 border border-white/10 p-4 rounded-xl w-full outline-none focus:border-primary",value:a.mobile,onChange:T=>u({...a,mobile:T.target.value})}),w.jsx("textarea",{required:!0,placeholder:"Full Shipping Address",className:"bg-white/5 border border-white/10 p-4 rounded-xl w-full h-32 outline-none focus:border-primary",value:a.address,onChange:T=>u({...a,address:T.target.value})}),w.jsxs("button",{type:"submit",className:"w-full h-16 rounded-xl font-bold text-black text-lg transition-transform active:scale-95",style:{backgroundColor:n.primaryColor},children:["Confirm Order ",h]})]}),w.jsxs("div",{className:"bg-white/5 p-8 rounded-3xl border border-white/10 h-fit sticky top-24",children:[w.jsx("h3",{className:"text-xl font-bold mb-6",children:"Order Summary"}),f&&w.jsxs("div",{className:"flex gap-4",children:[w.jsx("img",{src:f.image,className:"size-20 rounded-xl object-cover",alt:""}),w.jsxs("div",{children:[w.jsx("p",{className:"font-bold",children:f.name}),w.jsxs("p",{className:"text-sm text-gray-500",children:[a.size,"  Qty: ",a.quantity]}),w.jsxs("p",{className:"text-primary font-bold",style:{color:n.primaryColor},children:["",h]})]})]})]})]})})})},_5=()=>{const[n,e]=W.useState(""),[t,i]=W.useState(""),[s,a]=W.useState(""),[u,f]=W.useState(!1),{settings:h}=Zn(),p=Bu(),_=async E=>{E.preventDefault(),a(""),f(!0);try{await DU(yy,n,t),p("/admin")}catch(T){console.error("Auth error:",T.code),T.code==="auth/user-not-found"||T.code==="auth/wrong-password"?a("Invalid admin credentials."):a("Access denied. Please check your connection.")}finally{f(!1)}};return w.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-[#0a0a0a] px-4 relative overflow-hidden",children:[w.jsxs("div",{className:"absolute inset-0 opacity-20 pointer-events-none",children:[w.jsx("div",{className:"absolute top-0 left-0 w-96 h-96 bg-primary blur-[120px] rounded-full",style:{backgroundColor:h.primaryColor}}),w.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-primary blur-[120px] rounded-full",style:{backgroundColor:h.primaryColor}})]}),w.jsxs("div",{className:"relative z-10 w-full max-w-md bg-[#161616] p-10 rounded-[2.5rem] border border-white/5 shadow-2xl",children:[w.jsxs("div",{className:"text-center mb-10",children:[w.jsx("div",{className:"inline-flex size-16 items-center justify-center rounded-2xl bg-white/5 mb-6 border border-white/10",children:w.jsx("span",{className:"material-symbols-outlined text-3xl",style:{color:h.primaryColor},children:"lock"})}),w.jsx("h2",{className:"text-3xl font-black mb-2",children:"Vault Access"}),w.jsx("p",{className:"text-gray-500 text-sm italic",children:"Nafs Essence Administrative Portal"})]}),w.jsxs("form",{onSubmit:_,className:"space-y-6",children:[s&&w.jsx("div",{className:"p-4 bg-red-500/10 border border-red-500/20 text-red-500 rounded-xl text-xs font-bold text-center animate-shake",children:s}),w.jsxs("div",{className:"space-y-1",children:[w.jsx("label",{className:"text-xs font-bold text-gray-400 ml-1 uppercase tracking-widest",children:"Admin Email"}),w.jsx("input",{required:!0,type:"email",className:"w-full h-12 bg-white/5 border border-white/10 rounded-xl px-4 text-white focus:border-primary transition-all outline-none",placeholder:"admin@nafsessence.com",value:n,onChange:E=>e(E.target.value)})]}),w.jsxs("div",{className:"space-y-1",children:[w.jsx("label",{className:"text-xs font-bold text-gray-400 ml-1 uppercase tracking-widest",children:"Password"}),w.jsx("input",{required:!0,type:"password",className:"w-full h-12 bg-white/5 border border-white/10 rounded-xl px-4 text-white focus:border-primary transition-all outline-none",placeholder:"",value:t,onChange:E=>i(E.target.value)})]}),w.jsx("button",{type:"submit",disabled:u,className:"w-full h-12 rounded-xl text-black font-bold text-sm tracking-wide transition-all active:scale-95 disabled:opacity-50 shadow-[0_0_20px_rgba(244,192,37,0.1)]",style:{backgroundColor:h.primaryColor},children:u?"Authenticating...":"Sign In"})]}),w.jsx("p",{className:"text-center text-gray-600 text-[10px] mt-8",children:" 2024 System Protected by Firebase Auth"})]})]})},Ny=({children:n})=>{var f;const{settings:e,auth:t}=Zn(),i=Xn(),s=Bu(),a=[{label:"Dashboard",icon:"dashboard",path:"/admin"},{label:"Orders",icon:"shopping_bag",path:"/admin/orders"},{label:"Inventory",icon:"inventory_2",path:"/admin/inventory"},{label:"Customizer",icon:"palette",path:"/admin/customizer"}],u=async()=>{try{await LU(yy),s("/admin/login")}catch(h){console.error("Error signing out:",h)}};return w.jsxs("div",{className:"flex h-screen bg-[#121212] text-white font-display overflow-hidden",children:[w.jsxs("aside",{className:"w-64 border-r border-white/5 flex flex-col shrink-0 bg-[#0d0d0d]",children:[w.jsxs("div",{className:"p-8",children:[w.jsx(rn,{to:"/",className:"text-primary text-xl font-bold tracking-tight block mb-1",style:{color:e.primaryColor},children:e.websiteName}),w.jsx("p",{className:"text-gray-500 text-[10px] font-bold uppercase tracking-[0.2em]",children:"Administration"})]}),w.jsx("nav",{className:"flex-1 px-4 space-y-1",children:a.map(h=>{const p=i.pathname===h.path;return w.jsxs(rn,{to:h.path,className:`flex items-center gap-3 px-4 py-3 rounded-xl transition-all group ${p?"bg-white/5 text-white":"text-gray-500 hover:text-gray-300 hover:bg-white/[0.02]"}`,children:[w.jsx("span",{className:`material-symbols-outlined text-[20px] ${p?"filled":""}`,style:p?{color:e.primaryColor,fontVariationSettings:"'FILL' 1"}:{},children:h.icon}),w.jsx("span",{className:"text-sm font-bold",children:h.label})]},h.path)})}),w.jsx("div",{className:"p-4 border-t border-white/5",children:w.jsxs("button",{onClick:u,className:"flex items-center gap-3 w-full px-4 py-3 text-red-400 hover:bg-red-500/10 rounded-xl transition-colors group",children:[w.jsx("span",{className:"material-symbols-outlined text-[20px] group-hover:rotate-180 transition-transform duration-500",children:"logout"}),w.jsx("span",{className:"text-sm font-bold",children:"Logout"})]})})]}),w.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden bg-[#0a0a0a]",children:[w.jsxs("header",{className:"h-16 border-b border-white/5 bg-[#0d0d0d]/50 backdrop-blur-md flex items-center justify-between px-8 z-10",children:[w.jsxs("div",{className:"text-sm text-gray-500 flex items-center gap-2",children:["Admin ",w.jsx("span",{className:"opacity-30",children:"/"})," ",w.jsx("span",{className:"text-white font-medium capitalize",children:i.pathname.split("/").pop()||"Overview"})]}),w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsxs("div",{className:"text-right hidden sm:block",children:[w.jsx("p",{className:"text-[10px] font-black uppercase tracking-tighter text-gray-500",children:"System Admin"}),w.jsx("p",{className:"text-xs text-gray-300",children:t.username})]}),w.jsx("div",{className:"size-10 rounded-xl flex items-center justify-center text-black font-black text-sm shadow-lg",style:{backgroundColor:e.primaryColor},children:((f=t.username)==null?void 0:f.charAt(0).toUpperCase())||"A"})]})]}),w.jsx("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:w.jsx("div",{className:"max-w-7xl mx-auto",children:n})})]})]})},v5=()=>{const{orders:n,products:e,settings:t}=Zn(),i=[{label:"Total Revenue",value:`${n.reduce((s,a)=>s+a.total,0)}`,icon:"payments",color:"text-green-500"},{label:"Pending Orders",value:n.filter(s=>s.status==="Pending").length,icon:"pending_actions",color:"text-yellow-500"},{label:"Total Products",value:e.length,icon:"inventory_2",color:"text-blue-500"}];return w.jsx(Ny,{children:w.jsxs("div",{className:"space-y-8",children:[w.jsxs("div",{children:[w.jsx("h1",{className:"text-4xl font-bold tracking-tight",children:"Overview"}),w.jsx("p",{className:"text-gray-500",children:"Welcome back! Here's what's happening today."})]}),w.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:i.map(s=>w.jsxs("div",{className:"p-8 rounded-2xl bg-[#1a1a1a] border border-white/5 flex items-center justify-between group hover:border-white/10 transition-all",children:[w.jsxs("div",{className:"space-y-1",children:[w.jsx("p",{className:"text-sm font-medium text-gray-500",children:s.label}),w.jsx("p",{className:"text-4xl font-black",children:s.value})]}),w.jsx("div",{className:`size-12 rounded-xl bg-white/5 flex items-center justify-center ${s.color}`,children:w.jsx("span",{className:"material-symbols-outlined",children:s.icon})})]},s.label))}),w.jsxs("div",{className:"bg-[#1a1a1a] rounded-2xl border border-white/5 overflow-hidden",children:[w.jsxs("div",{className:"p-6 border-b border-white/5 flex justify-between items-center",children:[w.jsx("h3",{className:"text-xl font-bold",children:"Recent Form Submissions"}),w.jsx("span",{className:"text-xs text-primary font-bold uppercase tracking-widest",style:{color:t.primaryColor},children:"Live Update"})]}),w.jsx("div",{className:"overflow-x-auto",children:w.jsxs("table",{className:"w-full text-left text-sm",children:[w.jsx("thead",{className:"bg-white/[0.02] text-gray-500 font-bold uppercase text-[10px]",children:w.jsxs("tr",{children:[w.jsx("th",{className:"p-4",children:"Order ID"}),w.jsx("th",{className:"p-4",children:"Customer"}),w.jsx("th",{className:"p-4",children:"Status"}),w.jsx("th",{className:"p-4",children:"Total"}),w.jsx("th",{className:"p-4",children:"Date"})]})}),w.jsxs("tbody",{className:"divide-y divide-white/5",children:[n.slice(0,5).map(s=>w.jsxs("tr",{className:"hover:bg-white/[0.01] transition-colors",children:[w.jsx("td",{className:"p-4 font-mono font-bold text-primary",style:{color:t.primaryColor},children:s.id}),w.jsx("td",{className:"p-4",children:w.jsxs("div",{className:"flex flex-col",children:[w.jsx("span",{className:"font-bold",children:s.customerName}),w.jsx("span",{className:"text-[10px] text-gray-500",children:s.mobile})]})}),w.jsx("td",{className:"p-4",children:w.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-bold border ${s.status==="Pending"?"bg-yellow-500/10 border-yellow-500/30 text-yellow-500":s.status==="Delivered"?"bg-green-500/10 border-green-500/30 text-green-500":"bg-blue-500/10 border-blue-500/30 text-blue-500"}`,children:s.status})}),w.jsxs("td",{className:"p-4 font-bold",children:["",s.total]}),w.jsx("td",{className:"p-4 text-gray-500",children:s.date})]},s.id)),n.length===0&&w.jsx("tr",{children:w.jsx("td",{colSpan:5,className:"p-12 text-center text-gray-600",children:"No orders received yet."})})]})]})})]})]})})},E5=()=>{const{orders:n,settings:e}=Zn(),t=async(s,a)=>{try{const u=Ba(mi,"orders",s);await ay(u,{status:a})}catch(u){console.error("Error updating status:",u),alert("Failed to update order status.")}},i=async s=>{if(window.confirm("Are you sure you want to delete this order record?"))try{await VI(Ba(mi,"orders",s))}catch{alert("Error deleting order.")}};return w.jsx(Ny,{children:w.jsxs("div",{className:"space-y-8",children:[w.jsxs("header",{className:"flex justify-between items-end",children:[w.jsxs("div",{children:[w.jsx("h1",{className:"text-4xl font-bold tracking-tight",children:"Order Management"}),w.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Manage customer requests and fulfillment status."})]}),w.jsxs("div",{className:"bg-white/5 px-4 py-2 rounded-lg border border-white/10",children:[w.jsx("span",{className:"text-xs text-gray-500 uppercase font-bold tracking-widest",children:"Active Orders: "}),w.jsx("span",{className:"text-xl font-black",style:{color:e.primaryColor},children:n.length})]})]}),w.jsx("div",{className:"bg-[#1a1a1a] rounded-2xl border border-white/5 overflow-hidden",children:w.jsxs("table",{className:"w-full text-left text-sm",children:[w.jsx("thead",{className:"bg-white/[0.02] text-gray-500 font-bold uppercase text-[10px] tracking-wider",children:w.jsxs("tr",{children:[w.jsx("th",{className:"p-5",children:"Customer"}),w.jsx("th",{className:"p-5",children:"Product Details"}),w.jsx("th",{className:"p-5",children:"Shipping Address"}),w.jsx("th",{className:"p-5",children:"Status"}),w.jsx("th",{className:"p-5",children:"Total"}),w.jsx("th",{className:"p-5",children:"Actions"})]})}),w.jsxs("tbody",{className:"divide-y divide-white/5",children:[n.map(s=>w.jsxs("tr",{className:"hover:bg-white/[0.01] transition-colors",children:[w.jsx("td",{className:"p-5",children:w.jsxs("div",{className:"flex flex-col",children:[w.jsx("span",{className:"font-bold text-white",children:s.customerName}),w.jsx("span",{className:"text-xs text-gray-500",children:s.mobile}),w.jsx("span",{className:"text-[10px] text-gray-600",children:s.date})]})}),w.jsx("td",{className:"p-5",children:s.items.map((a,u)=>w.jsxs("div",{className:"text-xs text-gray-300",children:[w.jsxs("span",{className:"font-bold",style:{color:e.primaryColor},children:[a.quantity,"x"]})," ",a.productName," (",a.size,")"]},u))}),w.jsx("td",{className:"p-5",children:w.jsx("p",{className:"text-xs text-gray-500 max-w-[200px] leading-relaxed",children:s.address})}),w.jsx("td",{className:"p-5",children:w.jsxs("select",{className:"bg-[#121212] border border-white/10 rounded-lg text-xs px-3 py-2 outline-none focus:border-primary cursor-pointer",value:s.status,style:{color:s.status==="Delivered"?"#10b981":"#f4c025"},onChange:a=>t(s.id,a.target.value),children:[w.jsx("option",{value:"Pending",children:"Pending"}),w.jsx("option",{value:"Processing",children:"Processing"}),w.jsx("option",{value:"Shipped",children:"Shipped"}),w.jsx("option",{value:"Delivered",children:"Delivered"}),w.jsx("option",{value:"Cancelled",children:"Cancelled"})]})}),w.jsxs("td",{className:"p-5 font-black text-lg",children:["",s.total]}),w.jsx("td",{className:"p-5",children:w.jsx("button",{onClick:()=>i(s.id),className:"text-gray-600 hover:text-red-500 transition-colors",children:w.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})})})]},s.id)),n.length===0&&w.jsx("tr",{children:w.jsxs("td",{colSpan:6,className:"p-20 text-center text-gray-600",children:[w.jsx("span",{className:"material-symbols-outlined text-4xl mb-4 block opacity-20",children:"order_approve"}),"No orders have been placed yet."]})})]})]})})]})})},T5=()=>{const{products:n,settings:e}=Zn(),[t,i]=W.useState(null),[s,a]=W.useState(!1),u={name:"",price:"",category:"Oud",image:"",description:""},[f,h]=W.useState(u),p=async I=>{I.preventDefault();try{const x={...f,price:Number(f.price),lastUpdated:new Date().toISOString()};t?await ay(Ba(mi,"products",t),x):await UI(ba(mi,"products"),{...x,dateAdded:new Date().toISOString()}),E()}catch(x){console.error("Error saving product: ",x),alert("Failed to save product.")}},_=I=>{h({name:I.name,price:I.price.toString(),category:I.category,image:I.image,description:I.description||""}),i(I.id)},E=()=>{a(!1),i(null),h(u)},T=async I=>{window.confirm("Are you sure? This cannot be undone.")&&await VI(Ba(mi,"products",I))};return w.jsxs("div",{className:"p-8 min-h-screen bg-[#0a0a0a] text-white",children:[" ",w.jsxs("div",{className:"flex justify-between items-center mb-12",children:[w.jsxs("div",{children:[w.jsx("h1",{className:"text-4xl font-black tracking-tight",children:"Vault Inventory"}),w.jsx("p",{className:"text-gray-500 mt-2",children:"Manage your collection of fine essences."})]}),w.jsx("button",{onClick:()=>a(!0),className:"px-8 py-3 rounded-full font-bold text-black transition-transform hover:scale-105",style:{backgroundColor:e.primaryColor},children:"+ Add New Product"})]}),(s||t)&&w.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:w.jsxs("form",{onSubmit:p,className:"bg-[#141414] p-8 rounded-3xl max-w-lg w-full border border-white/10 shadow-2xl",children:[w.jsx("h2",{className:"text-2xl font-bold mb-8",children:t?"Update Essence":"New Essence"}),w.jsxs("div",{className:"space-y-4",children:[w.jsx("input",{placeholder:"Product Name",className:"w-full bg-white/5 border border-white/10 p-4 rounded-xl focus:outline-none focus:border-white/30",value:f.name,onChange:I=>h({...f,name:I.target.value}),required:!0}),w.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[w.jsx("input",{type:"number",placeholder:"Price ()",className:"w-full bg-white/5 border border-white/10 p-4 rounded-xl focus:outline-none",value:f.price,onChange:I=>h({...f,price:I.target.value}),required:!0}),w.jsxs("select",{className:"w-full bg-white/5 border border-white/10 p-4 rounded-xl text-gray-400 focus:outline-none",value:f.category,onChange:I=>h({...f,category:I.target.value}),children:[w.jsx("option",{value:"Oud",children:"Oud"}),w.jsx("option",{value:"Attar",children:"Attar"}),w.jsx("option",{value:"Musk",children:"Musk"}),w.jsx("option",{value:"Signature",children:"Signature Collection"})]})]}),w.jsx("input",{placeholder:"Image Link (URL)",className:"w-full bg-white/5 border border-white/10 p-4 rounded-xl focus:outline-none",value:f.image,onChange:I=>h({...f,image:I.target.value}),required:!0}),w.jsx("textarea",{placeholder:"Fragrance Notes & Description...",className:"w-full bg-white/5 border border-white/10 p-4 rounded-xl h-32 focus:outline-none",value:f.description,onChange:I=>h({...f,description:I.target.value})})]}),w.jsxs("div",{className:"flex gap-4 mt-8",children:[w.jsx("button",{type:"submit",className:"flex-1 py-4 rounded-xl font-bold text-black",style:{backgroundColor:e.primaryColor},children:t?"Save Changes":"Publish Product"}),w.jsx("button",{type:"button",onClick:E,className:"flex-1 py-4 rounded-xl font-bold bg-white/5 hover:bg-white/10 transition-colors",children:"Cancel"})]})]})}),w.jsx("div",{className:"bg-[#141414] rounded-3xl border border-white/5 overflow-hidden shadow-xl",children:w.jsxs("table",{className:"w-full text-left",children:[w.jsx("thead",{className:"bg-white/[0.02] border-b border-white/5 text-gray-500 uppercase text-xs tracking-widest",children:w.jsxs("tr",{children:[w.jsx("th",{className:"p-6",children:"Product Details"}),w.jsx("th",{className:"p-6",children:"Category"}),w.jsx("th",{className:"p-6",children:"Price"}),w.jsx("th",{className:"p-6 text-right",children:"Management"})]})}),w.jsx("tbody",{className:"divide-y divide-white/5",children:n.map(I=>w.jsxs("tr",{className:"hover:bg-white/[0.01] transition-colors",children:[w.jsxs("td",{className:"p-6 flex items-center gap-5",children:[w.jsx("div",{className:"w-16 h-16 rounded-2xl overflow-hidden bg-black border border-white/10",children:w.jsx("img",{src:I.image,className:"w-full h-full object-cover",alt:""})}),w.jsxs("div",{children:[w.jsx("p",{className:"font-bold text-lg",children:I.name}),w.jsxs("p",{className:"text-xs text-gray-500",children:["ID: ",I.id.substring(0,8)]})]})]}),w.jsx("td",{className:"p-6",children:w.jsx("span",{className:"px-4 py-1.5 bg-white/5 border border-white/10 rounded-full text-xs font-medium",children:I.category})}),w.jsxs("td",{className:"p-6 font-mono text-lg",style:{color:e.primaryColor},children:["",I.price]}),w.jsx("td",{className:"p-6 text-right",children:w.jsxs("div",{className:"flex justify-end gap-3",children:[w.jsx("button",{onClick:()=>_(I),className:"p-3 bg-white/5 rounded-xl hover:bg-white/10 transition-colors text-gray-300",children:w.jsx("span",{className:"material-symbols-outlined text-sm",children:"edit"})}),w.jsx("button",{onClick:()=>T(I.id),className:"p-3 bg-red-500/10 rounded-xl hover:bg-red-500/20 transition-colors text-red-500",children:w.jsx("span",{className:"material-symbols-outlined text-sm",children:"delete"})})]})})]},I.id))})]})})]})},S5=()=>{const{settings:n,setSettings:e}=Zn(),[t,i]=W.useState(null),[s,a]=W.useState(!1),u=(h,p)=>{e({...n,[h]:p})},f=async()=>{a(!0);try{const h=await PV(ba(mi,"settings"));if(h.empty){alert("Settings document not found in Firestore. Please create it first.");return}const p=h.docs[0].id,_=Ba(mi,"settings",p);await ay(_,n),i("Site updated successfully!"),setTimeout(()=>i(null),3e3)}catch(h){console.error("Error updating settings:",h),alert("Failed to save settings to the cloud.")}finally{a(!1)}};return w.jsx(Ny,{children:w.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[w.jsxs("div",{className:"space-y-12 pb-20",children:[w.jsxs("div",{className:"flex justify-between items-start",children:[w.jsxs("div",{children:[w.jsx("h1",{className:"text-4xl font-bold tracking-tight",children:"Site Customizer"}),w.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Modify global styles and brand identity."})]}),w.jsx("button",{onClick:f,disabled:s,className:"px-8 py-3 rounded-xl text-black font-bold shadow-lg transition-transform active:scale-95 disabled:opacity-50",style:{backgroundColor:n.primaryColor},children:s?"Saving...":"Publish Changes"})]}),t&&w.jsx("div",{className:"p-4 bg-green-500/10 border border-green-500/20 text-green-500 rounded-xl text-center font-bold animate-fade-in",children:t}),w.jsxs("section",{className:"space-y-6",children:[w.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[w.jsx("span",{className:"material-symbols-outlined text-primary",style:{color:n.primaryColor},children:"branding_watermark"}),"Identity & Brand"]}),w.jsx("div",{className:"grid grid-cols-1 gap-4 bg-white/5 p-6 rounded-2xl border border-white/10",children:w.jsxs("div",{className:"flex flex-col gap-2",children:[w.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Website Name"}),w.jsx("input",{className:"bg-white/5 border border-white/10 rounded-lg p-4 outline-none focus:border-primary",value:n.websiteName,onChange:h=>u("websiteName",h.target.value)})]})})]}),w.jsxs("section",{className:"space-y-6",children:[w.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[w.jsx("span",{className:"material-symbols-outlined text-primary",style:{color:n.primaryColor},children:"palette"}),"Visual Style"]}),w.jsxs("div",{className:"grid grid-cols-2 gap-4 bg-white/5 p-6 rounded-2xl border border-white/10",children:[w.jsxs("div",{className:"flex flex-col gap-2",children:[w.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Primary Color"}),w.jsxs("div",{className:"flex gap-2",children:[w.jsx("input",{type:"color",className:"h-12 w-12 rounded bg-transparent border-none cursor-pointer",value:n.primaryColor,onChange:h=>u("primaryColor",h.target.value)}),w.jsx("input",{className:"flex-1 bg-white/5 border border-white/10 rounded-lg px-4 text-sm",value:n.primaryColor,onChange:h=>u("primaryColor",h.target.value)})]})]}),w.jsxs("div",{className:"flex flex-col gap-2",children:[w.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Dark Mode"}),w.jsx("button",{onClick:()=>u("isDarkMode",!n.isDarkMode),className:`h-12 rounded-lg font-bold transition-colors ${n.isDarkMode?"bg-primary text-black":"bg-white/10 text-white"}`,style:n.isDarkMode?{backgroundColor:n.primaryColor}:{},children:n.isDarkMode?"Enabled":"Disabled"})]})]})]}),w.jsxs("section",{className:"space-y-6",children:[w.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[w.jsx("span",{className:"material-symbols-outlined text-primary",style:{color:n.primaryColor},children:"edit_note"}),"Homepage Content"]}),w.jsxs("div",{className:"space-y-4 bg-white/5 p-6 rounded-2xl border border-white/10",children:[w.jsxs("div",{className:"flex flex-col gap-2",children:[w.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Hero Title"}),w.jsx("input",{className:"bg-white/5 border border-white/10 rounded-lg p-4 outline-none focus:border-primary",value:n.heroTitle,onChange:h=>u("heroTitle",h.target.value)})]}),w.jsxs("div",{className:"flex flex-col gap-2",children:[w.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase",children:"Hero Subtitle"}),w.jsx("textarea",{className:"h-24 bg-white/5 border border-white/10 rounded-lg p-4 outline-none focus:border-primary resize-none",value:n.heroSubtitle,onChange:h=>u("heroSubtitle",h.target.value)})]})]})]})]}),w.jsx("div",{className:"hidden lg:block",children:w.jsxs("div",{className:"sticky top-12 space-y-4",children:[w.jsx("p",{className:"text-center text-xs font-bold text-gray-500 uppercase tracking-widest",children:"Live Preview"}),w.jsxs("div",{className:"p-1 bg-[#1a1a1a] rounded-[2.5rem] border border-white/10 shadow-2xl overflow-hidden aspect-[9/19] max-h-[80vh] mx-auto w-72 relative",children:[w.jsx("div",{className:"absolute top-0 left-0 right-0 h-6 bg-[#1a1a1a] z-20 flex items-center justify-center",children:w.jsx("div",{className:"w-16 h-4 bg-black rounded-full"})}),w.jsx("div",{className:"h-full w-full rounded-[2rem] bg-black overflow-hidden relative border border-white/5",children:w.jsx("iframe",{src:`${window.location.origin}${window.location.pathname}#/`,className:"w-[300%] h-[300%] origin-top-left scale-[0.3333] border-none",title:"Storefront Preview"},JSON.stringify(n))})]})]})})]})})},A5=({children:n})=>{const{auth:e,settings:t}=Zn(),i=Xn();return e.isAuthenticated===null?w.jsxs("div",{className:"h-screen bg-[#0a0a0a] flex flex-col items-center justify-center gap-4",children:[w.jsx("div",{className:"size-12 border-4 border-t-transparent animate-spin rounded-full",style:{borderColor:`${t.primaryColor} transparent transparent transparent`}}),w.jsx("p",{className:"text-gray-500 font-bold text-xs uppercase tracking-widest",children:"Verifying Credentials..."})]}):e.isAuthenticated?w.jsx(w.Fragment,{children:n}):w.jsx(YN,{to:"/admin/login",state:{from:i},replace:!0})},lR=W.createContext(null),Zn=()=>{const n=W.useContext(lR);if(!n)throw new Error("useApp must be used within AppProvider");return n},C5=()=>{const[n,e]=W.useState({websiteName:"Nafs Essence",primaryColor:"#f4c025",secondaryColor:"#231e10",fontFamily:"Manrope",isDarkMode:!0,heroTitle:"Scent of the Soul",heroSubtitle:"Luxury Perfume Oils for the Distinguished.",footerText:"Crafting memories through the finest essences."}),[t,i]=W.useState([]),[s,a]=W.useState([]),[u,f]=W.useState({isAuthenticated:null,username:null});return W.useEffect(()=>{const h=UU(yy,I=>{f({isAuthenticated:!!I,username:(I==null?void 0:I.email)||null})}),p=_m(ba(mi,"products"),I=>{const x=I.docs.map(U=>({id:U.id,...U.data()}));i(x)}),_=NV(ba(mi,"orders"),xV("date","desc")),E=_m(_,I=>{const x=I.docs.map(U=>({id:U.id,...U.data()}));a(x)}),T=_m(ba(mi,"settings"),I=>{I.empty||e(I.docs[0].data())});return()=>{h(),p(),E(),T()}},[]),W.useEffect(()=>{document.title=n.websiteName,document.body.style.fontFamily=n.fontFamily+", sans-serif",n.isDarkMode?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[n]),w.jsx(lR.Provider,{value:{settings:n,setSettings:e,products:t,orders:s,auth:u},children:w.jsxs(_x,{children:[w.jsx(I5,{}),w.jsxs(fT,{children:[w.jsx(Gi,{path:"/",element:w.jsx(m5,{})}),w.jsx(Gi,{path:"/shop",element:w.jsx(g5,{})}),w.jsx(Gi,{path:"/checkout",element:w.jsx(y5,{})}),w.jsx(Gi,{path:"/admin/login",element:w.jsx(_5,{})}),w.jsx(Gi,{path:"/admin/*",element:w.jsx(A5,{children:w.jsxs(fT,{children:[w.jsx(Gi,{path:"/",element:w.jsx(v5,{})}),w.jsx(Gi,{path:"/orders",element:w.jsx(E5,{})}),w.jsx(Gi,{path:"/inventory",element:w.jsx(T5,{})}),w.jsx(Gi,{path:"/customizer",element:w.jsx(S5,{})})]})})})]})]})})},I5=()=>{const{pathname:n}=Xn();return W.useEffect(()=>{window.scrollTo(0,0)},[n]),null},uR=document.getElementById("root");if(!uR)throw new Error("Could not find root element to mount to");const w5=Xb.createRoot(uR);w5.render(w.jsx(Gb.StrictMode,{children:w.jsx(C5,{})}));
